{"version":3,"file":"vs/workbench/test/node/api/extHostApiCommands.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/workbench/test/node/api/extHostApiCommands.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport * as assert from 'assert';\nimport {setUnexpectedErrorHandler, errorHandler} from 'vs/base/common/errors';\nimport URI from 'vs/base/common/uri';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport * as types from 'vs/workbench/api/node/extHostTypes';\nimport * as EditorCommon from 'vs/editor/common/editorCommon';\nimport {Model as EditorModel} from 'vs/editor/common/model/model';\nimport {TestThreadService} from './testThreadService';\nimport {createInstantiationService as createInstantiationService} from 'vs/platform/instantiation/common/instantiationService';\nimport {MainProcessMarkerService} from 'vs/platform/markers/common/markerService';\nimport {IMarkerService} from 'vs/platform/markers/common/markers';\nimport {IThreadService} from 'vs/platform/thread/common/thread';\nimport {IKeybindingService} from 'vs/platform/keybinding/common/keybindingService';\nimport {KeybindingsRegistry} from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport {IModelService} from 'vs/editor/common/services/modelService';\nimport {ExtHostLanguageFeatures, MainThreadLanguageFeatures} from 'vs/workbench/api/node/extHostLanguageFeatures';\nimport {registerApiCommands} from 'vs/workbench/api/node/extHostApiCommands';\nimport {ExtHostCommands, MainThreadCommands} from 'vs/workbench/api/node/extHostCommands';\nimport {ExtHostModelService} from 'vs/workbench/api/node/extHostDocuments';\n\nconst defaultSelector = { scheme: 'far' };\nconst model: EditorCommon.IModel = new EditorModel(\n\t[\n\t\t'This is the first line',\n\t\t'This is the second line',\n\t\t'This is the third line',\n\t].join('\\n'),\n\tEditorModel.DEFAULT_CREATION_OPTIONS,\n\tundefined,\n\tURI.parse('far://testing/file.b'));\n\nlet threadService: TestThreadService;\nlet extHost: ExtHostLanguageFeatures;\nlet mainThread: MainThreadLanguageFeatures;\nlet commands: ExtHostCommands;\nlet disposables: vscode.Disposable[] = [];\nlet originalErrorHandler: (e: any) => any;\n\nsuite('ExtHostLanguageFeatureCommands', function() {\n\n\tsuiteSetup((done) => {\n\n\t\toriginalErrorHandler = errorHandler.getUnexpectedErrorHandler();\n\t\tsetUnexpectedErrorHandler(() => { });\n\n\t\tlet instantiationService = createInstantiationService();\n\t\tthreadService = new TestThreadService(instantiationService);\n\n\t\tinstantiationService.addSingleton(IKeybindingService, <IKeybindingService>{\n\t\t\texecuteCommand(id, args): any {\n\t\t\t\tlet handler = KeybindingsRegistry.getCommands()[id];\n\t\t\t\treturn TPromise.as(instantiationService.invokeFunction(handler, args));\n\t\t\t}\n\t\t});\n\t\tinstantiationService.addSingleton(IMarkerService, new MainProcessMarkerService(threadService));\n\t\tinstantiationService.addSingleton(IThreadService, threadService);\n\t\tinstantiationService.addSingleton(IModelService, <IModelService>{\n\t\t\tserviceId: IModelService,\n\t\t\tgetModel(): any { return model; },\n\t\t\tcreateModel(): any { throw new Error(); },\n\t\t\tdestroyModel(): any { throw new Error(); },\n\t\t\tgetModels(): any { throw new Error(); },\n\t\t\tonModelAdded: undefined,\n\t\t\tonModelModeChanged: undefined,\n\t\t\tonModelRemoved: undefined,\n\t\t\tgetCreationOptions(): any { throw new Error(); }\n\t\t});\n\n\t\tthreadService.getRemotable(ExtHostModelService)._acceptModelAdd({\n\t\t\tisDirty: false,\n\t\t\tversionId: model.getVersionId(),\n\t\t\tmodeId: model.getModeId(),\n\t\t\turl: model.getAssociatedResource(),\n\t\t\tvalue: {\n\t\t\t\tEOL: model.getEOL(),\n\t\t\t\tlines: model.getValue().split(model.getEOL()),\n\t\t\t\tBOM: '',\n\t\t\t\tlength: -1,\n\t\t\t\toptions: {\n\t\t\t\t\ttabSize: 4,\n\t\t\t\t\tinsertSpaces: true,\n\t\t\t\t\tdefaultEOL: EditorCommon.DefaultEndOfLine.LF\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tthreadService.getRemotable(MainThreadCommands);\n\t\tcommands = threadService.getRemotable(ExtHostCommands);\n\t\tregisterApiCommands(threadService);\n\t\tmainThread = threadService.getRemotable(MainThreadLanguageFeatures);\n\t\textHost = threadService.getRemotable(ExtHostLanguageFeatures);\n\n\t\tthreadService.sync().then(done, done);\n\t});\n\n\tsuiteTeardown(() => {\n\t\tsetUnexpectedErrorHandler(originalErrorHandler);\n\t\tmodel.dispose();\n\t});\n\n\tteardown(function(done) {\n\t\twhile (disposables.length) {\n\t\t\tdisposables.pop().dispose();\n\t\t}\n\t\tthreadService.sync()\n\t\t\t.then(() => done(), err => done(err));\n\t});\n\n\t// --- workspace symbols\n\n\ttest('WorkspaceSymbols, invalid arguments', function(done) {\n\t\tlet promises = [\n\t\t\tcommands.executeCommand('vscode.executeWorkspaceSymbolProvider'),\n\t\t\tcommands.executeCommand('vscode.executeWorkspaceSymbolProvider', null),\n\t\t\tcommands.executeCommand('vscode.executeWorkspaceSymbolProvider', undefined),\n\t\t\tcommands.executeCommand('vscode.executeWorkspaceSymbolProvider', true)\n\t\t];\n\n\t\t// threadService.sync().then(() => {\n\t\tTPromise.join(<any[]>promises).then(undefined, (err: any[]) => {\n\t\t\tassert.equal(err.length, 4);\n\t\t\tdone();\n\t\t\treturn [];\n\t\t});\n\t\t// });\n\t});\n\n\ttest('WorkspaceSymbols, back and forth', function(done) {\n\n\t\tdisposables.push(extHost.registerWorkspaceSymbolProvider(<vscode.WorkspaceSymbolProvider>{\n\t\t\tprovideWorkspaceSymbols(query): any {\n\t\t\t\treturn [\n\t\t\t\t\tnew types.SymbolInformation(query, types.SymbolKind.Array, new types.Range(0, 0, 1, 1), URI.parse('far://testing/first')),\n\t\t\t\t\tnew types.SymbolInformation(query, types.SymbolKind.Array, new types.Range(0, 0, 1, 1), URI.parse('far://testing/second'))\n\t\t\t\t];\n\t\t\t}\n\t\t}));\n\n\t\tdisposables.push(extHost.registerWorkspaceSymbolProvider(<vscode.WorkspaceSymbolProvider>{\n\t\t\tprovideWorkspaceSymbols(query): any {\n\t\t\t\treturn [\n\t\t\t\t\tnew types.SymbolInformation(query, types.SymbolKind.Array, new types.Range(0, 0, 1, 1), URI.parse('far://testing/first'))\n\t\t\t\t];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tcommands.executeCommand<vscode.SymbolInformation[]>('vscode.executeWorkspaceSymbolProvider', 'testing').then(value => {\n\n\t\t\t\tfor (let info of value) {\n\t\t\t\t\tassert.ok(info instanceof types.SymbolInformation);\n\t\t\t\t\tassert.equal(info.name, 'testing');\n\t\t\t\t\tassert.equal(info.kind, types.SymbolKind.Array);\n\t\t\t\t}\n\t\t\t\tassert.equal(value.length, 3);\n\t\t\t\tdone();\n\t\t\t}, done);\n\t\t}, done);\n\t});\n\n\n\t// --- definition\n\n\ttest('Definition, invalid arguments', function(done) {\n\t\tlet promises = [\n\t\t\tcommands.executeCommand('vscode.executeDefinitionProvider'),\n\t\t\tcommands.executeCommand('vscode.executeDefinitionProvider', null),\n\t\t\tcommands.executeCommand('vscode.executeDefinitionProvider', undefined),\n\t\t\tcommands.executeCommand('vscode.executeDefinitionProvider', true, false)\n\t\t];\n\n\t\t// threadService.sync().then(() => {\n\t\tTPromise.join(<any[]>promises).then(undefined, (err: any[]) => {\n\t\t\tassert.equal(err.length, 4);\n\t\t\tdone();\n\t\t\treturn [];\n\t\t});\n\t\t// });\n\t});\n\n\ttest('Definition, back and forth', function(done) {\n\n\t\tdisposables.push(extHost.registerDefinitionProvider(defaultSelector, <vscode.DefinitionProvider>{\n\t\t\tprovideDefinition(doc: any): any {\n\t\t\t\treturn new types.Location(doc.uri, new types.Range(0, 0, 0, 0));\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerDefinitionProvider(defaultSelector, <vscode.DefinitionProvider>{\n\t\t\tprovideDefinition(doc: any): any {\n\t\t\t\treturn [\n\t\t\t\t\tnew types.Location(doc.uri, new types.Range(0, 0, 0, 0)),\n\t\t\t\t\tnew types.Location(doc.uri, new types.Range(0, 0, 0, 0)),\n\t\t\t\t\tnew types.Location(doc.uri, new types.Range(0, 0, 0, 0)),\n\t\t\t\t];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tcommands.executeCommand<vscode.Location[]>('vscode.executeDefinitionProvider', model.getAssociatedResource(), new types.Position(0, 0)).then(values => {\n\t\t\t\tassert.equal(values.length, 4);\n\t\t\t\tdone();\n\t\t\t}, done);\n\t\t}, done);\n\t});\n\n\t// --- outline\n\n\ttest('Outline, back and forth', function(done) {\n\t\tdisposables.push(extHost.registerDocumentSymbolProvider(defaultSelector, <vscode.DocumentSymbolProvider>{\n\t\t\tprovideDocumentSymbols(): any {\n\t\t\t\treturn [\n\t\t\t\t\tnew types.SymbolInformation('testing1', types.SymbolKind.Enum, new types.Range(1, 0, 1, 0)),\n\t\t\t\t\tnew types.SymbolInformation('testing2', types.SymbolKind.Enum, new types.Range(0, 1, 0, 3)),\n\t\t\t\t];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tcommands.executeCommand<vscode.SymbolInformation[]>('vscode.executeDocumentSymbolProvider', model.getAssociatedResource()).then(values => {\n\t\t\t\tassert.equal(values.length, 2);\n\t\t\t\tlet [first, second] = values;\n\t\t\t\tassert.equal(first.name, 'testing2');\n\t\t\t\tassert.equal(second.name, 'testing1');\n\t\t\t\tdone();\n\t\t\t}, done);\n\t\t}, done);\n\t});\n\n\t// --- suggest\n\n\ttest('Suggest, back and forth', function(done) {\n\t\tdisposables.push(extHost.registerCompletionItemProvider(defaultSelector, <vscode.CompletionItemProvider>{\n\t\t\tprovideCompletionItems(doc, pos): any {\n\t\t\t\tlet a = new types.CompletionItem('item1');\n\t\t\t\tlet b = new types.CompletionItem('item2');\n\t\t\t\tb.textEdit = types.TextEdit.replace(new types.Range(0, 4, 0, 8), 'foo'); // overwite after\n\t\t\t\tlet c = new types.CompletionItem('item3');\n\t\t\t\tc.textEdit = types.TextEdit.replace(new types.Range(0, 1, 0, 6), 'foobar'); // overwite before & after\n\t\t\t\tlet d = new types.CompletionItem('item4');\n\t\t\t\td.textEdit = types.TextEdit.replace(new types.Range(0, 1, 0, 4), ''); // overwite before\n\t\t\t\treturn [a, b, c, d];\n\t\t\t}\n\t\t}, []));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tcommands.executeCommand<vscode.CompletionList>('vscode.executeCompletionItemProvider', model.getAssociatedResource(), new types.Position(0, 4)).then(list => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.ok(list instanceof types.CompletionList);\n\t\t\t\t\tlet values = list.items;\n\t\t\t\t\tassert.ok(Array.isArray(values));\n\t\t\t\t\tassert.equal(values.length, 4);\n\t\t\t\t\tlet [first, second, third, forth] = values;\n\t\t\t\t\tassert.equal(first.label, 'item1');\n\t\t\t\t\tassert.equal(first.textEdit.newText, 'item1');\n\t\t\t\t\tassert.equal(first.textEdit.range.start.line, 0);\n\t\t\t\t\tassert.equal(first.textEdit.range.start.character, 0);\n\t\t\t\t\tassert.equal(first.textEdit.range.end.line, 0);\n\t\t\t\t\tassert.equal(first.textEdit.range.end.character, 4);\n\n\t\t\t\t\tassert.equal(second.label, 'item2');\n\t\t\t\t\tassert.equal(second.textEdit.newText, 'foo');\n\t\t\t\t\tassert.equal(second.textEdit.range.start.line, 0);\n\t\t\t\t\tassert.equal(second.textEdit.range.start.character, 4);\n\t\t\t\t\tassert.equal(second.textEdit.range.end.line, 0);\n\t\t\t\t\tassert.equal(second.textEdit.range.end.character, 8);\n\n\t\t\t\t\tassert.equal(third.label, 'item3');\n\t\t\t\t\tassert.equal(third.textEdit.newText, 'foobar');\n\t\t\t\t\tassert.equal(third.textEdit.range.start.line, 0);\n\t\t\t\t\tassert.equal(third.textEdit.range.start.character, 1);\n\t\t\t\t\tassert.equal(third.textEdit.range.end.line, 0);\n\t\t\t\t\tassert.equal(third.textEdit.range.end.character, 6);\n\n\t\t\t\t\tassert.equal(forth.label, 'item4');\n\t\t\t\t\tassert.equal(forth.textEdit.newText, '');\n\t\t\t\t\tassert.equal(forth.textEdit.range.start.line, 0);\n\t\t\t\t\tassert.equal(forth.textEdit.range.start.character, 1);\n\t\t\t\t\tassert.equal(forth.textEdit.range.end.line, 0);\n\t\t\t\t\tassert.equal(forth.textEdit.range.end.character, 4);\n\t\t\t\t\tdone();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tdone(e);\n\t\t\t\t}\n\t\t\t}, done);\n\t\t}, done);\n\t});\n\n\ttest('Suggest, return CompletionList !array', function(done) {\n\t\tdisposables.push(extHost.registerCompletionItemProvider(defaultSelector, <vscode.CompletionItemProvider>{\n\t\t\tprovideCompletionItems(): any {\n\t\t\t\tlet a = new types.CompletionItem('item1');\n\t\t\t\tlet b = new types.CompletionItem('item2');\n\t\t\t\treturn new types.CompletionList(<any> [a,b], true);\n\t\t\t}\n\t\t}, []));\n\n\t\tthreadService.sync().then(() => {\n\t\t\treturn commands.executeCommand<vscode.CompletionList>('vscode.executeCompletionItemProvider', model.getAssociatedResource(), new types.Position(0, 4)).then(list => {\n\t\t\t\tassert.ok(list instanceof types.CompletionList);\n\t\t\t\tassert.equal(list.isIncomplete, true);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- quickfix\n\n\ttest('QuickFix, back and forth', function(done) {\n\t\tdisposables.push(extHost.registerCodeActionProvider(defaultSelector, <vscode.CodeActionProvider>{\n\t\t\tprovideCodeActions(): any {\n\t\t\t\treturn [{ command: 'testing', title: 'Title', arguments: [1, 2, true] }];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tcommands.executeCommand<vscode.Command[]>('vscode.executeCodeActionProvider', model.getAssociatedResource(), new types.Range(0, 0, 1, 1)).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [first] = value;\n\t\t\t\tassert.equal(first.title, 'Title');\n\t\t\t\tassert.equal(first.command, 'testing');\n\t\t\t\tassert.deepEqual(first.arguments, [1, 2, true]);\n\t\t\t\tdone();\n\t\t\t}, done);\n\t\t});\n\t});\n\n\t// --- code lens\n\n\ttest('CodeLens, back and forth', function(done) {\n\n\t\tconst complexArg = {\n\t\t\tfoo() { },\n\t\t\tbar() { },\n\t\t\tbig: extHost\n\t\t};\n\n\t\tdisposables.push(extHost.registerCodeLensProvider(defaultSelector, <vscode.CodeLensProvider>{\n\t\t\tprovideCodeLenses(): any {\n\t\t\t\treturn [new types.CodeLens(new types.Range(0, 0, 1, 1), { title: 'Title', command: 'cmd', arguments: [1, true, complexArg] })];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tcommands.executeCommand<vscode.CodeLens[]>('vscode.executeCodeLensProvider', model.getAssociatedResource()).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [first] = value;\n\n\t\t\t\tassert.equal(first.command.title, 'Title');\n\t\t\t\tassert.equal(first.command.command, 'cmd');\n\t\t\t\tassert.equal(first.command.arguments[0], 1);\n\t\t\t\tassert.equal(first.command.arguments[1], true);\n\t\t\t\tassert.equal(first.command.arguments[2], complexArg);\n\t\t\t\tdone();\n\t\t\t}, done);\n\t\t});\n\t});\n});\n"]}