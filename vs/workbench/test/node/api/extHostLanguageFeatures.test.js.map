{"version":3,"file":"vs/workbench/test/node/api/extHostLanguageFeatures.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/workbench/test/node/api/extHostLanguageFeatures.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport * as assert from 'assert';\nimport {setUnexpectedErrorHandler, errorHandler} from 'vs/base/common/errors';\nimport URI from 'vs/base/common/uri';\nimport * as types from 'vs/workbench/api/node/extHostTypes';\nimport * as EditorCommon from 'vs/editor/common/editorCommon';\nimport {Model as EditorModel} from 'vs/editor/common/model/model';\nimport {TestThreadService} from './testThreadService';\nimport {createInstantiationService as createInstantiationService} from 'vs/platform/instantiation/common/instantiationService';\nimport {MainProcessMarkerService} from 'vs/platform/markers/common/markerService';\nimport {IMarkerService} from 'vs/platform/markers/common/markers';\nimport {IThreadService} from 'vs/platform/thread/common/thread';\nimport {ExtHostLanguageFeatures, MainThreadLanguageFeatures} from 'vs/workbench/api/node/extHostLanguageFeatures';\nimport {ExtHostCommands, MainThreadCommands} from 'vs/workbench/api/node/extHostCommands';\nimport {ExtHostModelService} from 'vs/workbench/api/node/extHostDocuments';\nimport {getOutlineEntries} from 'vs/editor/contrib/quickOpen/common/quickOpen';\nimport {OutlineRegistry} from 'vs/editor/common/modes';\nimport {getCodeLensData} from 'vs/editor/contrib/codelens/common/codelens';\nimport {getDeclarationsAtPosition} from 'vs/editor/contrib/goToDeclaration/common/goToDeclaration';\nimport {getExtraInfoAtPosition} from 'vs/editor/contrib/hover/common/hover';\nimport {getOccurrencesAtPosition} from 'vs/editor/contrib/wordHighlighter/common/wordHighlighter';\nimport {findReferences} from 'vs/editor/contrib/referenceSearch/common/referenceSearch';\nimport {getQuickFixes} from 'vs/editor/contrib/quickFix/common/quickFix';\nimport {getNavigateToItems} from 'vs/workbench/parts/search/common/search';\nimport {rename} from 'vs/editor/contrib/rename/common/rename';\nimport {getParameterHints} from 'vs/editor/contrib/parameterHints/common/parameterHints';\nimport {suggest} from 'vs/editor/contrib/suggest/common/suggest';\nimport {formatDocument, formatRange, formatAfterKeystroke} from 'vs/editor/contrib/format/common/format';\n\nconst defaultSelector = { scheme: 'far' };\nconst model: EditorCommon.IModel = new EditorModel(\n\t[\n\t\t'This is the first line',\n\t\t'This is the second line',\n\t\t'This is the third line',\n\t].join('\\n'),\n\tEditorModel.DEFAULT_CREATION_OPTIONS,\n\tundefined,\n\tURI.parse('far://testing/file.a'));\n\nlet extHost: ExtHostLanguageFeatures;\nlet mainThread: MainThreadLanguageFeatures;\nlet disposables: vscode.Disposable[] = [];\nlet threadService: TestThreadService;\nlet originalErrorHandler: (e: any) => any;\n\nsuite('ExtHostLanguageFeatures', function() {\n\n\tsuiteSetup(() => {\n\n\t\tlet instantiationService = createInstantiationService();\n\t\tthreadService = new TestThreadService(instantiationService);\n\t\tinstantiationService.addSingleton(IMarkerService, new MainProcessMarkerService(threadService));\n\t\tinstantiationService.addSingleton(IThreadService, threadService);\n\n\t\toriginalErrorHandler = errorHandler.getUnexpectedErrorHandler();\n\t\tsetUnexpectedErrorHandler(() => { });\n\n\t\tthreadService.getRemotable(ExtHostModelService)._acceptModelAdd({\n\t\t\tisDirty: false,\n\t\t\tversionId: model.getVersionId(),\n\t\t\tmodeId: model.getModeId(),\n\t\t\turl: model.getAssociatedResource(),\n\t\t\tvalue: {\n\t\t\t\tEOL: model.getEOL(),\n\t\t\t\tlines: model.getValue().split(model.getEOL()),\n\t\t\t\tBOM: '',\n\t\t\t\tlength: -1,\n\t\t\t\toptions: {\n\t\t\t\t\ttabSize: 4,\n\t\t\t\t\tinsertSpaces: true,\n\t\t\t\t\tdefaultEOL: EditorCommon.DefaultEndOfLine.LF\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tthreadService.getRemotable(ExtHostCommands);\n\t\tthreadService.getRemotable(MainThreadCommands);\n\t\tmainThread = threadService.getRemotable(MainThreadLanguageFeatures);\n\t\textHost = threadService.getRemotable(ExtHostLanguageFeatures);\n\t});\n\n\tsuiteTeardown(() => {\n\t\tsetUnexpectedErrorHandler(originalErrorHandler);\n\t\tmodel.dispose();\n\t});\n\n\tteardown(function(done) {\n\t\twhile (disposables.length) {\n\t\t\tdisposables.pop().dispose();\n\t\t}\n\t\tthreadService.sync()\n\t\t\t.then(() => done(), err => done(err));\n\t});\n\n\t// --- outline\n\n\ttest('DocumentSymbols, register/deregister', function(done) {\n\t\tassert.equal(OutlineRegistry.all(model).length, 0);\n\t\tlet d1 = extHost.registerDocumentSymbolProvider(defaultSelector, <vscode.DocumentSymbolProvider>{\n\t\t\tprovideDocumentSymbols() {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t});\n\n\t\tthreadService.sync().then(() => {\n\t\t\tassert.equal(OutlineRegistry.all(model).length, 1);\n\t\t\td1.dispose();\n\t\t\tthreadService.sync().then(() => {\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t});\n\n\ttest('DocumentSymbols, evil provider', function(done) {\n\t\tdisposables.push(extHost.registerDocumentSymbolProvider(defaultSelector, <vscode.DocumentSymbolProvider>{\n\t\t\tprovideDocumentSymbols(): any {\n\t\t\t\tthrow new Error('evil document symbol provider');\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerDocumentSymbolProvider(defaultSelector, <vscode.DocumentSymbolProvider>{\n\t\t\tprovideDocumentSymbols(): any {\n\t\t\t\treturn [new types.SymbolInformation('test', types.SymbolKind.Field, new types.Range(0, 0, 0, 0))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetOutlineEntries(model).then(value => {\n\t\t\t\tassert.equal(value.entries.length, 1);\n\t\t\t\tdone();\n\t\t\t}, err => {\n\t\t\t\tdone(err);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('DocumentSymbols, data conversion', function(done) {\n\t\tdisposables.push(extHost.registerDocumentSymbolProvider(defaultSelector, <vscode.DocumentSymbolProvider>{\n\t\t\tprovideDocumentSymbols(): any {\n\t\t\t\treturn [new types.SymbolInformation('test', types.SymbolKind.Field, new types.Range(0, 0, 0, 0))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetOutlineEntries(model).then(value => {\n\t\t\t\tassert.equal(value.entries.length, 1);\n\n\t\t\t\tlet entry = value.entries[0];\n\t\t\t\tassert.equal(entry.label, 'test');\n\t\t\t\tassert.deepEqual(entry.range, { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 1 });\n\t\t\t\tdone();\n\n\t\t\t}, err => {\n\t\t\t\tdone(err);\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- code lens\n\n\ttest('CodeLens, evil provider', function(done) {\n\n\t\tdisposables.push(extHost.registerCodeLensProvider(defaultSelector, <vscode.CodeLensProvider>{\n\t\t\tprovideCodeLenses(): any {\n\t\t\t\tthrow new Error('evil');\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerCodeLensProvider(defaultSelector, <vscode.CodeLensProvider>{\n\t\t\tprovideCodeLenses() {\n\t\t\t\treturn [new types.CodeLens(new types.Range(0, 0, 0, 0))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tgetCodeLensData(model).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('CodeLens, do not resolve a resolved lens', function(done) {\n\n\t\tdisposables.push(extHost.registerCodeLensProvider(defaultSelector, <vscode.CodeLensProvider>{\n\t\t\tprovideCodeLenses(): any {\n\t\t\t\treturn [new types.CodeLens(\n\t\t\t\t\tnew types.Range(0, 0, 0, 0),\n\t\t\t\t\t{ command: 'id', title: 'Title' })];\n\t\t\t},\n\t\t\tresolveCodeLens(): any {\n\t\t\t\tassert.ok(false, 'do not resolve');\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetCodeLensData(model).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet data = value[0];\n\n\t\t\t\tdata.support.resolveCodeLensSymbol(model.getAssociatedResource(), data.symbol).then(symbol => {\n\t\t\t\t\tassert.equal(symbol.command.id, 'id');\n\t\t\t\t\tassert.equal(symbol.command.title, 'Title');\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('CodeLens, missing command', function(done) {\n\n\t\tdisposables.push(extHost.registerCodeLensProvider(defaultSelector, <vscode.CodeLensProvider>{\n\t\t\tprovideCodeLenses() {\n\t\t\t\treturn [new types.CodeLens(new types.Range(0, 0, 0, 0))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetCodeLensData(model).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\n\t\t\t\tlet data = value[0];\n\t\t\t\tdata.support.resolveCodeLensSymbol(model.getAssociatedResource(), data.symbol).then(symbol => {\n\n\t\t\t\t\tassert.equal(symbol.command.id, 'missing');\n\t\t\t\t\tassert.equal(symbol.command.title, '<<MISSING COMMAND>>');\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- definition\n\n\ttest('Definition, data conversion', function(done) {\n\n\t\tdisposables.push(extHost.registerDefinitionProvider(defaultSelector, <vscode.DefinitionProvider>{\n\t\t\tprovideDefinition(): any {\n\t\t\t\treturn [new types.Location(model.getAssociatedResource(), new types.Range(1, 2, 3, 4))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetDeclarationsAtPosition(model, { lineNumber: 1, column: 1 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [entry] = value;\n\t\t\t\tassert.deepEqual(entry.range, { startLineNumber: 2, startColumn: 3, endLineNumber: 4, endColumn: 5 });\n\t\t\t\tassert.equal(entry.resource.toString(), model.getAssociatedResource().toString());\n\t\t\t\tdone();\n\t\t\t}, err => {\n\t\t\t\tdone(err);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Definition, one or many', function(done) {\n\n\t\tdisposables.push(extHost.registerDefinitionProvider(defaultSelector, <vscode.DefinitionProvider>{\n\t\t\tprovideDefinition(): any {\n\t\t\t\treturn [new types.Location(model.getAssociatedResource(), new types.Range(1, 1, 1, 1))];\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerDefinitionProvider(defaultSelector, <vscode.DefinitionProvider>{\n\t\t\tprovideDefinition(): any {\n\t\t\t\treturn new types.Location(model.getAssociatedResource(), new types.Range(1, 1, 1, 1));\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetDeclarationsAtPosition(model, { lineNumber: 1, column: 1 }).then(value => {\n\t\t\t\tassert.equal(value.length, 2);\n\t\t\t\tdone();\n\t\t\t}, err => {\n\t\t\t\tdone(err);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Definition, registration order', function(done) {\n\n\t\tdisposables.push(extHost.registerDefinitionProvider(defaultSelector, <vscode.DefinitionProvider>{\n\t\t\tprovideDefinition(): any {\n\t\t\t\treturn [new types.Location(URI.parse('far://first'), new types.Range(2, 3, 4, 5))];\n\t\t\t}\n\t\t}));\n\n\t\tsetTimeout(function() { // registration time matters\n\t\t\tdisposables.push(extHost.registerDefinitionProvider(defaultSelector, <vscode.DefinitionProvider>{\n\t\t\t\tprovideDefinition(): any {\n\t\t\t\t\treturn new types.Location(URI.parse('far://second'), new types.Range(1, 2, 3, 4));\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthreadService.sync().then(() => {\n\n\t\t\t\tgetDeclarationsAtPosition(model, { lineNumber: 1, column: 1 }).then(value => {\n\t\t\t\t\tassert.equal(value.length, 2);\n\t\t\t\t\t// let [first, second] = value;\n\n\t\t\t\t\tassert.equal(value[0].resource.authority, 'second');\n\t\t\t\t\tassert.equal(value[1].resource.authority, 'first');\n\t\t\t\t\tdone();\n\n\t\t\t\t}, err => {\n\t\t\t\t\tdone(err);\n\t\t\t\t});\n\t\t\t});\n\t\t}, 5);\n\t});\n\n\ttest('Definition, evil provider', function(done) {\n\n\t\tdisposables.push(extHost.registerDefinitionProvider(defaultSelector, <vscode.DefinitionProvider>{\n\t\t\tprovideDefinition(): any {\n\t\t\t\tthrow new Error('evil provider');\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerDefinitionProvider(defaultSelector, <vscode.DefinitionProvider>{\n\t\t\tprovideDefinition(): any {\n\t\t\t\treturn new types.Location(model.getAssociatedResource(), new types.Range(1, 1, 1, 1));\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetDeclarationsAtPosition(model, { lineNumber: 1, column: 1 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tdone();\n\t\t\t}, err => {\n\t\t\t\tdone(err);\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- extra info\n\n\ttest('ExtraInfo, word range at pos', function(done) {\n\n\t\tdisposables.push(extHost.registerHoverProvider(defaultSelector, <vscode.HoverProvider>{\n\t\t\tprovideHover(): any {\n\t\t\t\treturn new types.Hover('Hello');\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetExtraInfoAtPosition(model, { lineNumber: 1, column: 1 }).then(value => {\n\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [entry] = value;\n\t\t\t\tassert.deepEqual(entry.range, { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 5 });\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('ExtraInfo, given range', function(done) {\n\n\t\tdisposables.push(extHost.registerHoverProvider(defaultSelector, <vscode.HoverProvider>{\n\t\t\tprovideHover(): any {\n\t\t\t\treturn new types.Hover('Hello', new types.Range(3, 0, 8, 7));\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetExtraInfoAtPosition(model, { lineNumber: 1, column: 1 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [entry] = value;\n\t\t\t\tassert.deepEqual(entry.range, { startLineNumber: 4, startColumn: 1, endLineNumber: 9, endColumn: 8 });\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('ExtraInfo, registration order', function(done) {\n\n\t\tdisposables.push(extHost.registerHoverProvider(defaultSelector, <vscode.HoverProvider>{\n\t\t\tprovideHover(): any {\n\t\t\t\treturn new types.Hover('registered first');\n\t\t\t}\n\t\t}));\n\n\t\tsetTimeout(function() {\n\t\t\tdisposables.push(extHost.registerHoverProvider(defaultSelector, <vscode.HoverProvider>{\n\t\t\t\tprovideHover(): any {\n\t\t\t\t\treturn new types.Hover('registered second');\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthreadService.sync().then(() => {\n\n\t\t\t\tgetExtraInfoAtPosition(model, { lineNumber: 1, column: 1 }).then(value => {\n\t\t\t\t\tassert.equal(value.length, 2);\n\t\t\t\t\tlet [first, second] = value;\n\t\t\t\t\tassert.equal(first.htmlContent[0].markdown, 'registered second');\n\t\t\t\t\tassert.equal(second.htmlContent[0].markdown, 'registered first');\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\n\t\t}, 5);\n\n\t});\n\n\ttest('ExtraInfo, evil provider', function(done) {\n\n\t\tdisposables.push(extHost.registerHoverProvider(defaultSelector, <vscode.HoverProvider>{\n\t\t\tprovideHover(): any {\n\t\t\t\tthrow new Error('evil');\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerHoverProvider(defaultSelector, <vscode.HoverProvider>{\n\t\t\tprovideHover(): any {\n\t\t\t\treturn new types.Hover('Hello');\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetExtraInfoAtPosition(model, { lineNumber: 1, column: 1 }).then(value => {\n\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- occurrences\n\n\ttest('Occurrences, data conversion', function(done) {\n\n\t\tdisposables.push(extHost.registerDocumentHighlightProvider(defaultSelector, <vscode.DocumentHighlightProvider>{\n\t\t\tprovideDocumentHighlights(): any {\n\t\t\t\treturn [new types.DocumentHighlight(new types.Range(0, 0, 0, 4))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetOccurrencesAtPosition(model, { lineNumber: 1, column: 2 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [entry] = value;\n\t\t\t\tassert.deepEqual(entry.range, { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 5 });\n\t\t\t\tassert.equal(entry.kind, 'text');\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Occurrences, order 1/2', function(done) {\n\n\t\tdisposables.push(extHost.registerDocumentHighlightProvider(defaultSelector, <vscode.DocumentHighlightProvider>{\n\t\t\tprovideDocumentHighlights(): any {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerDocumentHighlightProvider('*', <vscode.DocumentHighlightProvider>{\n\t\t\tprovideDocumentHighlights(): any {\n\t\t\t\treturn [new types.DocumentHighlight(new types.Range(0, 0, 0, 4))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetOccurrencesAtPosition(model, { lineNumber: 1, column: 2 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [entry] = value;\n\t\t\t\tassert.deepEqual(entry.range, { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 5 });\n\t\t\t\tassert.equal(entry.kind, 'text');\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Occurrences, order 2/2', function(done) {\n\n\t\tdisposables.push(extHost.registerDocumentHighlightProvider(defaultSelector, <vscode.DocumentHighlightProvider>{\n\t\t\tprovideDocumentHighlights(): any {\n\t\t\t\treturn [new types.DocumentHighlight(new types.Range(0, 0, 0, 2))];\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerDocumentHighlightProvider('*', <vscode.DocumentHighlightProvider>{\n\t\t\tprovideDocumentHighlights(): any {\n\t\t\t\treturn [new types.DocumentHighlight(new types.Range(0, 0, 0, 4))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetOccurrencesAtPosition(model, { lineNumber: 1, column: 2 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [entry] = value;\n\t\t\t\tassert.deepEqual(entry.range, { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 3 });\n\t\t\t\tassert.equal(entry.kind, 'text');\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Occurrences, evil provider', function(done) {\n\n\t\tdisposables.push(extHost.registerDocumentHighlightProvider(defaultSelector, <vscode.DocumentHighlightProvider>{\n\t\t\tprovideDocumentHighlights(): any {\n\t\t\t\tthrow new Error('evil');\n\t\t\t}\n\t\t}));\n\n\t\tdisposables.push(extHost.registerDocumentHighlightProvider(defaultSelector, <vscode.DocumentHighlightProvider>{\n\t\t\tprovideDocumentHighlights(): any {\n\t\t\t\treturn [new types.DocumentHighlight(new types.Range(0, 0, 0, 4))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetOccurrencesAtPosition(model, { lineNumber: 1, column: 2 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- references\n\n\ttest('References, registration order', function(done) {\n\n\t\tdisposables.push(extHost.registerReferenceProvider(defaultSelector, <vscode.ReferenceProvider>{\n\t\t\tprovideReferences(): any {\n\t\t\t\treturn [new types.Location(URI.parse('far://register/first'), new types.Range(0, 0, 0, 0))];\n\t\t\t}\n\t\t}));\n\n\t\tsetTimeout(function() {\n\t\t\tdisposables.push(extHost.registerReferenceProvider(defaultSelector, <vscode.ReferenceProvider>{\n\t\t\t\tprovideReferences(): any {\n\t\t\t\t\treturn [new types.Location(URI.parse('far://register/second'), new types.Range(0, 0, 0, 0))];\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthreadService.sync().then(() => {\n\n\t\t\t\tfindReferences(model, { lineNumber: 1, column: 2 }).then(value => {\n\t\t\t\t\tassert.equal(value.length, 2);\n\n\t\t\t\t\tlet [first, second] = value;\n\t\t\t\t\tassert.equal(first.resource.path, '/second');\n\t\t\t\t\tassert.equal(second.resource.path, '/first');\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\t\t}, 5);\n\t});\n\n\ttest('References, data conversion', function(done) {\n\n\t\tdisposables.push(extHost.registerReferenceProvider(defaultSelector, <vscode.ReferenceProvider>{\n\t\t\tprovideReferences(): any {\n\t\t\t\treturn [new types.Location(model.getAssociatedResource(), new types.Position(0, 0))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tfindReferences(model, { lineNumber: 1, column: 2 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\n\t\t\t\tlet [item] = value;\n\t\t\t\tassert.deepEqual(item.range, { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 1 });\n\t\t\t\tassert.equal(item.resource.toString(), model.getAssociatedResource().toString());\n\t\t\t\tdone();\n\t\t\t});\n\n\t\t});\n\t});\n\n\ttest('References, evil provider', function(done) {\n\n\t\tdisposables.push(extHost.registerReferenceProvider(defaultSelector, <vscode.ReferenceProvider>{\n\t\t\tprovideReferences(): any {\n\t\t\t\tthrow new Error('evil');\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerReferenceProvider(defaultSelector, <vscode.ReferenceProvider>{\n\t\t\tprovideReferences(): any {\n\t\t\t\treturn [new types.Location(model.getAssociatedResource(), new types.Range(0, 0, 0, 0))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tfindReferences(model, { lineNumber: 1, column: 2 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tdone();\n\t\t\t});\n\n\t\t});\n\t});\n\n\t// --- quick fix\n\n\ttest('Quick Fix, data conversion', function(done) {\n\n\t\tdisposables.push(extHost.registerCodeActionProvider(defaultSelector, <vscode.CodeActionProvider>{\n\t\t\tprovideCodeActions(): any {\n\t\t\t\treturn [\n\t\t\t\t\t<vscode.Command>{ command: 'test1', title: 'Testing1' },\n\t\t\t\t\t<vscode.Command>{ command: 'test2', title: 'Testing2' }\n\t\t\t\t];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tgetQuickFixes(model, model.getFullModelRange()).then(value => {\n\t\t\t\tassert.equal(value.length, 2);\n\n\t\t\t\tlet [first, second] = value;\n\t\t\t\tassert.equal(first.command.title, 'Testing1');\n\t\t\t\tassert.equal(first.command.id, 'test1');\n\t\t\t\tassert.equal(second.command.title, 'Testing2');\n\t\t\t\tassert.equal(second.command.id, 'test2');\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Quick Fix, invoke command+args', function(done) {\n\t\tlet actualArgs: any;\n\t\tlet commands = threadService.getRemotable(ExtHostCommands);\n\t\tdisposables.push(commands.registerCommand('test1', function(...args: any[]) {\n\t\t\tactualArgs = args;\n\t\t}));\n\n\t\tdisposables.push(extHost.registerCodeActionProvider(defaultSelector, <vscode.CodeActionProvider>{\n\t\t\tprovideCodeActions(): any {\n\t\t\t\treturn [<vscode.Command>{ command: 'test1', title: 'Testing', arguments: [true, 1, { bar: 'boo', foo: 'far' }, null] }];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tgetQuickFixes(model, model.getFullModelRange()).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\n\t\t\t\tlet [entry] = value;\n\t\t\t\tentry.support.runQuickFixAction(model.getAssociatedResource(), model.getFullModelRange(), entry).then(value => {\n\t\t\t\t\tassert.equal(value, undefined);\n\n\t\t\t\t\tassert.equal(actualArgs.length, 4);\n\t\t\t\t\tassert.equal(actualArgs[0], true);\n\t\t\t\t\tassert.equal(actualArgs[1], 1);\n\t\t\t\t\tassert.deepEqual(actualArgs[2], { bar: 'boo', foo: 'far' });\n\t\t\t\t\tassert.equal(actualArgs[3], null);\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Quick Fix, evil provider', function(done) {\n\n\t\tdisposables.push(extHost.registerCodeActionProvider(defaultSelector, <vscode.CodeActionProvider>{\n\t\t\tprovideCodeActions(): any {\n\t\t\t\tthrow new Error('evil');\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerCodeActionProvider(defaultSelector, <vscode.CodeActionProvider>{\n\t\t\tprovideCodeActions(): any {\n\t\t\t\treturn [<vscode.Command>{ command: 'test', title: 'Testing' }];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tgetQuickFixes(model, model.getFullModelRange()).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- navigate types\n\n\ttest('Navigate types, evil provider', function(done) {\n\n\t\tdisposables.push(extHost.registerWorkspaceSymbolProvider(<vscode.WorkspaceSymbolProvider>{\n\t\t\tprovideWorkspaceSymbols(): any {\n\t\t\t\tthrow new Error('evil');\n\t\t\t}\n\t\t}));\n\n\t\tdisposables.push(extHost.registerWorkspaceSymbolProvider(<vscode.WorkspaceSymbolProvider>{\n\t\t\tprovideWorkspaceSymbols(): any {\n\t\t\t\treturn [new types.SymbolInformation('testing', types.SymbolKind.Array, new types.Range(0, 0, 1, 1))];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetNavigateToItems('').then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- rename\n\n\ttest('Rename, evil provider 1/2', function(done) {\n\n\t\tdisposables.push(extHost.registerRenameProvider(defaultSelector, <vscode.RenameProvider>{\n\t\t\tprovideRenameEdits(): any {\n\t\t\t\tthrow Error('evil');\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\trename(model, { lineNumber: 1, column: 1 }, 'newName').then(value => {\n\t\t\t\tdone(new Error(''));\n\t\t\t}, err => {\n\t\t\t\tdone(); // expected\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Rename, evil provider 2/2', function(done) {\n\n\t\tdisposables.push(extHost.registerRenameProvider('*', <vscode.RenameProvider>{\n\t\t\tprovideRenameEdits(): any {\n\t\t\t\tthrow Error('evil');\n\t\t\t}\n\t\t}));\n\n\t\tdisposables.push(extHost.registerRenameProvider(defaultSelector, <vscode.RenameProvider>{\n\t\t\tprovideRenameEdits(): any {\n\t\t\t\tlet edit = new types.WorkspaceEdit();\n\t\t\t\tedit.replace(model.getAssociatedResource(), new types.Range(0, 0, 0, 0), 'testing');\n\t\t\t\treturn edit;\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\trename(model, { lineNumber: 1, column: 1 }, 'newName').then(value => {\n\t\t\t\tassert.equal(value.edits.length, 1);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Rename, ordering', function(done) {\n\n\t\tdisposables.push(extHost.registerRenameProvider('*', <vscode.RenameProvider>{\n\t\t\tprovideRenameEdits(): any {\n\t\t\t\tlet edit = new types.WorkspaceEdit();\n\t\t\t\tedit.replace(model.getAssociatedResource(), new types.Range(0, 0, 0, 0), 'testing');\n\t\t\t\tedit.replace(model.getAssociatedResource(), new types.Range(1, 0, 1, 0), 'testing');\n\t\t\t\treturn edit;\n\t\t\t}\n\t\t}));\n\n\t\tdisposables.push(extHost.registerRenameProvider(defaultSelector, <vscode.RenameProvider>{\n\t\t\tprovideRenameEdits(): any {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\trename(model, { lineNumber: 1, column: 1 }, 'newName').then(value => {\n\t\t\t\tassert.equal(value.edits.length, 2); // least relevant renamer\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- parameter hints\n\n\ttest('Parameter Hints, evil provider', function(done) {\n\n\t\tdisposables.push(extHost.registerSignatureHelpProvider(defaultSelector, <vscode.SignatureHelpProvider>{\n\t\t\tprovideSignatureHelp(): any {\n\t\t\t\tthrow new Error('evil');\n\t\t\t}\n\t\t}, []));\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tgetParameterHints(model, { lineNumber: 1, column: 1 }, '(').then(value => {\n\t\t\t\tdone(new Error('error expeted'));\n\t\t\t}, err => {\n\t\t\t\tassert.equal(err.message, 'evil');\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- suggestions\n\n\ttest('Suggest, order 1/3', function(done) {\n\n\t\tdisposables.push(extHost.registerCompletionItemProvider('*', <vscode.CompletionItemProvider>{\n\t\t\tprovideCompletionItems(): any {\n\t\t\t\treturn [new types.CompletionItem('testing1')];\n\t\t\t}\n\t\t}, []));\n\n\t\tdisposables.push(extHost.registerCompletionItemProvider(defaultSelector, <vscode.CompletionItemProvider>{\n\t\t\tprovideCompletionItems(): any {\n\t\t\t\treturn [new types.CompletionItem('testing2')];\n\t\t\t}\n\t\t}, []));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tsuggest(model, { lineNumber: 1, column: 1 }, ',').then(value => {\n\t\t\t\tassert.ok(value.length >= 1); // check for min because snippets and others contribute\n\t\t\t\tlet [first] = value;\n\t\t\t\tassert.equal(first.suggestions.length, 1);\n\t\t\t\tassert.equal(first.suggestions[0].codeSnippet, 'testing2');\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Suggest, order 2/3', function(done) {\n\n\t\tdisposables.push(extHost.registerCompletionItemProvider('*', <vscode.CompletionItemProvider>{\n\t\t\tprovideCompletionItems(): any {\n\t\t\t\treturn [new types.CompletionItem('weak-selector')]; // weaker selector but result\n\t\t\t}\n\t\t}, []));\n\n\t\tdisposables.push(extHost.registerCompletionItemProvider(defaultSelector, <vscode.CompletionItemProvider>{\n\t\t\tprovideCompletionItems(): any {\n\t\t\t\treturn []; // stronger selector but not a good result;\n\t\t\t}\n\t\t}, []));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tsuggest(model, { lineNumber: 1, column: 1 }, ',').then(value => {\n\t\t\t\tassert.ok(value.length >= 1);\n\t\t\t\tlet [first] = value;\n\t\t\t\tassert.equal(first.suggestions.length, 1);\n\t\t\t\tassert.equal(first.suggestions[0].codeSnippet, 'weak-selector');\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Suggest, order 2/3', function(done) {\n\n\t\tdisposables.push(extHost.registerCompletionItemProvider(defaultSelector, <vscode.CompletionItemProvider>{\n\t\t\tprovideCompletionItems(): any {\n\t\t\t\treturn [new types.CompletionItem('strong-1')];\n\t\t\t}\n\t\t}, []));\n\n\t\tsetTimeout(function() {\n\t\t\tdisposables.push(extHost.registerCompletionItemProvider(defaultSelector, <vscode.CompletionItemProvider>{\n\t\t\t\tprovideCompletionItems(): any {\n\t\t\t\t\treturn [new types.CompletionItem('strong-2')];\n\t\t\t\t}\n\t\t\t}, []));\n\n\t\t\tthreadService.sync().then(() => {\n\t\t\t\tsuggest(model, { lineNumber: 1, column: 1 }, ',').then(value => {\n\t\t\t\t\tassert.ok(value.length >= 2);\n\t\t\t\t\tlet [first, second] = value;\n\t\t\t\t\tassert.equal(first.suggestions.length, 1);\n\t\t\t\t\tassert.equal(first.suggestions[0].codeSnippet, 'strong-2'); // last wins\n\t\t\t\t\tassert.equal(second.suggestions[0].codeSnippet, 'strong-1');\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\t\t}, 5);\n\t});\n\n\ttest('Suggest, evil provider', function(done) {\n\n\t\tdisposables.push(extHost.registerCompletionItemProvider(defaultSelector, <vscode.CompletionItemProvider>{\n\t\t\tprovideCompletionItems(): any {\n\t\t\t\tthrow new Error('evil');\n\t\t\t}\n\t\t}, []));\n\n\t\tdisposables.push(extHost.registerCompletionItemProvider(defaultSelector, <vscode.CompletionItemProvider>{\n\t\t\tprovideCompletionItems(): any {\n\t\t\t\treturn [new types.CompletionItem('testing')];\n\t\t\t}\n\t\t}, []));\n\n\n\t\tthreadService.sync().then(() => {\n\n\t\t\tsuggest(model, { lineNumber: 1, column: 1 }, ',').then(value => {\n\t\t\t\tassert.equal(value[0].incomplete, undefined);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Suggest, CompletionList', function() {\n\n\t\tdisposables.push(extHost.registerCompletionItemProvider(defaultSelector, <vscode.CompletionItemProvider>{\n\t\t\tprovideCompletionItems(): any {\n\t\t\t\treturn new types.CompletionList([<any> new types.CompletionItem('hello')], true);\n\t\t\t}\n\t\t}, []));\n\n\t\treturn threadService.sync().then(() => {\n\n\t\t\tsuggest(model, { lineNumber: 1, column: 1 }, ',').then(value => {\n\t\t\t\tassert.equal(value[0].incomplete, true);\n\t\t\t});\n\t\t});\n\t});\n\n\t// --- format\n\n\ttest('Format Doc, data conversion', function(done) {\n\t\tdisposables.push(extHost.registerDocumentFormattingEditProvider(defaultSelector, <vscode.DocumentFormattingEditProvider>{\n\t\t\tprovideDocumentFormattingEdits(): any {\n\t\t\t\treturn [new types.TextEdit(new types.Range(0, 0, 1, 1), 'testing')];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tformatDocument(model, { insertSpaces: true, tabSize: 4 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [first] = value;\n\t\t\t\tassert.equal(first.text, 'testing');\n\t\t\t\tassert.deepEqual(first.range, { startLineNumber: 1, startColumn: 1, endLineNumber: 2, endColumn: 2 });\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Format Doc, evil provider', function(done) {\n\t\tdisposables.push(extHost.registerDocumentFormattingEditProvider(defaultSelector, <vscode.DocumentFormattingEditProvider>{\n\t\t\tprovideDocumentFormattingEdits(): any {\n\t\t\t\tthrow new Error('evil');\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tformatDocument(model, { insertSpaces: true, tabSize: 4 }).then(undefined, err => done());\n\t\t});\n\t});\n\n\ttest('Format Range, data conversion', function(done) {\n\t\tdisposables.push(extHost.registerDocumentRangeFormattingEditProvider(defaultSelector, <vscode.DocumentRangeFormattingEditProvider>{\n\t\t\tprovideDocumentRangeFormattingEdits(): any {\n\t\t\t\treturn [new types.TextEdit(new types.Range(0, 0, 1, 1), 'testing')];\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tformatRange(model, { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 1 }, { insertSpaces: true, tabSize: 4 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [first] = value;\n\t\t\t\tassert.equal(first.text, 'testing');\n\t\t\t\tassert.deepEqual(first.range, { startLineNumber: 1, startColumn: 1, endLineNumber: 2, endColumn: 2 });\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Format Range, + format_doc', function(done) {\n\t\tdisposables.push(extHost.registerDocumentRangeFormattingEditProvider(defaultSelector, <vscode.DocumentRangeFormattingEditProvider>{\n\t\t\tprovideDocumentRangeFormattingEdits(): any {\n\t\t\t\treturn [new types.TextEdit(new types.Range(0, 0, 1, 1), 'range')];\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(extHost.registerDocumentFormattingEditProvider(defaultSelector, <vscode.DocumentFormattingEditProvider>{\n\t\t\tprovideDocumentFormattingEdits(): any {\n\t\t\t\treturn [new types.TextEdit(new types.Range(0, 0, 1, 1), 'doc')];\n\t\t\t}\n\t\t}));\n\t\tthreadService.sync().then(() => {\n\t\t\tformatRange(model, { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 1 }, { insertSpaces: true, tabSize: 4 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [first] = value;\n\t\t\t\tassert.equal(first.text, 'range');\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Format Range, evil provider', function(done) {\n\t\tdisposables.push(extHost.registerDocumentRangeFormattingEditProvider(defaultSelector, <vscode.DocumentRangeFormattingEditProvider>{\n\t\t\tprovideDocumentRangeFormattingEdits(): any {\n\t\t\t\tthrow new Error('evil');\n\t\t\t}\n\t\t}));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tformatRange(model, { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 1 }, { insertSpaces: true, tabSize: 4 }).then(undefined, err => done());\n\t\t});\n\t});\n\n\ttest('Format on Type, data conversion', function(done) {\n\n\t\tdisposables.push(extHost.registerOnTypeFormattingEditProvider(defaultSelector, <vscode.OnTypeFormattingEditProvider>{\n\t\t\tprovideOnTypeFormattingEdits(): any {\n\t\t\t\treturn [new types.TextEdit(new types.Range(0, 0, 0, 0), arguments[2])];\n\t\t\t}\n\t\t}, [';']));\n\n\t\tthreadService.sync().then(() => {\n\t\t\tformatAfterKeystroke(model, { lineNumber: 1, column: 1 }, ';', { insertSpaces: true, tabSize: 2 }).then(value => {\n\t\t\t\tassert.equal(value.length, 1);\n\t\t\t\tlet [first] = value;\n\n\t\t\t\tassert.equal(first.text, ';');\n\t\t\t\tassert.deepEqual(first.range, { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 1 });\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\t});\n});\n"]}