define(["require","exports","vs/base/common/types","vs/platform/storage/common/storage"],function(e,t,o,s){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";!function(e){e[e.GLOBAL=0]="GLOBAL",e[e.WORKSPACE=1]="WORKSPACE"}(t.Scope||(t.Scope={}));var i=t.Scope,n=function(){function e(t){this.id=e.COMMON_PREFIX+t.toLowerCase()}return e.prototype.getMemento=function(t,o){if(void 0===o&&(o=i.GLOBAL),o===i.WORKSPACE){var s=e.workspaceMementos[this.id];return s||(s=new r(this.id,o,t),e.workspaceMementos[this.id]=s),s.getMemento()}var n=e.globalMementos[this.id];return n||(n=new r(this.id,o,t),e.globalMementos[this.id]=n),n.getMemento()},e.prototype.saveMemento=function(){e.globalMementos[this.id]&&e.globalMementos[this.id].save(),e.workspaceMementos[this.id]&&e.workspaceMementos[this.id].save()},e.globalMementos={},e.workspaceMementos={},e.COMMON_PREFIX="memento/",e}();t.Memento=n;var r=function(){function e(e,t,o){this.storageService=o,this.id=e,this.scope=t,this.mementoObj=this.loadMemento()}return e.prototype.getMemento=function(){return this.mementoObj},e.prototype.loadMemento=function(){var e=this.scope===i.GLOBAL?s.StorageScope.GLOBAL:s.StorageScope.WORKSPACE,t=this.storageService.get(this.id,e);return t?JSON.parse(t):{}},e.prototype.save=function(){var e=this.scope===i.GLOBAL?s.StorageScope.GLOBAL:s.StorageScope.WORKSPACE;o.isEmptyObject(this.mementoObj)?this.storageService.remove(this.id,e):this.storageService.store(this.id,JSON.stringify(this.mementoObj),e)},e}()});