define(["require","exports","vs/base/common/winjs.base","vs/base/common/collections","vs/platform/platform","vs/platform/keybinding/common/keybindingsRegistry","vs/workbench/services/part/common/partService","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/instantiation/common/instantiation","vs/base/common/severity"],function(e,t,n,o,i,r,c,s,a,u,m){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function h(e){var t=e.keybindingContext,n="undefined"==typeof e.keybindingWeight?r.KeybindingsRegistry.WEIGHT.workbenchContrib():e.keybindingWeight,o=e.keybindings,i={id:e.id,handler:d(e),weight:n,when:t,primary:o&&o.primary,secondary:o&&o.secondary,win:o&&o.win,mac:o&&o.mac,linux:o&&o.linux};r.KeybindingsRegistry.registerCommandDesc(i)}function d(e){return function(t,o){var i=t.get(s.IMessageService),r=t.get(u.IInstantiationService),h=t.get(a.ITelemetryService),d=t.get(c.IPartService);n.TPromise.as(l(r,h,d,e,o)).done(null,function(e){i.show(m["default"].Error,e)})}}function l(e,t,o,i,r){var c=e.createInstance(i.syncDescriptor);return c.label=i.label||c.label,c.enabled?(t&&t.publicLog("workbenchActionExecuted",{id:c.id,from:r&&r.from||"keybinding"}),o.joinCreation().then(function(){try{return n.TPromise.as(c.run()).then(function(){c.dispose()},function(e){return c.dispose(),n.TPromise.wrapError(e)})}catch(e){return c.dispose(),n.TPromise.wrapError(e)}})):void c.dispose()}t.Extensions={WorkbenchActions:"workbench.contributions.actions"};var b=function(){function e(){this.workbenchActions=Object.create(null),this.mapActionIdToMeta=Object.create(null)}return e.prototype.registerWorkbenchAction=function(e,t,n){if(!this.workbenchActions[e.id]){this.workbenchActions[e.id]=e,h(e);var o={alias:t};"string"==typeof n&&(o.category=n),this.mapActionIdToMeta[e.id]=o}},e.prototype.unregisterWorkbenchAction=function(e){return!!this.workbenchActions[e]&&(delete this.workbenchActions[e],delete this.mapActionIdToMeta[e],!0)},e.prototype.getWorkbenchAction=function(e){return this.workbenchActions[e]||null},e.prototype.getCategory=function(e){return this.mapActionIdToMeta[e]&&this.mapActionIdToMeta[e].category||null},e.prototype.getAlias=function(e){return this.mapActionIdToMeta[e]&&this.mapActionIdToMeta[e].alias||null},e.prototype.getWorkbenchActions=function(){return o.values(this.workbenchActions)},e.prototype.setWorkbenchActions=function(e){var t=this;this.workbenchActions=Object.create(null),this.mapActionIdToMeta=Object.create(null),e.forEach(function(e){return t.registerWorkbenchAction(e,"")},this)},e}();i.Registry.add(t.Extensions.WorkbenchActions,new b),t.createCommandHandler=d,t.triggerAndDisposeAction=l});