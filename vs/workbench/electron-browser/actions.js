/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,o){function t(){this.constructor=e}for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)},__decorate=this&&this.__decorate||function(e,o,t,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,o,t,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(o,t,c):r(o,t))||c);return i>3&&c&&Object.defineProperty(o,t,c),c},__param=this&&this.__param||function(e,o){return function(t,n){o(t,n,e)}};define(["require","exports","vs/base/common/winjs.base","vs/base/common/timer","vs/base/common/paths","vs/base/common/actions","vs/workbench/services/window/electron-browser/windowService","vs/workbench/services/editor/common/editorService","vs/base/common/platform","vs/workbench/common/editor/diffEditorInput","vs/nls","vs/platform/message/common/message","vs/platform/workspace/common/workspace","vs/workbench/services/quickopen/common/quickOpenService","vs/base/common/keyCodes","vs/platform/configuration/common/configuration","vs/platform/commands/common/commands","vs/base/browser/browser","electron"],function(e,o,t,n,r,i,c,a,s,d,l,u,m,p,v,w,h,g,f){"use strict";var _=function(e){function o(o,t,n){e.call(this,o,t),this.editorService=n}return __extends(o,e),o.prototype.run=function(){var e=this.editorService.getActiveEditor();return e?this.editorService.closeEditor(e.position,e.input):t.TPromise.as(!1)},o.ID="workbench.action.closeActiveEditor",o.LABEL=l.localize("closeActiveEditor","Close Editor"),o=__decorate([__param(2,a.IWorkbenchEditorService)],o)}(i.Action);o.CloseEditorAction=_;var S=function(e){function o(o,t,n){e.call(this,o,t),this.windowService=n}return __extends(o,e),o.prototype.run=function(){return this.windowService.getWindow().close(),t.TPromise.as(!0)},o.ID="workbench.action.closeWindow",o.LABEL=l.localize("closeWindow","Close Window"),o=__decorate([__param(2,c.IWindowService)],o)}(i.Action);o.CloseWindowAction=S;var b=function(e){function o(o,t,n,r,i){e.call(this,o,t),this.contextService=n,this.messageService=r,this.windowService=i}return __extends(o,e),o.prototype.run=function(){return this.contextService.getWorkspace()?f.ipcRenderer.send("vscode:closeFolder",this.windowService.getWindowId()):this.messageService.show(u.Severity.Info,l.localize("noFolderOpened","There is currently no folder opened in this instance to close.")),t.TPromise.as(!0)},o.ID="workbench.action.closeFolder",o.LABEL=l.localize("closeFolder","Close Folder"),o=__decorate([__param(2,m.IWorkspaceContextService),__param(3,u.IMessageService),__param(4,c.IWindowService)],o)}(i.Action);o.CloseFolderAction=b;var E=function(e){function o(o,t,n){e.call(this,o,t),this.windowService=n}return __extends(o,e),o.prototype.run=function(){return this.windowService.getWindow().openNew(),t.TPromise.as(!0)},o.ID="workbench.action.newWindow",o.LABEL=l.localize("newWindow","New Window"),o=__decorate([__param(2,c.IWindowService)],o)}(i.Action);o.NewWindowAction=E;var L=function(e){function o(o,t,n){e.call(this,o,t),this.windowService=n}return __extends(o,e),o.prototype.run=function(){return f.ipcRenderer.send("vscode:toggleFullScreen",this.windowService.getWindowId()),t.TPromise.as(!0)},o.ID="workbench.action.toggleFullScreen",o.LABEL=l.localize("toggleFullScreen","Toggle Full Screen"),o=__decorate([__param(2,c.IWindowService)],o)}(i.Action);o.ToggleFullScreenAction=L;var k=function(e){function o(o,t,n){e.call(this,o,t),this.windowService=n}return __extends(o,e),o.prototype.run=function(){return f.ipcRenderer.send("vscode:toggleMenuBar",this.windowService.getWindowId()),t.TPromise.as(!0)},o.ID="workbench.action.toggleMenuBar",o.LABEL=l.localize("toggleMenuBar","Toggle Menu Bar"),o=__decorate([__param(2,c.IWindowService)],o)}(i.Action);o.ToggleMenuBarAction=k;var y=function(e){function o(o,t,n){e.call(this,o,t),this.windowService=n}return __extends(o,e),o.prototype.run=function(){return f.ipcRenderer.send("vscode:toggleDevTools",this.windowService.getWindowId()),t.TPromise.as(!0)},o.ID="workbench.action.toggleDevTools",o.LABEL=l.localize("toggleDevTools","Toggle Developer Tools"),o=__decorate([__param(2,c.IWindowService)],o)}(i.Action);o.ToggleDevToolsAction=y;var A=function(e){function o(o,t){e.call(this,o,t)}return __extends(o,e),o.prototype.run=function(){return f.webFrame.setZoomLevel(f.webFrame.getZoomLevel()+1),g.setZoomLevel(f.webFrame.getZoomLevel()),t.TPromise.as(!0)},o.ID="workbench.action.zoomIn",o.LABEL=l.localize("zoomIn","Zoom In"),o}(i.Action);o.ZoomInAction=A;var I=function(e){function o(o,t){e.call(this,o,t)}return __extends(o,e),o.prototype.run=function(){return f.webFrame.setZoomLevel(f.webFrame.getZoomLevel()-1),g.setZoomLevel(f.webFrame.getZoomLevel()),t.TPromise.as(!0)},o.ID="workbench.action.zoomOut",o.LABEL=l.localize("zoomOut","Zoom Out"),o}(i.Action);o.ZoomOutAction=I;var T=function(e){function o(o,t,n){e.call(this,o,t),this.configurationService=n}return __extends(o,e),o.prototype.run=function(){var e=this.getConfiguredZoomLevel();return f.webFrame.setZoomLevel(e),g.setZoomLevel(f.webFrame.getZoomLevel()),t.TPromise.as(!0)},o.prototype.getConfiguredZoomLevel=function(){var e=this.configurationService.getConfiguration();return e.window&&"number"==typeof e.window.zoomLevel?e.window.zoomLevel:0},o.ID="workbench.action.zoomReset",o.LABEL=l.localize("zoomReset","Reset Zoom"),o=__decorate([__param(2,w.IConfigurationService)],o)}(i.Action);o.ZoomResetAction=T;var W;!function(e){e[e.LoaderAvailable=1]="LoaderAvailable",e[e.BeginLoadingScript=10]="BeginLoadingScript",e[e.EndLoadingScriptOK=11]="EndLoadingScriptOK",e[e.EndLoadingScriptError=12]="EndLoadingScriptError",e[e.BeginInvokeFactory=21]="BeginInvokeFactory",e[e.EndInvokeFactory=22]="EndInvokeFactory",e[e.NodeBeginEvaluatingScript=31]="NodeBeginEvaluatingScript",e[e.NodeEndEvaluatingScript=32]="NodeEndEvaluatingScript",e[e.NodeBeginNativeRequire=33]="NodeBeginNativeRequire",e[e.NodeEndNativeRequire=34]="NodeEndNativeRequire"}(W||(W={}));var R=function(o){function r(e,t,n,r){o.call(this,e,t),this.windowService=n,this.contextService=r,this.enabled=r.getConfiguration().env.enablePerformance}return __extends(r,o),r.prototype._analyzeLoaderTimes=function(){for(var o=e.getStats(),t=[],n=0,r=0,i=o.length;r<i;r++)if(o[r].type===W.NodeEndNativeRequire&&o[r-1].type===W.NodeBeginNativeRequire&&o[r-1].detail===o[r].detail){var c={};c.Event="nodeRequire "+o[r].detail,c["Took (ms)"]=o[r].timestamp-o[r-1].timestamp,n+=o[r].timestamp-o[r-1].timestamp,c["Start (ms)"]="**"+o[r-1].timestamp,c["End (ms)"]="**"+o[r-1].timestamp,t.push(c)}if(n>0){var c={};c.Event="===nodeRequire TOTAL",c["Took (ms)"]=n,c["Start (ms)"]="**",c["End (ms)"]="**",t.push(c)}return t},r.prototype.run=function(){var e=[];e.push.apply(e,this._analyzeLoaderTimes());var o,r=Math.round(f.remote.getGlobal("programStart")||f.remote.getGlobal("vscodeStart")),i=Math.round(f.remote.getGlobal("windowShow")),c=n.getTimeKeeper().getCollectedEvents();c.forEach(function(t){if("Startup"===t.topic){o=t;var n={};n.Event=t.name,n["Took (ms)"]=t.stopTime.getTime()-t.startTime.getTime(),n["Start (ms)"]=Math.max(t.startTime.getTime()-r,0),n["End (ms)"]=t.stopTime.getTime()-r,e.push(n)}}),e.push({Event:"---------------------------"});var a={};a.Event="Show Window at",a["Start (ms)"]=i-r,e.push(a);var s={};return s.Event="Total",s["Took (ms)"]=o.stopTime.getTime()-r,e.push(s),this.windowService.getWindow().openDevTools(),setTimeout(function(){console.warn("Run the action again if you do not see the numbers!"),console.table(e)},1e3),t.TPromise.as(!0)},r.ID="workbench.action.appPerf",r.LABEL=l.localize("appPerf","Startup Performance"),r=__decorate([__param(2,c.IWindowService),__param(3,m.IWorkspaceContextService)],r)}(i.Action);o.ShowStartupPerformance=R;var z=function(e){function o(o,t,n){e.call(this,o,t),this.windowService=n}return __extends(o,e),o.prototype.run=function(){return this.windowService.getWindow().reload(),t.TPromise.as(!0)},o.ID="workbench.action.reloadWindow",o.LABEL=l.localize("reloadWindow","Reload Window"),o=__decorate([__param(2,c.IWindowService)],o)}(i.Action);o.ReloadWindowAction=z;var C=function(e){function o(o,t,n,r){e.call(this,o,t),this.contextService=n,this.quickOpenService=r}return __extends(o,e),o.prototype.run=function(){var e=this,o=this.contextService.getConfiguration().env.recentFolders,t=this.contextService.getConfiguration().env.recentFiles,n=o.map(function(o,t){return{label:r.basename(o),description:r.dirname(o),path:o,separator:0===t?{label:l.localize("folders","folders")}:void 0,run:function(t){return e.runPick(o,t)}}}),i=t.map(function(o,t){return{label:r.basename(o),description:r.dirname(o),path:o,separator:0===t?{label:l.localize("files","files"),border:!0}:void 0,run:function(t){return e.runPick(o,t)}}}),c=!!this.contextService.getWorkspace();return this.quickOpenService.pick(n.concat.apply(n,i),{autoFocus:{autoFocusFirstEntry:!c,autoFocusSecondEntry:c},placeHolder:s.isMacintosh?l.localize("openRecentPlaceHolderMac","Select a path (hold Cmd-key to open in new window)"):l.localize("openRecentPlaceHolder","Select a path to open (hold Ctrl-key to open in new window)"),matchOnDescription:!0}).then(function(e){return!0})},o.prototype.runPick=function(e,o){var t=o.keymods.indexOf(v.KeyMod.CtrlCmd)>=0;f.ipcRenderer.send("vscode:windowOpen",[e],t)},o.ID="workbench.action.openRecent",o.LABEL=l.localize("openRecent","Open Recent"),o=__decorate([__param(2,m.IWorkspaceContextService),__param(3,p.IQuickOpenService)],o)}(i.Action);o.OpenRecentAction=C;var x=function(e){function o(o,t,n,r){e.call(this,o,t),this.messageService=n,this.editorService=r}return __extends(o,e),o.prototype.run=function(){this.messageService.hideAll();var e=this.editorService.getActiveEditor();return e&&e.focus(),t.TPromise.as(!0)},o.ID="workbench.action.closeMessages",o.LABEL=l.localize("closeMessages","Close Notification Messages"),o=__decorate([__param(2,u.IMessageService),__param(3,a.IWorkbenchEditorService)],o)}(i.Action);o.CloseMessagesAction=x,h.CommandsRegistry.registerCommand("_workbench.ipc",function(e,o,t){o&&Array.isArray(t)?f.ipcRenderer.send.apply(f.ipcRenderer,[o].concat(t)):f.ipcRenderer.send(o)}),h.CommandsRegistry.registerCommand("_workbench.diff",function(e,o){var n=e.get(a.IWorkbenchEditorService),r=o[0],i=o[1],c=o[2];return c||(c=l.localize("diffLeftRightLabel","{0} ⟷ {1}",r.toString(!0),i.toString(!0))),t.TPromise.join([n.createInput({resource:r}),n.createInput({resource:i})]).then(function(e){var o=e[0],t=e[1],r=new d.DiffEditorInput(c,(void 0),o,t);return n.openEditor(r)}).then(function(){})}),h.CommandsRegistry.registerCommand("_workbench.open",function(e,o){var t=e.get(a.IWorkbenchEditorService),n=o[0],r=o[1];return t.openEditor({resource:n},r).then(function(){})})});