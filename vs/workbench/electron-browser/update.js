/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __decorate=this&&this.__decorate||function(e,t,o,a){var n,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,a);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},__param=this&&this.__param||function(e,t){return function(o,a){t(o,a,e)}};define(["require","exports","vs/nls","vs/base/common/severity","vs/base/common/winjs.base","vs/base/common/actions","electron","vs/platform/message/common/message","vs/workbench/services/workspace/common/contextService","vs/platform/request/common/request"],function(e,t,o,a,n,r,s,i,c,l){"use strict";var u=new r.Action("update.applyUpdate",o.localize("updateNow","Update Now"),null,(!0),function(){return s.ipcRenderer.send("vscode:update-apply"),n.TPromise.as(!0)}),d=new r.Action("update.later",o.localize("later","Later"),null,(!0),function(){return n.TPromise.as(!0)});t.ShowReleaseNotesAction=function(e,t){return void 0===t&&(t=!1),new r.Action("update.showReleaseNotes",o.localize("releaseNotes","Release Notes"),null,(!0),function(){return s.shell.openExternal(e),n.TPromise.as(t)})},t.DownloadAction=function(e){return new r.Action("update.download",o.localize("downloadNow","Download Now"),null,(!0),function(){return s.shell.openExternal(e),n.TPromise.as(!0)})};var p=function(){function e(e,n,r){var i=this;this.contextService=e,this.messageService=n,this.requestService=r;var c=this.contextService.getConfiguration().env;s.ipcRenderer.on("vscode:update-downloaded",function(e,n){i.messageService.show(a["default"].Info,{message:o.localize("updateAvailable","{0} will be updated after it restarts.",c.appName),actions:[t.ShowReleaseNotesAction(c.releaseNotesUrl),d,u]})}),s.ipcRenderer.on("vscode:update-available",function(e,n){i.messageService.show(a["default"].Info,{message:o.localize("thereIsUpdateAvailable","There is an available update."),actions:[t.ShowReleaseNotesAction(c.releaseNotesUrl),d,t.DownloadAction(n)]})}),s.ipcRenderer.on("vscode:update-not-available",function(){i.messageService.show(a["default"].Info,o.localize("noUpdatesAvailable","There are no updates currently available."))})}return e=__decorate([__param(0,c.IWorkspaceContextService),__param(1,i.IMessageService),__param(2,l.IRequestService)],e)}();t.Update=p});