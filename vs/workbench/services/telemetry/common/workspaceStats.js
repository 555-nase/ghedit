/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __decorate=this&&this.__decorate||function(r,e,a,s){var c,o=arguments.length,i=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(r,e,a,s);else for(var t=r.length-1;t>=0;t--)(c=r[t])&&(i=(o<3?c(i):o>3?c(e,a,i):c(e,a))||i);return o>3&&i&&Object.defineProperty(e,a,i),i},__param=this&&this.__param||function(r,e){return function(a,s){e(a,s,r)}};define(["require","exports","vs/base/common/winjs.base","vs/base/common/errors","vs/platform/files/common/files","vs/platform/telemetry/common/telemetry","vs/platform/workspace/common/workspace"],function(r,e,a,s,c,o,i){"use strict";var t=function(){function r(r,e,a){this.fileService=r,this.contextService=e,this.telemetryService=a}return r.prototype.searchArray=function(r,e){return r.some(function(r){return r.search(e)>-1})},r.prototype.getWorkspaceTags=function(){var r=this,e=Object.create(null),c=this.contextService.getWorkspace();return c&&this.fileService?this.fileService.resolveFile(c.resource).then(function(a){var s=a.children.map(function(r){return r.name});e["workspace.empty"]=!1,e["workspace.language.cs"]=r.searchArray(s,/^.+\.cs$/i),e["workspace.language.js"]=r.searchArray(s,/^.+\.js$/i),e["workspace.language.ts"]=r.searchArray(s,/^.+\.ts$/i),e["workspace.language.php"]=r.searchArray(s,/^.+\.php$/i),e["workspace.language.python"]=r.searchArray(s,/^.+\.py$/i),e["workspace.language.vb"]=r.searchArray(s,/^.+\.vb$/i),e["workspace.language.aspx"]=r.searchArray(s,/^.+\.aspx$/i),e["workspace.grunt"]=r.searchArray(s,/^gruntfile\.js$/i),e["workspace.gulp"]=r.searchArray(s,/^gulpfile\.js$/i),e["workspace.jake"]=r.searchArray(s,/^jakefile\.js$/i),e["workspace.tsconfig"]=r.searchArray(s,/^tsconfig\.json$/i),e["workspace.jsconfig"]=r.searchArray(s,/^jsconfig\.json$/i),e["workspace.config.xml"]=r.searchArray(s,/^config\.xml/i),e["workspace.vsc.extension"]=r.searchArray(s,/^vsc-extension-quickstart\.md/i),e["workspace.ASP5"]=r.searchArray(s,/^project\.json$/i)&&e["workspace.language.cs"],e["workspace.sln"]=r.searchArray(s,/^.+\.sln$|^.+\.csproj$/i),e["workspace.unity"]=r.searchArray(s,/^Assets$/i)&&r.searchArray(s,/^Library$/i)&&r.searchArray(s,/^ProjectSettings/i),e["workspace.npm"]=r.searchArray(s,/^package\.json$|^node_modules$/i),e["workspace.bower"]=r.searchArray(s,/^bower\.json$|^bower_components$/i),e["workspace.yeoman.code"]=r.searchArray(s,/^vscodequickstart\.md$/i),e["workspace.yeoman.code.ext"]=r.searchArray(s,/^vsc-extension-quickstart\.md$/i);var c=r.searchArray(s,/^MainActivity\.cs$/i)||r.searchArray(s,/^MainActivity\.fs$/i),o=r.searchArray(s,/^AppDelegate\.cs$/i)||r.searchArray(s,/^AppDelegate\.fs$/i),i=r.searchArray(s,/^AndroidManifest\.xml$/i),t=r.searchArray(s,/^platforms$/i),n=r.searchArray(s,/^plugins$/i),p=r.searchArray(s,/^www$/i),h=r.searchArray(s,/^Properties/i),y=r.searchArray(s,/^Resources/i),l=r.searchArray(s,/^JNI/i);return!e["workspace.config.xml"]||e["workspace.language.cs"]||e["workspace.language.vb"]||e["workspace.language.aspx"]||(t&&n&&p?e["workspace.cordova.high"]=!0:e["workspace.cordova.low"]=!0),c&&h&&y&&(e["workspace.xamarin.android"]=!0),o&&y&&(e["workspace.xamarin.ios"]=!0),i&&l&&(e["workspace.android.cpp"]=!0),e["workspace.reactNative"]=r.searchArray(s,/^android$/i)&&r.searchArray(s,/^ios$/i)&&r.searchArray(s,/^index\.android\.js$/i)&&r.searchArray(s,/^index\.ios\.js$/i),e},function(r){return s.onUnexpectedError(r),null}):(e["workspace.empty"]=!0,a.TPromise.as(e))},r.prototype.reportWorkspaceTags=function(){var r=this;this.getWorkspaceTags().then(function(e){r.telemetryService.publicLog("workspce.tags",e)},function(r){return s.onUnexpectedError(r)})},r=__decorate([__param(0,c.IFileService),__param(1,i.IWorkspaceContextService),__param(2,o.ITelemetryService)],r)}();e.WorkspaceStats=t});