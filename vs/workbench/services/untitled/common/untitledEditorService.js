var __decorate=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(i<3?o(c):i>3?o(e,r,c):o(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c},__param=this&&this.__param||function(t,e){return function(r,n){e(r,n,t)}};define(["require","exports","vs/base/common/uri","vs/platform/instantiation/common/instantiation","vs/base/common/events","vs/base/common/arrays","vs/workbench/common/editor/untitledEditorInput"],function(t,e,r,n,o,i,c){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";e.IUntitledEditorService=n.createDecorator("untitledEditorService");var a=function(){function t(t){this.instantiationService=t}return t.prototype.get=function(e){return t.CACHE[e.toString()]},t.prototype.getAll=function(e){var r=this;return e?i.coalesce(e.map(function(t){return r.get(t)})):Object.keys(t.CACHE).map(function(e){return t.CACHE[e]})},t.prototype.revertAll=function(t,e){var r=[],n=this.getAll(t);return n.forEach(function(t){t&&(t.revert(),t.dispose(),r.push(t.getResource()))}),r},t.prototype.isDirty=function(t){var e=this.get(t);return e&&e.isDirty()},t.prototype.getDirty=function(){return Object.keys(t.CACHE).map(function(e){return t.CACHE[e]}).filter(function(t){return t.isDirty()}).map(function(t){return t.getResource()})},t.prototype.createOrGet=function(e,r){var n=!1;return e&&(n="file"===e.scheme,e=this.resourceToUntitled(e),n&&(t.KNOWN_ASSOCIATED_FILE_PATHS[e.toString()]=!0)),e&&t.CACHE[e.toString()]?t.CACHE[e.toString()]:this.doCreate(e,n,r)},t.prototype.doCreate=function(e,n,i){if(!e){var a=Object.keys(t.CACHE).length+1;do e=r["default"].from({scheme:c.UntitledEditorInput.SCHEMA,path:"Untitled-"+a}),a++;while(Object.keys(t.CACHE).indexOf(e.toString())>=0)}var u=this.instantiationService.createInstance(c.UntitledEditorInput,e,n,i);return u.addOneTimeDisposableListener(o.EventType.DISPOSE,function(){delete t.CACHE[u.getResource().toString()],delete t.KNOWN_ASSOCIATED_FILE_PATHS[u.getResource().toString()]}),t.CACHE[e.toString()]=u,u},t.prototype.resourceToUntitled=function(t){return t.scheme===c.UntitledEditorInput.SCHEMA?t:r["default"].from({scheme:c.UntitledEditorInput.SCHEMA,path:t.fsPath})},t.prototype.hasAssociatedFilePath=function(e){return!!t.KNOWN_ASSOCIATED_FILE_PATHS[e.toString()]},t.CACHE=Object.create(null),t.KNOWN_ASSOCIATED_FILE_PATHS=Object.create(null),t=__decorate([__param(0,n.IInstantiationService)],t)}();e.UntitledEditorService=a});