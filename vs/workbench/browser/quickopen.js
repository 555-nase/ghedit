var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},__decorate=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},__param=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};define(["require","exports","vs/nls","vs/base/common/winjs.base","vs/base/common/filters","vs/base/common/arrays","vs/base/common/strings","vs/base/common/types","vs/base/common/errors","vs/platform/platform","vs/base/common/actions","vs/base/common/keyCodes","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/common/editor","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/instantiation/common/descriptors"],function(t,e,n,r,o,i,s,u,c,p,a,l,f,m,d,h,y){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var g=function(){function t(){}return t.prototype.getResults=function(t){return r.TPromise.as(null)},t.prototype.getAriaLabel=function(){return null},t.prototype.getClass=function(){return null},t.prototype.canRun=function(){return!0},t.prototype.getAutoFocus=function(t,e){return{}},t.prototype.onClose=function(t){},t.prototype.getGroupLabel=function(){return null},t.prototype.getEmptyLabel=function(t){return t.length>0?n.localize("noResultsMatching","No results matching"):n.localize("noResultsFound2","No results found")},t}();e.QuickOpenHandler=g;var v=function(t){function e(e,n,r,o,i){void 0===i&&(i=!1),t.call(this,e,n),this.prefix=r,this.id=e+n,this.instantProgress=i,u.isString(o)?this.description=o:this.helpEntries=o}return __extends(e,t),e.prototype.getId=function(){return this.id},e}(y.AsyncDescriptor);e.QuickOpenHandlerDescriptor=v,e.Extensions={Quickopen:"workbench.contributions.quickopen"};var k=function(){function t(){this.handlers=[],this.defaultHandlers=[]}return t.prototype.registerQuickOpenHandler=function(t){this.handlers.push(t),this.handlers.sort(function(t,e){return e.prefix.length-t.prefix.length})},t.prototype.registerDefaultQuickOpenHandler=function(t){this.defaultHandlers.push(t)},t.prototype.getQuickOpenHandlers=function(){return this.handlers.slice(0)},t.prototype.getQuickOpenHandler=function(t){return t?i.first(this.handlers,function(e){return s.startsWith(t,e.prefix)},null):null},t.prototype.getDefaultQuickOpenHandlers=function(){return this.defaultHandlers},t}();p.Registry.add(e.Extensions.Quickopen,new k);var O=function(t){function e(e){t.call(this),this._editorService=e}return __extends(e,t),Object.defineProperty(e.prototype,"editorService",{get:function(){return this._editorService},enumerable:!0,configurable:!0}),e.prototype.getInput=function(){return null},e.prototype.getOptions=function(){return null},e.prototype.run=function(t,e){if(t===f.Mode.OPEN){var n=e.keymods.indexOf(l.KeyMod.CtrlCmd)>=0,r=this.getInput();return r instanceof d.EditorInput?this.editorService.openEditor(r,this.getOptions(),n).done(null,c.onUnexpectedError):this.editorService.openEditor(r,n).done(null,c.onUnexpectedError),!0}return!1},e}(m.QuickOpenEntry);e.EditorQuickOpenEntry=O;var b=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.getInput=function(){return null},e.prototype.getOptions=function(){return null},e}(m.QuickOpenEntryGroup);e.EditorQuickOpenEntryGroup=b;var _=function(t){function e(e,n,r,o){t.call(this,o),this.quickOpenService=e,this.prefix=n,this.command=r,this.command=r}return __extends(e,t),e.prototype.getIcon=function(){return this.command.icon||null},e.prototype.getLabel=function(){return this.command.aliases[0]},e.prototype.getAriaLabel=function(){return n.localize("entryAriaLabel","{0}, command",this.getLabel())},e.prototype.run=function(t,e){return t!==f.Mode.PREVIEW&&(this.quickOpenService.show(this.prefix+" "+this.command.aliases[0]+" "),!1)},e}(m.QuickOpenEntry),x=function(t){function e(e,n){t.call(this),this.quickOpenService=e,this.prefix=n.prefix,this.commands=n.commands.map(function(t){return{regexp:new RegExp("^("+t.aliases.join("|")+")\\b\\W+"),command:t}}),this.defaultCommand=n.defaultCommand||null}return __extends(e,t),e.prototype.getResults=function(t){var e,n,r=i.first(this.commands,function(n){return!!(e=t.match(n.regexp))});return n=r?r.command.getResults(t.substr(e[0].length)):this.defaultCommand?this.defaultCommand.getResults(t):this.getCommands(t),n.then(function(t){return new m.QuickOpenModel(t)})},e.prototype.getCommands=function(t){var e=this,n=this.commands.map(function(e){return{command:e.command,highlights:o.matchesFuzzy(t,e.command.aliases[0])}}).filter(function(e){var n=e.command,r=e.highlights;return!!r||n.aliases.some(function(e){return t===e})}).map(function(t){var n=t.command,r=t.highlights;return new _(e.quickOpenService,e.prefix,n,r)});return r.TPromise.as(n)},e.prototype.getClass=function(){return null},e.prototype.canRun=function(){return!0},e.prototype.getAutoFocus=function(t){return{autoFocusFirstEntry:!0}},e.prototype.onClose=function(t){},e.prototype.getGroupLabel=function(){return null},e.prototype.getEmptyLabel=function(t){var e,r=i.first(this.commands,function(n){return!!(e=t.match(n.regexp))});return r?r.command.getEmptyLabel(t):n.localize("noCommands","No commands matching")},e=__decorate([__param(0,h.IQuickOpenService)],e)}(g);e.CommandQuickOpenHandler=x;var E=function(t){function e(e,n,r,o){t.call(this,e,n),this.quickOpenService=o,this.prefix=r,this.enabled=!!this.quickOpenService}return __extends(e,t),e.prototype.run=function(t){return this.quickOpenService.show(this.prefix),r.TPromise.as(null)},e=__decorate([__param(3,h.IQuickOpenService)],e)}(a.Action);e.QuickOpenAction=E});