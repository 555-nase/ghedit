/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};define(["require","exports","vs/nls","vs/base/browser/builder","vs/base/browser/dnd","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/workbench/services/activity/common/activityService","vs/base/common/event","vs/css!./media/activityaction"],function(e,t,i,s,n,a,o,d,c){"use strict";var h=function(e){function t(t,i,s){e.call(this,t,i,s),this._onDidChangeBadge=new c.Emitter,this.badge=null}return __extends(t,e),Object.defineProperty(t.prototype,"onDidChangeBadge",{get:function(){return this._onDidChangeBadge.event},enumerable:!0,configurable:!0}),t.prototype.activate=function(){this.checked||this._setChecked(!0)},t.prototype.deactivate=function(){this.checked&&this._setChecked(!1)},t.prototype.getBadge=function(){return this.badge},t.prototype.setBadge=function(e){this.badge=e,this._onDidChangeBadge.fire(this)},t}(a.Action);t.ActivityAction=h;var r=function(e){function t(t,i,s){void 0===i&&(i=t.label),void 0===s&&(s=null),e.call(this,null,t),this.cssClass=t["class"],this.name=i,this._keybinding=s,t.onDidChangeBadge(this._handleBadgeChangeEvenet,this,this._callOnDispose)}return __extends(t,e),t.prototype.render=function(t){var i=this;e.prototype.render.call(this,t),this.$e=s.$("a.action-label").attr({tabIndex:"0",role:"button"}).appendTo(this.builder),this.cssClass&&this.$e.addClass(this.cssClass),this.$badge=this.builder.div({"class":"badge"},function(e){i.$badgeContent=e.div({"class":"badge-content"})}),this.$badge.hide(),this.keybinding=this._keybinding,[this.$badge,this.$e].forEach(function(e){return new n.DelayedDragHandler(e.getHTMLElement(),function(){i.getAction().checked||i.getAction().run()})})},t.prototype.focus=function(){this.$e.domFocus()},t.prototype.setBadge=function(e){this.updateBadge(e)},Object.defineProperty(t.prototype,"keybinding",{set:function(e){if(this._keybinding=e,this.$e){var t;t=e?i.localize("titleKeybinding","{0} ({1})",this.name,e):this.name,this.$e.title(t),this.$badge.title(t)}},enumerable:!0,configurable:!0}),t.prototype.updateBadge=function(e){if(this.$badgeContent.empty(),this.$badge.hide(),e){if(e instanceof d.NumberBadge){var t=e.number;t&&(this.$badgeContent.text(t>99?"99+":t.toString()),this.$badge.show())}else e instanceof d.TextBadge?(this.$badgeContent.text(e.text),this.$badge.show()):e instanceof d.IconBadge?this.$badge.show():e instanceof d.ProgressBadge&&this.$badge.show();this.$e.attr("aria-label",this.name+" - "+e.getDescription())}},t.prototype._updateClass=function(){this.cssClass&&this.$badge.removeClass(this.cssClass),this.cssClass=this.getAction()["class"],this.$badge.addClass(this.cssClass)},t.prototype._updateChecked=function(){this.getAction().checked?this.$e.addClass("active"):this.$e.removeClass("active")},t.prototype._handleBadgeChangeEvenet=function(){var e=this.getAction();e instanceof h&&this.updateBadge(e.getBadge())},t.prototype._updateEnabled=function(){this.getAction().enabled?this.builder.removeClass("disabled"):this.builder.addClass("disabled")},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.$badge.destroy(),this.$e.destroy()},t}(o.BaseActionItem);t.ActivityActionItem=r});