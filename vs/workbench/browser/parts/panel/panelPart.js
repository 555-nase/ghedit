/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define(["require","exports","vs/nls","vs/base/common/winjs.base","vs/base/common/keyCodes","vs/base/common/actions","vs/base/browser/dom","vs/platform/platform","vs/workbench/browser/actionBarRegistry","vs/platform/actions/common/actions","vs/workbench/common/actionRegistry","vs/workbench/browser/parts/compositePart","vs/workbench/browser/panel","vs/workbench/services/panel/common/panelService","vs/workbench/services/part/common/partService","vs/platform/storage/common/storage","vs/platform/contextview/browser/contextView","vs/platform/event/common/event","vs/platform/message/common/message","vs/platform/telemetry/common/telemetry","vs/platform/keybinding/common/keybinding","vs/platform/instantiation/common/instantiation","vs/css!./media/panelpart"],function(e,t,n,i,r,o,a,s,c,l,p,v,m,u,f,h,_,d,P,y,g,b){"use strict";var S=function(e){function t(n,i,r,o,a,l,p,v,u){e.call(this,i,r,o,a,l,p,v,u,s.Registry.as(m.Extensions.Panels),t.activePanelSettingsKey,"panel","panel",c.Scope.PANEL,n)}return __extends(t,e),t.prototype.create=function(t){var n=this;e.prototype.create.call(this,t),a.addStandardDisposableListener(this.getContainer().getHTMLElement(),"keyup",function(e){e.equals(r.CommonKeybindings.ESCAPE)&&(n.partService.setPanelHidden(!0),e.preventDefault())})},t.prototype.openPanel=function(e,t){if(this.blockOpeningPanel)return i.TPromise.as(null);if(this.partService.isPanelHidden())try{this.blockOpeningPanel=!0,this.partService.setPanelHidden(!1)}finally{this.blockOpeningPanel=!1}return this.openComposite(e,t)},t.prototype.getActions=function(){return[this.instantiationService.createInstance(w,w.ID,w.LABEL)]},t.prototype.getActivePanel=function(){return this.getActiveComposite()},t.prototype.getLastActivePanelId=function(){return this.getLastActiveCompositetId()},t.prototype.hideActivePanel=function(){return this.hideActiveComposite()},t.activePanelSettingsKey="workbench.panelpart.activepanelid",t=__decorate([__param(1,P.IMessageService),__param(2,h.IStorageService),__param(3,d.IEventService),__param(4,y.ITelemetryService),__param(5,_.IContextMenuService),__param(6,f.IPartService),__param(7,g.IKeybindingService),__param(8,b.IInstantiationService)],t)}(v.CompositePart);t.PanelPart=S;var w=function(e){function t(t,n,i){e.call(this,t,n,"hide-panel-action"),this.partService=i}return __extends(t,e),t.prototype.run=function(){return this.partService.setPanelHidden(!0),i.TPromise.as(!0)},t.ID="workbench.action.closePanel",t.LABEL=n.localize("closePanel","Close"),t=__decorate([__param(2,f.IPartService)],t)}(o.Action),A=function(e){function t(t,n,i){e.call(this,t,n,null),this.partService=i}return __extends(t,e),t.prototype.run=function(){return this.partService.setPanelHidden(!this.partService.isPanelHidden()),i.TPromise.as(!0)},t.ID="workbench.action.togglePanel",t.LABEL=n.localize("togglePanel","Toggle Panel Visibility"),t=__decorate([__param(2,f.IPartService)],t)}(o.Action),I=function(e){function t(t,n,i,r){e.call(this,t,n),this.panelService=i,this.partService=r}return __extends(t,e),t.prototype.run=function(){if(this.partService.isPanelHidden())this.partService.setPanelHidden(!1);else{var e=this.panelService.getActivePanel();e&&e.focus()}return i.TPromise.as(!0)},t.ID="workbench.action.focusPanel",t.LABEL=n.localize("focusPanel","Focus into Panel"),t=__decorate([__param(2,u.IPanelService),__param(3,f.IPartService)],t)}(o.Action),k=s.Registry.as(p.Extensions.WorkbenchActions);k.registerWorkbenchAction(new l.SyncActionDescriptor(A,A.ID,A.LABEL,{primary:r.KeyMod.CtrlCmd|r.KeyCode.KEY_J}),"View: Toggle Panel Visibility",n.localize("view","View")),k.registerWorkbenchAction(new l.SyncActionDescriptor(I,I.ID,I.LABEL),"View: Focus into Panel",n.localize("view","View"))});