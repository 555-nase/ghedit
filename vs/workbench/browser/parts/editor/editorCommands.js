/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
define(["require","exports","vs/nls","vs/base/common/types","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/configuration/common/configuration","vs/workbench/services/group/common/groupService","vs/workbench/common/editor","vs/workbench/services/editor/common/editorService","vs/editor/common/editorCommon","vs/platform/keybinding/common/keybinding","vs/platform/editor/common/editor"],function(i,o,t,e,n,r,s,v,c,a,d,g){"use strict";function u(){m()}function m(){n.KeybindingsRegistry.registerCommandDesc({id:v.EditorCommands.MoveActiveEditor,weight:n.KeybindingsRegistry.WEIGHT.workbenchContrib(),when:d.KbExpr.has(a.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),primary:null,handler:function(i,o){return E(o,i)},description:{description:t.localize("editorCommand.activeEditorMove.description","Move the active editor by tabs or groups"),args:[{name:t.localize("editorCommand.activeEditorMove.arg.name","Active editor move argument"),description:t.localize("editorCommand.activeEditorMove.arg.description","\n\t\t\t\t\t\tArgument Properties:\n\t\t\t\t\t\t'to': String value providing where to move.\n\t\t\t\t\t\t'by': String value providing the unit for move. By tab or by group.\n\t\t\t\t\t\t'value': Number value providing how many positions or an absolute position to move.\n\t\t\t\t\t"),constraint:l}]}})}function E(i,o){void 0===i&&(i={});var t=!!o.get(r.IConfigurationService).getConfiguration().workbench.editor.showTabs;i.to=i.to||v.ActiveEditorMovePositioning.RIGHT,i.by=t?i.by||v.ActiveEditorMovePositioningBy.TAB:v.ActiveEditorMovePositioningBy.GROUP,i.value=e.isUndefined(i.value)?1:i.value;var n=o.get(c.IWorkbenchEditorService).getActiveEditor();switch(i.by){case v.ActiveEditorMovePositioningBy.TAB:return b(i,n,o);case v.ActiveEditorMovePositioningBy.GROUP:return p(i,n,o)}}function b(i,o,t){var e=t.get(s.IEditorGroupService),n=e.getStacksModel().getGroup(o.position),r=n.indexOf(o.input);switch(i.to){case v.ActiveEditorMovePositioning.FIRST:r=0;break;case v.ActiveEditorMovePositioning.LAST:r=n.count-1;break;case v.ActiveEditorMovePositioning.LEFT:r-=i.value;break;case v.ActiveEditorMovePositioning.RIGHT:r+=i.value;break;case v.ActiveEditorMovePositioning.CENTER:r=Math.round(n.count/2)-1;break;case v.ActiveEditorMovePositioning.POSITION:r=i.value-1}r=r<0?0:r>=n.count?n.count-1:r,e.moveEditor(o.input,n,n,r)}function p(i,o,t){var e=o.position;switch(i.to){case v.ActiveEditorMovePositioning.FIRST:case v.ActiveEditorMovePositioning.LEFT:e=g.Position.LEFT;break;case v.ActiveEditorMovePositioning.LAST:case v.ActiveEditorMovePositioning.RIGHT:e=g.Position.RIGHT;break;case v.ActiveEditorMovePositioning.CENTER:e=g.Position.CENTER;break;case v.ActiveEditorMovePositioning.POSITION:e=i.value-1}e=g.POSITIONS.indexOf(e)!==-1?e:o.position,t.get(s.IEditorGroupService).moveEditor(o.input,o.position,e)}o.registerEditorComamnds=u;var l=function(i){if(!e.isObject(i))return!1;var o=i;return!!e.isString(o.to)&&(!(!e.isUndefined(o.by)&&!e.isString(o.by))&&!(!e.isUndefined(o.value)&&!e.isNumber(o.value)))}});