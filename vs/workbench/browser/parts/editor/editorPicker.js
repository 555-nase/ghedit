var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},__decorate=this&&this.__decorate||function(t,e,r,o){var i,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(n<3?i(s):n>3?i(e,r,s):i(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},__param=this&&this.__param||function(t,e){return function(r,o){e(r,o,t)}};define(["require","exports","vs/base/common/winjs.base","vs/nls","vs/base/common/labels","vs/base/common/errors","vs/base/common/strings","vs/base/parts/quickopen/common/quickOpen","vs/base/parts/quickopen/browser/quickOpenModel","vs/base/common/scorer","vs/workbench/browser/quickopen","vs/platform/editor/common/editor","vs/workbench/services/group/common/groupService","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/workspace","vs/workbench/common/editor","vs/css!./media/editorpicker"],function(t,e,r,o,i,n,s,c,u,p,a,d,l,h,g,f,v){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var y=function(t){function e(e,r,o,i){t.call(this),this.editor=e,this._group=r,this.editorService=o,this.editorGroupService=i,this.stacks=i.getStacksModel()}return __extends(e,t),e.prototype.getIcon=function(){return this.editor.isDirty()?"dirty":""},e.prototype.getLabel=function(){return this.editor.getName()},Object.defineProperty(e.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0}),e.prototype.getResource=function(){var t=v.asFileEditorInput(this.editor,!0);return t&&t.getResource()},e.prototype.getAriaLabel=function(){return o.localize("entryAriaLabel","{0}, editor group picker",this.getLabel())},e.prototype.getDescription=function(){return this.editor.getDescription()},e.prototype.getExtraClass=function(){return this._group.isPreview(this.editor)?"editor-preview":""},e.prototype.run=function(e,r){return e===c.Mode.OPEN?this.runOpen(r):t.prototype.run.call(this,e,r)},e.prototype.runOpen=function(t){return this.editorService.openEditor(this.editor,null,this.stacks.positionOfGroup(this.group)).done(null,n.onUnexpectedError),!0},e=__decorate([__param(2,h.IWorkbenchEditorService),__param(3,l.IEditorGroupService)],e)}(u.QuickOpenEntryGroup);e.EditorPickerEntry=y;var m=function(t){function e(e,r,o,i){t.call(this),this.instantiationService=e,this.contextService=r,this.editorService=o,this.editorGroupService=i,this.scorerCache=Object.create(null)}return __extends(e,t),e.prototype.getResults=function(t){var e=this;t=t.trim();var n=s.stripWildcards(t).toLowerCase(),c=this.getEditorEntries();if(!c.length)return r.TPromise.as(null);var a=this.editorGroupService.getStacksModel(),d=c.filter(function(r){if(!t)return!0;var o=r.getResource(),s=o?i.getPathLabel(r.getResource(),e.contextService):r.getLabel();if(!p.matches(s,n))return!1;var c=u.QuickOpenEntry.highlight(r,t,!0),a=c.labelHighlights,d=c.descriptionHighlights;return r.setHighlights(a,d),!0});if(t&&d.sort(function(r,o){return r.group!==o.group?a.positionOfGroup(r.group)-a.positionOfGroup(o.group):u.QuickOpenEntry.compareByScore(r,o,t,n,e.scorerCache)}),a.groups.length>1){var l;d.forEach(function(t){l&&l===t.group||(t.setGroupLabel(o.localize("groupLabel","Group: {0}",t.group.label)),t.setShowBorder(!!l),l=t.group)})}return r.TPromise.as(new u.QuickOpenModel(d))},e.prototype.onClose=function(t){this.scorerCache=Object.create(null)},e=__decorate([__param(0,g.IInstantiationService),__param(1,f.IWorkspaceContextService),__param(2,h.IWorkbenchEditorService),__param(3,l.IEditorGroupService)],e)}(a.QuickOpenHandler);e.BaseEditorPicker=m;var E=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.getEditorEntries=function(){var t=this,e=this.editorGroupService.getStacksModel(),r=e.groupAt(this.getPosition());return r?r.getEditors(!0).map(function(e,o){return t.instantiationService.createInstance(y,e,r)}):[]},e.prototype.getEmptyLabel=function(t){return t?o.localize("noResultsFoundInGroup","No matching opened editor found in group"):o.localize("noOpenedEditors","List of opened editors is currently empty")},e.prototype.getAutoFocus=function(e,r){if(e||!r)return{autoFocusFirstEntry:!0};var o=this.editorGroupService.getStacksModel(),i=o.groupAt(this.getPosition());if(!i)return t.prototype.getAutoFocus.call(this,e);var n=r&&r.keybindings.some(function(t){return t.hasShift()});return n?{autoFocusLastEntry:!0}:{autoFocusFirstEntry:1===i.count,autoFocusSecondEntry:i.count>1}},e}(m);e.EditorGroupPicker=E;var _=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.getPosition=function(){return d.Position.LEFT},e}(E);e.LeftEditorGroupPicker=_;var b=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.getPosition=function(){var t=this.editorGroupService.getStacksModel();return t.groups.length>2?d.Position.CENTER:-1},e}(E);e.CenterEditorGroupPicker=b;var k=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.getPosition=function(){var t=this.editorGroupService.getStacksModel();return t.groups.length>2?d.Position.RIGHT:d.Position.CENTER},e}(E);e.RightEditorGroupPicker=k;var S=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.getEditorEntries=function(){var t=this,e=[],r=this.editorGroupService.getStacksModel();return r.groups.forEach(function(r,o){r.getEditors().forEach(function(o,i){e.push(t.instantiationService.createInstance(y,o,r))})}),e},e.prototype.getEmptyLabel=function(t){return t?o.localize("noResultsFound","No matching opened editor found"):o.localize("noOpenedEditors","List of opened editors is currently empty")},e.prototype.getAutoFocus=function(e){return e?{autoFocusFirstEntry:!0}:t.prototype.getAutoFocus.call(this,e)},e}(m);e.AllEditorsPicker=S});