/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(t,r,s):i(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s},__param=this&&this.__param||function(e,t){return function(r,o){t(r,o,e)}};define(["require","exports","vs/nls","vs/base/common/winjs.base","vs/base/browser/builder","vs/base/browser/ui/resourceviewer/resourceViewer","vs/workbench/browser/parts/editor/baseEditor","vs/workbench/common/editor/binaryEditorModel","vs/workbench/services/editor/common/editorService","vs/platform/telemetry/common/telemetry","vs/base/browser/ui/scrollbar/scrollableElement","vs/base/common/scrollable"],function(e,t,r,o,i,n,s,a,c,l,u,p){"use strict";var d=function(e){function t(t,r,o){e.call(this,t,r),this._editorService=o}return __extends(t,e),t.prototype.getTitle=function(){return this.getInput()?this.getInput().getName():r.localize("binaryEditor","Binary Viewer")},Object.defineProperty(t.prototype,"editorService",{get:function(){return this._editorService},enumerable:!0,configurable:!0}),t.prototype.createEditor=function(e){var t=document.createElement("div");t.className="binary-container",this.binaryContainer=i.$(t),this.binaryContainer.tabindex(0),this.scrollbar=new u.DomScrollableElement(t,{canUseTranslate3d:!1,horizontal:p.ScrollbarVisibility.Auto,vertical:p.ScrollbarVisibility.Auto}),e.getHTMLElement().appendChild(this.scrollbar.getDomNode())},t.prototype.setInput=function(t,r){var i=this,s=this.getInput();e.prototype.setInput.call(this,t,r);var c=r&&r.forceOpen;return!c&&t.matches(s)?o.TPromise.as(null):this._editorService.resolveEditorModel(t,!0).then(function(e){if(!(e instanceof a.BinaryEditorModel))return o.TPromise.wrapError("Invalid editor input. Binary resource editor requires a model instance of BinaryEditorModel.");if(!i.getInput()||i.getInput()!==t)return null;var r=e;return n.ResourceViewer.show({name:r.getName(),resource:r.getResource(),size:r.getSize()},i.binaryContainer,i.scrollbar),o.TPromise.as(null)})},t.prototype.clearInput=function(){i.$(this.binaryContainer).empty(),e.prototype.clearInput.call(this)},t.prototype.layout=function(e){this.binaryContainer.size(e.width,e.height),this.scrollbar.scanDomNode()},t.prototype.focus=function(){this.binaryContainer.domFocus()},t.prototype.dispose=function(){this.binaryContainer.destroy(),this.scrollbar.dispose(),e.prototype.dispose.call(this)},t}(s.BaseEditor);t.BaseBinaryResourceEditor=d;var b=function(e){function t(r,o){e.call(this,t.ID,r,o)}return __extends(t,e),t.ID="workbench.editors.binaryResourceEditor",t=__decorate([__param(0,l.ITelemetryService),__param(1,c.IWorkbenchEditorService)],t)}(d);t.BinaryResourceEditor=b});