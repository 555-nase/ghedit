/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};define(["require","exports","vs/base/common/errors","vs/base/browser/dom","vs/workbench/browser/parts/editor/titleControl","vs/css!./media/notabstitle"],function(t,e,i,o,n){"use strict";var s=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.setContext=function(e){t.prototype.setContext.call(this,e),this.editorActionsToolbar.context={group:e}},e.prototype.create=function(e){var i=this;t.prototype.create.call(this,e),this.titleContainer=e,this.toDispose.push(o.addDisposableListener(this.titleContainer,o.EventType.DBLCLICK,function(t){return i.onTitleDoubleClick(t)})),this.toDispose.push(o.addDisposableListener(this.titleContainer,o.EventType.MOUSE_UP,function(t){return i.onTitleClick(t)})),this.titleDecoration=document.createElement("div"),o.addClass(this.titleDecoration,"title-decoration"),this.titleContainer.appendChild(this.titleDecoration);var n=document.createElement("div");o.addClass(n,"title-label"),this.titleLabel=document.createElement("a"),n.appendChild(this.titleLabel),this.titleDescription=document.createElement("span"),n.appendChild(this.titleDescription),this.toDispose.push(o.addDisposableListener(this.titleLabel,o.EventType.CLICK,function(t){return i.onTitleLabelClick(t)})),this.toDispose.push(o.addDisposableListener(this.titleDescription,o.EventType.CLICK,function(t){return i.onTitleLabelClick(t)})),this.titleContainer.appendChild(n);var s=document.createElement("div");o.addClass(s,"title-actions"),this.titleContainer.appendChild(s),this.createEditorActionsToolBar(s),this.toDispose.push(o.addDisposableListener(this.titleContainer,o.EventType.CONTEXT_MENU,function(t){return i.onContextMenu({group:i.context,editor:i.context.activeEditor},t,i.titleContainer)}))},e.prototype.onTitleLabelClick=function(t){o.EventHelper.stop(t,!1),this.dragged||this.quickOpenService.show()},e.prototype.onTitleDoubleClick=function(t){if(o.EventHelper.stop(t),this.context){var e=this.context;this.editorGroupService.pinEditor(e,e.activeEditor)}},e.prototype.onTitleClick=function(t){if(o.EventHelper.stop(t,!1),this.context){var e=this.context,n=this.stacks.positionOfGroup(e);1===t.button?this.editorService.closeEditor(n,e.activeEditor).done(null,i.onUnexpectedError):1!==this.stacks.groups.length||o.isAncestor(t.target||t.srcElement,this.editorActionsToolbar.getContainer().getHTMLElement())||this.editorGroupService.focusGroup(e)}},e.prototype.doRefresh=function(){var t=this.context,e=t&&t.activeEditor;if(!e)return this.titleLabel.innerText="",this.titleDescription.innerText="",void this.clearEditorActionsToolbar();var i=t.isPinned(t.activeEditor),n=this.stacks.isActive(t);i?o.addClass(this.titleContainer,"pinned"):o.removeClass(this.titleContainer,"pinned"),n?o.addClass(this.titleContainer,"active"):o.removeClass(this.titleContainer,"active");var s=e.getName()||"",r=n?e.getDescription()||"":"",l=e.getDescription(!0)||"";r===l&&(l=""),this.titleLabel.innerText=s,this.titleLabel.title=l,this.titleDescription.innerText=r,this.titleDescription.title=l,e.isDirty()?o.addClass(this.titleDecoration,"dirty"):o.removeClass(this.titleDecoration,"dirty"),this.updateEditorActionsToolbar()},e}(n.TitleControl);e.NoTabsTitleControl=s});