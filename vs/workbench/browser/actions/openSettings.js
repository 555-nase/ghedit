var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define(["require","exports","vs/base/common/winjs.base","vs/nls","vs/base/common/uri","vs/base/common/network","vs/base/common/labels","vs/platform/platform","vs/base/common/actions","vs/base/common/strings","vs/workbench/common/actionRegistry","vs/workbench/common/editor/stringEditorInput","vs/platform/configuration/common/model","vs/workbench/services/editor/common/editorService","vs/workbench/services/workspace/common/contextService","vs/platform/configuration/common/configuration","vs/platform/editor/common/editor","vs/workbench/services/group/common/groupService","vs/platform/storage/common/storage","vs/platform/files/common/files","vs/platform/message/common/message","vs/platform/keybinding/common/keybinding","vs/platform/actions/common/actions","vs/platform/instantiation/common/instantiation","vs/base/common/keyCodes"],function(e,t,n,i,o,r,s,a,c,p,l,u,v,f,g,S,m,d,_,h,I,y,b,E,k){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var w=function(e){function t(t,n,i,o,r,s,a,c,p,l){e.call(this,t,n),this.editorService=i,this.editorGroupService=o,this.fileService=r,this.configurationService=s,this.messageService=a,this.contextService=c,this.keybindingService=p,this.instantiationService=l,this.enabled=!0}return __extends(t,e),t.prototype.createIfNotExists=function(e,t){var o=this;return this.fileService.resolveContent(e,{acceptTextOnly:!0}).then(null,function(r){return r.fileOperationResult===h.FileOperationResult.FILE_NOT_FOUND?o.fileService.updateContent(e,t).then(null,function(t){return n.TPromise.wrapError(new Error(i.localize("fail.createSettings","Unable to create '{0}' ({1}).",s.getPathLabel(e,o.contextService),t)))}):n.TPromise.wrapError(r)})},t.prototype.openTwoEditors=function(e,t,n){var i=this;return this.createIfNotExists(t,n).then(function(){return i.editorService.createInput({resource:t}).then(function(t){var n=[{input:e,position:m.Position.LEFT,options:{pinned:!0}},{input:t,position:m.Position.CENTER,options:{pinned:!0}}];return i.editorService.openEditors(n).then(function(){i.editorGroupService.focusGroup(m.Position.CENTER)})})})},t=__decorate([__param(2,f.IWorkbenchEditorService),__param(3,d.IEditorGroupService),__param(4,h.IFileService),__param(5,S.IConfigurationService),__param(6,I.IMessageService),__param(7,g.IWorkspaceContextService),__param(8,y.IKeybindingService),__param(9,E.IInstantiationService)],t)}(c.Action);t.BaseTwoEditorsAction=w;var A=function(e){function t(t,n,i,o,r,s,a,c,p,l){e.call(this,t,n,i,o,r,s,a,c,p,l)}return __extends(t,e),t.prototype.open=function(e,t){return this.openTwoEditors(T.getInstance(this.instantiationService,this.configurationService),t,e)},t=__decorate([__param(2,f.IWorkbenchEditorService),__param(3,d.IEditorGroupService),__param(4,h.IFileService),__param(5,S.IConfigurationService),__param(6,I.IMessageService),__param(7,g.IWorkspaceContextService),__param(8,y.IKeybindingService),__param(9,E.IInstantiationService)],t)}(w);t.BaseOpenSettingsAction=A;var O=function(e){function t(t,n,i,o,r,s,a,c,p,l,u){e.call(this,t,n,i,o,r,s,a,c,p,l),this.storageService=u}return __extends(t,e),t.prototype.run=function(e){var r=this;this.configurationService.hasWorkspaceConfiguration()&&!this.storageService.getBoolean(t.SETTINGS_INFO_IGNORE_KEY,_.StorageScope.WORKSPACE)&&this.messageService.show(I.Severity.Info,{message:i.localize("workspaceHasSettings","The currently opened folder contains workspace settings that may override user settings"),actions:[I.CloseAction,new c.Action("neverShowAgain",i.localize("neverShowAgain","Don't show again"),null,(!0),function(){return r.storageService.store(t.SETTINGS_INFO_IGNORE_KEY,!0,_.StorageScope.WORKSPACE),n.TPromise.as(!0)}),new c.Action("open.workspaceSettings",i.localize("openWorkspaceSettings","Open Workspace Settings"),null,(!0),function(){var e=r.editorService.getVisibleEditors().length;return r.editorService.createInput({resource:r.contextService.toResource(".vscode/settings.json")}).then(function(t){return r.editorService.openEditor(t,{pinned:!0},2===e?m.Position.RIGHT:1===e?m.Position.CENTER:void 0)})})]});var s=i.localize("emptySettingsHeader","Place your settings in this file to overwrite the default settings");return this.open("// "+s+"\n{\n}",o["default"].file(this.contextService.getConfiguration().env.appSettingsPath))},t.ID="workbench.action.openGlobalSettings",t.LABEL=i.localize("openGlobalSettings","Open User Settings"),t.SETTINGS_INFO_IGNORE_KEY="settings.workspace.info.ignore",t=__decorate([__param(2,f.IWorkbenchEditorService),__param(3,d.IEditorGroupService),__param(4,h.IFileService),__param(5,S.IConfigurationService),__param(6,I.IMessageService),__param(7,g.IWorkspaceContextService),__param(8,y.IKeybindingService),__param(9,E.IInstantiationService),__param(10,_.IStorageService)],t)}(A);t.OpenGlobalSettingsAction=O;var C=function(e){function t(t,n,i,o,r,s,a,c,p,l){e.call(this,t,n,i,o,r,s,a,c,p,l)}return __extends(t,e),t.prototype.run=function(e){var t="// "+i.localize("emptyKeybindingsHeader","Place your key bindings in this file to overwrite the defaults")+"\n[\n]";return this.openTwoEditors(x.getInstance(this.instantiationService,this.keybindingService),o["default"].file(this.contextService.getConfiguration().env.appKeybindingsPath),t)},t.ID="workbench.action.openGlobalKeybindings",t.LABEL=i.localize("openGlobalKeybindings","Open Keyboard Shortcuts"),t=__decorate([__param(2,f.IWorkbenchEditorService),__param(3,d.IEditorGroupService),__param(4,h.IFileService),__param(5,S.IConfigurationService),__param(6,I.IMessageService),__param(7,g.IWorkspaceContextService),__param(8,y.IKeybindingService),__param(9,E.IInstantiationService)],t)}(w);t.OpenGlobalKeybindingsAction=C;var N=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.run=function(e){if(!this.contextService.getWorkspace())return void this.messageService.show(I.Severity.Info,i.localize("openFolderFirst","Open a folder first to create workspace settings"));var t=["// "+i.localize("emptySettingsHeader1","Place your settings in this file to overwrite default and user settings."),"{","}"].join("\n");return this.open(t,this.contextService.toResource(".vscode/settings.json"))},t.ID="workbench.action.openWorkspaceSettings",t.LABEL=i.localize("openWorkspaceSettings","Open Workspace Settings"),t}(A);t.OpenWorkspaceSettingsAction=N;var T=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.getInstance=function(e,n){if(!t.INSTANCE){var o=n.getConfiguration(),r=v.getDefaultValuesContent(o.editor.insertSpaces?p.repeat(" ",o.editor.tabSize):"\t"),s="// "+i.localize("defaultSettingsHeader","Overwrite settings by placing them into your settings file.");s+="\n// "+i.localize("defaultSettingsHeader2","See http://go.microsoft.com/fwlink/?LinkId=808995 for the most commonly used settings."),t.INSTANCE=e.createInstance(t,i.localize("defaultName","Default Settings"),null,s+"\n"+r,"application/json",!1)}return t.INSTANCE},t.prototype.getResource=function(){return o["default"].from({scheme:r.Schemas.vscode,authority:"defaultsettings",path:"/settings.json"})},t}(u.StringEditorInput),x=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.getInstance=function(e,n){if(!t.INSTANCE){var o="// "+i.localize("defaultKeybindingsHeader","Overwrite key bindings by placing them into your key bindings file."),r=n.getDefaultKeybindings();t.INSTANCE=e.createInstance(t,i.localize("defaultKeybindings","Default Keyboard Shortcuts"),null,o+"\n"+r,"application/json",!1)}return t.INSTANCE},t.prototype.getResource=function(){return o["default"].from({scheme:r.Schemas.vscode,authority:"defaultsettings",path:"/keybindings.json"})},t}(u.StringEditorInput),P=i.localize("preferences","Preferences"),W=a.Registry.as(l.Extensions.WorkbenchActions);W.registerWorkbenchAction(new b.SyncActionDescriptor(O,O.ID,O.LABEL,{primary:null,mac:{primary:k.KeyMod.CtrlCmd|k.KeyCode.US_COMMA}}),"Preferences: Open User Settings",P),W.registerWorkbenchAction(new b.SyncActionDescriptor(C,C.ID,C.LABEL),"Preferences: Open Keyboard Shortcuts",P),W.registerWorkbenchAction(new b.SyncActionDescriptor(N,N.ID,N.LABEL),"Preferences: Open Workspace Settings",P)});