{"version":3,"sources":["vs/workbench/parts/feedback/browser/feedback.ts"],"names":[],"mappings":"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","file":"vs/workbench/parts/feedback/browser/feedback.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./media/feedback';\nimport nls = require('vs/nls');\nimport {IDisposable} from 'vs/base/common/lifecycle';\nimport {Builder, $} from 'vs/base/browser/builder';\nimport {Dropdown} from 'vs/base/browser/ui/dropdown/dropdown';\nimport {IContextViewService} from 'vs/platform/contextview/browser/contextView';\nimport {ITelemetryService} from 'vs/platform/telemetry/common/telemetry';\nimport {IWorkspaceContextService} from 'vs/workbench/services/workspace/common/contextService';\n\nexport interface IFeedback {\n\tfeedback: string;\n\tsentiment: number;\n}\n\nexport interface IFeedbackService {\n\tsubmitFeedback(feedback: IFeedback): void;\n\tgetCharacterLimit(sentiment: number): number;\n}\n\nexport interface IFeedbackDropdownOptions {\n\tcontextViewProvider: IContextViewService;\n\tfeedbackService?: IFeedbackService;\n}\n\nenum FormEvent {\n\tSENDING,\n\tSENT,\n\tSEND_ERROR\n}\n\nexport class FeedbackDropdown extends Dropdown {\n\tprotected maxFeedbackCharacters: number;\n\n\tprotected feedback: string;\n\tprotected sentiment: number;\n\tprotected aliasEnabled: boolean;\n\tprotected isSendingFeedback: boolean;\n\tprotected autoHideTimeout: number;\n\n\tprotected feedbackService: IFeedbackService;\n\n\tprotected feedbackForm: HTMLFormElement;\n\tprotected feedbackDescriptionInput: HTMLTextAreaElement;\n\tprotected smileyInput: Builder;\n\tprotected frownyInput: Builder;\n\tprotected sendButton: Builder;\n\tprotected remainingCharacterCount: Builder;\n\n\tprotected requestFeatureLink: string;\n\tprotected reportIssueLink: string;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\toptions: IFeedbackDropdownOptions,\n\t\t@ITelemetryService protected telemetryService: ITelemetryService,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService\n\t) {\n\t\tsuper(container, {\n\t\t\tcontextViewProvider: options.contextViewProvider,\n\t\t\tlabelRenderer: (container: HTMLElement): IDisposable => {\n\t\t\t\t$(container).addClass('send-feedback');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\tthis.$el.addClass('send-feedback');\n\t\tthis.$el.title(nls.localize('sendFeedback', \"Tweet Feedback\"));\n\n\t\tthis.feedbackService = options.feedbackService;\n\n\t\tthis.feedback = '';\n\t\tthis.sentiment = 1;\n\t\tthis.maxFeedbackCharacters = this.feedbackService.getCharacterLimit(this.sentiment);\n\n\t\tthis.feedbackForm = null;\n\t\tthis.feedbackDescriptionInput = null;\n\n\t\tthis.smileyInput = null;\n\t\tthis.frownyInput = null;\n\n\t\tthis.sendButton = null;\n\n\t\tconst env = contextService.getConfiguration().env;\n\t\tthis.reportIssueLink = env.sendASmile.reportIssueUrl;\n\t\tthis.requestFeatureLink = env.sendASmile.requestFeatureUrl;\n\t}\n\n\tpublic renderContents(container: HTMLElement): IDisposable {\n\t\tlet $form = $('form.feedback-form').attr({\n\t\t\taction: 'javascript:void(0);',\n\t\t\ttabIndex: '-1'\n\t\t}).appendTo(container);\n\n\t\t$(container).addClass('monaco-menu-container');\n\n\t\tthis.feedbackForm = <HTMLFormElement>$form.getHTMLElement();\n\n\t\t$('h2.title').text(nls.localize(\"label.sendASmile\", \"Tweet us your feedback.\")).appendTo($form);\n\n\t\tthis.invoke($('div.cancel').attr('tabindex', '0'), () => {\n\t\t\tthis.hide();\n\t\t}).appendTo($form);\n\n\t\tlet $content = $('div.content').appendTo($form);\n\n\t\tlet $sentimentContainer = $('div').appendTo($content);\n\t\t$('span').text(nls.localize(\"sentiment\", \"How was your experience?\")).appendTo($sentimentContainer);\n\n\t\tlet $feedbackSentiment = $('div.feedback-sentiment').appendTo($sentimentContainer);\n\n\t\tthis.smileyInput = $('div').addClass('sentiment smile').attr({\n\t\t\t'aria-checked': 'false',\n\t\t\t'aria-label': nls.localize('smileCaption', \"Happy\"),\n\t\t\t'tabindex': 0,\n\t\t\t'role': 'checkbox'\n\t\t});\n\t\tthis.invoke(this.smileyInput, () => { this.setSentiment(true); }).appendTo($feedbackSentiment);\n\n\t\tthis.frownyInput = $('div').addClass('sentiment frown').attr({\n\t\t\t'aria-checked': 'false',\n\t\t\t'aria-label': nls.localize('frownCaption', \"Sad\"),\n\t\t\t'tabindex': 0,\n\t\t\t'role': 'checkbox'\n\t\t});\n\n\t\tthis.invoke(this.frownyInput, () => { this.setSentiment(false); }).appendTo($feedbackSentiment);\n\n\t\tif (this.sentiment === 1) {\n\t\t\tthis.smileyInput.addClass('checked').attr('aria-checked', 'true');\n\t\t} else {\n\t\t\tthis.frownyInput.addClass('checked').attr('aria-checked', 'true');\n\t\t}\n\n\t\tlet $contactUs = $('div.contactus').appendTo($content);\n\n\t\t$('span').text(nls.localize(\"other ways to contact us\", \"Other ways to contact us\")).appendTo($contactUs);\n\n\t\tlet $contactUsContainer = $('div.channels').appendTo($contactUs);\n\n\t\t$('div').append($('a').attr('target', '_blank').attr('href', this.reportIssueLink).text(nls.localize(\"submit a bug\", \"Submit a bug\")).attr('tabindex', '0'))\n\t\t\t.appendTo($contactUsContainer);\n\n\t\t$('div').append($('a').attr('target', '_blank').attr('href', this.requestFeatureLink).text(nls.localize(\"request a missing feature\", \"Request a missing feature\")).attr('tabindex', '0'))\n\t\t\t.appendTo($contactUsContainer);\n\n\t\tthis.remainingCharacterCount = $('span.char-counter').text(this.getCharCountText(0));\n\n\t\t$('h3').text(nls.localize(\"tell us why?\", \"Tell us why?\"))\n\t\t\t.append(this.remainingCharacterCount)\n\t\t\t.appendTo($form);\n\n\t\tthis.feedbackDescriptionInput = <HTMLTextAreaElement>$('textarea.feedback-description').attr({\n\t\t\trows: 3,\n\t\t\tmaxlength: this.maxFeedbackCharacters,\n\t\t\t'aria-label': nls.localize(\"commentsHeader\", \"Comments\")\n\t\t})\n\t\t\t.text(this.feedback).attr('required', 'required')\n\t\t\t.on('keyup', () => {\n\t\t\t\tthis.updateCharCountText();\n\t\t\t})\n\t\t\t.appendTo($form).domFocus().getHTMLElement();\n\n\t\tlet $buttons = $('div.form-buttons').appendTo($form);\n\n\t\tthis.sendButton = this.invoke($('input.send').type('submit').attr('disabled', '').value(nls.localize('tweet', \"Tweet\")).appendTo($buttons), () => {\n\t\t\tif (this.isSendingFeedback) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.onSubmit();\n\t\t});\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tthis.feedbackForm = null;\n\t\t\t\tthis.feedbackDescriptionInput = null;\n\t\t\t\tthis.smileyInput = null;\n\t\t\t\tthis.frownyInput = null;\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate getCharCountText(charCount: number): string {\n\t\tlet remaining = this.maxFeedbackCharacters - charCount;\n\t\tlet text = (remaining === 1)\n\t\t\t? nls.localize(\"character left\", \"character left\")\n\t\t\t: nls.localize(\"characters left\", \"characters left\");\n\n\t\treturn '(' + remaining + ' ' + text + ')';\n\t}\n\n\tprivate updateCharCountText(): void {\n\t\tthis.remainingCharacterCount.text(this.getCharCountText(this.feedbackDescriptionInput.value.length));\n\t\tthis.feedbackDescriptionInput.value ? this.sendButton.removeAttribute('disabled') : this.sendButton.attr('disabled', '');\n\t}\n\n\tprotected setSentiment(smile: boolean): void {\n\t\tif (smile) {\n\t\t\tthis.smileyInput.addClass('checked');\n\t\t\tthis.smileyInput.attr('aria-checked', 'true');\n\t\t\tthis.frownyInput.removeClass('checked');\n\t\t\tthis.frownyInput.attr('aria-checked', 'false');\n\t\t} else {\n\t\t\tthis.frownyInput.addClass('checked');\n\t\t\tthis.frownyInput.attr('aria-checked', 'true');\n\t\t\tthis.smileyInput.removeClass('checked');\n\t\t\tthis.smileyInput.attr('aria-checked', 'false');\n\t\t}\n\t\tthis.sentiment = smile ? 1 : 0;\n\t\tthis.maxFeedbackCharacters = this.feedbackService.getCharacterLimit(this.sentiment);\n\t\tthis.updateCharCountText();\n\t\t$(this.feedbackDescriptionInput).attr({ maxlength: this.maxFeedbackCharacters });\n\t}\n\n\tprotected invoke(element: Builder, callback: () => void): Builder {\n\t\telement.on('click', callback);\n\t\telement.on('keypress', (e) => {\n\t\t\tif (e instanceof KeyboardEvent) {\n\t\t\t\tlet keyboardEvent = <KeyboardEvent>e;\n\t\t\t\tif (keyboardEvent.keyCode === 13 || keyboardEvent.keyCode === 32) { // Enter or Spacebar\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn element;\n\t}\n\n\tpublic hide(): void {\n\t\tif (this.feedbackDescriptionInput) {\n\t\t\tthis.feedback = this.feedbackDescriptionInput.value;\n\t\t}\n\n\t\tif (this.autoHideTimeout) {\n\t\t\tclearTimeout(this.autoHideTimeout);\n\t\t\tthis.autoHideTimeout = null;\n\t\t}\n\n\t\tsuper.hide();\n\t}\n\n\tpublic onEvent(e: Event, activeElement: HTMLElement): void {\n\t\tif (e instanceof KeyboardEvent) {\n\t\t\tlet keyboardEvent = <KeyboardEvent>e;\n\t\t\tif (keyboardEvent.keyCode === 27) { // Escape\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onSubmit(): void {\n\t\tif ((this.feedbackForm.checkValidity && !this.feedbackForm.checkValidity())) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.changeFormStatus(FormEvent.SENDING);\n\n\t\tthis.feedbackService.submitFeedback({\n\t\t\tfeedback: this.feedbackDescriptionInput.value,\n\t\t\tsentiment: this.sentiment\n\t\t});\n\n\t\tthis.changeFormStatus(FormEvent.SENT);\n\t}\n\n\n\tprivate changeFormStatus(event: FormEvent): void {\n\t\tswitch (event) {\n\t\t\tcase FormEvent.SENDING:\n\t\t\t\tthis.isSendingFeedback = true;\n\t\t\t\tthis.sendButton.setClass('send in-progress');\n\t\t\t\tthis.sendButton.value(nls.localize('feedbackSending', \"Sending\"));\n\t\t\t\tbreak;\n\t\t\tcase FormEvent.SENT:\n\t\t\t\tthis.isSendingFeedback = false;\n\t\t\t\tthis.sendButton.setClass('send success').value(nls.localize('feedbackSent', \"Thanks\"));\n\t\t\t\tthis.resetForm();\n\t\t\t\tthis.autoHideTimeout = setTimeout(() => {\n\t\t\t\t\tthis.hide();\n\t\t\t\t}, 1000);\n\t\t\t\tthis.sendButton.off(['click', 'keypress']);\n\t\t\t\tthis.invoke(this.sendButton, () => {\n\t\t\t\t\tthis.hide();\n\t\t\t\t\tthis.sendButton.off(['click', 'keypress']);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase FormEvent.SEND_ERROR:\n\t\t\t\tthis.isSendingFeedback = false;\n\t\t\t\tthis.sendButton.setClass('send error').value(nls.localize('feedbackSendingError', \"Try again\"));\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected resetForm(): void {\n\t\tif (this.feedbackDescriptionInput) {\n\t\t\tthis.feedbackDescriptionInput.value = '';\n\t\t}\n\t\tthis.sentiment = 1;\n\t\tthis.maxFeedbackCharacters = this.feedbackService.getCharacterLimit(this.sentiment);\n\t\tthis.aliasEnabled = false;\n\t}\n}\n"]}