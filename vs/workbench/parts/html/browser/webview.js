/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
define(["require","exports","vs/base/common/uri","vs/base/common/winjs.base","vs/base/common/lifecycle","vs/base/browser/dom","vs/platform/theme/common/themes","vs/platform/commands/common/commands"],function(t,e,o,n,i,r,s,a){"use strict";a.CommandsRegistry.registerCommand("_webview.openDevTools",function(){for(var t=document.querySelectorAll("webview.ready"),e=0;e<t.length;e++)try{t.item(e).openDevTools()}catch(o){console.error(o)}});var c=function(){function e(e,i,s){var a=this;this._parent=e,this._styleElement=i,this._webview=document.createElement("webview"),this._webview.style.width="100%",this._webview.style.height="100%",this._webview.style.outline="0",this._webview.style.opacity="0",this._webview.autoSize="on",this._webview.nodeintegration="on",this._webview.src=t.toUrl("./webview.html"),this._ready=new n.TPromise(function(t){var e=r.addDisposableListener(a._webview,"ipc-message",function(o){"webview-ready"===o.channel&&(r.addClass(a._webview,"ready"),e.dispose(),t(a))})}),this._disposables=[r.addDisposableListener(this._webview,"console-message",function(t){console.log("[Embedded Page] "+t.message)}),r.addDisposableListener(this._webview,"crashed",function(){console.error("embedded page crashed")}),r.addDisposableListener(this._webview,"ipc-message",function(t){if("did-click-link"===t.channel){var e=t.args[0];return void s(o["default"].parse(e))}if("did-set-content"===t.channel)return void(a._webview.style.opacity="")})],this._parent.appendChild(this._webview)}return e.prototype.dispose=function(){this._disposables=i.dispose(this._disposables),this._webview.parentElement.removeChild(this._webview)},e.prototype._send=function(t){for(var e=this,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];this._ready.then(function(){return(n=e._webview).send.apply(n,[t].concat(o));var n}).done(void 0,console.error)},Object.defineProperty(e.prototype,"contents",{set:function(t){this._send("content",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseUrl",{set:function(t){this._send("baseUrl",t)},enumerable:!0,configurable:!0}),e.prototype.focus=function(){this._webview.focus(),this._send("focus")},e.prototype.style=function(t){var e,o=window.getComputedStyle(this._styleElement),n=o.color,i=o.backgroundColor,r=o.fontFamily,a=o.fontSize,c="\n\t\t:root {\n\t\t\t--background-color: "+i+";\n\t\t\t--color: "+n+";\n\t\t\t--font-family: "+r+";\n\t\t\t--font-size: "+a+";\n\t\t}\n\t\tbody {\n\t\t\tbackground-color: var(--background-color);\n\t\t\tcolor: var(--color);\n\t\t\tfont-family: var(--font-family);\n\t\t\tfont-size: var(--font-size);\n\t\t\tmargin: 0;\n\t\t}\n\n\t\timg {\n\t\t\tmax-width: 100%;\n\t\t\tmax-height: 100%;\n\t\t}\n\t\ta:focus,\n\t\tinput:focus,\n\t\tselect:focus,\n\t\ttextarea:focus {\n\t\t\toutline: 1px solid -webkit-focus-ring-color;\n\t\t\toutline-offset: -1px;\n\t\t}\n\t\t::-webkit-scrollbar {\n\t\t\twidth: 14px;\n\t\t\theight: 10px;\n\t\t}";s.isLightTheme(t)?(c+="\n\t\t\t::-webkit-scrollbar-thumb {\n\t\t\t\tbackground-color: rgba(100, 100, 100, 0.4);\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\t\tbackground-color: rgba(100, 100, 100, 0.7);\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb:active {\n\t\t\t\tbackground-color: rgba(0, 0, 0, 0.6);\n\t\t\t}",e="vscode-light"):s.isDarkTheme(t)?(c+="\n\t\t\t::-webkit-scrollbar-thumb {\n\t\t\t\tbackground-color: rgba(121, 121, 121, 0.4);\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\t\tbackground-color: rgba(100, 100, 100, 0.7);\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb:active {\n\t\t\t\tbackground-color: rgba(85, 85, 85, 0.8);\n\t\t\t}",e="vscode-dark"):(c+="\n\t\t\t::-webkit-scrollbar-thumb {\n\t\t\t\tbackground-color: rgba(111, 195, 223, 0.3);\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\t\tbackground-color: rgba(111, 195, 223, 0.8);\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb:active {\n\t\t\t\tbackground-color: rgba(111, 195, 223, 0.8);\n\t\t\t}",e="vscode-high-contrast"),this._send("styles",c,e)},e}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=c});