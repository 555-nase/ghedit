/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},__param=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};define(["require","exports","vs/nls","vs/base/common/actions","vs/base/common/arrays","vs/platform/actions/common/actions","vs/platform/message/common/message","vs/platform/platform","vs/workbench/common/actionRegistry","vs/workbench/services/quickopen/common/quickOpenService","vs/platform/workspace/common/workspace","vs/workbench/services/themes/common/themeService","vs/workbench/parts/extensions/electron-browser/extensions","vs/platform/extensionManagement/common/extensionManagement","vs/workbench/services/viewlet/common/viewletService","vs/base/common/async"],function(e,t,r,n,o,i,c,s,a,l,m,u,h,v,p,f){"use strict";var _=function(e){function t(t,r,n,o,i,c,s,a){e.call(this,t,r),this.contextService=n,this.quickOpenService=o,this.messageService=i,this.themeService=c,this.extensionGalleryService=s,this.viewletService=a}return __extends(t,e),t.prototype.run=function(){var e=this;return this.themeService.getThemes().then(function(t){var n=e.themeService.getTheme(),i=t.filter(function(e){return e.id===n})[0],s=t.map(function(e){return{id:e.id,label:e.label,description:e.description}}).sort(function(e,t){return e.label.localeCompare(t.label)}),a=function(t,n){e.themeService.setTheme(t.id,n).done(null,function(t){return e.messageService.show(c.Severity.Info,r.localize("problemChangingTheme","Problem loading theme: {0}",t.message))})},l=r.localize("themes.selectTheme","Select Color Theme"),m=o.firstIndex(s,function(e){return e.id===n}),u=new f.Delayer(100);if(e.extensionGalleryService.isEnabled()){var v=function(){return e.viewletService.openViewlet(h.VIEWLET_ID,!0).then(function(e){return e}).then(function(e){e.search("category:themes",!0),e.focus()})};s.push({id:"themes.findmore",label:r.localize("findMore","Find more in the Marketplace..."),separator:{border:!0},alwaysShow:!0,run:v})}return e.quickOpenService.pick(s,{placeHolder:l,autoFocus:{autoFocusIndex:m}}).then(function(e){return u.trigger(function(){return a(e||i,!0)},0)},null,function(e){return u.trigger(function(){return a(e,!1)})})})},t.ID="workbench.action.selectTheme",t.LABEL=r.localize("selectTheme.label","Color Theme"),t=__decorate([__param(2,m.IWorkspaceContextService),__param(3,l.IQuickOpenService),__param(4,c.IMessageService),__param(5,u.IThemeService),__param(6,v.IExtensionGalleryService),__param(7,p.IViewletService)],t)}(n.Action),d=r.localize("preferences","Preferences"),b=new i.SyncActionDescriptor(_,_.ID,_.LABEL);s.Registry.as(a.Extensions.WorkbenchActions).registerWorkbenchAction(b,"Preferences: Color Theme",d)});