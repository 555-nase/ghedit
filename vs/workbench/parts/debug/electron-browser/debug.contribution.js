/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,o){function t(){this.constructor=e}for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r]);e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)},__decorate=this&&this.__decorate||function(e,o,t,r){var i,n=arguments.length,c=n<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,o,t,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(n<3?i(c):n>3?i(o,t,c):i(o,t))||c);return n>3&&c&&Object.defineProperty(o,t,c),c},__param=this&&this.__param||function(e,o){return function(t,r){o(t,r,e)}};define(["require","exports","vs/nls","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/editor/common/editorCommon","vs/editor/common/editorCommonExtensions","vs/editor/browser/editorBrowserExtensions","vs/platform/actions/common/actions","vs/platform/platform","vs/platform/instantiation/common/extensions","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/keybinding/common/keybinding","vs/workbench/common/actionRegistry","vs/workbench/browser/viewlet","vs/workbench/browser/panel","vs/workbench/parts/debug/browser/debugViewRegistry","vs/workbench/parts/debug/electron-browser/debugViews","vs/workbench/common/contributions","vs/workbench/parts/debug/common/debug","vs/workbench/parts/debug/browser/debugEditorModelManager","vs/workbench/parts/debug/browser/debugActions","vs/workbench/parts/debug/browser/debugActionsWidget","vs/workbench/parts/debug/electron-browser/debugService","vs/workbench/parts/debug/electron-browser/debugEditorContribution","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/css!../browser/media/debug.contribution","vs/css!../browser/media/debugHover"],function(e,o,t,r,i,n,c,s,b,g,a,u,p,D,l,A,d,E,y,w,h,k,m,C,_,v,S){"use strict";var B=w.IDebugService,I=function(e){function o(o,t,r,i){e.call(this,o,t,w.VIEWLET_ID,r,i)}return __extends(o,e),o.ID=w.VIEWLET_ID,o.LABEL=t.localize("toggleDebugViewlet","Show Debug"),o=__decorate([__param(2,v.IViewletService),__param(3,S.IWorkbenchEditorService)],o)}(l.ToggleViewletAction);s.EditorBrowserRegistry.registerEditorContribution(_.DebugEditorContribution),c.CommonEditorRegistry.registerEditorAction(new c.EditorActionDescriptor(k.ToggleBreakpointAction,k.ToggleBreakpointAction.ID,t.localize("toggleBreakpointAction","Debug: Toggle Breakpoint"),{context:c.ContextKey.EditorTextFocus,primary:r.KeyCode.F9},"Debug: Toggle Breakpoint")),c.CommonEditorRegistry.registerEditorAction(new c.EditorActionDescriptor(k.ShowDebugHoverAction,k.ShowDebugHoverAction.ID,t.localize("showDebugHover","Debug: Show Hover"),{context:c.ContextKey.EditorTextFocus,kbExpr:p.KbExpr.and(p.KbExpr.has(w.CONTEXT_IN_DEBUG_MODE),p.KbExpr.has(n.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS)),primary:r.KeyMod.chord(r.KeyMod.CtrlCmd|r.KeyCode.KEY_K,r.KeyMod.CtrlCmd|r.KeyCode.KEY_I)},"Debug: Show Hover")),c.CommonEditorRegistry.registerEditorAction(new c.EditorActionDescriptor(k.EditorConditionalBreakpointAction,k.EditorConditionalBreakpointAction.ID,t.localize("conditionalBreakpointEditorAction","Debug: Conditional Breakpoint"),(void 0),"Debug: Conditional Breakpoint")),c.CommonEditorRegistry.registerEditorAction({ctor:k.SelectionToReplAction,id:k.SelectionToReplAction.ID,label:t.localize("debugEvaluate","Debug: Evaluate"),alias:"Debug: Evaluate",kbOpts:c.defaultEditorActionKeybindingOptions,menuOpts:{kbExpr:p.KbExpr.and(p.KbExpr.has(n.KEYBINDING_CONTEXT_EDITOR_HAS_NON_EMPTY_SELECTION),p.KbExpr.has(w.CONTEXT_IN_DEBUG_MODE)),group:"debug"}}),c.CommonEditorRegistry.registerEditorAction({ctor:k.RunToCursorAction,id:k.RunToCursorAction.ID,label:t.localize("runToCursor","Debug: Run to Cursor"),alias:"Debug: Run to Cursor",kbOpts:c.defaultEditorActionKeybindingOptions,menuOpts:{kbExpr:p.KbExpr.has(w.CONTEXT_IN_DEBUG_MODE),group:"debug"}}),g.Registry.as(l.Extensions.Viewlets).registerViewlet(new l.ViewletDescriptor("vs/workbench/parts/debug/browser/debugViewlet","DebugViewlet",w.VIEWLET_ID,t.localize("debug","Debug"),"debug",40));var K={primary:r.KeyMod.CtrlCmd|r.KeyMod.Shift|r.KeyCode.KEY_D};g.Registry.as(A.Extensions.Panels).registerPanel(new A.PanelDescriptor("vs/workbench/parts/debug/electron-browser/repl","Repl",w.REPL_ID,t.localize({comment:["Debug is a noun in this context, not a verb."],key:"debugPanel"},"Debug Console"),"repl")),g.Registry.as(A.Extensions.Panels).setDefaultPanelId(w.REPL_ID),d.DebugViewRegistry.registerDebugView(E.VariablesView,10),d.DebugViewRegistry.registerDebugView(E.WatchExpressionsView,20),d.DebugViewRegistry.registerDebugView(E.CallStackView,30),d.DebugViewRegistry.registerDebugView(E.BreakpointsView,40);var T=g.Registry.as(D.Extensions.WorkbenchActions);T.registerWorkbenchAction(new b.SyncActionDescriptor(I,I.ID,I.LABEL,K),"View: Show Debug",t.localize("view","View")),g.Registry.as(y.Extensions.Workbench).registerWorkbenchContribution(h.DebugEditorModelManager),g.Registry.as(y.Extensions.Workbench).registerWorkbenchContribution(m.DebugActionsWidget);var R=t.localize("debugCategory","Debug");T.registerWorkbenchAction(new b.SyncActionDescriptor(k.StartDebugAction,k.StartDebugAction.ID,k.StartDebugAction.LABEL,{primary:r.KeyCode.F5},p.KbExpr.not(w.CONTEXT_IN_DEBUG_MODE)),"Debug: Start Debugging",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.StepOverDebugAction,k.StepOverDebugAction.ID,k.StepOverDebugAction.LABEL,{primary:r.KeyCode.F10},p.KbExpr.has(w.CONTEXT_IN_DEBUG_MODE)),"Debug: Step Over",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.StepIntoDebugAction,k.StepIntoDebugAction.ID,k.StepIntoDebugAction.LABEL,{primary:r.KeyCode.F11},p.KbExpr.has(w.CONTEXT_IN_DEBUG_MODE),u.KeybindingsRegistry.WEIGHT.workbenchContrib(1)),"Debug: Step Into",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.StepOutDebugAction,k.StepOutDebugAction.ID,k.StepOutDebugAction.LABEL,{primary:r.KeyMod.Shift|r.KeyCode.F11},p.KbExpr.has(w.CONTEXT_IN_DEBUG_MODE)),"Debug: Step Out",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.StepBackDebugAction,k.StepBackDebugAction.ID,k.StepBackDebugAction.LABEL,{primary:r.KeyMod.Shift|r.KeyCode.F10},p.KbExpr.has(w.CONTEXT_IN_DEBUG_MODE)),"Debug: Step Back",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.RestartDebugAction,k.RestartDebugAction.ID,k.RestartDebugAction.LABEL,{primary:r.KeyMod.Shift|r.KeyMod.CtrlCmd|r.KeyCode.F5},p.KbExpr.has(w.CONTEXT_IN_DEBUG_MODE)),"Debug: Restart",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.StopDebugAction,k.StopDebugAction.ID,k.StopDebugAction.LABEL,{primary:r.KeyMod.Shift|r.KeyCode.F5},p.KbExpr.has(w.CONTEXT_IN_DEBUG_MODE)),"Debug: Stop",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.ContinueAction,k.ContinueAction.ID,k.ContinueAction.LABEL,{primary:r.KeyCode.F5},p.KbExpr.has(w.CONTEXT_IN_DEBUG_MODE)),"Debug: Continue",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.PauseAction,k.PauseAction.ID,k.PauseAction.LABEL),"Debug: Pause",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.ConfigureAction,k.ConfigureAction.ID,k.ConfigureAction.LABEL),"Debug: Open launch.json",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.ToggleReplAction,k.ToggleReplAction.ID,k.ToggleReplAction.LABEL,{primary:r.KeyMod.CtrlCmd|r.KeyMod.Shift|r.KeyCode.KEY_Y}),"Debug: Debug Console",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.AddFunctionBreakpointAction,k.AddFunctionBreakpointAction.ID,k.AddFunctionBreakpointAction.LABEL),"Debug: Add Function Breakpoint",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.ReapplyBreakpointsAction,k.ReapplyBreakpointsAction.ID,k.ReapplyBreakpointsAction.LABEL),"Debug: Reapply All Breakpoints",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.RunAction,k.RunAction.ID,k.RunAction.LABEL,{primary:r.KeyMod.CtrlCmd|r.KeyCode.F5},p.KbExpr.not(w.CONTEXT_IN_DEBUG_MODE)),"Debug: Start Without Debugging",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.RemoveAllBreakpointsAction,k.RemoveAllBreakpointsAction.ID,k.RemoveAllBreakpointsAction.LABEL),"Debug: Remove All Breakpoints",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.EnableAllBreakpointsAction,k.EnableAllBreakpointsAction.ID,k.EnableAllBreakpointsAction.LABEL),"Debug: Enable All Breakpoints",R),T.registerWorkbenchAction(new b.SyncActionDescriptor(k.DisableAllBreakpointsAction,k.DisableAllBreakpointsAction.ID,k.DisableAllBreakpointsAction.LABEL),"Debug: Disable All Breakpoints",R),u.KeybindingsRegistry.registerCommandDesc({id:"_workbench.startDebug",weight:u.KeybindingsRegistry.WEIGHT.workbenchContrib(0),handler:function(e,o){var r=e.get(w.IDebugService);if("string"==typeof o){var n=r.getConfigurationManager();return n.setConfiguration(o).then(function(){return n.configurationName?r.createSession(!1):i.TPromise.wrapError(new Error(t.localize("launchConfigDoesNotExist","Launch configuration '{0}' does not exist.",o)))})}var c=o&&!!o.noDebug;return r.createSession(c,o)},when:p.KbExpr.not(w.CONTEXT_IN_DEBUG_MODE),primary:void 0}),a.registerSingleton(B,C.DebugService)});