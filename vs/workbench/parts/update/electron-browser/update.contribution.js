/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __decorate=this&&this.__decorate||function(e,o,t,n){var s,r=arguments.length,a=r<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,o,t,n);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(a=(r<3?s(a):r>3?s(o,t,a):s(o,t))||a);return r>3&&a&&Object.defineProperty(o,t,a),a},__param=this&&this.__param||function(e,o){return function(t,n){o(t,n,e)}};define(["require","exports","vs/nls","vs/platform/platform","vs/base/common/winjs.base","vs/workbench/common/contributions","vs/platform/storage/common/storage","vs/platform/workspace/common/workspace","vs/platform/message/common/message","vs/base/common/severity","vs/workbench/electron-browser/update","vs/base/common/actions","electron","semver"],function(e,o,t,n,s,r,a,i,c,l,u,m,p,f){"use strict";var d=new m.Action("close",t.localize("close","Close"),"",(!0),function(){return null}),v=function(e,o,t){return new m.Action(e,o,null,(!0),function(){return p.shell.openExternal(t),s.TPromise.as(null)})},g=function(){function e(o,n,r){var i=n.getConfiguration().env,c=o.get(e.KEY,a.StorageScope.GLOBAL,"");i.releaseNotesUrl&&c&&i.version!==c&&setTimeout(function(){r.show(l["default"].Info,{message:t.localize("releaseNotes","Welcome to {0} v{1}! Would you like to read the Release Notes?",i.appName,i.version),actions:[d,u.ShowReleaseNotesAction(i.releaseNotesUrl,!0)]})},0),
// should we show the new license?
i.licenseUrl&&c&&f.satisfies(c,"<1.0.0")&&f.satisfies(i.version,">=1.0.0")&&setTimeout(function(){r.show(l["default"].Info,{message:t.localize("licenseChanged","Our license terms have changed, please go through them.",i.appName,i.version),actions:[d,v("update.showLicense",t.localize("license","Read License"),i.licenseUrl)]})},0);var g=o.getBoolean(e.INSIDER_KEY,a.StorageScope.GLOBAL,!0);g&&/-alpha$|-insider$/.test(i.version)&&setTimeout(function(){r.show(l["default"].Info,{message:t.localize("insiderBuilds","Insider builds are becoming daily builds!",i.appName,i.version),actions:[d,new m.Action("update.neverAgain",t.localize("neverShowAgain","Never Show Again"),"",(!0),function(){return o.store(e.INSIDER_KEY,!1,a.StorageScope.GLOBAL),s.TPromise.as(null)}),new m.Action("update.insiderBuilds",t.localize("readmore","Read More"),"",(!0),function(){return p.shell.openExternal("http://go.microsoft.com/fwlink/?LinkID=798816"),o.store(e.INSIDER_KEY,!1,a.StorageScope.GLOBAL),s.TPromise.as(null)})]})},0),o.store(e.KEY,i.version,a.StorageScope.GLOBAL)}return e.prototype.getId=function(){return"vs.update"},e.KEY="releaseNotes/lastVersion",e.INSIDER_KEY="releaseNotes/shouldShowInsiderDisclaimer",e=__decorate([__param(0,a.IStorageService),__param(1,i.IWorkspaceContextService),__param(2,c.IMessageService)],e)}();o.UpdateContribution=g,n.Registry.as(r.Extensions.Workbench).registerWorkbenchContribution(g)});