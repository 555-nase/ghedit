var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},__param=this&&this.__param||function(e,t){return function(r,o){t(r,o,e)}};define(["require","exports","vs/base/common/winjs.base","vs/nls","vs/base/common/paths","vs/base/common/labels","vs/base/parts/quickopen/browser/quickOpenModel","vs/workbench/browser/quickopen","vs/workbench/parts/search/common/searchQuery","vs/workbench/common/editor","vs/workbench/services/group/common/groupService","vs/workbench/services/editor/common/editorService","vs/platform/configuration/common/configuration","vs/platform/instantiation/common/instantiation","vs/platform/search/common/search","vs/platform/workspace/common/workspace"],function(e,t,r,o,n,i,s,c,a,u,p,h,l,f,v,m){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var d=function(e){function t(t,r,o,n,i,s,c){e.call(this,n),this.instantiationService=i,this.configurationService=s,this.resource=o,this.name=t,this.description=r}return __extends(t,e),t.prototype.getLabel=function(){return this.name},t.prototype.getAriaLabel=function(){return o.localize("entryAriaLabel","{0}, file picker",this.getLabel())},t.prototype.getDescription=function(){return this.description},t.prototype.getIcon=function(){return"file"},t.prototype.getResource=function(){return this.resource},t.prototype.setRange=function(e){this.range=e},t.prototype.getInput=function(){var e={resource:this.resource,options:{pinned:!this.configurationService.getConfiguration().workbench.editor.enablePreviewFromQuickOpen}};return this.range&&(e.options.selection=this.range),e},t=__decorate([__param(3,h.IWorkbenchEditorService),__param(4,f.IInstantiationService),__param(5,l.IConfigurationService),__param(6,m.IWorkspaceContextService)],t)}(c.EditorQuickOpenEntry);t.FileEntry=d;var _=function(e){function t(t,r,o,n){e.call(this),this.editorGroupService=t,this.instantiationService=r,this.contextService=o,this.searchService=n,this.queryBuilder=this.instantiationService.createInstance(a.QueryBuilder)}return __extends(t,e),t.prototype.getResults=function(e){return this.getResultsWithStats(e).then(function(e){return e[0]})},t.prototype.getResultsWithStats=function(e){e=e.trim();var t;return t=e?this.doFindResults(e):r.TPromise.as([[],void 0]),t.then(function(e){return[new s.QuickOpenModel(e[0]),e[1]]})},t.prototype.doFindResults=function(e){var t=this,r={folderResources:this.contextService.getWorkspace()?[this.contextService.getWorkspace().resource]:[],extraFileResources:u.getOutOfWorkspaceEditorResources(this.editorGroupService,this.contextService),filePattern:e};return this.searchService.search(this.queryBuilder.file(r)).then(function(e){for(var r=[],o=0;o<e.results.length;o++){var s=e.results[o],c=n.basename(s.resource.fsPath),a=i.getPathLabel(n.dirname(s.resource.fsPath),t.contextService);r.push(t.instantiationService.createInstance(d,c,a,s.resource))}return[r,e.stats]})},t.prototype.getGroupLabel=function(){return o.localize("searchResults","search results")},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0}},t=__decorate([__param(0,p.IEditorGroupService),__param(1,f.IInstantiationService),__param(2,m.IWorkspaceContextService),__param(3,v.ISearchService)],t)}(c.QuickOpenHandler);t.OpenFileHandler=_});