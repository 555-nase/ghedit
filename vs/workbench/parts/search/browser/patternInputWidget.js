/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)};define(["require","exports","vs/nls","vs/base/common/strings","vs/base/browser/builder","vs/base/browser/ui/widget","vs/base/common/glob","vs/base/browser/ui/checkbox/checkbox","vs/base/browser/ui/inputbox/inputBox","vs/base/common/keyCodes","vs/base/common/event"],function(t,e,o,n,i,s,r,a,h,p,u){"use strict";var c=function(t){function e(e,n,i){void 0===i&&(i=Object.create(null)),t.call(this),this.contextViewProvider=n,this._onSubmit=this._register(new u.Emitter),this.onSubmit=this._onSubmit.event,this.onOptionChange=null,this.width=i.width||100,this.placeholder=i.placeholder||"",this.ariaLabel=i.ariaLabel||o.localize("defaultLabel","input"),this.toDispose=[],this.pattern=null,this.domNode=null,this.inputNode=null,this.inputBox=null,this.render(),e.appendChild(this.domNode)}return __extends(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.pattern.dispose(),this.toDispose.forEach(function(t){t()}),this.toDispose=[]},e.prototype.on=function(t,o){switch(t){case"keydown":case"keyup":i.$(this.inputBox.inputElement).on(t,o);break;case e.OPTION_CHANGE:this.onOptionChange=o}return this},e.prototype.setWidth=function(t){this.width=t,this.domNode.style.width=this.width+"px",this.contextViewProvider.layout(),this.setInputWidth()},e.prototype.getValue=function(){return this.inputBox.value},e.prototype.setValue=function(t){this.inputBox.value!==t&&(this.inputBox.value=t)},e.prototype.getGlob=function(){var t=this.getValue(),e=this.isGlobPattern();if(t){var o,i=Object.create(null);return o=e?r.splitGlobAware(t,",").map(function(t){return t.trim()}).filter(function(t){return!!t.length}):t.split(",").map(function(t){return n.trim(t.trim(),"/")}).filter(function(t){return!!t.length}).map(function(t){return"."===t[0]&&(t="*"+t),n.format("{{0}/**,**/{1}}",t,t)}),o.reduce(function(t,e){return i[e]=!0,i},i)}},e.prototype.select=function(){this.inputBox.select()},e.prototype.focus=function(){this.inputBox.focus()},e.prototype.isGlobPattern=function(){return this.pattern.checked},e.prototype.setIsGlobPattern=function(t){this.pattern.checked=t,this.setInputWidth()},e.prototype.setInputWidth=function(){var t=this.width-this.pattern.width();this.inputBox.width=t},e.prototype.render=function(){var t=this;this.domNode=document.createElement("div"),this.domNode.style.width=this.width+"px",i.$(this.domNode).addClass("monaco-findInput"),this.inputBox=new h.InputBox(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.ariaLabel||"",validationOptions:{validation:null,showMessage:!0}}),this.onkeyup(this.inputBox.inputElement,function(e){return t.onInputKeyUp(e)}),this.pattern=new a.Checkbox({actionClassName:"pattern",title:o.localize("patternDescription","Use Glob Patterns"),isChecked:!1,onChange:function(e){t.onOptionChange(null),e||t.inputBox.focus(),t.setInputWidth(),t.isGlobPattern()?t.showGlobHelp():t.inputBox.hideMessage()}}),i.$(this.pattern.domNode).on("mouseover",function(){t.isGlobPattern()&&t.showGlobHelp()}),i.$(this.pattern.domNode).on(["mouseleave","mouseout"],function(){t.inputBox.hideMessage()}),this.setInputWidth();var e=document.createElement("div");e.className="controls",e.appendChild(this.pattern.domNode),this.domNode.appendChild(e)},e.prototype.showGlobHelp=function(){this.inputBox.showMessage({type:h.MessageType.INFO,formatContent:!0,content:o.localize("patternHelpInclude","The pattern to match. e.g. **\\*\\*/*.js** to match all JavaScript files or **myFolder/\\*\\*** to match that folder with all children.\n\n**Reference**:\n**\\*** matches 0 or more characters\n**?** matches 1 character\n**\\*\\*** matches zero or more directories\n**[a-z]** matches a range of characters\n**{a,b}** matches any of the patterns)")},!0)},e.prototype.onInputKeyUp=function(t){switch(t.keyCode){case p.KeyCode.Enter:return void this._onSubmit.fire();default:return}},e.OPTION_CHANGE="optionChange",e}(s.Widget);e.PatternInputWidget=c});