var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},__param=this&&this.__param||function(e,t){return function(r,o){t(r,o,e)}};define(["require","exports","vs/base/common/winjs.base","vs/nls","vs/base/common/async","vs/workbench/browser/quickopen","vs/base/parts/quickopen/browser/quickOpenModel","vs/base/common/filters","vs/base/common/labels","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation","vs/platform/workspace/common/workspace","vs/editor/common/services/modeService","vs/platform/configuration/common/configuration","vs/workbench/parts/search/common/search"],function(e,t,r,o,n,i,s,a,c,p,u,m,h,l,f){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var y=function(e){function t(t,r,o,n,i,s,a,c,p){e.call(this,c),this.configurationService=p,this.name=t,this.parameters=r,this.description=o,this.resource=n,this.type=i,this.range=s,this.setHighlights(a)}return __extends(t,e),t.prototype.getLabel=function(){return this.name+this.parameters},t.prototype.getAriaLabel=function(){return o.localize("entryAriaLabel","{0}, symbols picker",this.getLabel())},t.prototype.getName=function(){return this.name},t.prototype.getParameters=function(){return this.parameters},t.prototype.getDescription=function(){return this.description},t.prototype.getType=function(){return this.type},t.prototype.getIcon=function(){return this.type},t.prototype.getInput=function(){var e={resource:this.resource,options:{pinned:!this.configurationService.getConfiguration().workbench.editor.enablePreviewFromQuickOpen}};return this.range&&(e.options.selection={startLineNumber:this.range.startLineNumber,startColumn:this.range.startColumn}),e},t=__decorate([__param(7,p.IWorkbenchEditorService),__param(8,l.IConfigurationService)],t)}(i.EditorQuickOpenEntry),v=function(e){function t(r,o,i,s){e.call(this),this.editorService=r,this.modeService=o,this.instantiationService=i,this.contextService=s,this.delayer=new n.ThrottledDelayer(t.SEARCH_DELAY),this.options=Object.create(null)}return __extends(t,e),t.prototype.setOptions=function(e){this.options=e},t.prototype.canRun=function(){return!0},t.prototype.getResults=function(e){var t=this;e=e.trim();var o;return o=e?this.options.skipDelay?this.doGetResults(e):this.delayer.trigger(function(){return t.doGetResults(e)}):r.TPromise.as([]),o.then(function(e){return new s.QuickOpenModel(e)})},t.prototype.doGetResults=function(e){var t=this;return f.getNavigateToItems(e).then(function(r){return t.toQuickOpenEntries(r,e)})},t.prototype.toQuickOpenEntries=function(e,t){var r=this,o=[];return e.forEach(function(e){if(!r.options.skipLocalSymbols||!e.containerName){var n=a.matchesFuzzy(t,e.name);if(n){var i=e.resourceUri;if("file"===i.scheme){var s=c.getPathLabel(i,r.contextService),p=void 0;p=e.containerName===s?s:e.containerName===i.toString()&&e.containerName.indexOf("/")>=0?e.containerName.substr(e.containerName.lastIndexOf("/")+1):e.containerName&&e.containerName.indexOf(".")>=0?e.containerName.substr(e.containerName.lastIndexOf(".")+1):e.containerName||s,o.push(r.instantiationService.createInstance(y,e.name,e.parameters,p,i,e.type,e.range,n))}}}}),this.options.skipSorting?o:o.sort(this.sort.bind(this,t.toLowerCase()))},t.prototype.sort=function(e,t,r){var o=t.getName().toLowerCase(),n=r.getName().toLowerCase();if(o===n){var i=t.getType(),a=r.getType();return i.localeCompare(a)}return s.QuickOpenEntry.compare(t,r,e)},t.prototype.getGroupLabel=function(){return o.localize("symbols","symbol results")},t.prototype.getEmptyLabel=function(e){return e.length>0?o.localize("noSymbolsMatching","No symbols matching"):o.localize("noSymbolsWithoutInput","Type to search for symbols")},t.prototype.getAutoFocus=function(e){return{autoFocusFirstEntry:!0,autoFocusPrefixMatch:e.trim()}},t.SEARCH_DELAY=500,t=__decorate([__param(0,p.IWorkbenchEditorService),__param(1,h.IModeService),__param(2,u.IInstantiationService),__param(3,m.IWorkspaceContextService)],t)}(i.QuickOpenHandler);t.OpenSymbolHandler=v});