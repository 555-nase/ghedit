{"version":3,"file":"vs/workbench/parts/search/test/browser/searchViewlet.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/workbench/parts/search/test/browser/searchViewlet.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as assert from 'assert';\nimport uri from 'vs/base/common/uri';\nimport {Match, FileMatch, SearchResult} from 'vs/workbench/parts/search/common/searchModel';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {createInstantiationService} from 'vs/platform/instantiation/common/instantiationService';\nimport {SearchSorter, SearchDataSource} from 'vs/workbench/parts/search/browser/searchViewlet';\nimport {TestContextService} from 'vs/workbench/test/browser/servicesTestUtils';\n\nsuite('Search - Viewlet', () => {\n\tlet instantiation: IInstantiationService;\n\n\tsetup(() => {\n\t\tinstantiation = createInstantiationService({\n\t\t\tmodelService: {\n\t\t\t\tgetModel: () => null\n\t\t\t},\n\t\t\trequestService: {\n\t\t\t\tgetRequestUrl: () => 'file:///folder/file.txt'\n\t\t\t},\n\t\t\tcontextService: new TestContextService()\n\t\t});\n\t});\n\n\ttest('Data Source', function () {\n\t\tlet ds = new SearchDataSource();\n\t\tlet result = instantiation.createInstance(SearchResult, null);\n\t\tresult.append([{\n\t\t\tresource: uri.parse('file:///c:/foo'),\n\t\t\tlineMatches: [{ lineNumber: 1, preview: 'bar', offsetAndLengths: [[0, 1]] }]\n\t\t}]);\n\n\t\tlet fileMatch = result.matches()[0];\n\t\tlet lineMatch = fileMatch.matches()[0];\n\n\t\tassert.equal(ds.getId(null, result), 'root');\n\t\tassert.equal(ds.getId(null, fileMatch), 'file:///c%3A/foo');\n\t\tassert.equal(ds.getId(null, lineMatch), 'file:///c%3A/foo>1>0');\n\n\t\tassert(!ds.hasChildren(null, 'foo'));\n\t\tassert(ds.hasChildren(null, result));\n\t\tassert(ds.hasChildren(null, fileMatch));\n\t\tassert(!ds.hasChildren(null, lineMatch));\n\t});\n\n\ttest('Sorter', function () {\n\t\tlet fileMatch1 = new FileMatch(null, uri.file('C:\\\\foo'));\n\t\tlet fileMatch2 = new FileMatch(null, uri.file('C:\\\\with\\\\path'));\n\t\tlet fileMatch3 = new FileMatch(null, uri.file('C:\\\\with\\\\path\\\\foo'));\n\t\tlet lineMatch1 = new Match(fileMatch1, 'bar', 1, 1, 1);\n\t\tlet lineMatch2 = new Match(fileMatch1, 'bar', 2, 1, 1);\n\t\tlet lineMatch3 = new Match(fileMatch1, 'bar', 2, 1, 1);\n\n\t\tlet s = new SearchSorter();\n\n\t\tassert(s.compare(null, fileMatch1, fileMatch2) < 0);\n\t\tassert(s.compare(null, fileMatch2, fileMatch1) > 0);\n\t\tassert(s.compare(null, fileMatch1, fileMatch1) === 0);\n\t\tassert(s.compare(null, fileMatch2, fileMatch3) < 0);\n\n\t\tassert(s.compare(null, lineMatch1, lineMatch2) < 0);\n\t\tassert(s.compare(null, lineMatch2, lineMatch1) > 0);\n\t\tassert(s.compare(null, lineMatch2, lineMatch3) === 0);\n\t});\n});"]}