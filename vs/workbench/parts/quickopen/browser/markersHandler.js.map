{"version":3,"sources":["vs/workbench/parts/quickopen/browser/markersHandler.ts"],"names":[],"mappings":"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","file":"vs/workbench/parts/quickopen/browser/markersHandler.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport 'vs/css!./media/markerHandler';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport * as strings from 'vs/base/common/strings';\nimport * as network from 'vs/base/common/network';\nimport * as errors from 'vs/base/common/errors';\nimport * as dom from 'vs/base/browser/dom';\nimport * as nls from 'vs/nls';\nimport {ICommonCodeEditor, IEditorViewState} from 'vs/editor/common/editorCommon';\nimport {PathLabelProvider} from 'vs/base/common/labels';\nimport {ITree, IElementCallback} from 'vs/base/parts/tree/browser/tree';\nimport Severity from 'vs/base/common/severity';\nimport {QuickOpenHandler} from 'vs/workbench/browser/quickopen';\nimport {BaseTextEditor} from 'vs/workbench/browser/parts/editor/textEditor';\nimport {QuickOpenAction} from 'vs/workbench/browser/actions/quickOpenAction';\nimport {Mode, IContext, IAutoFocus} from 'vs/base/parts/quickopen/common/quickOpen';\nimport {QuickOpenEntryItem, QuickOpenModel} from 'vs/base/parts/quickopen/browser/quickOpenModel';\nimport {IWorkbenchEditorService} from 'vs/workbench/services/editor/common/editorService';\nimport {IMarkerService, IMarker} from 'vs/platform/markers/common/markers';\nimport {IWorkspaceContextService} from 'vs/platform/workspace/common/workspace';\nimport {IQuickOpenService} from 'vs/workbench/services/quickopen/common/quickOpenService';\nimport {ICodeEditorService} from 'vs/editor/common/services/codeEditorService';\nimport {IFilter, or, matchesContiguousSubString, matchesPrefix} from 'vs/base/common/filters';\nimport {HighlightedLabel} from 'vs/base/browser/ui/highlightedlabel/highlightedLabel';\n\nclass MarkerEntry extends QuickOpenEntryItem {\n\n\tprivate _editorService: IWorkbenchEditorService;\n\tprivate _codeEditorService: ICodeEditorService;\n\tprivate _labelProvider: PathLabelProvider;\n\n\tprivate _marker: IMarker;\n\tprivate _label: string;\n\tprivate _description: string;\n\n\tconstructor(editorService: IWorkbenchEditorService, codeEditorService: ICodeEditorService, contextService: IWorkspaceContextService, marker: IMarker) {\n\t\tsuper();\n\t\tthis._editorService = editorService;\n\t\tthis._codeEditorService = codeEditorService;\n\t\tthis._labelProvider = new PathLabelProvider(contextService);\n\t\tthis._marker = marker;\n\n\t\tconst {message, source, resource, startLineNumber, startColumn} = marker;\n\t\tthis._label = source ? nls.localize('marker.msg', '[{0}] {1}', source, message) : message;\n\t\tthis._description = nls.localize('marker.desc', '{0}({1},{2})', this._labelProvider.getLabel(resource.fsPath), startLineNumber, startColumn);\n\t}\n\n\tprivate static _filter: IFilter = or(matchesPrefix, matchesContiguousSubString);\n\n\tpublic update(query: string): void {\n\n\t\tif (this._marker.resource.scheme === network.Schemas.inMemory) {\n\t\t\t// ignore inmemory-models\n\t\t\tthis.setHidden(true);\n\t\t\treturn;\n\t\t}\n\n\t\tconst labelHighlights = MarkerEntry._filter(query, this._label);\n\t\tconst descHighlights = MarkerEntry._filter(query, this._description);\n\t\tthis.setHighlights(labelHighlights, descHighlights);\n\t\tthis.setHidden(!labelHighlights && !descHighlights);\n\t}\n\n\tpublic getAriaLabel(): string {\n\t\treturn nls.localize('markerAriaLabel', \"{0}, errors and warnings\", this._label);\n\t}\n\n\tpublic getHeight(): number {\n\t\treturn 48;\n\t}\n\n\tpublic render(tree: ITree, container: HTMLElement, previousCleanupFn: IElementCallback): IElementCallback {\n\t\tdom.clearNode(container);\n\n\t\tlet [labelHighlights, descHighlights] = this.getHighlights();\n\t\tconst row1 = document.createElement('div');\n\t\tdom.addClass(row1, 'row');\n\t\tconst row2 = document.createElement('div');\n\t\tdom.addClass(row2, 'row');\n\n\t\t// fill first row with icon and label\n\t\tconst icon = document.createElement('div');\n\t\tdom.addClass(icon, `severity ${Severity.toString(this._marker.severity).toLowerCase()}`);\n\t\trow1.appendChild(icon);\n\t\tconst labelContainer = document.createElement('div');\n\t\tdom.addClass(labelContainer, 'inline');\n\t\tnew HighlightedLabel(labelContainer).set(this._label, labelHighlights);\n\t\trow1.appendChild(labelContainer);\n\n\t\t// fill second row with descriptions\n\t\tconst descContainer = document.createElement('div');\n\t\tdom.addClass(descContainer, 'inline description');\n\t\tnew HighlightedLabel(descContainer).set(this._description, descHighlights);\n\t\trow2.appendChild(descContainer);\n\n\t\tcontainer.appendChild(row1);\n\t\tcontainer.appendChild(row2);\n\t\treturn;\n\t}\n\n\tpublic run(mode: Mode, context: IContext): boolean {\n\t\tswitch (mode) {\n\t\t\tcase Mode.OPEN:\n\t\t\t\tthis._open();\n\t\t\t\treturn true;\n\t\t\tcase Mode.PREVIEW:\n\t\t\t\tthis._preview();\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tprivate _open(): void {\n\t\tthis._editorService.openEditor({\n\t\t\tresource: this._marker.resource,\n\t\t\toptions: {\n\t\t\t\tselection: {\n\t\t\t\t\tstartLineNumber: this._marker.startLineNumber,\n\t\t\t\t\tstartColumn: this._marker.startColumn,\n\t\t\t\t\tendLineNumber: this._marker.endLineNumber,\n\t\t\t\t\tendColumn: this._marker.endColumn\n\t\t\t\t}\n\t\t\t}\n\t\t}).done(null, errors.onUnexpectedError);\n\t}\n\n\tprivate _preview(): void {\n\t\tconst editors = this._codeEditorService.listCodeEditors();\n\t\tlet editor: ICommonCodeEditor;\n\t\tfor (let candidate of editors) {\n\t\t\tif (!candidate.getModel()\n\t\t\t\t|| candidate.getModel().getAssociatedResource().toString() !== this._marker.resource.toString()) {\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!editor || this._editorService.getActiveEditor()\n\t\t\t\t&& candidate === this._editorService.getActiveEditor().getControl()) {\n\n\t\t\t\teditor = candidate;\n\t\t\t}\n\t\t}\n\n\t\tif (editor) {\n\t\t\teditor.revealRangeInCenter(this._marker);\n\t\t}\n\t}\n}\n\nexport class MarkersHandler extends QuickOpenHandler {\n\n\tprivate _markerService: IMarkerService;\n\tprivate _editorService: IWorkbenchEditorService;\n\tprivate _codeEditorService: ICodeEditorService;\n\tprivate _contextService: IWorkspaceContextService;\n\tprivate _activeSession: [QuickOpenModel, IEditorViewState];\n\n\tconstructor(\n\t\t@IMarkerService markerService: IMarkerService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService\n\t) {\n\t\tsuper();\n\n\t\tthis._markerService = markerService;\n\t\tthis._editorService = editorService;\n\t\tthis._codeEditorService = codeEditorService;\n\t\tthis._contextService = contextService;\n\t}\n\n\tpublic getAriaLabel(): string {\n\t\treturn nls.localize('markersHandlerAriaLabel', \"Type to narrow down errors and warnings\");\n\t}\n\n\tpublic getResults(searchValue: string): TPromise<QuickOpenModel> {\n\n\t\tif (!this._activeSession) {\n\n\t\t\t// 1st model\n\t\t\tconst model = new QuickOpenModel(this._markerService.read({ take: 500 })\n\t\t\t\t.sort(MarkersHandler._sort)\n\t\t\t\t.map(marker => new MarkerEntry(this._editorService, this._codeEditorService, this._contextService, marker)));\n\n\t\t\t// 2nd viewstate\n\t\t\tconst editor = this._editorService.getActiveEditor();\n\t\t\tlet viewState: IEditorViewState;\n\t\t\tif (editor instanceof BaseTextEditor) {\n\t\t\t\tviewState = editor.getControl().saveViewState();\n\t\t\t}\n\n\t\t\tthis._activeSession = [model, viewState];\n\t\t}\n\n\t\t// filter\n\t\tsearchValue = searchValue.trim();\n\t\tconst [model] = this._activeSession;\n\t\tfor (let entry of model.entries) {\n\t\t\t(<MarkerEntry>entry).update(searchValue);\n\t\t}\n\n\t\treturn TPromise.as(model);\n\t}\n\n\tpublic onClose(canceled: boolean): void {\n\t\tif (this._activeSession) {\n\t\t\tif (canceled) {\n\t\t\t\tconst [, viewState] = this._activeSession;\n\t\t\t\tif (viewState) {\n\t\t\t\t\tconst editor = this._editorService.getActiveEditor();\n\t\t\t\t\t(<ICommonCodeEditor>editor.getControl()).restoreViewState(viewState);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._activeSession = undefined;\n\t\t}\n\t}\n\n\tprivate static _sort(a: IMarker, b: IMarker): number {\n\t\tlet ret: number;\n\n\t\t// severity matters first\n\t\tret = Severity.compare(a.severity, b.severity);\n\t\tif (ret !== 0) {\n\t\t\treturn ret;\n\t\t}\n\n\t\t// source matters\n\t\tif (a.source && b.source) {\n\t\t\tret = a.source.localeCompare(b.source);\n\t\t\tif (ret !== 0) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\t// file name matters for equal severity\n\t\tret = strings.localeCompare(a.resource.fsPath, b.resource.fsPath);\n\t\tif (ret !== 0) {\n\t\t\treturn ret;\n\t\t}\n\n\t\t// start line matters\n\t\tret = a.startLineNumber - b.startLineNumber;\n\t\tif (ret !== 0) {\n\t\t\treturn ret;\n\t\t}\n\n\t\t// start column matters\n\t\tret = a.startColumn - b.startColumn;\n\t\tif (ret !== 0) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tpublic getClass(): string {\n\t\treturn 'marker-handler';\n\t}\n\n\tpublic getAutoFocus(searchValue: string): IAutoFocus {\n\t\treturn {\n\t\t\tautoFocusFirstEntry: !!searchValue\n\t\t};\n\t}\n\n\tpublic getEmptyLabel(searchString: string): string {\n\t\tif (searchString.length > 0) {\n\t\t\treturn nls.localize('noErrorsAndWarningsMatching', \"No errors or warnings matching\");\n\t\t}\n\t\treturn nls.localize('noErrorsAndWarnings', \"No errors or warnings\");\n\t}\n\n}\n\nexport class GotoMarkerAction extends QuickOpenAction {\n\n\tstatic Prefix = '!';\n\tstatic Id = 'workbench.action.showErrorsWarnings';\n\tstatic Label = nls.localize('label', \"Show Errors and Warnings\");\n\n\tconstructor(actionId: string, actionLabel: string, @IQuickOpenService quickOpenService: IQuickOpenService) {\n\t\tsuper(actionId, actionLabel, GotoMarkerAction.Prefix, quickOpenService);\n\t}\n}\n"]}