/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},__param=this&&this.__param||function(e,t){return function(r,o){t(r,o,e)}};define(["require","exports","vs/base/common/async","vs/base/browser/dom","vs/base/common/lifecycle","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/inputbox/inputBox","vs/base/common/keyCodes","vs/platform/contextview/browser/contextView","vs/workbench/browser/panel","vs/workbench/parts/markers/common/messages","vs/workbench/parts/markers/common/constants","vs/workbench/services/part/common/partService","vs/workbench/services/panel/common/panelService","vs/platform/telemetry/common/telemetry","vs/workbench/services/editor/common/editorService","vs/base/parts/tree/browser/treeDefaults"],function(e,t,r,o,n,i,s,a,c,l,p,u,m,d,h,_,v,f){"use strict";var y=function(e){function t(t,r,o,n,i,s){e.call(this,t,r,m["default"].MARKERS_PANEL_ID,n,o,i),this.telemetryService=s}return __extends(t,e),t.prototype.run=function(){var t=e.prototype.run.call(this);return this.isPanelFocussed()&&this.telemetryService.publicLog("problems.used"),t},t.ID="workbench.actions.view.problems",t=__decorate([__param(2,d.IPartService),__param(3,h.IPanelService),__param(4,v.IWorkbenchEditorService),__param(5,_.ITelemetryService)],t)}(p.TogglePanelAction);t.ToggleMarkersPanelAction=y;var b=function(e){function t(t,r,o,n,i,s){e.call(this,t,r,m["default"].MARKERS_PANEL_ID,n,o,i),this.telemetryService=s}return __extends(t,e),t.prototype.run=function(){var t=e.prototype.run.call(this);return this.isPanelFocussed()&&this.telemetryService.publicLog("problems.used"),t},t.ID="workbench.action.showErrorsWarnings",t=__decorate([__param(2,d.IPartService),__param(3,h.IPanelService),__param(4,v.IWorkbenchEditorService),__param(5,_.ITelemetryService)],t)}(p.TogglePanelAction);t.ToggleErrorsAndWarningsAction=b;var S=function(e){function t(t,r,o){e.call(this,t,r),this.telemetryService=o}return __extends(t,e),t.prototype.run=function(t){return this.telemetryService.publicLog("problems.collapseAll.used"),e.prototype.run.call(this,t)},t=__decorate([__param(2,_.ITelemetryService)],t)}(f.CollapseAllAction);t.CollapseAllAction=S;var k=function(e){function t(r){e.call(this,t.ID,u["default"].MARKERS_PANEL_ACTION_TOOLTIP_FILTER,"markers-panel-action-filter",!0),this.markersPanel=r}return __extends(t,e),t.ID="workbench.actions.problems.filter",t}(i.Action);t.FilterAction=k;var w=function(e){function t(t,o,n,i){e.call(this,t,o),this.markersPanel=t,this.contextViewService=n,this.telemetryService=i,this.toDispose=[],this.delayer=new r.Delayer(2e3)}return __extends(t,e),t.prototype.render=function(e){var t=this;o.addClass(e,"markers-panel-action-filter");var r=new a.InputBox(e,this.contextViewService,{placeholder:u["default"].MARKERS_PANEL_FILTER_PLACEHOLDER,ariaLabel:u["default"].MARKERS_PANEL_FILTER_PLACEHOLDER});r.value=this.markersPanel.markersModel.filterOptions.completeFilter,this.toDispose.push(r.onDidChange(function(e){return t.updateFilter(e)})),this.toDispose.push(o.addStandardDisposableListener(r.inputElement,"keyup",function(e){return t.onInputKeyUp(e,r)})),this.toDispose.push(o.addStandardDisposableListener(e,"keydown",this.handleKeyboardEvent)),this.toDispose.push(o.addStandardDisposableListener(e,"keyup",this.handleKeyboardEvent))},t.prototype.updateFilter=function(e){this.markersPanel.updateFilter(e),this.delayer.trigger(this.reportFilteringUsed.bind(this))},t.prototype.reportFilteringUsed=function(){var e={};e.errors=this.markersPanel.markersModel.filterOptions.filterErrors,e.warnings=this.markersPanel.markersModel.filterOptions.filterWarnings,e.infos=this.markersPanel.markersModel.filterOptions.filterInfos,this.telemetryService.publicLog("problems.filter",e)},t.prototype.dispose=function(){this.toDispose=n.dispose(this.toDispose),e.prototype.dispose.call(this)},t.prototype.handleKeyboardEvent=function(e){switch(e.keyCode){case c.CommonKeybindings.SPACE:case c.CommonKeybindings.LEFT_ARROW:case c.CommonKeybindings.RIGHT_ARROW:case c.CommonKeybindings.ESCAPE:e.stopPropagation()}},t.prototype.onInputKeyUp=function(e,t){switch(e.keyCode){case c.KeyCode.Escape:return void(t.value="");default:return}},t=__decorate([__param(2,l.IContextViewService),__param(3,_.ITelemetryService)],t)}(s.BaseActionItem);t.FilterInputBoxActionItem=w});