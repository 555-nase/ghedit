var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},__decorate=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},__param=this&&this.__param||function(e,t){return function(o,n){t(o,n,e)}};define(["require","exports","vs/nls","vs/base/common/winjs.base","vs/platform/platform","vs/base/common/platform","vs/base/common/actions","vs/workbench/common/actionRegistry","vs/base/common/paths","vs/workbench/browser/actionBarRegistry","vs/base/common/uri","vs/workbench/parts/files/common/files","vs/workbench/services/workspace/common/contextService","vs/workbench/parts/execution/common/execution","vs/platform/actions/common/actions","vs/platform/instantiation/common/instantiation","vs/workbench/services/editor/common/editorService","vs/workbench/common/editor","vs/base/common/keyCodes","vs/platform/configuration/common/configurationRegistry","vs/platform/keybinding/common/keybinding","vs/workbench/parts/terminal/electron-browser/terminal","vs/workbench/parts/execution/electron-browser/terminal"],function(e,t,o,n,r,i,s,c,a,l,m,p,u,d,h,f,v,b,x,_,y,w,g){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var E=r.Registry.as(_.Extensions.Configuration);E.registerConfiguration({id:"externalTerminal",order:100,title:o.localize("terminalConfigurationTitle","External Terminal"),type:"object",properties:{"terminal.external.windowsExec":{type:"string",description:o.localize("terminal.external.windowsExec","Customizes which terminal to run on Windows."),"default":g.DEFAULT_TERMINAL_WINDOWS},"terminal.external.osxExec":{type:"string",description:o.localize("terminal.external.osxExec","Customizes which terminal application to run on OS X."),"default":g.DEFAULT_TERMINAL_OSX},"terminal.external.linuxExec":{type:"string",description:o.localize("terminal.external.linuxExec","Customizes which terminal to run on Linux."),"default":g.DEFAULT_TERMINAL_LINUX}}});var C=function(e){function t(t,o,n,r,i){e.call(this,t,o),this.terminalService=n,this.editorService=r,this.contextService=i,this.order=49}return __extends(t,e),t.prototype.setResource=function(e){this.resource=e,this.enabled=!a.isUNC(this.resource.fsPath)},t.prototype.run=function(e){var t,o=this.contextService.getWorkspace();if(t=this.resource?this.resource.fsPath:o&&o.resource.fsPath,!t){var r=b.asFileEditorInput(this.editorService.getActiveEditorInput(),!0);r&&(t=a.dirname(r.getResource().fsPath))}return this.terminalService.openTerminal(t),n.TPromise.as(null)},t.ID="workbench.action.terminal.openNativeConsole",t.Label=i.isWindows?o.localize("globalConsoleActionWin","Open New Command Prompt"):o.localize("globalConsoleActionMacLinux","Open New Terminal"),t.ScopedLabel=i.isWindows?o.localize("scopedConsoleActionWin","Open in Command Prompt"):o.localize("scopedConsoleActionMacLinux","Open in Terminal"),t=__decorate([__param(2,d.ITerminalService),__param(3,v.IWorkbenchEditorService),__param(4,u.IWorkspaceContextService)],t)}(s.Action);t.OpenConsoleAction=C;var S=function(e){function t(t){e.call(this),this.instantiationService=t}return __extends(t,e),t.prototype.hasSecondaryActions=function(e){var t=e.element;return!!p.asFileResource(t)||t&&t.getResource&&t.getResource()},t.prototype.getSecondaryActions=function(e){var t=p.asFileResource(e.element),o=t?t.resource:e.element.getResource();t&&t.isDirectory||(o=m["default"].file(a.dirname(o.fsPath)));var n=this.instantiationService.createInstance(C,C.ID,C.ScopedLabel);return n.setResource(o),[n]},t=__decorate([__param(0,f.IInstantiationService)],t)}(l.ActionBarContributor),A=r.Registry.as(l.Extensions.Actionbar);A.registerActionBarContributor(l.Scope.VIEWER,S),r.Registry.as(c.Extensions.WorkbenchActions).registerWorkbenchAction(new h.SyncActionDescriptor(C,C.ID,C.Label,{primary:x.KeyMod.CtrlCmd|x.KeyMod.Shift|x.KeyCode.KEY_C},y.KbExpr.and(y.KbExpr.not(w.KEYBINDING_CONTEXT_TERMINAL_FOCUS))),"Open New Command Prompt")});