var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},__decorate=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},__param=this&&this.__param||function(t,e){return function(i,r){e(i,r,t)}};define(["require","exports","vs/base/common/lifecycle","vs/base/common/async","vs/workbench/common/editor/stringEditorInput","vs/workbench/common/editor/diffEditorInput","vs/workbench/parts/git/common/git","vs/workbench/services/editor/common/editorService","vs/platform/instantiation/common/instantiation"],function(t,e,i,r,n,o,s,c,a){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function u(t){return t instanceof h||t instanceof l}var p=s.IGitService;e.isGitEditorInput=u;var h=function(t){function e(e,i,r,n,o){t.call(this,e,i,r,n),this.status=o}return __extends(e,t),e.prototype.getFileStatus=function(){return this.status},e.prototype.contains=function(t){if(this.matches(t))return!0;var e=this.originalInput;if(e&&e.matches(t))return!0;var i=this.modifiedInput;return!(!i||!i.matches(t))},e}(o.DiffEditorInput);e.GitDiffEditorInput=h;var f=function(t){function e(e,i,r,n,o){t.call(this,e,i,r,n,o)}return __extends(e,t),e.prototype.getTypeId=function(){return e.ID},e.ID="vs.git.workingTreeDiffInput",e}(h);e.GitWorkingTreeDiffEditorInput=f;var d=function(t){function e(e,i,r,n,o){t.call(this,e,i,r,n,o)}return __extends(e,t),e.prototype.getTypeId=function(){return e.ID},e.ID="vs.git.indexDiffInput",e}(h);e.GitIndexDiffEditorInput=d;var l=function(t){function e(e,i,n,o,c,a,u,p,h){var f=this;t.call(this,e,i,null,n,!1,h),this.gitService=u,this.editorService=p,this.status=o,this.path=c,this.treeish=a,this.delayer=new r.ThrottledDelayer(1e3),this.toDispose=[],this.toDispose.push(this.gitService.addListener2(s.ServiceEvents.STATE_CHANGED,function(){return f.onGitServiceStateChange()})),this.toDispose.push(this.gitService.addListener2(s.ServiceEvents.OPERATION_END,function(){return f.onGitServiceStateChange()}))}return __extends(e,t),e.prototype.getTypeId=function(){return e.ID},e.prototype.getFileStatus=function(){return this.status},e.prototype.resolve=function(e){var i=this;return e||!this.getValue()?this.gitService.buffer(this.path,this.treeish).then(function(r){return i.getValue()!==r&&i.setValue(r),t.prototype.resolve.call(i,e)}):t.prototype.resolve.call(this,e)},e.prototype.onGitServiceStateChange=function(){var t=this,e=this.editorService.isVisible(this,!0);e&&this.delayer.trigger(function(){return t.resolve(!0)})},e.prototype.dispose=function(){this.delayer&&(this.delayer.cancel(),this.delayer=null),this.toDispose=i.dispose(this.toDispose),t.prototype.dispose.call(this)},e.ID="vs.git.stringEditorInput",e=__decorate([__param(6,p),__param(7,c.IWorkbenchEditorService),__param(8,a.IInstantiationService)],e)}(n.StringEditorInput);e.NativeGitIndexStringEditorInput=l});