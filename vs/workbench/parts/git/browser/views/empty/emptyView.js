/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},__decorate=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},__param=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};define(["require","exports","vs/nls","vs/base/common/lifecycle","vs/base/common/eventEmitter","vs/base/browser/dom","vs/base/browser/ui/button/button","vs/base/common/winjs.base","vs/base/browser/builder","vs/workbench/parts/git/common/git","vs/workbench/parts/git/browser/gitActions","vs/platform/files/common/files","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/css!./emptyView"],function(t,e,i,n,o,s,r,c,a,p,l,u,h,f){"use strict";var b=p.IGitService,d=a.$,v=function(t){function e(e,i,n,o,s,r){t.call(this),this.ID="empty",this.gitService=n,this.instantiationService=o,this.messageService=s,this.fileService=r,this.actionRunner=i,this.isVisible=!1,this.needsRender=!1,this.controller=e,this.toDispose=[]}return __extends(e,t),Object.defineProperty(e.prototype,"initAction",{get:function(){return this._initAction||(this._initAction=this.instantiationService.createInstance(l.InitAction)),this._initAction},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.render(),this.$el.getHTMLElement()},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this;if(!this.$el){this.$el=d(".empty-view"),d("p").appendTo(this.$el).text(e.EMPTY_MESSAGE);var n=d(".section").appendTo(this.$el);this.initButton=new r.Button(n),this.initButton.label=i.localize("gitinit","Initialize git repository"),this.initButton.addListener2("click",function(e){s.EventHelper.stop(e),t.disableUI(),t.actionRunner.run(t.initAction).done(function(){t.enableUI()})}),this.toDispose.push(this.gitService.addListener2(p.ServiceEvents.OPERATION,function(){return t.onGitOperation()}))}},e.prototype.disableUI=function(){this.urlInputBox&&this.urlInputBox.disable(),this.cloneButton&&(this.cloneButton.enabled=!1),this.initButton.enabled=!1},e.prototype.enableUI=function(){this.gitService.getRunningOperations().length>0||(this.urlInputBox&&(this.urlInputBox.enable(),this.urlInputBox.validate()),this.initButton.enabled=!0)},e.prototype.focus=function(){this.initButton.focus()},e.prototype.layout=function(t){},e.prototype.setVisible=function(t){return this.isVisible=t,c.TPromise.as(null)},e.prototype.getControl=function(){return null},e.prototype.getActions=function(){return this.refreshAction?[this.refreshAction]:[]},e.prototype.getSecondaryActions=function(){return[]},e.prototype.onGitOperation=function(){this.gitService.getRunningOperations().length>0?this.disableUI():this.enableUI()},e.prototype.dispose=function(){this.$el&&(this.$el.dispose(),this.$el=null),this.toDispose=n.dispose(this.toDispose),t.prototype.dispose.call(this)},e.EMPTY_MESSAGE=i.localize("noGit","This workspace isn't yet under git source control."),e=__decorate([__param(2,b),__param(3,h.IInstantiationService),__param(4,f.IMessageService),__param(5,u.IFileService)],e)}(o.EventEmitter);e.EmptyView=v});