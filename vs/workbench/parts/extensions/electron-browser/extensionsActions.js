/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,a=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__param=this&&this.__param||function(e,t){return function(n,s){t(n,s,e)}};define(["require","exports","vs/nls","vs/base/common/winjs.base","vs/base/common/actions","vs/base/common/severity","vs/base/common/lifecycle","vs/workbench/electron-browser/actions","./extensions","vs/platform/instantiation/common/instantiation","vs/platform/message/common/message","vs/workbench/browser/viewlet","vs/workbench/services/viewlet/common/viewletService","vs/workbench/services/editor/common/editorService","vs/css!./media/extensionActions"],function(e,t,n,s,i,o,a,l,r,c,h,u,d,p){"use strict";var b=function(e){function t(n){var s=this;e.call(this,"extensions.install",t.InstallLabel,"extension-action install",!1),this.extensionsWorkbenchService=n,this.disposables=[],this.disposables.push(this.extensionsWorkbenchService.onChange(function(){return s.update()})),this.update()}return __extends(t,e),Object.defineProperty(t.prototype,"extension",{get:function(){return this._extension},set:function(e){this._extension=e,this.update()},enumerable:!0,configurable:!0}),t.prototype.update=function(){return this.extension?(this.enabled=this.extensionsWorkbenchService.canInstall(this.extension)&&this.extension.state===r.ExtensionState.Uninstalled,void(this.label=this.extension.state===r.ExtensionState.Installing?t.InstallingLabel:t.InstallLabel)):(this.enabled=!1,void(this.label=t.InstallLabel))},t.prototype.run=function(){return this.extensionsWorkbenchService.install(this.extension)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.disposables=a.dispose(this.disposables)},t.InstallLabel=n.localize("installAction","Install"),t.InstallingLabel=n.localize("installing","Installing"),t=__decorate([__param(0,r.IExtensionsWorkbenchService)],t)}(i.Action);t.InstallAction=b;var x=function(e){function t(t,s,i){var o=this;e.call(this,"extensions.uninstall",n.localize("uninstall","Uninstall"),"extension-action uninstall",!1),this.extensionsWorkbenchService=t,this.messageService=s,this.instantiationService=i,this.disposables=[],this.disposables.push(this.extensionsWorkbenchService.onChange(function(){return o.update()})),this.update()}return __extends(t,e),Object.defineProperty(t.prototype,"extension",{get:function(){return this._extension},set:function(e){this._extension=e,this.update()},enumerable:!0,configurable:!0}),t.prototype.update=function(){return this.extension?void(this.enabled=this.extension.state===r.ExtensionState.Installed||this.extension.state===r.ExtensionState.NeedsRestart):void(this.enabled=!1)},t.prototype.run=function(){var e=this;return window.confirm(n.localize("deleteSure","Are you sure you want to uninstall '{0}'?",this.extension.displayName))?this.extensionsWorkbenchService.uninstall(this.extension).then(function(){e.messageService.show(o["default"].Info,{message:n.localize("postUninstallMessage","{0} was successfully uninstalled. Restart to deactivate it.",e.extension.displayName),actions:[h.LaterAction,e.instantiationService.createInstance(l.ReloadWindowAction,l.ReloadWindowAction.ID,n.localize("restartNow","Restart Now"))]})}):s.TPromise.as(null)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.disposables=a.dispose(this.disposables)},t=__decorate([__param(0,r.IExtensionsWorkbenchService),__param(1,h.IMessageService),__param(2,c.IInstantiationService)],t)}(i.Action);t.UninstallAction=x;var f=function(e){function t(t){e.call(this,"extensions.combinedInstall","","",!1),this.disposables=[],this.installAction=t.createInstance(b),this.uninstallAction=t.createInstance(x),this.disposables.push(this.installAction,this.uninstallAction),this.installAction.onDidChange(this.update,this,this.disposables),this.uninstallAction.onDidChange(this.update,this,this.disposables),this.update()}return __extends(t,e),Object.defineProperty(t.prototype,"extension",{get:function(){return this._extension},set:function(e){this._extension=e,this.installAction.extension=e,this.uninstallAction.extension=e},enumerable:!0,configurable:!0}),t.prototype.update=function(){this.extension?this.installAction.enabled?(this.enabled=!0,this.label=this.installAction.label,this["class"]=this.installAction["class"]):this.uninstallAction.enabled?(this.enabled=!0,this.label=this.uninstallAction.label,this["class"]=this.uninstallAction["class"]):this.extension.state===r.ExtensionState.Installing?(this.enabled=!1,this.label=this.installAction.label,this["class"]=this.installAction["class"]):(this.enabled=!1,this.label=this.installAction.label,this["class"]=this.installAction["class"]):(this.enabled=!1,this["class"]=t.NoExtensionClass)},t.prototype.run=function(){return this.installAction.enabled?this.installAction.run():this.uninstallAction.enabled?this.uninstallAction.run():s.TPromise.as(null)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.disposables=a.dispose(this.disposables)},t.NoExtensionClass="extension-action install no-extension",t=__decorate([__param(0,c.IInstantiationService)],t)}(i.Action);t.CombinedInstallAction=f;var _=function(e){function t(s){var i=this;e.call(this,"extensions.update",n.localize("updateAction","Update"),t.DisabledClass,!1),this.extensionsWorkbenchService=s,this.disposables=[],this.disposables.push(this.extensionsWorkbenchService.onChange(function(){return i.update()})),this.update()}return __extends(t,e),Object.defineProperty(t.prototype,"extension",{get:function(){return this._extension},set:function(e){this._extension=e,this.update()},enumerable:!0,configurable:!0}),t.prototype.update=function(){if(!this.extension)return this.enabled=!1,void(this["class"]=t.DisabledClass);var e=this.extensionsWorkbenchService.canInstall(this.extension),n=this.extension.state===r.ExtensionState.Installed||this.extension.state===r.ExtensionState.NeedsRestart;this.enabled=e&&n&&this.extension.outdated,this["class"]=this.enabled?t.EnabledClass:t.DisabledClass},t.prototype.run=function(){return this.extensionsWorkbenchService.install(this.extension)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.disposables=a.dispose(this.disposables)},t.EnabledClass="extension-action update",t.DisabledClass=t.EnabledClass+" disabled",t=__decorate([__param(0,r.IExtensionsWorkbenchService)],t)}(i.Action);t.UpdateAction=_;var v=function(e){function t(s,i){var o=this;e.call(this,"extensions.enable",n.localize("enableAction","Enable"),t.DisabledClass,!1),this.extensionsWorkbenchService=s,this.instantiationService=i,this.disposables=[],this.disposables.push(this.extensionsWorkbenchService.onChange(function(){return o.update()})),this.update()}return __extends(t,e),Object.defineProperty(t.prototype,"extension",{get:function(){return this._extension},set:function(e){this._extension=e,this.update()},enumerable:!0,configurable:!0}),t.prototype.update=function(){return this.extension?(this.enabled=this.extension.state===r.ExtensionState.NeedsRestart,void(this["class"]=this.enabled?t.EnabledClass:t.DisabledClass)):(this.enabled=!1,void(this["class"]=t.DisabledClass))},t.prototype.run=function(){if(!window.confirm(n.localize("restart","In order to enable this extension, this window of VS Code needs to be restarted.\n\nDo you want to continue?")))return s.TPromise.as(null);var e=this.instantiationService.createInstance(l.ReloadWindowAction,l.ReloadWindowAction.ID,n.localize("restartNow","Restart Now"));return e.run()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.disposables=a.dispose(this.disposables)},t.EnabledClass="extension-action enable",t.DisabledClass=t.EnabledClass+" disabled",t=__decorate([__param(0,r.IExtensionsWorkbenchService),__param(1,c.IInstantiationService)],t)}(i.Action);t.EnableAction=v;var w=function(e){function t(t,n,s,i){e.call(this,t,n,r.VIEWLET_ID,s,i)}return __extends(t,e),t.ID=r.VIEWLET_ID,t.LABEL=n.localize("toggleExtensionsViewlet","Show Extensions"),t=__decorate([__param(2,d.IViewletService),__param(3,p.IWorkbenchEditorService)],t)}(u.ToggleViewletAction);t.OpenExtensionsViewletAction=w;var E=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.ID="workbench.extensions.action.installExtensions",t.LABEL=n.localize("installExtensions","Install Extensions"),t}(w);t.InstallExtensionsAction=E;var I=function(e){function t(t,n,s,i){e.call(this,t,n,"clear-extensions",!0),this.viewletService=s,this.extensionsWorkbenchService=i}return __extends(t,e),t.prototype.run=function(){return this.viewletService.openViewlet(r.VIEWLET_ID,!0).then(function(e){return e}).then(function(e){e.search("",!0),e.focus()})},t.ID="workbench.extensions.action.showInstalledExtensions",t.LABEL=n.localize("showInstalledExtensions","Show Installed Extensions"),t=__decorate([__param(2,d.IViewletService),__param(3,r.IExtensionsWorkbenchService)],t)}(i.Action);t.ShowInstalledExtensionsAction=I;var S=function(e){function t(t,n,s,i,o){e.call(this,t,n,i,o),this.disposables=[],s(this.onSearchChange,this,this.disposables)}return __extends(t,e),t.prototype.onSearchChange=function(e){this.enabled=!!e},t.prototype.dispose=function(){this.disposables=a.dispose(this.disposables)},t.ID="workbench.extensions.action.clearExtensionsInput",t.LABEL=n.localize("clearExtensionsInput","Clear Extensions Input"),t=__decorate([__param(3,d.IViewletService),__param(4,r.IExtensionsWorkbenchService)],t)}(I);t.ClearExtensionsInputAction=S;var m=function(e){function t(t,n,s){e.call(this,t,n,null,!0),this.viewletService=s}return __extends(t,e),t.prototype.run=function(){return this.viewletService.openViewlet(r.VIEWLET_ID,!0).then(function(e){return e}).then(function(e){e.search("@outdated",!0),e.focus()})},t.prototype.isEnabled=function(){return!0},t.ID="workbench.extensions.action.listOutdatedExtensions",t.LABEL=n.localize("showOutdatedExtensions","Show Outdated Extensions"),t=__decorate([__param(2,d.IViewletService)],t)}(i.Action);t.ShowOutdatedExtensionsAction=m;var A=function(e){function t(t,n,s){e.call(this,t,n,null,!0),this.viewletService=s}return __extends(t,e),t.prototype.run=function(){return this.viewletService.openViewlet(r.VIEWLET_ID,!0).then(function(e){return e}).then(function(e){e.search("@popular",!0),e.focus()})},t.prototype.isEnabled=function(){return!0},t.ID="workbench.extensions.action.showPopularExtensions",t.LABEL=n.localize("showPopularExtensions","Show Popular Extensions"),t=__decorate([__param(2,d.IViewletService)],t)}(i.Action);t.ShowPopularExtensionsAction=A;var y=function(e){function t(t,n,s){e.call(this,t,n,null,!0),this.viewletService=s}return __extends(t,e),t.prototype.run=function(){return this.viewletService.openViewlet(r.VIEWLET_ID,!0).then(function(e){return e}).then(function(e){e.search("@recommended",!0),e.focus()})},t.prototype.isEnabled=function(){return!0},t.ID="workbench.extensions.action.showRecommendedExtensions",t.LABEL=n.localize("showRecommendedExtensions","Show Recommended Extensions"),t=__decorate([__param(2,d.IViewletService)],t)}(i.Action);t.ShowRecommendedExtensionsAction=y});