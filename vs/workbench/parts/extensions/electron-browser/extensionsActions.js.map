{"version":3,"sources":["vs/workbench/parts/extensions/electron-browser/extensionsActions.ts"],"names":[],"mappings":"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","file":"vs/workbench/parts/extensions/electron-browser/extensionsActions.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport nls = require('vs/nls');\nimport { Promise, TPromise } from 'vs/base/common/winjs.base';\nimport { Action } from 'vs/base/common/actions';\nimport { assign } from 'vs/base/common/objects';\nimport Severity from 'vs/base/common/severity';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IMessageService } from 'vs/platform/message/common/message';\nimport { ReloadWindowAction } from 'vs/workbench/electron-browser/actions';\nimport { IExtensionsService, IExtension } from 'vs/workbench/parts/extensions/common/extensions';\nimport { extensionEquals, getTelemetryData } from 'vs/workbench/parts/extensions/common/extensionsUtil';\nimport { IQuickOpenService } from 'vs/workbench/services/quickopen/common/quickOpenService';\n\nconst CloseAction = new Action('action.close', nls.localize('close', \"Close\"));\n\nexport class ListExtensionsAction extends Action {\n\n\tstatic ID = 'workbench.extensions.action.listExtensions';\n\tstatic LABEL = nls.localize('showInstalledExtensions', \"Show Installed Extensions\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IExtensionsService private extensionsService: IExtensionsService,\n\t\t@IQuickOpenService private quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(id, label, null, true);\n\t}\n\n\tpublic run(): Promise {\n\t\treturn this.quickOpenService.show('ext ');\n\t}\n\n\tprotected isEnabled(): boolean {\n\t\treturn true;\n\t}\n}\n\nexport class InstallExtensionAction extends Action {\n\n\tstatic ID = 'workbench.extensions.action.installExtension';\n\tstatic LABEL = nls.localize('installExtension', \"Install Extension\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IExtensionsService private extensionsService: IExtensionsService,\n\t\t@IQuickOpenService private quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(id, label, null, true);\n\t}\n\n\tpublic run(): Promise {\n\t\treturn this.quickOpenService.show('ext install ');\n\t}\n\n\tprotected isEnabled(): boolean {\n\t\treturn true;\n\t}\n}\n\nexport class ListOutdatedExtensionsAction extends Action {\n\n\tstatic ID = 'workbench.extensions.action.listOutdatedExtensions';\n\tstatic LABEL = nls.localize('showOutdatedExtensions', \"Show Outdated Extensions\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IExtensionsService private extensionsService: IExtensionsService,\n\t\t@IQuickOpenService private quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(id, label, null, true);\n\t}\n\n\tpublic run(): Promise {\n\t\treturn this.quickOpenService.show('ext update ');\n\t}\n\n\tprotected isEnabled(): boolean {\n\t\treturn true;\n\t}\n}\n\nexport class ListSuggestedExtensionsAction extends Action {\n\n\tstatic ID = 'workbench.extensions.action.listSuggestedExtensions';\n\tstatic LABEL = nls.localize('showExtensionRecommendations', \"Show Extension Recommendations\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IExtensionsService private extensionsService: IExtensionsService,\n\t\t@IQuickOpenService private quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(id, label, null, true);\n\t}\n\n\tpublic run(): Promise {\n\t\treturn this.quickOpenService.show('ext recommend ');\n\t}\n\n\tprotected isEnabled(): boolean {\n\t\treturn true;\n\t}\n}\n\nexport class InstallAction extends Action {\n\n\tconstructor(\n\t\tlabel: string,\n\t\t@IQuickOpenService protected quickOpenService: IQuickOpenService,\n\t\t@IExtensionsService protected extensionsService: IExtensionsService,\n\t\t@IMessageService protected messageService: IMessageService,\n\t\t@ITelemetryService protected telemetryService: ITelemetryService,\n\t\t@IInstantiationService protected instantiationService: IInstantiationService\n\t) {\n\t\tsuper('extensions.install', label, 'octicon octicon-cloud-download', true);\n\t}\n\n\tpublic run(extension: IExtension): TPromise<any> {\n\t\tthis.enabled = false;\n\n\t\treturn this.extensionsService.getInstalled()\n\t\t\t.then(installed => installed.some(e => extensionEquals(e, extension)))\n\t\t\t.then(isUpdate => {\n\t\t\t\treturn this.extensionsService\n\t\t\t\t\t.install(extension)\n\t\t\t\t\t.then(() => this.onSuccess(extension, isUpdate), err => this.onError(err, extension, isUpdate))\n\t\t\t\t\t.then(() => this.enabled = true)\n\t\t\t\t\t.then(() => null);\n\t\t\t});\n\t}\n\n\tprivate onSuccess(extension: IExtension, isUpdate: boolean) {\n\t\tthis.reportTelemetry(extension, isUpdate, true);\n\t\tthis.messageService.show(Severity.Info, {\n\t\t\tmessage: nls.localize('success-installed', \"'{0}' was successfully installed. Restart to enable it.\", extension.displayName),\n\t\t\tactions: [\n\t\t\t\tCloseAction,\n\t\t\t\tthis.instantiationService.createInstance(ReloadWindowAction, ReloadWindowAction.ID, nls.localize('restartNow', \"Restart Now\"))\n\t\t\t]\n\t\t});\n\t}\n\n\tprivate onError(err: Error, extension: IExtension, isUpdate: boolean) {\n\t\tthis.reportTelemetry(extension, isUpdate, false);\n\t\tthis.messageService.show(Severity.Error, err);\n\t}\n\n\tprivate reportTelemetry(extension: IExtension, isUpdate: boolean, success: boolean) {\n\t\tconst event = isUpdate ? 'extensionGallery:update' : 'extensionGallery:install';\n\t\tconst data = assign(getTelemetryData(extension), { success });\n\n\t\tthis.telemetryService.publicLog(event, data);\n\t}\n}\n\nexport class UninstallAction extends Action {\n\n\tconstructor(\n\t\t@IQuickOpenService protected quickOpenService: IQuickOpenService,\n\t\t@IExtensionsService protected extensionsService: IExtensionsService,\n\t\t@IMessageService protected messageService: IMessageService,\n\t\t@ITelemetryService protected telemetryService: ITelemetryService,\n\t\t@IInstantiationService protected instantiationService: IInstantiationService\n\t) {\n\t\tsuper('extensions.uninstall', nls.localize('uninstall', \"Uninstall Extension\"), 'octicon octicon-x', true);\n\t}\n\n\tpublic run(extension: IExtension): TPromise<any> {\n\t\tif (!window.confirm(nls.localize('deleteSure', \"Are you sure you want to uninstall '{0}'?\", extension.displayName))) {\n\t\t\treturn TPromise.as(null);\n\t\t}\n\n\t\tthis.enabled = false;\n\n\t\treturn this.extensionsService.uninstall(extension)\n\t\t\t.then(() => this.onSuccess(extension), err => this.onError(err, extension))\n\t\t\t.then(() => this.enabled = true)\n\t\t\t.then(() => null);\n\t}\n\n\tprivate onSuccess(extension: IExtension) {\n\t\tthis.reportTelemetry(extension, true);\n\t\tthis.messageService.show(Severity.Info, {\n\t\t\tmessage: nls.localize('success-uninstalled', \"'{0}' was successfully uninstalled. Restart to deactivate it.\", extension.displayName),\n\t\t\tactions: [\n\t\t\t\tCloseAction,\n\t\t\t\tthis.instantiationService.createInstance(ReloadWindowAction, ReloadWindowAction.ID, nls.localize('restartNow2', \"Restart Now\"))\n\t\t\t]\n\t\t});\n\t}\n\n\tprivate onError(err: Error, extension: IExtension) {\n\t\tthis.reportTelemetry(extension, false);\n\t\tthis.messageService.show(Severity.Error, err);\n\t}\n\n\tprivate reportTelemetry(extension: IExtension, success: boolean) {\n\t\tconst data = assign(getTelemetryData(extension), { success });\n\t\t\n\t\tthis.telemetryService.publicLog('extensionGallery:uninstall', data);\n\t}\n}\n"]}