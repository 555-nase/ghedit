define(["require","exports","vs/base/common/event","vs/editor/common/modes/languageSelector","vs/base/common/platform","vs/base/common/errors","vs/workbench/api/node/extHostFileSystemEventService","vs/workbench/api/node/extHostDocuments","vs/workbench/api/node/extHostConfiguration","vs/workbench/api/node/extHostDiagnostics","vs/workbench/api/node/extHostWorkspace","vs/workbench/api/node/extHostQuickOpen","vs/workbench/api/node/extHostStatusBar","vs/workbench/api/node/extHostCommands","vs/workbench/api/node/extHostOutputService","vs/workbench/api/node/extHostMessageService","vs/workbench/api/node/extHostEditors","vs/workbench/api/node/extHostLanguages","vs/workbench/api/node/extHostLanguageFeatures","vs/workbench/api/node/extHostTypeConverters","vs/workbench/api/node/extHostApiCommands","vs/workbench/api/node/extHostTypes","vs/editor/common/modes","vs/base/common/uri","vs/base/common/severity","vs/editor/common/editorCommon","vs/platform/extensions/common/extensionsRegistry","vs/base/common/cancellation","vs/base/common/paths","./extHost.protocol"],function(e,t,n,o,r,i,s,a,c,u,d,g,m,f,v,h,l,x,p,E,C,D,b,H,w,S,P,y,T,k){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function O(t){var n=e.__$__nodeRequire("module"),o=n._load;n._load=function(e,n,r){return"vscode"===e?t:o.apply(this,arguments)},define("vscode",[],t)}var I=function(){function e(e,t,T,O){var I=new k.InstanceCollection,L=I.define(k.ExtHostContext.ExtHostDocuments).set(new a.ExtHostDocuments(e)),A=I.define(k.ExtHostContext.ExtHostEditors).set(new l.ExtHostEditors(e,L)),F=I.define(k.ExtHostContext.ExtHostCommands).set(new f.ExtHostCommands(e,A)),R=I.define(k.ExtHostContext.ExtHostConfiguration).set(new c.ExtHostConfiguration),M=I.define(k.ExtHostContext.ExtHostDiagnostics).set(new u.ExtHostDiagnostics(e)),W=I.define(k.ExtHostContext.ExtHostLanguageFeatures).set(new p.ExtHostLanguageFeatures(e,L,F,M)),B=I.define(k.ExtHostContext.ExtHostFileSystemEventService).set(new s.ExtHostFileSystemEventService),_=I.define(k.ExtHostContext.ExtHostQuickOpen).set(new g.ExtHostQuickOpen(e));I.define(k.ExtHostContext.ExtHostExtensionService).set(t),I.finish(!1,e);var K=e.get(k.MainContext.MainThreadErrors);i.setUnexpectedErrorHandler(function(e){K.onUnexpectedExtHostError(i.transformErrorForSerialization(e))});var z=new h.ExtHostMessageService(e),V=new m.ExtHostStatusBar(e),Q=new v.ExtHostOutputService(e),U=T.getWorkspace()?T.getWorkspace().resource.fsPath:void 0,N=new d.ExtHostWorkspace(e,U),q=new x.ExtHostLanguages(e);E.Command.initialize(F),C.registerApiCommands(F),this.version=T.getConfiguration().env.version,this.Uri=H["default"],this.Location=D.Location,this.Diagnostic=D.Diagnostic,this.DiagnosticSeverity=D.DiagnosticSeverity,this.EventEmitter=n.Emitter,this.Disposable=D.Disposable,this.TextEdit=D.TextEdit,this.WorkspaceEdit=D.WorkspaceEdit,this.Position=D.Position,this.Range=D.Range,this.Selection=D.Selection,this.CancellationTokenSource=y.CancellationTokenSource,this.Hover=D.Hover,this.SymbolKind=D.SymbolKind,this.SymbolInformation=D.SymbolInformation,this.DocumentHighlightKind=D.DocumentHighlightKind,this.DocumentHighlight=D.DocumentHighlight,this.CodeLens=D.CodeLens,this.ParameterInformation=D.ParameterInformation,this.SignatureInformation=D.SignatureInformation,this.SignatureHelp=D.SignatureHelp,this.CompletionItem=D.CompletionItem,this.CompletionItemKind=D.CompletionItemKind,this.CompletionList=D.CompletionList,this.DocumentLink=D.DocumentLink,this.ViewColumn=D.ViewColumn,this.StatusBarAlignment=D.StatusBarAlignment,this.IndentAction=b.IndentAction,this.OverviewRulerLane=S.OverviewRulerLane,this.TextEditorRevealType=D.TextEditorRevealType,this.EndOfLine=D.EndOfLine,this.TextEditorCursorStyle=S.TextEditorCursorStyle;var J;this.env=Object.freeze({get machineId(){return J.machineId},get sessionId(){return J.sessionId},get language(){return r.language},get appName(){return T.getConfiguration().env.appName}}),O.getTelemetryInfo().then(function(e){return J=e},i.onUnexpectedError),this.commands={registerCommand:function(e,t,n){return F.registerCommand(e,t,n)},registerTextEditorCommand:function(e,t,n){return F.registerCommand(e,function(){for(var o=[],r=0;r<arguments.length;r++)o[r-0]=arguments[r];var i=A.getActiveTextEditor();return i?i.edit(function(e){o.unshift(i,e),t.apply(n,o)}).then(function(t){t||console.warn("Edits from command "+e+" were not applied.")},function(t){console.warn("An error occured while running command "+e,t)}):void console.warn("Cannot execute "+e+" because there is no active text editor.")})},executeCommand:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return F.executeCommand.apply(F,[e].concat(t))},getCommands:function(e){return void 0===e&&(e=!1),F.getCommands(e)}},this.window={get activeTextEditor(){return A.getActiveTextEditor()},get visibleTextEditors(){return A.getVisibleTextEditors()},showTextDocument:function(e,t,n){return A.showTextDocument(e,t,n)},createTextEditorDecorationType:function(e){return A.createTextEditorDecorationType(e)},onDidChangeActiveTextEditor:A.onDidChangeActiveTextEditor.bind(A),onDidChangeTextEditorSelection:function(e,t,n){return A.onDidChangeTextEditorSelection(e,t,n)},onDidChangeTextEditorOptions:function(e,t,n){return A.onDidChangeTextEditorOptions(e,t,n)},onDidChangeTextEditorViewColumn:function(e,t,n){return A.onDidChangeTextEditorViewColumn(e,t,n)},showInformationMessage:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return z.showMessage(w["default"].Info,e,t)},showWarningMessage:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return z.showMessage(w["default"].Warning,e,t)},showErrorMessage:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return z.showMessage(w["default"].Error,e,t)},showQuickPick:function(e,t){return _.show(e,t)},showInputBox:function(e){return _.input(e)},createStatusBarItem:function(e,t){return V.createStatusBarEntry(e,t)},setStatusBarMessage:function(e,t){return V.setStatusBarMessage(e,t)},createOutputChannel:function(e){return Q.createOutputChannel(e)}},this.workspace=Object.freeze({get rootPath(){return N.getPath()},set rootPath(e){throw i.readonly()},asRelativePath:function(e){return N.getRelativePath(e)},findFiles:function(e,t,n,o){return N.findFiles(e,t,n,o)},saveAll:function(e){return N.saveAll(e)},applyEdit:function(e){return N.appyEdit(e)},createFileSystemWatcher:function(e,t,n,o){return B.createFileSystemWatcher(e,t,n,o)},get textDocuments(){return L.getAllDocumentData().map(function(e){return e.document})},set textDocuments(e){throw i.readonly()},openTextDocument:function(e){var t;if("string"==typeof e)t=H["default"].file(e);else{if(!(e instanceof H["default"]))throw new Error("illegal argument - uriOrFileName");t=e}return L.ensureDocumentData(t).then(function(){var e=L.getDocumentData(t);return e&&e.document})},registerTextDocumentContentProvider:function(e,t){return L.registerTextDocumentContentProvider(e,t)},onDidOpenTextDocument:function(e,t,n){return L.onDidAddDocument(e,t,n)},onDidCloseTextDocument:function(e,t,n){return L.onDidRemoveDocument(e,t,n)},onDidChangeTextDocument:function(e,t,n){return L.onDidChangeDocument(e,t,n)},onDidSaveTextDocument:function(e,t,n){return L.onDidSaveDocument(e,t,n)},onDidChangeConfiguration:function(e,t,n){return R.onDidChangeConfiguration(e,t,n)},getConfiguration:function(e){return R.getConfiguration(e)}}),this.languages={createDiagnosticCollection:function(e){return M.createDiagnosticCollection(e)},getLanguages:function(){return q.getLanguages()},match:function(e,t){return o.score(e,t.uri,t.languageId)},registerCodeActionsProvider:function(e,t){return W.registerCodeActionProvider(e,t)},registerCodeLensProvider:function(e,t){return W.registerCodeLensProvider(e,t)},registerDefinitionProvider:function(e,t){return W.registerDefinitionProvider(e,t)},registerHoverProvider:function(e,t){return W.registerHoverProvider(e,t)},registerDocumentHighlightProvider:function(e,t){return W.registerDocumentHighlightProvider(e,t)},registerReferenceProvider:function(e,t){return W.registerReferenceProvider(e,t)},registerRenameProvider:function(e,t){return W.registerRenameProvider(e,t)},registerDocumentSymbolProvider:function(e,t){return W.registerDocumentSymbolProvider(e,t)},registerWorkspaceSymbolProvider:function(e){return W.registerWorkspaceSymbolProvider(e)},registerDocumentFormattingEditProvider:function(e,t){return W.registerDocumentFormattingEditProvider(e,t)},registerDocumentRangeFormattingEditProvider:function(e,t){return W.registerDocumentRangeFormattingEditProvider(e,t)},registerOnTypeFormattingEditProvider:function(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];return W.registerOnTypeFormattingEditProvider(e,t,[n].concat(o))},registerSignatureHelpProvider:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return W.registerSignatureHelpProvider(e,t,n)},registerCompletionItemProvider:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return W.registerCompletionItemProvider(e,t,n)},registerDocumentLinkProvider:function(e,t){return W.registerDocumentLinkProvider(e,t)},setLanguageConfiguration:function(e,t){return W.setLanguageConfiguration(e,t)}},this.extensions={getExtension:function(e){var n=P.ExtensionsRegistry.getExtensionDescription(e);if(n)return new j(t,n)},get all(){return P.ExtensionsRegistry.getAllExtensionDescriptions().map(function(e){return new j(t,e)})}}}return e}();t.ExtHostAPIImplementation=I;var j=function(){function e(e,t){this._extensionService=e,this.id=t.id,this.extensionPath=T.normalize(t.extensionFolderPath,!0),this.packageJSON=t}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._extensionService.isActivated(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exports",{get:function(){return this._extensionService.get(this.id)},enumerable:!0,configurable:!0}),e.prototype.activate=function(){var e=this;return this._extensionService.activateById(this.id).then(function(){return e.exports})},e}();t.defineAPI=O});