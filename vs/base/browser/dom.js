var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define(["require","exports","vs/base/common/async","vs/base/common/errors","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/base/common/types","vs/base/browser/browser","vs/base/browser/keyboardEvent","vs/base/browser/mouseEvent"],function(e,t,n,r,o,i,a,u,s,d){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function l(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function c(e){var t=[];return JSON.stringify(e,function(e,n){if(n instanceof Element)return"[Element]";if(a.isObject(n)||Array.isArray(n)){if(t.indexOf(n)!==-1)return"[Circular]";t.push(n)}return n})}function f(e){for(;e;){if(e===document.body)return!0;e=e.parentNode}return!1}function m(e,t){var n=e.className;if(!n)return void(Q=-1);t=t.trim();var r=n.length,o=t.length;if(0===o)return void(Q=-1);if(r<o)return void(Q=-1);if(n===t)return Q=0,void($=r);for(var i,a=-1;(a=n.indexOf(t,a+1))>=0;){if(i=a+o,(0===a||n.charCodeAt(a-1)===ee)&&n.charCodeAt(i)===ee)return Q=a,void($=i+1);if(a>0&&n.charCodeAt(a-1)===ee&&i===r)return Q=a-1,void($=i);if(0===a&&i===r)return Q=0,void($=i)}Q=-1}function p(e,t){return m(e,t),Q!==-1}function h(e,t){e.className?(m(e,t),Q===-1&&(e.className=e.className+" "+t)):e.className=t}function g(e,t){m(e,t),Q!==-1&&(e.className=e.className.substring(0,Q)+e.className.substring($))}function v(e,t,n){m(e,t),Q===-1||void 0!==n&&n||g(e,t),Q!==-1||void 0!==n&&!n||h(e,t)}function E(e,t,n,r){return new te(e,t,n,r)}function b(e){return function(t){return e(new d.StandardMouseEvent(t))}}function T(e){return function(t){return e(new s.StandardKeyboardEvent(t))}}function _(e,t){return E(e,"mouseout",function(n){for(var r=n.relatedTarget||n.toElement;r&&r!==e;)r=r.parentNode;r!==e&&t(n)})}function y(e,t,n,r,o){return new ae(e,t,n,r,o)}function w(e){return document.defaultView.getComputedStyle(e,null)}function A(e,t,n){var r=w(e),o="0";return r&&(o=r.getPropertyValue?r.getPropertyValue(t):r.getAttribute(n)),ue(e,o)}function L(e){for(var t=e.offsetParent,n=e.offsetTop,r=e.offsetLeft;null!==(e=e.parentNode)&&e!==document.body&&e!==document.documentElement;){n-=e.scrollTop;var o=w(e);o&&(r-="rtl"!==o.direction?e.scrollLeft:-e.scrollLeft),e===t&&(r+=se.getBorderLeftWidth(e),n+=se.getBorderTopWidth(e),n+=e.offsetTop,r+=e.offsetLeft,t=e.offsetParent)}return{left:r,top:n}}function N(e){var n=e.getBoundingClientRect();return{left:n.left+t.StandardWindow.scrollX,top:n.top+t.StandardWindow.scrollY,width:n.width,height:n.height}}function R(e){var t=se.getBorderLeftWidth(e)+se.getBorderRightWidth(e),n=se.getPaddingLeft(e)+se.getPaddingRight(e);return e.offsetWidth-t-n}function C(e){var t=se.getMarginLeft(e)+se.getMarginRight(e);return e.offsetWidth+t}function S(e){var t=se.getBorderTopWidth(e)+se.getBorderBottomWidth(e),n=se.getPaddingTop(e)+se.getPaddingBottom(e);return e.offsetHeight-t-n}function O(e){var t=se.getMarginTop(e)+se.getMarginBottom(e);return e.offsetHeight+t}function B(e,t){if(null===e)return 0;var n=L(e),r=L(t);return n.left-r.left}function D(e,t){var n=t.map(function(t){return C(t)+B(t,e)||0}),r=Math.max.apply(Math,n);return r}function M(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function W(e,t,n){for(;e;){if(p(e,t))return e;if(n&&p(e,n))return null;e=e.parentNode}return null}function P(){var e=document.createElement("style");return e.type="text/css",e.media="screen",document.getElementsByTagName("head")[0].appendChild(e),e}function x(e){return e&&e.sheet&&e.sheet.rules?e.sheet.rules:e&&e.sheet&&e.sheet.cssRules?e.sheet.cssRules:[]}function F(e,t,n){void 0===n&&(n=de),n&&t&&n.sheet.insertRule(e+"{"+t+"}",0)}function H(e,t){if(void 0===t&&(t=de),!t)return null;for(var n=x(t),r=0;r<n.length;r++){var o=n[r],i=o.selectorText.replace(/::/gi,":");if(i===e)return o}return null}function I(e,t){if(void 0===t&&(t=de),t){for(var n=x(t),r=[],o=0;o<n.length;o++){var i=n[o],a=i.selectorText.replace(/::/gi,":");a.indexOf(e)!==-1&&r.push(o)}for(var o=r.length-1;o>=0;o--)t.sheet.deleteRule(r[o])}}function U(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}function k(e){for(var t=[],n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)t[n]=e.scrollTop,e=e.parentNode;return t}function q(e,t){for(var n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)e.scrollTop!==t[n]&&(e.scrollTop=t[n]),e=e.parentNode}function K(e){return new le(e)}function G(e,t){return e.appendChild(t),t}function V(e){var t=ce.exec(e);if(!t)throw new Error("Bad use of emmet");var n=document.createElement(t[1]||"div");return t[3]&&(n.id=t[3]),t[4]&&(n.className=t[4].replace(/\./g," ").trim()),n}function Y(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=0,r=e;n<r.length;n++){var o=r[n];o.style.display=null}}function j(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=0,r=e;n<r.length;n++){var o=r[n];o.style.display="none"}}function X(e,t){for(;e;){if(e instanceof HTMLElement&&e.hasAttribute(t))return e;e=e.parentNode}return null}function z(e){if(e&&e.hasAttribute("tabIndex")){if(document.activeElement===e){var t=X(e.parentElement,"tabIndex");t&&t.focus()}e.removeAttribute("tabindex")}}function J(e){return Array.prototype.slice.call(document.getElementsByTagName(e),0)}function Z(e){return function(t){t.preventDefault(),t.stopPropagation(),e(t)}}t.clearNode=l,t.safeStringifyDOMAware=c,t.isInDOM=f;var Q,$,ee=" ".charCodeAt(0);t.hasClass=p,t.addClass=h,t.removeClass=g,t.toggleClass=v;var te=function(e){function t(t,n,r,o){e.call(this),this._node=t,this._type=n,this._useCapture=o||!1,this._wrapHandler=function(e){e=e||window.event,r(e)},"function"==typeof this._node.addEventListener?(this._usedAddEventListener=!0,this._node.addEventListener(this._type,this._wrapHandler,this._useCapture)):(this._usedAddEventListener=!1,this._node.attachEvent("on"+this._type,this._wrapHandler))}return __extends(t,e),t.prototype.dispose=function(){this._wrapHandler&&(this._usedAddEventListener?this._node.removeEventListener(this._type,this._wrapHandler,this._useCapture):this._node.detachEvent("on"+this._type,this._wrapHandler),this._node=null,this._wrapHandler=null)},t}(i.Disposable);t.addDisposableListener=E,t.addStandardDisposableListener=function(e,t,n,r){var o=n;return"click"===t?o=b(n):"keydown"!==t&&"keypress"!==t&&"keyup"!==t||(o=T(n)),e.addEventListener(t,o,r||!1),{dispose:function(){o&&(e.removeEventListener(t,o,r||!1),o=null,e=null,n=null)}}},t.addDisposableNonBubblingMouseOutListener=_;var ne=function(){var e=function(e){return setTimeout(function(){return e((new Date).getTime())},0)},t=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame,n=function(e){},r=self.cancelAnimationFrame||self.cancelRequestAnimationFrame||self.msCancelAnimationFrame||self.msCancelRequestAnimationFrame||self.webkitCancelAnimationFrame||self.webkitCancelRequestAnimationFrame||self.mozCancelAnimationFrame||self.mozCancelRequestAnimationFrame||self.oCancelAnimationFrame||self.oCancelRequestAnimationFrame,o=!!t,i=t||e,a=r||n;return{isNative:o,request:function(e){return i(e)},cancel:function(e){return a(e)}}}(),re=function(){function e(e,t){this._runner=e,this.priority=t,this._canceled=!1}return e.prototype.dispose=function(){this._canceled=!0},e.prototype.execute=function(){if(!this._canceled)try{this._runner()}catch(e){r.onUnexpectedError(e)}},e.sort=function(e,t){return t.priority-e.priority},e}();!function(){var e=[],n=null,r=!1,o=!1,i=function(){for(r=!1,n=e,e=[],o=!0;n.length>0;){n.sort(re.sort);var t=n.shift();t.execute()}o=!1};t.scheduleAtNextAnimationFrame=function(t,n){void 0===n&&(n=0);var o=new re(t,n);if(e.push(o),!r)if(r=!0,u.isChrome){var a;ne.request(function(){clearTimeout(a),i()}),a=setTimeout(i,1e3)}else ne.request(i);return o},t.runAtThisOrScheduleAtNextAnimationFrame=function(e,r){if(o){var i=new re(e,r);return n.push(i),i}return t.scheduleAtNextAnimationFrame(e,r)}}();var oe=16,ie=function(e,t){return t},ae=function(e){function t(t,r,o,i,a){void 0===i&&(i=ie),void 0===a&&(a=oe),e.call(this);var u=null,s=0,d=this._register(new n.TimeoutTimer),l=function(){s=(new Date).getTime(),o(u),u=null};this._register(E(t,r,function(e){u=i(u,e);var t=(new Date).getTime()-s;t>=a?(d.cancel(),l()):d.setIfNotSet(l,a-t)}))}return __extends(t,e),t}(i.Disposable);t.addDisposableThrottledListener=y,t.getComputedStyle=w;var ue=function(){return function(e,t){return parseFloat(t)||0}}(),se={getBorderLeftWidth:function(e){return A(e,"border-left-width","borderLeftWidth")},getBorderTopWidth:function(e){return A(e,"border-top-width","borderTopWidth")},getBorderRightWidth:function(e){return A(e,"border-right-width","borderRightWidth")},getBorderBottomWidth:function(e){return A(e,"border-bottom-width","borderBottomWidth")},getPaddingLeft:function(e){return A(e,"padding-left","paddingLeft")},getPaddingTop:function(e){return A(e,"padding-top","paddingTop")},getPaddingRight:function(e){return A(e,"padding-right","paddingRight")},getPaddingBottom:function(e){return A(e,"padding-bottom","paddingBottom")},getMarginLeft:function(e){return A(e,"margin-left","marginLeft")},getMarginTop:function(e){return A(e,"margin-top","marginTop")},getMarginRight:function(e){return A(e,"margin-right","marginRight")},getMarginBottom:function(e){return A(e,"margin-bottom","marginBottom")},__commaSentinel:!1};t.getTopLeftOffset=L,t.getDomNodePagePosition=N,t.StandardWindow=new(function(){function e(){}return Object.defineProperty(e.prototype,"scrollX",{get:function(){return"number"==typeof window.scrollX?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollY",{get:function(){return"number"==typeof window.scrollY?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop},enumerable:!0,configurable:!0}),e}()),t.getContentWidth=R,t.getTotalWidth=C,t.getContentHeight=S,t.getTotalHeight=O,t.getLargestChildWidth=D,t.isAncestor=M,t.findParentWithClass=W,t.createStyleSheet=P;var de=P();t.createCSSRule=F,t.getCSSRule=H,t.removeCSSRulesContainingSelector=I,t.isHTMLElement=U,t.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:u.isWebKit?"webkitAnimationStart":"animationstart",ANIMATION_END:u.isWebKit?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:u.isWebKit?"webkitAnimationIteration":"animationiteration"},t.EventHelper={stop:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)}},t.saveParentsScrollTop=k,t.restoreParentsScrollTop=q;var le=function(e){function n(n){var r=this;e.call(this);var i=!1,a=!1;this._eventEmitter=this._register(new o.EventEmitter);var u=function(e){a=!1,i||(i=!0,r._eventEmitter.emit("focus",{}))},s=function(e){i&&(a=!0,window.setTimeout(function(){a&&(a=!1,i=!1,r._eventEmitter.emit("blur",{}))},0))};this._register(E(n,t.EventType.FOCUS,u,!0)),this._register(E(n,t.EventType.BLUR,s,!0))}return __extends(n,e),n.prototype.addFocusListener=function(e){return this._eventEmitter.addListener2("focus",e)},n.prototype.addBlurListener=function(e){return this._eventEmitter.addListener2("blur",e)},n}(i.Disposable);t.trackFocus=K,t.append=G;var ce=/([\w\-]+)?(#([\w\-]+))?((.([\w\-]+))*)/;t.emmet=V,t.show=Y,t.hide=j,t.removeTabIndexAndUpdateFocus=z,t.getElementsByTagName=J,t.finalHandler=Z});