/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};define(["require","exports","vs/base/browser/builder","vs/base/common/winjs.base","vs/base/browser/touch","vs/base/common/actions","vs/base/browser/ui/actionbar/actionbar","vs/base/common/eventEmitter","vs/base/common/lifecycle","vs/css!./dropdown"],function(t,e,n,o,i,r,s,c,u){"use strict";var a=function(t){function e(e,o){var r=this;t.call(this),this.toDispose=[],this.$el=n.$(".dropdown").appendTo(e),this.$label=n.$(".dropdown-label"),(o.tick||o.action)&&this.$label.addClass("tick");var c=o.labelRenderer;if(!c&&o.action){this.$action=n.$(".dropdown-action").appendTo(this.$el);var u=new s.ActionItem(null,o.action,{icon:!0,label:!0});u.actionRunner=this,u.render(this.$action.getHTMLElement()),c=function(t){return t.innerText="",u}}c||(c=function(t){return n.$(t).text(o.label||""),null}),this.$label.on(["mousedown",i.EventType.Tap],function(t){t.preventDefault(),t.stopPropagation(),r.show()}).appendTo(this.$el);var a=c(this.$label.getHTMLElement());a&&this.toDispose.push(a),this.toDispose.push(new i.Gesture(this.$label.getHTMLElement()))}return __extends(e,t),Object.defineProperty(e.prototype,"tooltip",{set:function(t){this.$label.title(t)},enumerable:!0,configurable:!0}),e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.onEvent=function(t,e){this.hide()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.hide(),this.toDispose=u.dispose(this.toDispose),this.$boxContainer&&(this.$boxContainer.destroy(),this.$boxContainer=null),this.$contents&&(this.$contents.destroy(),this.$contents=null),this.$label&&(this.$label.destroy(),this.$label=null)},e}(r.ActionRunner);e.BaseDropdown=a;var l=function(t){function e(e,n){t.call(this,e,n),this.contextViewProvider=n.contextViewProvider}return __extends(e,t),Object.defineProperty(e.prototype,"contextViewProvider",{get:function(){return this._contextViewProvider},set:function(t){this._contextViewProvider=t},enumerable:!0,configurable:!0}),e.prototype.show=function(){var t=this;this.$el.addClass("active"),this._contextViewProvider.showContextView({getAnchor:function(){return t.$el.getHTMLElement()},render:function(e){return t.renderContents(e)},onDOMEvent:function(e,n){t.onEvent(e,n)},onHide:function(){t.$el.removeClass("active")}})},e.prototype.hide=function(){this._contextViewProvider&&this._contextViewProvider.hideContextView()},e.prototype.renderContents=function(t){return null},e}(a);e.Dropdown=l;var p=function(t){function e(e,n){t.call(this,e,n),this._contextMenuProvider=n.contextMenuProvider,this.actions=n.actions||[],this.actionProvider=n.actionProvider,this.menuClassName=n.menuClassName||""}return __extends(e,t),Object.defineProperty(e.prototype,"contextMenuProvider",{get:function(){return this._contextMenuProvider},set:function(t){this._contextMenuProvider=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuOptions",{get:function(){return this._menuOptions},set:function(t){this._menuOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actions",{get:function(){return this.actionProvider?this.actionProvider.getActions():this._actions},set:function(t){this._actions=t},enumerable:!0,configurable:!0}),e.prototype.show=function(){var t=this;this.$el.addClass("active"),this._contextMenuProvider.showContextMenu({getAnchor:function(){return t.$el.getHTMLElement()},getActions:function(){return o.TPromise.as(t.actions)},getActionsContext:function(){return t.menuOptions?t.menuOptions.context:null},getActionItem:function(e){return t.menuOptions&&t.menuOptions.actionItemProvider?t.menuOptions.actionItemProvider(e):null},getKeyBinding:function(e){return t.menuOptions&&t.menuOptions.getKeyBinding?t.menuOptions.getKeyBinding(e):null},getMenuClassName:function(){return t.menuClassName},onHide:function(){return t.$el.removeClass("active")}})},e.prototype.hide=function(){},e}(a);e.DropdownMenu=p;var d=function(t){function e(e){t.call(this),this.el=document.createElement("div"),this.el.className="dropdown-group",e.appendChild(this.el)}return __extends(e,t),Object.defineProperty(e.prototype,"element",{get:function(){return this.el},enumerable:!0,configurable:!0}),e}(c.EventEmitter);e.DropdownGroup=d});