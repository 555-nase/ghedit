var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};define(["require","exports","vs/nls","vs/base/browser/dom","vs/base/browser/ui/inputbox/inputBox","vs/base/browser/ui/checkbox/checkbox","vs/base/browser/ui/widget","vs/base/common/event","vs/base/common/keyCodes","vs/css!./findInput"],function(e,t,i,o,s,n,h,d,a){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var r=i.localize("regexDescription","Use Regular Expression"),l=i.localize("wordsDescription","Match Whole Word"),p=i.localize("caseDescription","Match Case"),u=i.localize("defaultLabel","input"),c=function(e){function t(t,i,o){var s=this;e.call(this),this._onDidOptionChange=this._register(new d.Emitter),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new d.Emitter),this.onKeyDown=this._onKeyDown.event,this._onInput=this._register(new d.Emitter),this.onInput=this._onInput.event,this._onKeyUp=this._register(new d.Emitter),this.onKeyUp=this._onKeyUp.event,this._onCaseSensitiveKeyDown=this._register(new d.Emitter),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this.contextViewProvider=i,this.width=o.width||100,this.placeholder=o.placeholder||"",this.validation=o.validation,this.label=o.label||u,this.regex=null,this.wholeWords=null,this.caseSensitive=null,this.domNode=null,this.inputBox=null,this.buildDomNode(o.appendCaseSensitiveLabel||"",o.appendWholeWordsLabel||"",o.appendRegexLabel||""),Boolean(t)&&t.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,function(e){return s._onKeyDown.fire(e)}),this.onkeyup(this.inputBox.inputElement,function(e){return s._onKeyUp.fire(e)}),this.oninput(this.inputBox.inputElement,function(e){return s._onInput.fire()})}return __extends(t,e),t.prototype.enable=function(){o.removeClass(this.domNode,"disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()},t.prototype.disable=function(){o.addClass(this.domNode,"disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()},t.prototype.setEnabled=function(e){e?this.enable():this.disable()},t.prototype.clear=function(){this.clearValidation(),this.setValue(""),this.focus()},t.prototype.setWidth=function(e){this.width=e,this.domNode.style.width=this.width+"px",this.contextViewProvider.layout(),this.setInputWidth()},t.prototype.getValue=function(){return this.inputBox.value},t.prototype.setValue=function(e){this.inputBox.value!==e&&(this.inputBox.value=e)},t.prototype.setMatchCountState=function(e){this.matchCount.setState(e),this.setInputWidth()},t.prototype.select=function(){this.inputBox.select()},t.prototype.focus=function(){this.inputBox.focus()},t.prototype.getCaseSensitive=function(){return this.caseSensitive.checked},t.prototype.setCaseSensitive=function(e){this.caseSensitive.checked=e,this.setInputWidth()},t.prototype.getWholeWords=function(){return this.wholeWords.checked},t.prototype.setWholeWords=function(e){this.wholeWords.checked=e,this.setInputWidth()},t.prototype.getRegex=function(){return this.regex.checked},t.prototype.setRegex=function(e){this.regex.checked=e,this.setInputWidth()},t.prototype.focusOnCaseSensitive=function(){this.caseSensitive.focus()},t.prototype.setInputWidth=function(){var e=this.width-this.matchCount.width()-this.caseSensitive.width()-this.wholeWords.width()-this.regex.width();this.inputBox.width=e},t.prototype.buildDomNode=function(e,t,i){var h=this;this.domNode=document.createElement("div"),this.domNode.style.width=this.width+"px",o.addClass(this.domNode,"monaco-findInput"),this.inputBox=this._register(new s.InputBox(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation||null,showMessage:!0}})),this.regex=this._register(new n.Checkbox({actionClassName:"regex",title:r+i,isChecked:!1,onChange:function(e){h._onDidOptionChange.fire(e),e||h.inputBox.focus(),h.setInputWidth(),h.validate()}})),this.wholeWords=this._register(new n.Checkbox({actionClassName:"whole-word",title:l+t,isChecked:!1,onChange:function(e){h._onDidOptionChange.fire(e),e||h.inputBox.focus(),h.setInputWidth(),h.validate()}})),this.caseSensitive=this._register(new n.Checkbox({actionClassName:"case-sensitive",title:p+e,isChecked:!1,onChange:function(e){h._onDidOptionChange.fire(e),e||h.inputBox.focus(),h.setInputWidth(),h.validate()},onKeyDown:function(e){h._onCaseSensitiveKeyDown.fire(e)}})),this.matchCount=this._register(new m({onClick:function(e){h.inputBox.focus(),e.preventDefault()}}));var d=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,function(e){if(e.equals(a.CommonKeybindings.LEFT_ARROW)||e.equals(a.CommonKeybindings.RIGHT_ARROW)||e.equals(a.CommonKeybindings.ESCAPE)){var t=d.indexOf(document.activeElement);if(t>=0){var i=void 0;e.equals(a.CommonKeybindings.RIGHT_ARROW)?i=(t+1)%d.length:e.equals(a.CommonKeybindings.LEFT_ARROW)&&(i=0===t?d.length-1:t-1),e.equals(a.CommonKeybindings.ESCAPE)?d[t].blur():i>=0&&d[i].focus(),o.EventHelper.stop(e,!0)}}}),this.setInputWidth();var u=document.createElement("div");u.className="controls",u.appendChild(this.matchCount.domNode),u.appendChild(this.caseSensitive.domNode),u.appendChild(this.wholeWords.domNode),u.appendChild(this.regex.domNode),this.domNode.appendChild(u)},t.prototype.validate=function(){this.inputBox.validate()},t.prototype.showMessage=function(e){this.inputBox.showMessage(e)},t.prototype.clearMessage=function(){this.inputBox.hideMessage()},t.prototype.clearValidation=function(){this.inputBox.hideMessage()},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.OPTION_CHANGE="optionChange",t}(h.Widget);t.FindInput=c;var m=function(e){function t(t){e.call(this),this.domNode=document.createElement("div"),this.domNode.className="matchCount",this.setState({isVisible:!1,count:"0",title:""}),this.onclick(this.domNode,t.onClick)}return __extends(t,e),t.prototype.width=function(){return this.isVisible?30:0},t.prototype.setState=function(e){o.clearNode(this.domNode),this.domNode.appendChild(document.createTextNode(e.count)),this.domNode.title=e.title,this.isVisible=e.isVisible,this.isVisible?this.domNode.style.display="block":this.domNode.style.display="none"},t}(h.Widget)});