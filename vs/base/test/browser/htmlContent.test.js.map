{"version":3,"file":"vs/base/test/browser/htmlContent.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/base/test/browser/htmlContent.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as assert from 'assert';\nimport { renderHtml } from 'vs/base/browser/htmlContentRenderer';\n\nsuite('HtmlContent', () => {\n\ttest('render text', () => {\n\t\tvar result = renderHtml({\n\t\t\ttext:'testing',\n\t\t\tisText: true\n\t\t});\n\t\tassert.strictEqual(result.nodeType, document.TEXT_NODE);\n\t});\n\n\ttest('cannot render script tag', function () {\n\t\tvar host = document.createElement('div');\n\t\tdocument.body.appendChild(host);\n\t\thost.appendChild(renderHtml({\n\t\t\ttagName: 'script',\n\t\t\ttext: 'alert(\\'owned -- injected script tag via htmlContent!\\')'\n\t\t}));\n\t\tassert(true);\n\t\tdocument.body.removeChild(host);\n\t});\n\n\n\ttest('render simple element', () => {\n\t\tvar result:HTMLElement = <any>renderHtml({\n\t\t\ttext:'testing'\n\t\t});\n\t\tassert.strictEqual(result.nodeType, document.ELEMENT_NODE);\n\t\tassert.strictEqual(result.textContent, 'testing');\n\t\tassert.strictEqual(result.tagName, 'DIV');\n\t});\n\n\ttest('render element with class', () => {\n\t\tvar result:HTMLElement = <any> renderHtml({\n\t\t\ttext:'testing',\n\t\t\tclassName: 'testClass'\n\t\t});\n\t\tassert.strictEqual(result.nodeType, document.ELEMENT_NODE);\n\t\tassert.strictEqual(result.className, 'testClass');\n\t});\n\n\ttest('render element with style', () => {\n\t\tvar result:HTMLElement = <any> renderHtml({\n\t\t\ttext:'testing',\n\t\t\tstyle: 'width: 100px;'\n\t\t});\n\t\tassert.strictEqual(result.getAttribute('style'), 'width: 100px;');\n\t});\n\n\ttest('render element with custom style', () => {\n\t\tvar result:HTMLElement = <any> renderHtml({\n\t\t\ttext:'testing',\n\t\t\tcustomStyle: {\n\t\t\t\t'width':'100px'\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(result.style.width, '100px');\n\t});\n\n\ttest('render element with children', () => {\n\t\tvar result:HTMLElement = <any> renderHtml({\n\t\t\tclassName: 'parent',\n\t\t\tchildren: [{\n\t\t\t\ttext: 'child'\n\t\t\t}]\n\t\t});\n\t\tassert.strictEqual(result.children.length, 1);\n\t\tassert.strictEqual(result.className, 'parent');\n\t\tassert.strictEqual(result.firstChild.textContent, 'child');\n\t});\n\n\ttest('simple formatting', () => {\n\t\tvar result:HTMLElement = <any> renderHtml({\n\t\t\tformattedText: '**bold**'\n\t\t});\n\t\tassert.strictEqual(result.children.length, 1);\n\t\tassert.strictEqual(result.firstChild.textContent, 'bold');\n\t\tassert.strictEqual((<HTMLElement>result.firstChild).tagName, 'B');\n\t\tassert.strictEqual(result.innerHTML, '<b>bold</b>');\n\n\t\tresult = <any> renderHtml({\n\t\t\tformattedText: '__italics__'\n\t\t});\n\n\t\tassert.strictEqual(result.innerHTML, '<i>italics</i>');\n\n\t\tresult = <any> renderHtml({\n\t\t\tformattedText: 'this string has **bold** and __italics__'\n\t\t});\n\n\t\tassert.strictEqual(result.innerHTML, 'this string has <b>bold</b> and <i>italics</i>');\n\t});\n\n\ttest('no formatting', () => {\n\t\tvar result:HTMLElement = <any> renderHtml({\n\t\t\tformattedText: 'this is just a string'\n\t\t});\n\t\tassert.strictEqual(result.innerHTML, 'this is just a string');\n\t});\n\n\ttest('preserve newlines', () => {\n\t\tvar result:HTMLElement = <any> renderHtml({\n\t\t\tformattedText: 'line one\\nline two'\n\t\t});\n\t\tassert.strictEqual(result.innerHTML, 'line one<br>line two');\n\t});\n\n\ttest('action', () => {\n\t\tvar callbackCalled = false;\n\t\tvar result:HTMLElement = <any> renderHtml({\n\t\t\tformattedText: '[[action]]'\n\t\t}, {\n\t\t\tactionCallback(content) {\n\t\t\t\tassert.strictEqual(content, '0');\n\t\t\t\tcallbackCalled = true;\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(result.innerHTML, '<a href=\"#\">action</a>');\n\n\t\tvar event:MouseEvent = <any>document.createEvent('MouseEvent');\n\t\tevent.initEvent('click', true, true);\n\t\tresult.firstChild.dispatchEvent(event);\n\t\tassert.strictEqual(callbackCalled, true);\n\t});\n\n\ttest('fancy action', () => {\n\t\tvar callbackCalled = false;\n\t\tvar result:HTMLElement = <any> renderHtml({\n\t\t\tformattedText: '__**[[action]]**__'\n\t\t}, {\n\t\t\tactionCallback(content) {\n\t\t\t\tassert.strictEqual(content, '0');\n\t\t\t\tcallbackCalled = true;\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(result.innerHTML, '<i><b><a href=\"#\">action</a></b></i>');\n\n\t\tvar event:MouseEvent = <any>document.createEvent('MouseEvent');\n\t\tevent.initEvent('click', true, true);\n\t\tresult.firstChild.firstChild.firstChild.dispatchEvent(event);\n\t\tassert.strictEqual(callbackCalled, true);\n\t});\n\n\ttest('escaped formatting', () => {\n\t\tvar result:HTMLElement = <any> renderHtml({\n\t\t\tformattedText: '\\\\*\\\\*bold\\\\*\\\\*'\n\t\t});\n\t\tassert.strictEqual(result.children.length, 0);\n\t\tassert.strictEqual(result.innerHTML, '**bold**');\n\t});\n});"]}