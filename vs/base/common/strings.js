define(["require","exports","vs/base/common/map"],function(r,e,t){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function n(r,e,t){void 0===t&&(t="0");for(var n=""+r,a=[n],o=n.length;o<e;o++)a.push(t);return a.reverse().join("")}function a(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return 0===e.length?r:r.replace(z,function(r,t){var n=parseInt(t,10);return isNaN(n)||n<0||n>=e.length?r:e[n]})}function o(r){return r.replace(/[<|>|&]/g,function(r){switch(r){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return r}})}function i(r){return r.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}function u(r,e){void 0===e&&(e=" ");var t=c(r,e);return f(t,e)}function c(r,e){if(!r||!e)return r;var t=e.length;if(0===t||0===r.length)return r;for(var n=0,a=-1;(a=r.indexOf(e,n))===n;)n+=t;return r.substring(n)}function f(r,e){if(!r||!e)return r;var t=e.length,n=r.length;if(0===t||0===n)return r;for(var a=n,o=-1;;){if(o=r.lastIndexOf(e,a-1),o===-1||o+t!==a)break;if(0===o)return"";a=o}return r.substring(0,a)}function h(r){return r.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function l(r){return r.replace(/\*/g,"")}function s(r,e){if(r.length<e.length)return!1;for(var t=0;t<e.length;t++)if(r[t]!==e[t])return!1;return!0}function g(r,e){var t=r.length-e.length;return t>0?r.lastIndexOf(e)===t:0===t&&r===e}function p(r,e,t,n,a){if(""===r)throw new Error("Cannot create regex from empty string");e||(r=r.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")),n&&(/\B/.test(r.charAt(0))||(r="\\b"+r),/\B/.test(r.charAt(r.length-1))||(r+="\\b"));var o="";return a&&(o+="g"),t||(o+="i"),new RegExp(r,o)}function v(r){if("^"===r.source||"^$"===r.source||"$"===r.source)return!1;var e=r.exec("");return e&&0===r.lastIndex}function d(r){if(!e.canNormalize||!r)return r;var t=O.get(r);if(t)return t;var n;return n=F.test(r)?r.normalize("NFC"):r,O.set(r,n),n}function m(r){for(var e=0,t=r.length;e<t;e++)if(" "!==r.charAt(e)&&"\t"!==r.charAt(e))return e;return-1}function C(r){for(var e=0,t=r.length;e<t;e++)if(" "!==r.charAt(e)&&"\t"!==r.charAt(e))return r.substring(0,e);return r}function x(r,e){void 0===e&&(e=r.length-1);for(var t=e;t>=0;t--)if(" "!==r.charAt(t)&&"\t"!==r.charAt(t))return t;return-1}function A(r,e){return r<e?-1:r>e?1:0}function b(r){return r>=97&&r<=122||r>=65&&r<=90}function L(r,e){var t=r.length,n=e.length;if(t!==n)return!1;for(var a=0;a<t;a++){var o=r.charCodeAt(a),i=e.charCodeAt(a);if(o!==i)if(b(o)&&b(i)){var u=Math.abs(o-i);if(0!==u&&32!==u)return!1}else if(String.fromCharCode(o).toLocaleLowerCase()!==String.fromCharCode(i).toLocaleLowerCase())return!1}return!0}function E(r,e){var t,n=Math.min(r.length,e.length);for(t=0;t<n;t++)if(r.charCodeAt(t)!==e.charCodeAt(t))return t;return n}function I(r,e){var t,n=Math.min(r.length,e.length),a=r.length-1,o=e.length-1;for(t=0;t<n;t++)if(r.charCodeAt(a-t)!==e.charCodeAt(o-t))return t;return n}function M(r){return r=+r,r>=11904&&r<=55215||r>=63744&&r<=64255||r>=65281&&r<=65374}function W(r,e,t){void 0===t&&(t=4);var n=Math.abs(r.length-e.length);if(n>t)return 0;var a,o,i=[],u=[];for(a=0;a<e.length+1;++a)u.push(0);for(a=0;a<r.length+1;++a)i.push(u);for(a=1;a<r.length+1;++a)for(o=1;o<e.length+1;++o)r[a-1]===e[o-1]?i[a][o]=i[a-1][o-1]+1:i[a][o]=Math.max(i[a-1][o],i[a][o-1]);return i[r.length][e.length]-Math.sqrt(n)}function N(r){for(var e,t=/\r\n|\r|\n/g,n=[0];e=t.exec(r);)n.push(t.lastIndex);return n}function $(r,t){if(r.length<t)return r;for(var n=r.split(/\b/),a=0,o=n.length-1;o>=0;o--)if(a+=n[o].length,a>t){n.splice(0,o);break}return n.join(e.empty).replace(/^\s/,e.empty)}function w(r){return r&&(r=r.replace(T,""),r=r.replace(k,"\n"),r=r.replace(q,""),r=r.replace(U,"")),r}function B(r){return r&&r.length>0&&r.charCodeAt(0)===j}function R(r,e,t){var n=r.length+e.length;return n>t&&(r="..."+r.substr(n-t)),r+=e.length>t?e.substr(e.length-t):e}function S(r){return btoa(encodeURIComponent(r))}function y(r,e){for(var t="",n=0;n<e;n++)t+=r;return t}e.empty="",e.pad=n;var z=/{(\d+)}/g;e.format=a,e.escape=o,e.escapeRegExpCharacters=i,e.trim=u,e.ltrim=c,e.rtrim=f,e.convertSimple2RegExpPattern=h,e.stripWildcards=l,e.startsWith=s,e.endsWith=g,e.createRegExp=p,e.regExpLeadsToEndlessLoop=v,e.canNormalize="function"==typeof"".normalize;var F=/[^\u0000-\u0080]/,O=new t.LinkedMap(1e4);e.normalizeNFC=d,e.firstNonWhitespaceIndex=m,e.getLeadingWhitespace=C,e.lastNonWhitespaceIndex=x,e.compare=A,e.equalsIgnoreCase=L,e.commonPrefixLength=E,e.commonSuffixLength=I,e.isFullWidthCharacter=M,e.difference=W,e.computeLineStarts=N,e.lcut=$;var T=/\x1B\x5B[12]?K/g,k=/\xA/g,q=/\x1b\[\d+m/g,U=/\x1b\[0?m/g;e.removeAnsiEscapeCodes=w;var j=65279;e.UTF8_BOM_CHARACTER=String.fromCharCode(j),e.startsWithUTF8BOM=B,e.appendWithLimit=R,e.safeBtoa=S,e.repeat=y});