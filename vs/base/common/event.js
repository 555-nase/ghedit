define(["require","exports","vs/base/common/callbackList"],function(n,t,e){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function i(n,t){return function(e,i,r){var o=n.addListener2(t,function(){e.apply(i,arguments)});return Array.isArray(r)&&r.push(o),o}}function r(n){var t=null,e=null,i=new f({onFirstListenerAdd:function(){t=n.then(function(n){return e=n(function(n){return i.fire(n)})},function(){return null})},onLastListenerRemove:function(){t&&(t.cancel(),t=null),e&&(e.dispose(),e=null)}});return i.event}function o(n,t){return function(e,i,r){return void 0===i&&(i=null),n(function(n){return e.call(i,t(n))},null,r)}}function u(n,t){return function(e,i,r){return void 0===i&&(i=null),n(function(n){return t(n)&&e.call(i,n)},null,r)}}function s(n,t,e){void 0===e&&(e=100);var i,r,o,u=new f({onFirstListenerAdd:function(){i=n(function(n){r=t(r,n),clearTimeout(o),o=setTimeout(function(){var n=r;r=void 0,u.fire(n)},e)})},onLastListenerRemove:function(){i.dispose()}});return u.event}var c;!function(n){var t={dispose:function(){}};n.None=function(){return t}}(c||(c={})),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=c;var f=function(){function n(n){this._options=n}return Object.defineProperty(n.prototype,"event",{get:function(){var t=this;return this._event||(this._event=function(i,r,o){t._callbacks||(t._callbacks=new e["default"]),t._options&&t._options.onFirstListenerAdd&&t._callbacks.isEmpty()&&t._options.onFirstListenerAdd(t),t._callbacks.add(i,r);var u;return u={dispose:function(){u.dispose=n._noop,t._disposed||(t._callbacks.remove(i,r),t._options&&t._options.onLastListenerRemove&&t._callbacks.isEmpty()&&t._options.onLastListenerRemove(t))}},Array.isArray(o)&&o.push(u),u}),this._event},enumerable:!0,configurable:!0}),n.prototype.fire=function(n){this._callbacks&&this._callbacks.invoke.call(this._callbacks,n)},n.prototype.dispose=function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0,this._disposed=!0)},n._noop=function(){},n}();t.Emitter=f,t.fromEventEmitter=i,t.fromPromise=r,t.mapEvent=o,t.filterEvent=u,t.debounceEvent=s;var a;!function(n){n[n.Idle=0]="Idle",n[n.Running=1]="Running"}(a||(a={}));var l=function(){function n(){this.buffers=[]}return n.prototype.wrapEvent=function(n){var t=this;return function(e,i,r){return n(function(n){var r=t.buffers[t.buffers.length-1];r?r.push(function(){return e.call(i,n)}):e.call(i,n)},void 0,r)}},n.prototype.bufferEvents=function(n){var t=[];this.buffers.push(t),n(),this.buffers.pop(),t.forEach(function(n){return n()})},n}();t.EventBufferer=l});