/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};define(["require","exports"],function(t,e){"use strict";var i=function(){function t(){this.map=Object.create(null),this._size=0}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=this.peek(t);return e?e:null},t.prototype.keys=function(){var t=[];for(var e in this.map)t.push(this.map[e].key);return t},t.prototype.values=function(){var t=[];for(var e in this.map)t.push(this.map[e].value);return t},t.prototype.entries=function(){var t=[];for(var e in this.map)t.push(this.map[e]);return t},t.prototype.set=function(t,e){return!this.get(t)&&(this.push(t,e),!0)},t.prototype["delete"]=function(t){var e=this.get(t);return e?(this.pop(t),e):null},t.prototype.has=function(t){return!!this.get(t)},t.prototype.clear=function(){this.map=Object.create(null),this._size=0},t.prototype.push=function(t,e){var i={key:t,value:e};this.map[t.toString()]=i,this._size++},t.prototype.pop=function(t){delete this.map[t.toString()],this._size--},t.prototype.peek=function(t){var e=this.map[t.toString()];return e?e.value:null},t}();e.SimpleMap=i;var r=function(){function t(t,e){void 0===t&&(t=Number.MAX_VALUE),void 0===e&&(e=1),this.limit=t,this.map=Object.create(null),this._size=0,this.ratio=t*e}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){if(this.map[t])return!1;var i={key:t,value:e};return this.push(i),this._size>this.limit&&this.trim(),!0},t.prototype.get=function(t){var e=this.map[t];return e?e.value:null},t.prototype["delete"]=function(t){var e=this.map[t];return e?(this.map[t]=void 0,this._size--,e.next?e.next.prev=e.prev:this.head=e.prev,e.prev?e.prev.next=e.next:this.tail=e.next,e.value):null},t.prototype.has=function(t){return!!this.map[t]},t.prototype.clear=function(){this.map=Object.create(null),this._size=0,this.head=null,this.tail=null},t.prototype.push=function(t){this.head&&(t.prev=this.head,this.head.next=t),this.tail||(this.tail=t),this.head=t,this.map[t.key]=t,this._size++},t.prototype.trim=function(){if(this.tail)if(this.ratio<this.limit)for(var t=0,e=this.tail;e.next;){if(this.map[e.key]=void 0,this._size--,t===this.ratio){this.tail=e.next,this.tail.prev=null;break}e=e.next,t++}else this.map[this.tail.key]=void 0,this._size--,this.tail=this.tail.next,this.tail.prev=null},t}();e.LinkedMap=r;var n=function(t){function e(e){t.call(this,e)}return __extends(e,t),e.prototype.get=function(t){var e=this.map[t];return e?(this["delete"](t),this.push(e),e.value):null},e}(r);e.LRUCache=n});