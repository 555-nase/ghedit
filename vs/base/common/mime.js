define(["require","exports","vs/base/common/paths","vs/base/common/types","vs/base/common/strings","vs/base/common/glob"],function(e,n,i,t,r,o){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function s(e){p.push(e),e.userConfigured||p.forEach(function(n){n.mime===e.mime||n.userConfigured||(e.extension&&n.extension===e.extension&&console.warn("Overwriting extension <<"+e.extension+">> to now point to mime <<"+e.mime+">>"),e.filename&&n.filename===e.filename&&console.warn("Overwriting filename <<"+e.filename+">> to now point to mime <<"+e.mime+">>"),e.filepattern&&n.filepattern===e.filepattern&&console.warn("Overwriting filepattern <<"+e.filepattern+">> to now point to mime <<"+e.mime+">>"),e.firstline&&n.firstline===e.firstline&&console.warn("Overwriting firstline <<"+e.firstline+">> to now point to mime <<"+e.mime+">>"))})}function f(e){p=e?p.filter(function(e){return!e.userConfigured}):[]}function a(e,i){if(!e)return[n.MIME_UNKNOWN];e=e.toLowerCase();var t=l(e,p.filter(function(e){return e.userConfigured}));if(t)return[t,n.MIME_TEXT];var r=l(e,p.filter(function(e){return!e.userConfigured}));if(r)return[r,n.MIME_TEXT];if(i){var o=m(i);if(o)return[o,n.MIME_TEXT]}return[n.MIME_UNKNOWN]}function l(e,n){for(var t,s,f,a=i.basename(e),l=0;l<n.length;l++){var m=n[l];if(m.filename&&a===m.filename.toLowerCase()){t=m;break}if(m.filepattern){var u=m.filepattern.indexOf(i.sep)>=0?e:a;o.match(m.filepattern.toLowerCase(),u)&&(!s||m.filepattern.length>s.filepattern.length)&&(s=m)}m.extension&&r.endsWith(a,m.extension.toLowerCase())&&(!f||m.extension.length>f.extension.length)&&(f=m)}return t?t.mime:s?s.mime:f?f.mime:null}function m(e){if(r.startsWithUTF8BOM(e)&&(e=e.substr(1)),e.length>0)for(var n=0;n<p.length;++n){var i=p[n];if(i.firstline){var t=e.match(i.firstline);if(t&&t.length>0&&t[0].length===e.length)return i.mime}}return null}function u(e){if(!e)return!1;var i;return i=t.isArray(e)?e:e.split(",").map(function(e){return e.trim()}),i.indexOf(n.MIME_BINARY)>=0}function c(e){return!e||("string"==typeof e?e===n.MIME_BINARY||e===n.MIME_TEXT||e===n.MIME_UNKNOWN:1===e.length&&c(e[0]))}function g(e,n){for(var i=0;i<p.length;i++){var t=p[i];if(!t.userConfigured&&t.mime===e&&t.extension)return n+t.extension}return null}n.MIME_TEXT="text/plain",n.MIME_BINARY="application/octet-stream",n.MIME_UNKNOWN="application/unknown";var p=[];n.registerTextMime=s,n.clearTextMimes=f,n.guessMimeTypes=a,n.isBinaryMime=u,n.isUnspecific=c,n.suggestFilename=g});