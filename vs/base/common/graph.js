define(["require","exports","vs/base/common/types","vs/base/common/collections"],function(t,o,e,n){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function i(t){return{data:t,incoming:Object.create(null),outgoing:Object.create(null)}}var r=function(){function t(t){this._hashFn=t,this._nodes=Object.create(null)}return t.prototype.roots=function(){var t=[];return n.forEach(this._nodes,function(o){e.isEmptyObject(o.value.outgoing)&&t.push(o.value)}),t},t.prototype.traverse=function(t,o,e){var n=this.lookup(t);n&&this._traverse(n,o,Object.create(null),e)},t.prototype._traverse=function(t,o,e,i){var r=this,s=this._hashFn(t.data);if(!n.contains(e,s)){e[s]=!0,i(t.data);var u=o?t.outgoing:t.incoming;n.forEach(u,function(t){return r._traverse(t.value,o,e,i)})}},t.prototype.insertEdge=function(t,o){var e=this.lookupOrInsertNode(t),n=this.lookupOrInsertNode(o);e.outgoing[this._hashFn(o)]=n,n.incoming[this._hashFn(t)]=e},t.prototype.removeNode=function(t){var o=this._hashFn(t);delete this._nodes[o],n.forEach(this._nodes,function(t){delete t.value.outgoing[o],delete t.value.incoming[o]})},t.prototype.lookupOrInsertNode=function(t){var o=this._hashFn(t),e=n.lookup(this._nodes,o);return e||(e=i(t),this._nodes[o]=e),e},t.prototype.lookup=function(t){return n.lookup(this._nodes,this._hashFn(t))},Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this._nodes).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){var t=[];return n.forEach(this._nodes,function(o){t.push(o.key+", (incoming)["+Object.keys(o.value.incoming).join(", ")+"], (outgoing)["+Object.keys(o.value.outgoing).join(",")+"]")}),t.join("\n")},t}();o.Graph=r});