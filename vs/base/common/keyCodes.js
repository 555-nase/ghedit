/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
define(["require","exports","vs/nls","vs/base/common/platform"],function(t,e,r,o){"use strict";function n(t,e){var r=[];t(r);for(var o={},n=0,a=r.length;n<a;n++)r[n]&&(o[r[n]]=n);e(o);var i={};for(var _ in o)o.hasOwnProperty(_)&&(i[_]=o[_],i[_.toLowerCase()]=o[_]);return new l(r,i)}function a(t,e,r){var o=[],n=S.hasCtrlCmd(t),i=S.hasShift(t),_=S.hasAlt(t),s=S.hasWinCtrl(t),l=S.extractKeyCode(t),E=e.getLabelForKey(l);if(!E)return"";(n&&!r.isMacintosh||s&&r.isMacintosh)&&o.push(e.ctrlKeyLabel),i&&o.push(e.shiftKeyLabel),_&&o.push(e.altKeyLabel),n&&r.isMacintosh&&o.push(e.cmdKeyLabel),s&&!r.isMacintosh&&o.push(e.windowsKeyLabel),o.push(E);var c=o.join(e.modifierSeparator);return S.hasChord(t)?c+" "+a(S.extractChordPart(t),e,r):c}function i(t,e){t.length>0&&t.push({tagName:"span",text:"+"}),t.push({tagName:"span",className:"monaco-kbkey",text:e})}function _(t,e,r,o){void 0===o&&(o=!1);var n=[],a=S.hasCtrlCmd(t),s=S.hasShift(t),l=S.hasAlt(t),E=S.hasWinCtrl(t),c=S.extractKeyCode(t),K=e.getLabelForKey(c);if(!K)return[];(a&&!r.isMacintosh||E&&r.isMacintosh)&&i(n,e.ctrlKeyLabel),s&&i(n,e.shiftKeyLabel),l&&i(n,e.altKeyLabel),a&&r.isMacintosh&&i(n,e.cmdKeyLabel),E&&!r.isMacintosh&&i(n,e.windowsKeyLabel),i(n,K);var u=null;return S.hasChord(t)&&(u=_(S.extractChordPart(t),e,r,!0),n.push({tagName:"span",text:" "}),n=n.concat(u)),o?n:[{tagName:"span",className:"monaco-kb",children:n}]}!function(t){t[t.Unknown=0]="Unknown",t[t.Backspace=1]="Backspace",t[t.Tab=2]="Tab",t[t.Enter=3]="Enter",t[t.Shift=4]="Shift",t[t.Ctrl=5]="Ctrl",t[t.Alt=6]="Alt",t[t.PauseBreak=7]="PauseBreak",t[t.CapsLock=8]="CapsLock",t[t.Escape=9]="Escape",t[t.Space=10]="Space",t[t.PageUp=11]="PageUp",t[t.PageDown=12]="PageDown",t[t.End=13]="End",t[t.Home=14]="Home",t[t.LeftArrow=15]="LeftArrow",t[t.UpArrow=16]="UpArrow",t[t.RightArrow=17]="RightArrow",t[t.DownArrow=18]="DownArrow",t[t.Insert=19]="Insert",t[t.Delete=20]="Delete",t[t.KEY_0=21]="KEY_0",t[t.KEY_1=22]="KEY_1",t[t.KEY_2=23]="KEY_2",t[t.KEY_3=24]="KEY_3",t[t.KEY_4=25]="KEY_4",t[t.KEY_5=26]="KEY_5",t[t.KEY_6=27]="KEY_6",t[t.KEY_7=28]="KEY_7",t[t.KEY_8=29]="KEY_8",t[t.KEY_9=30]="KEY_9",t[t.KEY_A=31]="KEY_A",t[t.KEY_B=32]="KEY_B",t[t.KEY_C=33]="KEY_C",t[t.KEY_D=34]="KEY_D",t[t.KEY_E=35]="KEY_E",t[t.KEY_F=36]="KEY_F",t[t.KEY_G=37]="KEY_G",t[t.KEY_H=38]="KEY_H",t[t.KEY_I=39]="KEY_I",t[t.KEY_J=40]="KEY_J",t[t.KEY_K=41]="KEY_K",t[t.KEY_L=42]="KEY_L",t[t.KEY_M=43]="KEY_M",t[t.KEY_N=44]="KEY_N",t[t.KEY_O=45]="KEY_O",t[t.KEY_P=46]="KEY_P",t[t.KEY_Q=47]="KEY_Q",t[t.KEY_R=48]="KEY_R",t[t.KEY_S=49]="KEY_S",t[t.KEY_T=50]="KEY_T",t[t.KEY_U=51]="KEY_U",t[t.KEY_V=52]="KEY_V",t[t.KEY_W=53]="KEY_W",t[t.KEY_X=54]="KEY_X",t[t.KEY_Y=55]="KEY_Y",t[t.KEY_Z=56]="KEY_Z",t[t.Meta=57]="Meta",t[t.ContextMenu=58]="ContextMenu",t[t.F1=59]="F1",t[t.F2=60]="F2",t[t.F3=61]="F3",t[t.F4=62]="F4",t[t.F5=63]="F5",t[t.F6=64]="F6",t[t.F7=65]="F7",t[t.F8=66]="F8",t[t.F9=67]="F9",t[t.F10=68]="F10",t[t.F11=69]="F11",t[t.F12=70]="F12",t[t.F13=71]="F13",t[t.F14=72]="F14",t[t.F15=73]="F15",t[t.F16=74]="F16",t[t.F17=75]="F17",t[t.F18=76]="F18",t[t.F19=77]="F19",t[t.NumLock=78]="NumLock",t[t.ScrollLock=79]="ScrollLock",t[t.US_SEMICOLON=80]="US_SEMICOLON",t[t.US_EQUAL=81]="US_EQUAL",t[t.US_COMMA=82]="US_COMMA",t[t.US_MINUS=83]="US_MINUS",t[t.US_DOT=84]="US_DOT",t[t.US_SLASH=85]="US_SLASH",t[t.US_BACKTICK=86]="US_BACKTICK",t[t.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",t[t.US_BACKSLASH=88]="US_BACKSLASH",t[t.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",t[t.US_QUOTE=90]="US_QUOTE",t[t.OEM_8=91]="OEM_8",t[t.OEM_102=92]="OEM_102",t[t.NUMPAD_0=93]="NUMPAD_0",t[t.NUMPAD_1=94]="NUMPAD_1",t[t.NUMPAD_2=95]="NUMPAD_2",t[t.NUMPAD_3=96]="NUMPAD_3",t[t.NUMPAD_4=97]="NUMPAD_4",t[t.NUMPAD_5=98]="NUMPAD_5",t[t.NUMPAD_6=99]="NUMPAD_6",t[t.NUMPAD_7=100]="NUMPAD_7",t[t.NUMPAD_8=101]="NUMPAD_8",t[t.NUMPAD_9=102]="NUMPAD_9",t[t.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",t[t.NUMPAD_ADD=104]="NUMPAD_ADD",t[t.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",t[t.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",t[t.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",t[t.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",t[t.MAX_VALUE=109]="MAX_VALUE"}(e.KeyCode||(e.KeyCode={}));var s,s=e.KeyCode,l=function(){function t(t,e){this._fromKeyCode=t,this._toKeyCode=e}return t.prototype.fromKeyCode=function(t){return this._fromKeyCode[t]},t.prototype.toKeyCode=function(t){return this._toKeyCode.hasOwnProperty(t)?this._toKeyCode[t]:s.Unknown},t}(),E=n(function(t){t[s.Unknown]="unknown",t[s.Backspace]="Backspace",t[s.Tab]="Tab",t[s.Enter]="Enter",t[s.Shift]="Shift",t[s.Ctrl]="Ctrl",t[s.Alt]="Alt",t[s.PauseBreak]="PauseBreak",t[s.CapsLock]="CapsLock",t[s.Escape]="Escape",t[s.Space]="Space",t[s.PageUp]="PageUp",t[s.PageDown]="PageDown",t[s.End]="End",t[s.Home]="Home",t[s.LeftArrow]="LeftArrow",t[s.UpArrow]="UpArrow",t[s.RightArrow]="RightArrow",t[s.DownArrow]="DownArrow",t[s.Insert]="Insert",t[s.Delete]="Delete",t[s.KEY_0]="0",t[s.KEY_1]="1",t[s.KEY_2]="2",t[s.KEY_3]="3",t[s.KEY_4]="4",t[s.KEY_5]="5",t[s.KEY_6]="6",t[s.KEY_7]="7",t[s.KEY_8]="8",t[s.KEY_9]="9",t[s.KEY_A]="A",t[s.KEY_B]="B",t[s.KEY_C]="C",t[s.KEY_D]="D",t[s.KEY_E]="E",t[s.KEY_F]="F",t[s.KEY_G]="G",t[s.KEY_H]="H",t[s.KEY_I]="I",t[s.KEY_J]="J",t[s.KEY_K]="K",t[s.KEY_L]="L",t[s.KEY_M]="M",t[s.KEY_N]="N",t[s.KEY_O]="O",t[s.KEY_P]="P",t[s.KEY_Q]="Q",t[s.KEY_R]="R",t[s.KEY_S]="S",t[s.KEY_T]="T",t[s.KEY_U]="U",t[s.KEY_V]="V",t[s.KEY_W]="W",t[s.KEY_X]="X",t[s.KEY_Y]="Y",t[s.KEY_Z]="Z",t[s.ContextMenu]="ContextMenu",t[s.F1]="F1",t[s.F2]="F2",t[s.F3]="F3",t[s.F4]="F4",t[s.F5]="F5",t[s.F6]="F6",t[s.F7]="F7",t[s.F8]="F8",t[s.F9]="F9",t[s.F10]="F10",t[s.F11]="F11",t[s.F12]="F12",t[s.F13]="F13",t[s.F14]="F14",t[s.F15]="F15",t[s.F16]="F16",t[s.F17]="F17",t[s.F18]="F18",t[s.F19]="F19",t[s.NumLock]="NumLock",t[s.ScrollLock]="ScrollLock",t[s.US_SEMICOLON]=";",t[s.US_EQUAL]="=",t[s.US_COMMA]=",",t[s.US_MINUS]="-",t[s.US_DOT]=".",t[s.US_SLASH]="/",t[s.US_BACKTICK]="`",t[s.US_OPEN_SQUARE_BRACKET]="[",t[s.US_BACKSLASH]="\\",t[s.US_CLOSE_SQUARE_BRACKET]="]",t[s.US_QUOTE]="'",t[s.OEM_8]="OEM_8",t[s.OEM_102]="OEM_102",t[s.NUMPAD_0]="NumPad0",t[s.NUMPAD_1]="NumPad1",t[s.NUMPAD_2]="NumPad2",t[s.NUMPAD_3]="NumPad3",t[s.NUMPAD_4]="NumPad4",t[s.NUMPAD_5]="NumPad5",t[s.NUMPAD_6]="NumPad6",t[s.NUMPAD_7]="NumPad7",t[s.NUMPAD_8]="NumPad8",t[s.NUMPAD_9]="NumPad9",t[s.NUMPAD_MULTIPLY]="NumPad_Multiply",t[s.NUMPAD_ADD]="NumPad_Add",t[s.NUMPAD_SEPARATOR]="NumPad_Separator",t[s.NUMPAD_SUBTRACT]="NumPad_Subtract",t[s.NUMPAD_DECIMAL]="NumPad_Decimal",t[s.NUMPAD_DIVIDE]="NumPad_Divide"},function(t){t["\r"]=s.Enter}),c=n(function(t){for(var e=0,r=E._fromKeyCode.length;e<r;e++)t[e]=E._fromKeyCode[e];t[s.LeftArrow]="Left",t[s.UpArrow]="Up",t[s.RightArrow]="Right",t[s.DownArrow]="Down"},function(t){t.OEM_1=s.US_SEMICOLON,t.OEM_PLUS=s.US_EQUAL,t.OEM_COMMA=s.US_COMMA,t.OEM_MINUS=s.US_MINUS,t.OEM_PERIOD=s.US_DOT,t.OEM_2=s.US_SLASH,t.OEM_3=s.US_BACKTICK,t.OEM_4=s.US_OPEN_SQUARE_BRACKET,t.OEM_5=s.US_BACKSLASH,t.OEM_6=s.US_CLOSE_SQUARE_BRACKET,t.OEM_7=s.US_QUOTE,t.OEM_8=s.OEM_8,t.OEM_102=s.OEM_102});!function(t){function e(t){return E.fromKeyCode(t)}function r(t){return E.toKeyCode(t)}t.toString=e,t.fromString=r}(s=e.KeyCode||(e.KeyCode={}));var K=32768,u=16384,A=8192,C=4096,h=4095,S=function(){function t(){}return t.extractFirstPart=function(t){return 65535&t},t.extractChordPart=function(t){return t>>16&65535},t.hasChord=function(t){return 0!==this.extractChordPart(t)},t.hasCtrlCmd=function(t){return!!(t&K)},t.hasShift=function(t){return!!(t&u)},t.hasAlt=function(t){return!!(t&A)},t.hasWinCtrl=function(t){return!!(t&C)},t.extractKeyCode=function(t){return t&h},t}();e.BinaryKeybindings=S;var U=function(){function t(){}return t.chord=function(t,e){return t|(65535&e)<<16},t.CtrlCmd=K,t.Shift=u,t.Alt=A,t.WinCtrl=C,t}();e.KeyMod=U;var d=function(){function t(){}return t.ENTER=s.Enter,t.SHIFT_ENTER=U.Shift|s.Enter,t.CTRLCMD_ENTER=U.CtrlCmd|s.Enter,t.WINCTRL_ENTER=U.WinCtrl|s.Enter,t.TAB=s.Tab,t.SHIFT_TAB=U.Shift|s.Tab,t.ESCAPE=s.Escape,t.SPACE=s.Space,t.DELETE=s.Delete,t.SHIFT_DELETE=U.Shift|s.Delete,t.CTRLCMD_BACKSPACE=U.CtrlCmd|s.Backspace,t.UP_ARROW=s.UpArrow,t.WINCTRL_P=U.WinCtrl|s.KEY_P,t.SHIFT_UP_ARROW=U.Shift|s.UpArrow,t.CTRLCMD_UP_ARROW=U.CtrlCmd|s.UpArrow,t.DOWN_ARROW=s.DownArrow,t.WINCTRL_N=U.WinCtrl|s.KEY_N,t.SHIFT_DOWN_ARROW=U.Shift|s.DownArrow,t.CTRLCMD_DOWN_ARROW=U.CtrlCmd|s.DownArrow,t.LEFT_ARROW=s.LeftArrow,t.RIGHT_ARROW=s.RightArrow,t.HOME=s.Home,t.END=s.End,t.PAGE_UP=s.PageUp,t.SHIFT_PAGE_UP=U.Shift|s.PageUp,t.PAGE_DOWN=s.PageDown,t.SHIFT_PAGE_DOWN=U.Shift|s.PageDown,t.F2=s.F2,t.CTRLCMD_S=U.CtrlCmd|s.KEY_S,t.CTRLCMD_C=U.CtrlCmd|s.KEY_C,t.CTRLCMD_V=U.CtrlCmd|s.KEY_V,t}();e.CommonKeybindings=d;var L=function(){function t(t){this.value=t}return t._toUSLabel=function(t,e){return a(t,e.isMacintosh?M.INSTANCE:P.INSTANCE,e)},t._toUSAriaLabel=function(t,e){return a(t,N.INSTANCE,e)},t._toUSHTMLLabel=function(t,e){return _(t,e.isMacintosh?M.INSTANCE:P.INSTANCE,e)},t._toCustomLabel=function(t,e,r){return a(t,e,r)},t._toCustomHTMLLabel=function(t,e,r){return _(t,e,r)},t._toElectronAccelerator=function(t,e){return S.hasChord(t)?null:a(t,f.INSTANCE,e)},t.getUserSettingsKeybindingRegex=function(){if(!this._cachedKeybindingRegex){var t="numpad(0|1|2|3|4|5|6|7|8|9|_multiply|_add|_subtract|_decimal|_divide|_separator)",e="`|\\-|=|\\[|\\]|\\\\\\\\|;|'|,|\\.|\\/|oem_8|oem_102",r="left|up|right|down|pageup|pagedown|end|home|tab|enter|escape|space|backspace|delete|pausebreak|capslock|insert|contextmenu|numlock|scrolllock",o="[a-z]|[0-9]|f(1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19)",n="(("+[t,e,r,o].join(")|(")+"))",a="((ctrl|shift|alt|cmd|win|meta)\\+)*",i="("+a+n+")";this._cachedKeybindingRegex='"\\s*('+i+"(\\s+"+i+')?)\\s*"'}return this._cachedKeybindingRegex},t.toUserSettingsLabel=function(t,e){void 0===e&&(e=o);var r=a(t,Y.INSTANCE,e);return r=r.toLowerCase(),e.isMacintosh?r=r.replace(/meta/g,"cmd"):e.isWindows&&(r=r.replace(/meta/g,"win")),r},t.fromUserSettingsLabel=function(e,r){if(void 0===r&&(r=o),!e)return null;e=e.toLowerCase().trim();for(var n=!1,a=!1,i=!1,_=!1,s="";/^(ctrl|shift|alt|meta|win|cmd)(\+|\-)/.test(e);)/^ctrl(\+|\-)/.test(e)&&(r.isMacintosh?_=!0:n=!0,e=e.substr("ctrl-".length)),/^shift(\+|\-)/.test(e)&&(a=!0,e=e.substr("shift-".length)),/^alt(\+|\-)/.test(e)&&(i=!0,e=e.substr("alt-".length)),/^meta(\+|\-)/.test(e)&&(r.isMacintosh?n=!0:_=!0,e=e.substr("meta-".length)),/^win(\+|\-)/.test(e)&&(r.isMacintosh?n=!0:_=!0,e=e.substr("win-".length)),/^cmd(\+|\-)/.test(e)&&(r.isMacintosh?n=!0:_=!0,e=e.substr("cmd-".length));var l=0,E=e.indexOf(" ");E>0?(s=e.substring(0,E),l=t.fromUserSettingsLabel(e.substring(E),r)):s=e;var K=c.toKeyCode(s),u=0;return n&&(u|=U.CtrlCmd),a&&(u|=U.Shift),i&&(u|=U.Alt),_&&(u|=U.WinCtrl),u|=K,U.chord(u,l)},t.prototype.hasCtrlCmd=function(){return S.hasCtrlCmd(this.value)},t.prototype.hasShift=function(){return S.hasShift(this.value)},t.prototype.hasAlt=function(){return S.hasAlt(this.value)},t.prototype.hasWinCtrl=function(){return S.hasWinCtrl(this.value)},t.prototype.extractKeyCode=function(){return S.extractKeyCode(this.value)},t.prototype._toUSLabel=function(e){return void 0===e&&(e=o),t._toUSLabel(this.value,e)},t.prototype._toUSAriaLabel=function(e){return void 0===e&&(e=o),t._toUSAriaLabel(this.value,e)},t.prototype._toUSHTMLLabel=function(e){return void 0===e&&(e=o),t._toUSHTMLLabel(this.value,e)},t.prototype.toCustomLabel=function(e,r){return void 0===r&&(r=o),t._toCustomLabel(this.value,e,r)},t.prototype.toCustomHTMLLabel=function(e,r){return void 0===r&&(r=o),t._toCustomHTMLLabel(this.value,e,r)},t.prototype._toElectronAccelerator=function(e){return void 0===e&&(e=o),t._toElectronAccelerator(this.value,e)},t.prototype.toUserSettingsLabel=function(e){return void 0===e&&(e=o),t.toUserSettingsLabel(this.value,e)},t._cachedKeybindingRegex=null,t}();e.Keybinding=L;var f=function(){function t(){this.ctrlKeyLabel="Ctrl",this.shiftKeyLabel="Shift",this.altKeyLabel="Alt",this.cmdKeyLabel="Cmd",this.windowsKeyLabel="Super",this.modifierSeparator="+"}return t.prototype.getLabelForKey=function(t){switch(t){case s.UpArrow:return"Up";case s.DownArrow:return"Down";case s.LeftArrow:return"Left";case s.RightArrow:return"Right"}return s.toString(t)},t.INSTANCE=new t,t}();e.ElectronAcceleratorLabelProvider=f;var M=function(){function t(){this.ctrlKeyLabel="⌃",this.shiftKeyLabel="⇧",this.altKeyLabel="⌥",this.cmdKeyLabel="⌘",this.windowsKeyLabel=r.localize("windowsKey","Windows"),this.modifierSeparator=""}return t.prototype.getLabelForKey=function(e){switch(e){case s.LeftArrow:return t.leftArrowUnicodeLabel;case s.UpArrow:return t.upArrowUnicodeLabel;case s.RightArrow:return t.rightArrowUnicodeLabel;case s.DownArrow:return t.downArrowUnicodeLabel}return s.toString(e)},t.INSTANCE=new t,t.leftArrowUnicodeLabel=String.fromCharCode(8592),t.upArrowUnicodeLabel=String.fromCharCode(8593),t.rightArrowUnicodeLabel=String.fromCharCode(8594),t.downArrowUnicodeLabel=String.fromCharCode(8595),t}();e.MacUIKeyLabelProvider=M;var N=function(){function t(){this.ctrlKeyLabel=r.localize("ctrlKey.long","Control"),this.shiftKeyLabel=r.localize("shiftKey.long","Shift"),this.altKeyLabel=r.localize("altKey.long","Alt"),this.cmdKeyLabel=r.localize("cmdKey.long","Command"),this.windowsKeyLabel=r.localize("windowsKey.long","Windows"),this.modifierSeparator="+"}return t.prototype.getLabelForKey=function(t){return s.toString(t)},t.INSTANCE=new M,t}();e.AriaKeyLabelProvider=N;var P=function(){function t(){this.ctrlKeyLabel=r.localize("ctrlKey","Ctrl"),this.shiftKeyLabel=r.localize("shiftKey","Shift"),this.altKeyLabel=r.localize("altKey","Alt"),this.cmdKeyLabel=r.localize("cmdKey","Command"),this.windowsKeyLabel=r.localize("windowsKey","Windows"),this.modifierSeparator="+"}return t.prototype.getLabelForKey=function(t){return s.toString(t)},t.INSTANCE=new t,t}();e.ClassicUIKeyLabelProvider=P;var Y=function(){function t(){this.ctrlKeyLabel="Ctrl",this.shiftKeyLabel="Shift",this.altKeyLabel="Alt",this.cmdKeyLabel="Meta",this.windowsKeyLabel="Meta",this.modifierSeparator="+"}return t.prototype.getLabelForKey=function(t){return c.fromKeyCode(t)},t.INSTANCE=new t,t}()});