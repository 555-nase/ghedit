define(["require","exports","vs/base/common/platform"],function(e,t,r){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function n(e,r){e=u(e),r=u(r);for(var n=e.split(t.sep),i=r.split(t.sep);n.length>0&&i.length>0&&n[0]===i[0];)n.shift(),i.shift();for(var o=0,a=n.length;o<a;o++)i.unshift("..");return i.join(t.sep)}function i(e){var t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?".":0===~t?e[0]:e.substring(0,~t)}function o(e){var t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t===e.length-1?o(e.substring(0,e.length-1)):e.substr(~t+1)}function a(e){e=o(e);var t=~e.lastIndexOf(".");return t?e.substring(~t):""}function s(e,t){return t?!x.test(e):!C.test(e)}function u(e,t){if(null===e||void 0===e)return e;var n=e.length;if(0===n)return".";var i=r.isWindows&&t;if(s(e,i))return e;for(var o=i?"\\":"/",a=c(e,o),u=a.length,l=!1,h="",d=a.length;d<=n;d++)if(d===n||e.charCodeAt(d)===p||e.charCodeAt(d)===b){if(f(e,u,d,"..")){var A=h.lastIndexOf(o),g=h.slice(A+1);(a||g.length>0)&&".."!==g&&(h=A===-1?"":h.slice(0,A),l=!0)}else f(e,u,d,".")&&(a||h||d<n-1)&&(l=!0);if(!l){var v=e.slice(u,d);""!==h&&h[h.length-1]!==o&&(h+=o),h+=v}u=d+1,l=!1}return a+h}function f(e,t,r,n){return t+n.length===r&&e.indexOf(n,t)===t}function c(e,t){if(void 0===t&&(t="/"),!e)return"";var r=e.length,n=e.charCodeAt(0);if(n===p||n===b){if(n=e.charCodeAt(1),(n===p||n===b)&&(n=e.charCodeAt(2),n!==p&&n!==b)){for(var i=3,o=i;i<r&&(n=e.charCodeAt(i),n!==p&&n!==b);i++);if(n=e.charCodeAt(i+1),o!==i&&n!==p&&n!==b)for(i+=1;i<r;i++)if(n=e.charCodeAt(i),n===p||n===b)return e.slice(0,i+1).replace(/[\\/]/g,t)}return t}if((n>=w&&n<=W||n>=O&&n<=I)&&e.charCodeAt(1)===m)return n=e.charCodeAt(2),n===p||n===b?e.slice(0,2)+t:e.slice(0,2);var a=e.indexOf("://");if(a!==-1)for(a+=3;a<r;a++)if(n=e.charCodeAt(a),n===p||n===b)return e.slice(0,a+1);return""}function l(e){if(!r.isWindows)return!1;if(!e||e.length<5)return!1;var t=e.charCodeAt(0);if(t!==b)return!1;if(t=e.charCodeAt(1),t!==b)return!1;for(var n=2,i=n;n<e.length&&(t=e.charCodeAt(n),t!==b);n++);return i!==n&&(t=e.charCodeAt(n+1),!isNaN(t)&&t!==b)}function h(e){return e&&"/"===e[0]}function d(e){return h(u(e))?e:t.sep+e}function A(e,t){if(e===t)return!0;e=u(e),t=u(t);var n=t.length,i=t.charCodeAt(n-1);if(i===p&&(t=t.substring(0,n-1),n-=1),e===t)return!0;if(r.isLinux||(e=e.toLowerCase(),t=t.toLowerCase()),e===t)return!0;if(0!==e.indexOf(t))return!1;var o=e.charCodeAt(n);return o===p}function g(e){return!(!e||0===e.length||/^\s+$/.test(e))&&($.lastIndex=0,!$.test(e)&&((!r.isWindows||!z.test(e))&&("."!==e&&".."!==e&&((!r.isWindows||"."!==e[e.length-1])&&(!r.isWindows||e.length===e.trim().length)))))}function v(e){return t.isAbsoluteRegex.test(e)}t.sep="/",t.nativeSep=r.isWindows?"\\":"/",t.relative=n,t.dirname=i,t.basename=o,t.extname=a;var C=/(\/\.\.?\/)|(\/\.\.?)$|^(\.\.?\/)|(\/\/+)|(\\)/,x=/(\\\.\.?\\)|(\\\.\.?)$|^(\.\.?\\)|(\\\\+)|(\/)/;t.normalize=u,t.getRoot=c,t.join=function(){for(var e="",r=0;r<arguments.length;r++){var n=arguments[r];if(r>0){var i=e.charCodeAt(e.length-1);if(i!==p&&i!==b){var o=n.charCodeAt(0);o!==p&&o!==b&&(e+=t.sep)}}e+=n}return u(e)},t.isUNC=l,t.makePosixAbsolute=d;var p="/".charCodeAt(0),b="\\".charCodeAt(0),m=":".charCodeAt(0),O="a".charCodeAt(0),w="A".charCodeAt(0),I="z".charCodeAt(0),W="Z".charCodeAt(0);t.isEqualOrParent=A;var $=r.isWindows?/[\\/:\*\?"<>\|]/g:/[\\/]/g,z=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])$/i;t.isValidBasename=g,t.isAbsoluteRegex=/^((\/|[a-zA-Z]:\\)[^\(\)<>\\'\"\[\]]+)/,t.isAbsolute=v});