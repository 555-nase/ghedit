/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
define(["require","exports","assert"],function(n,e,t){"use strict";function l(n,e,t){var l=new Array(n.length),o=new Array(n.length),r=!1,u=0;return 0===n.length?t(null,[]):void n.forEach(function(c,i){e(c,function(e,c){if(e?(r=!0,l[i]=null,o[i]=e):(l[i]=c,o[i]=null),++u===n.length)return t(r?o:null,l)})})}function o(n,e,l){if(t.ok(n,"Missing first parameter"),t.ok("function"==typeof e,"Second parameter must be a function that is called for each element"),t.ok("function"==typeof l,"Third parameter must be a function that is called on error and success"),"function"==typeof n)try{n(function(n,t){n?l(n,null):o(t,e,l)})}catch(r){l(r,null)}else{var u=[],c=function(t){if(t<n.length)try{e(n[t],function(n,e){n!==!0&&n!==!1||(e=n,n=null),n?l(n,null):(e&&u.push(e),process.nextTick(function(){c(t+1)}))},t,n.length)}catch(o){l(o,null)}else l(null,u)};c(0)}}function r(n){t.ok(n.length>1,"Need at least one error handler and one function to process sequence"),n.forEach(function(n){t.ok("function"==typeof n)});var e=n.splice(0,1)[0],l=null;o(n,function(n,e){var t=function(n,t){n!==!0&&n!==!1||(t=n,n=null),n?e(n,null):(l=t,e(null,null))};try{n.call(t,l)}catch(o){e(o,null)}},function(n,t){n&&e(n)})}function u(n){r(Array.isArray(n)?n:Array.prototype.slice.call(arguments))}e.parallel=l,e.loop=o,e.sequence=u});