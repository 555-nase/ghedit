/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},__decorate=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},__param=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};define(["require","exports","vs/nls","vs/platform/keybinding/common/keybinding","vs/platform/actions/common/actions","vs/platform/message/common/message","vs/base/common/severity","vs/base/common/lifecycle","vs/base/browser/ui/actionbar/actionbar","vs/base/browser/event","vs/base/common/event"],function(t,e,n,o,i,s,r,a,c,p,l){"use strict";function u(t,e){var n=t.getActions();if(0!==n.length){for(var o=0,i=n;o<i.length;o++){var s=i[o],r=s[0],a=s[1];if("navigation"===r){for(var p=Array.isArray(e)?e:e.primary,l=0;l<a.length&&!(a[l].order>=0);l++);p.unshift.apply(p,a.slice(0,l));for(var u=0;u<p.length&&!(p[u]instanceof c.Separator);)u++;p.splice.apply(p,[u,0].concat(a.slice(l)))}else Array.isArray(e)?e.push.apply(e,[new c.Separator].concat(a)):(m=e.secondary).push.apply(m,[new c.Separator].concat(a))}var m}}function m(t,e,n){if(t instanceof i.MenuItemAction)return new f(t,e,n)}e.fillInActions=u,e.createActionItem=m;var d=new(function(t){function e(){var e=this;t.call(this),this._subscriptions=[],this._subscriptions.push(p.domEvent(document.body,"keydown")(function(t){return e.fire(t.altKey)})),this._subscriptions.push(p.domEvent(document.body,"keyup")(function(t){return e.fire(!1)})),this._subscriptions.push(p.domEvent(document.body,"mouseleave")(function(t){return e.fire(!1)}))}return __extends(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._subscriptions=a.dispose(this._subscriptions)},e}(l.Emitter)),f=function(t){function e(e,n,o){t.call(this,void 0,e,{icon:!!e.command.iconClass,label:!e.command.iconClass}),this._keybindingService=n,this._messageService=o,this._altKeyDown=!1}return __extends(e,t),Object.defineProperty(e.prototype,"_command",{get:function(){var t=this._action,e=t.command,n=t.altCommand;return this._altKeyDown&&n||e},enumerable:!0,configurable:!0}),e.prototype.onClick=function(t){var e=this;t.preventDefault(),t.stopPropagation(),this._action.run(this._altKeyDown).done(void 0,function(t){e._messageService.show(r["default"].Error,t)})},e.prototype.render=function(e){var n=this;t.prototype.render.call(this,e);var o,i;this._callOnDispose.push(p.domEvent(e,"mouseleave")(function(t){i=!1,n._altKeyDown||o.dispose()})),this._callOnDispose.push(p.domEvent(e,"mouseenter")(function(t){i=!0,o=d.event(function(t){n._altKeyDown=t,n._updateLabel(),n._updateTooltip(),n._updateClass(),i||o.dispose()})}))},e.prototype._updateLabel=function(){this.options.label&&this.$e.text(this._command.title)},e.prototype._updateTooltip=function(){var t=this.$e.getHTMLElement(),e=this._keybindingService.lookupKeybindings(this._command.id)[0],o=e&&this._keybindingService.getLabelFor(e);t.title=o?n.localize("titleAndKb","{0} ({1})",this._command.title,o):this._command.title},e.prototype._updateClass=function(){if(this.options.icon){var t=this.$e.getHTMLElement(),e=this._action,n=e.command,o=e.altCommand;this._command!==n?t.classList.remove(n.iconClass):o&&t.classList.remove(o.iconClass),t.classList.add("icon",this._command.iconClass)}},e=__decorate([__param(1,o.IKeybindingService),__param(2,s.IMessageService)],e)}(c.ActionItem)});