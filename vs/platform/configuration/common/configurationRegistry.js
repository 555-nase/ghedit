define(["require","exports","vs/nls","vs/base/common/event","vs/platform/platform","vs/base/common/objects","vs/platform/extensions/common/extensionsRegistry","vs/platform/jsonschemas/common/jsonContributionRegistry"],function(t,i,e,o,n,r,s,a){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";i.Extensions={Configuration:"base.contributions.configuration"};var c="vscode://schemas/settings",u=n.Registry.as(a.Extensions.JSONContribution),f=function(){function t(){this.configurationContributors=[],this.configurationSchema={allOf:[]},this._onDidRegisterConfiguration=new o.Emitter,u.registerSchema(c,this.configurationSchema)}return Object.defineProperty(t.prototype,"onDidRegisterConfiguration",{get:function(){return this._onDidRegisterConfiguration.event},enumerable:!0,configurable:!0}),t.prototype.registerConfiguration=function(t){this.configurationContributors.push(t),this.registerJSONConfiguration(t),this._onDidRegisterConfiguration.fire(this)},t.prototype.getConfigurations=function(){return this.configurationContributors.slice(0)},t.prototype.registerJSONConfiguration=function(t){var i=r.clone(t);this.configurationSchema.allOf.push(i),u.registerSchema(c,this.configurationSchema)},t}(),g=new f;n.Registry.add(i.Extensions.Configuration,g);var p=s.ExtensionsRegistry.registerExtensionPoint("configuration",{description:e.localize("vscode.extension.contributes.configuration","Contributes configuration settings."),type:"object",defaultSnippets:[{body:{title:"",properties:{}}}],properties:{title:{description:e.localize("vscode.extension.contributes.configuration.title","A summary of the settings. This label will be used in the settings file as separating comment."),type:"string"},properties:{description:e.localize("vscode.extension.contributes.configuration.properties","Description of the configuration properties."),type:"object",additionalProperties:{$ref:"http://json-schema.org/draft-04/schema#"}}}});p.setHandler(function(t){for(var i=0;i<t.length;i++){var o=t[i].value,n=t[i].collector;if(o.type&&"object"!==o.type?n.warn(e.localize("invalid.type","if set, 'configuration.type' must be set to 'object")):o.type="object",o.title&&"string"!=typeof o.title&&n.error(e.localize("invalid.title","'configuration.title' must be a string")),o.properties&&"object"!=typeof o.properties)return void n.error(e.localize("invalid.properties","'configuration.properties' must be an object"));var s=r.clone(o);s.id=t[i].description.id,g.registerConfiguration(s)}})});