/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
define(["require","exports","vs/base/common/winjs.base","semver"],function(e,a,n,t){"use strict";function i(e,a){return e.publisher===a.publisher&&e.name===a.name}function r(e){var a=e,n=e;return a.path?{id:a.manifest.publisher+"."+a.manifest.name,name:a.manifest.name,galleryId:a.metadata?a.metadata.id:null,publisherId:a.metadata?a.metadata.publisherId:null,publisherName:a.manifest.publisher,publisherDisplayName:a.metadata?a.metadata.publisherDisplayName:null}:{id:n.publisher+"."+n.name,name:n.name,galleryId:n.id,publisherId:n.publisherId,publisherName:n.publisher,publisherDisplayName:n.publisherDisplayName}}function s(e,a){return a.isEnabled()?e.getInstalled().then(function(e){var r=e.map(function(e){var a=e.manifest;return a.publisher+"."+a.name});return 0===e.length?n.TPromise.as([]):a.query({names:r,pageSize:r.length}).then(function(a){var n=a.firstPage;return n.map(function(a){var n=e.filter(function(e){return i(e.manifest,a)})[0];return n&&t.lt(n.manifest.version,a.versions[0].version)?n:null}).filter(function(e){return!!e})})}):n.TPromise.as([])}a.extensionEquals=i,a.getTelemetryData=r,a.getOutdatedExtensions=s});