var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},__decorate=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},__param=this&&this.__param||function(e,t){return function(o,n){t(o,n,e)}};define(["require","exports","vs/editor/common/modes","vs/languages/html/common/html","vs/languages/razor/common/csharpTokenization","vs/editor/common/modes/abstractMode","vs/languages/razor/common/razorTokenTypes","vs/platform/instantiation/common/instantiation","vs/editor/common/services/modeService","vs/editor/common/modes/languageConfigurationRegistry","vs/base/common/async","vs/editor/common/services/compatWorkerService","vs/platform/workspace/common/workspace"],function(e,t,o,n,r,i,s,a,c,p,u,d,l){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var m=function(e){function t(t,o,n,r,i,s,a){e.call(this,t,o,n,r,i,s,a)}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.kind,this.lastTagName,this.lastAttributeName,this.embeddedContentType,this.attributeValueQuote,this.attributeValueLength)},t.prototype.equals=function(o){return o instanceof t&&e.prototype.equals.call(this,o)},t.prototype.tokenize=function(t){if(!t.eos()&&"@"===t.peek()){if(t.next(),!t.eos()&&"*"===t.peek())return{nextState:new r.CSComment(this.getMode(),this,"@")};if(t.eos()||"@"!==t.peek())return{type:s.EMBED_CS,nextState:new r.CSStatement(this.getMode(),this,0,0,(!0),(!0),(!0),(!1))}}return e.prototype.tokenize.call(this,t)},t}(n.State),g=function(e){function t(t,o,n,r,i){e.call(this,t,o,n,r,i)}return __extends(t,e),t.prototype._registerSupports=function(){var e=this;o.SuggestRegistry.register(this.getId(),{triggerCharacters:[".",":","<",'"',"=","/"],provideCompletionItems:function(t,o,n){return u.wireCancellationToken(n,e._provideCompletionItems(t.uri,o))}},!0),o.DocumentHighlightProviderRegistry.register(this.getId(),{provideDocumentHighlights:function(t,o,n){return u.wireCancellationToken(n,e._provideDocumentHighlights(t.uri,o))}},!0),o.LinkProviderRegistry.register(this.getId(),{provideLinks:function(t,o){return u.wireCancellationToken(o,e.provideLinks(t.uri))}},!0),p.LanguageConfigurationRegistry.register(this.getId(),t.LANG_CONFIG)},t.prototype._createModeWorkerManager=function(e,t){return new i.ModeWorkerManager(e,"vs/languages/razor/common/razorWorker","RAZORWorker","vs/languages/html/common/htmlWorker",t)},t.prototype.getInitialState=function(){return new m(this,n.States.Content,"","","","",0)},t.prototype.getLeavingNestedModeData=function(t,o){var r=e.prototype.getLeavingNestedModeData.call(this,t,o);return r&&(r.stateAfterNestedMode=new m(this,n.States.Content,"","","","",0)),r},t.LANG_CONFIG={wordPattern:i.createWordRegExp("#?%"),comments:{blockComment:["<!--","-->"]},brackets:[["<!--","-->"],["{","}"],["(",")"]],__electricCharacterSupport:{embeddedElectricCharacters:["*","}","]",")"]},autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:new RegExp("<(?!(?:"+n.EMPTY_ELEMENTS.join("|")+"))(\\w[\\w\\d]*)([^/>]*(?!/)>)[^<]*$","i"),afterText:/^<\/(\w[\w\d]*)\s*>$/i,action:{indentAction:o.IndentAction.IndentOutdent}},{beforeText:new RegExp("<(?!(?:"+n.EMPTY_ELEMENTS.join("|")+"))(\\w[\\w\\d]*)([^/>]*(?!/)>)[^<]*$","i"),action:{indentAction:o.IndentAction.Indent}}]},t=__decorate([__param(1,a.IInstantiationService),__param(2,c.IModeService),__param(3,d.ICompatWorkerService),__param(4,l.IWorkspaceContextService)],t)}(n.HTMLMode);t.RAZORMode=g});