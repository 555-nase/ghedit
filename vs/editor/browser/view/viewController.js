define(["require","exports","vs/editor/common/core/position","vs/editor/common/editorCommon"],function(e,o,t,i){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var n=function(){function e(e,o,t,i){this.viewModel=e,this.triggerCursorHandler=o,this.outgoingEventBus=t,this.commandService=i}return e.prototype.paste=function(e,o,t){this.commandService.executeCommand(i.Handler.Paste,{text:o,pasteOnNewLine:t})},e.prototype.type=function(e,o){this.commandService.executeCommand(i.Handler.Type,{text:o})},e.prototype.replacePreviousChar=function(e,o,t){this.commandService.executeCommand(i.Handler.ReplacePreviousChar,{text:o,replaceCharCnt:t})},e.prototype.compositionStart=function(e){this.commandService.executeCommand(i.Handler.CompositionStart,{})},e.prototype.compositionEnd=function(e){this.commandService.executeCommand(i.Handler.CompositionEnd,{})},e.prototype.cut=function(e){this.commandService.executeCommand(i.Handler.Cut,{})},e.prototype._validateViewColumn=function(e){var o=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<o?new t.Position(e.lineNumber,o):e},e.prototype.dispatchMouse=function(e){e.startedOnLineNumbers?e.altKey?e.inSelectionMode?this.lastCursorLineSelect("mouse",e.position):this.createCursor("mouse",e.position,!0):e.inSelectionMode?this.lineSelectDrag("mouse",e.position):this.lineSelect("mouse",e.position):e.mouseDownCount>=4?this.selectAll("mouse"):3===e.mouseDownCount?e.altKey?e.inSelectionMode?this.lastCursorLineSelectDrag("mouse",e.position):this.lastCursorLineSelect("mouse",e.position):e.inSelectionMode?this.lineSelectDrag("mouse",e.position):this.lineSelect("mouse",e.position):2===e.mouseDownCount?e.altKey?this.lastCursorWordSelect("mouse",e.position):e.inSelectionMode?this.wordSelectDrag("mouse",e.position):this.wordSelect("mouse",e.position):e.altKey?e.ctrlKey||e.metaKey||(e.shiftKey?this.columnSelect("mouse",e.position,e.mouseColumn):e.inSelectionMode?this.lastCursorMoveToSelect("mouse",e.position):this.createCursor("mouse",e.position,!1)):e.inSelectionMode?this.moveToSelect("mouse",e.position):this.moveTo("mouse",e.position)},e.prototype.moveTo=function(e,o){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.MoveTo,{position:this.convertViewToModelPosition(o),viewPosition:o})},e.prototype.moveToSelect=function(e,o){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.MoveToSelect,{position:this.convertViewToModelPosition(o),viewPosition:o})},e.prototype.columnSelect=function(e,o,t){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.ColumnSelect,{position:this.convertViewToModelPosition(o),viewPosition:o,mouseColumn:t})},e.prototype.createCursor=function(e,o,t){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.CreateCursor,{position:this.convertViewToModelPosition(o),viewPosition:o,wholeLine:t})},e.prototype.lastCursorMoveToSelect=function(e,o){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.LastCursorMoveToSelect,{position:this.convertViewToModelPosition(o),viewPosition:o})},e.prototype.wordSelect=function(e,o){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.WordSelect,{position:this.convertViewToModelPosition(o)})},e.prototype.wordSelectDrag=function(e,o){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.WordSelectDrag,{position:this.convertViewToModelPosition(o)})},e.prototype.lastCursorWordSelect=function(e,o){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.LastCursorWordSelect,{position:this.convertViewToModelPosition(o)})},e.prototype.lineSelect=function(e,o){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.LineSelect,{position:this.convertViewToModelPosition(o),viewPosition:o})},e.prototype.lineSelectDrag=function(e,o){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.LineSelectDrag,{position:this.convertViewToModelPosition(o),viewPosition:o})},e.prototype.lastCursorLineSelect=function(e,o){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.LastCursorLineSelect,{position:this.convertViewToModelPosition(o),viewPosition:o})},e.prototype.lastCursorLineSelectDrag=function(e,o){o=this._validateViewColumn(o),this.triggerCursorHandler(e,i.Handler.LastCursorLineSelectDrag,{position:this.convertViewToModelPosition(o),viewPosition:o})},e.prototype.selectAll=function(e){this.triggerCursorHandler(e,i.Handler.SelectAll,null)},e.prototype.convertViewToModelPosition=function(e){return this.viewModel.convertViewPositionToModelPosition(e.lineNumber,e.column)},e.prototype.convertViewToModelRange=function(e){return this.viewModel.convertViewRangeToModelRange(e)},e.prototype.convertViewToModelMouseEvent=function(e){e.target&&(e.target.position&&(e.target.position=this.convertViewToModelPosition(e.target.position)),e.target.range&&(e.target.range=this.convertViewToModelRange(e.target.range)))},e.prototype.emitKeyDown=function(e){this.outgoingEventBus.emit(i.EventType.KeyDown,e)},e.prototype.emitKeyUp=function(e){this.outgoingEventBus.emit(i.EventType.KeyUp,e)},e.prototype.emitContextMenu=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.ContextMenu,e)},e.prototype.emitMouseMove=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseMove,e)},e.prototype.emitMouseLeave=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseLeave,e)},e.prototype.emitMouseUp=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseUp,e)},e.prototype.emitMouseDown=function(e){this.convertViewToModelMouseEvent(e),this.outgoingEventBus.emit(i.EventType.MouseDown,e)},e}();o.ViewController=n});