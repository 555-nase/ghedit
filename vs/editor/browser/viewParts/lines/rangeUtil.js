define(["require","exports","vs/editor/common/view/renderingContext"],function(t,e,n){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var a=function(){function t(){}return t._createRange=function(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange},t._detachRange=function(t,e){t.selectNodeContents(e)},t._readClientRects=function(t,e,n,a,r){var i=this._createRange();try{return i.setStart(t,e),i.setEnd(n,a),i.getClientRects()}catch(l){return null}finally{this._detachRange(i,r)}},t._createHorizontalRangesFromClientRects=function(t,e,a){if(!t||0===t.length)return null;for(var r=[],i=Math.max(0,t[0].left*a-e),l=t[0].width*a,o=1,h=t.length;o<h;o++){var c=Math.max(0,t[o].left*a-e),s=t[o].width*a;c<i&&console.error("Unexpected: RangeUtil._createHorizontalRangesFromClientRects: client rects are not sorted"),i+l+.9>=c?l=Math.max(l,c+s-i):(r.push(new n.HorizontalRange(i,l)),i=c,l=s)}return r.push(new n.HorizontalRange(i,l)),r},t.readHorizontalRanges=function(t,e,n,a,r,i,l,o){var h=0,c=t.children.length-1;if(h>c)return null;e=Math.min(c,Math.max(h,e)),a=Math.min(c,Math.max(h,a)),e!==a&&a>0&&0===r&&(a--,r=Number.MAX_VALUE);var s=t.children[e].firstChild,u=t.children[a].firstChild;if(!s||!u)return null;n=Math.min(s.textContent.length,Math.max(0,n)),r=Math.min(u.textContent.length,Math.max(0,r));var d=this._readClientRects(s,n,u,r,o);return this._createHorizontalRangesFromClientRects(d,i,l)},t}();e.RangeUtil=a});