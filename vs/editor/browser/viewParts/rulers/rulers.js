/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)};define(["require","exports","vs/base/browser/styleMutator","vs/editor/browser/view/viewPart","vs/css!./rulers"],function(t,e,o,i){"use strict";var r=function(t){function e(e,o){t.call(this,e),this._layoutProvider=o,this.domNode=document.createElement("div"),this.domNode.className="view-rulers",this._rulers=this._context.configuration.editor.viewInfo.rulers,this._height=this._context.configuration.editor.layoutInfo.contentHeight,this._typicalHalfwidthCharacterWidth=this._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth}return __extends(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.onConfigurationChanged=function(t){return!!(t.viewInfo.rulers||t.layoutInfo||t.fontInfo)&&(this._rulers=this._context.configuration.editor.viewInfo.rulers,this._height=this._context.configuration.editor.layoutInfo.contentHeight,this._typicalHalfwidthCharacterWidth=this._context.configuration.editor.fontInfo.typicalHalfwidthCharacterWidth,!0)},e.prototype.onScrollChanged=function(e){return t.prototype.onScrollChanged.call(this,e)||e.scrollHeightChanged},e.prototype.prepareRender=function(t){if(!this.shouldRender())throw new Error("I did not ask to render!")},e.prototype.render=function(t){for(var e=this.domNode.children.length,i=Math.max(e,this._rulers.length),r=0;r<i;r++)if(r>=this._rulers.length)this.domNode.removeChild(this.domNode.lastChild);else{var n=void 0;r<e?n=this.domNode.children[r]:(n=document.createElement("div"),n.className="view-ruler",this.domNode.appendChild(n)),o.StyleMutator.setHeight(n,Math.min(this._layoutProvider.getTotalHeight(),1e6)),o.StyleMutator.setLeft(n,this._rulers[r]*this._typicalHalfwidthCharacterWidth)}},e}(i.ViewPart);e.Rulers=r});