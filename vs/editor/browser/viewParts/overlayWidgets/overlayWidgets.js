/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)};define(["require","exports","vs/base/browser/styleMutator","vs/editor/browser/editorBrowser","vs/editor/browser/view/viewPart","vs/css!./overlayWidgets"],function(t,e,r,i,o){"use strict";var s=function(t){function e(e){t.call(this,e),this._widgets={},this._verticalScrollbarWidth=0,this._horizontalScrollbarHeight=0,this._editorHeight=0,this._editorWidth=0,this.domNode=document.createElement("div"),this.domNode.className=i.ClassNames.OVERLAY_WIDGETS}return __extends(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._widgets=null},e.prototype.onLayoutChanged=function(t){return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0},e.prototype.addWidget=function(t){this._widgets[t.getId()]={widget:t,preference:null};var e=t.getDomNode();e.style.position="absolute",e.setAttribute("widgetId",t.getId()),this.domNode.appendChild(e),this.setShouldRender()},e.prototype.setWidgetPosition=function(t,e){var r=this._widgets[t.getId()];return r.preference!==e&&(r.preference=e,this.setShouldRender(),!0)},e.prototype.removeWidget=function(t){var e=t.getId();if(this._widgets.hasOwnProperty(e)){var r=this._widgets[e],i=r.widget.getDomNode();delete this._widgets[e],i.parentNode.removeChild(i),this.setShouldRender()}},e.prototype._renderWidget=function(t){var e="data-editor-restoreStyleTop",o=t.widget.getDomNode();if(null!==t.preference)if(t.preference===i.OverlayWidgetPositionPreference.TOP_RIGHT_CORNER)o.hasAttribute(e)||o.setAttribute(e,o.style.top),r.StyleMutator.setTop(o,0),r.StyleMutator.setRight(o,2*this._verticalScrollbarWidth);else if(t.preference===i.OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER){o.hasAttribute(e)||o.setAttribute(e,o.style.top);var s=o.clientHeight;r.StyleMutator.setTop(o,this._editorHeight-s-2*this._horizontalScrollbarHeight),r.StyleMutator.setRight(o,2*this._verticalScrollbarWidth)}else t.preference===i.OverlayWidgetPositionPreference.TOP_CENTER&&(o.hasAttribute(e)||o.setAttribute(e,o.style.top),r.StyleMutator.setTop(o,0),o.style.right="50%");else if(o.hasAttribute(e)){var d=o.getAttribute(e);o.removeAttribute(e),o.style.top=d}},e.prototype.prepareRender=function(t){if(!this.shouldRender())throw new Error("I did not ask to render!")},e.prototype.render=function(t){r.StyleMutator.setWidth(this.domNode,this._editorWidth);for(var e=Object.keys(this._widgets),i=0,o=e.length;i<o;i++){var s=e[i];this._renderWidget(this._widgets[s])}},e}(o.ViewPart);e.ViewOverlayWidgets=s});