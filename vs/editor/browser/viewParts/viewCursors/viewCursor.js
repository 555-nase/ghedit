define(["require","exports","vs/base/browser/styleMutator","vs/editor/common/editorCommon","vs/editor/browser/config/configuration"],function(t,o,i,e,n){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var s=function(){function t(t,o){this._context=t,this._cursorStyle=this._context.configuration.editor.viewInfo.cursorStyle,this._lineHeight=this._context.configuration.editor.lineHeight,this._lastRenderedContent="",this._isInEditableRange=!0,this._domNode=this._createCursorDomNode(o),n.Configuration.applyFontInfo(this._domNode,this._context.configuration.editor.fontInfo),this._isVisible=!0,this._domNode.setDisplay("none"),this.updatePosition({lineNumber:1,column:1})}return t.prototype._createCursorDomNode=function(t){var o=i.createFastDomNode(document.createElement("div"));return t?o.setClassName("cursor secondary"):o.setClassName("cursor"),o.setHeight(this._lineHeight),o.setTop(0),o.setLeft(0),o.domNode.setAttribute("role","presentation"),o.domNode.setAttribute("aria-hidden","true"),o},t.prototype.getDomNode=function(){return this._domNode.domNode},t.prototype.getIsInEditableRange=function(){return this._isInEditableRange},t.prototype.getPositionTop=function(){return this._positionTop},t.prototype.getPosition=function(){return this._position},t.prototype.show=function(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)},t.prototype.hide=function(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)},t.prototype.onModelFlushed=function(){return this.updatePosition({lineNumber:1,column:1}),this._isInEditableRange=!0,!0},t.prototype.onCursorPositionChanged=function(t,o){return this.updatePosition(t),this._isInEditableRange=o,!0},t.prototype.onConfigurationChanged=function(t){return t.lineHeight&&(this._lineHeight=this._context.configuration.editor.lineHeight),t.viewInfo.cursorStyle&&(this._cursorStyle=this._context.configuration.editor.viewInfo.cursorStyle),t.fontInfo&&n.Configuration.applyFontInfo(this._domNode,this._context.configuration.editor.fontInfo),!0},t.prototype.prepareRender=function(t){var o=t.visibleRangeForPosition(this._position);o?(this._positionTop=o.top,this._positionLeft=o.left,this._isInViewport=!0):this._isInViewport=!1},t.prototype._getRenderedContent=function(){if(this._cursorStyle===e.TextEditorCursorStyle.Block){var t=this._context.model.getLineContent(this._position.lineNumber);return t.charAt(this._position.column-1)}return""},t.prototype.render=function(t){if(this._isInViewport){var o=this._getRenderedContent();this._lastRenderedContent!==o&&(this._lastRenderedContent=o,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setDisplay("block"),this._domNode.setLeft(this._positionLeft),this._domNode.setTop(this._positionTop+t.viewportTop-t.bigNumbersDelta),this._domNode.setLineHeight(this._lineHeight),this._domNode.setHeight(this._lineHeight)}else this._domNode.setDisplay("none")},t.prototype.updatePosition=function(t){this._position=t,this._domNode.domNode.setAttribute("lineNumber",this._position.lineNumber.toString()),this._domNode.domNode.setAttribute("column",this._position.column.toString()),this._isInViewport=!1},t}();o.ViewCursor=s});