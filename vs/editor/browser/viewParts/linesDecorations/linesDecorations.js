/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define(["require","exports","vs/editor/browser/viewParts/glyphMargin/glyphMargin","vs/css!./linesDecorations"],function(e,t,n){"use strict";var o=function(e){function t(t){e.call(this),this._context=t,this._lineHeight=this._context.configuration.editor.lineHeight,this._decorationsLeft=0,this._decorationsWidth=0,this._renderResult=null,this._context.addEventHandler(this)}return __extends(t,e),t.prototype.dispose=function(){this._context.removeEventHandler(this),this._context=null,this._renderResult=null},t.prototype.onModelFlushed=function(){return!0},t.prototype.onModelDecorationsChanged=function(e){return!0},t.prototype.onModelLinesDeleted=function(e){return!0},t.prototype.onModelLineChanged=function(e){return!0},t.prototype.onModelLinesInserted=function(e){return!0},t.prototype.onCursorPositionChanged=function(e){return!1},t.prototype.onCursorSelectionChanged=function(e){return!1},t.prototype.onCursorRevealRange=function(e){return!1},t.prototype.onConfigurationChanged=function(e){return e.lineHeight&&(this._lineHeight=this._context.configuration.editor.lineHeight),!0},t.prototype.onLayoutChanged=function(e){return this._decorationsLeft=e.decorationsLeft,this._decorationsWidth=e.decorationsWidth,!0},t.prototype.onScrollChanged=function(e){return e.scrollTopChanged},t.prototype.onZonesChanged=function(){return!0},t.prototype._getDecorations=function(e){for(var t=e.getDecorationsInViewport(),o=[],r=0,i=t.length;r<i;r++){var s=t[r];s.options.linesDecorationsClassName&&o.push(new n.DecorationToRender(s.range.startLineNumber,s.range.endLineNumber,s.options.linesDecorationsClassName))}return o},t.prototype.prepareRender=function(e){if(!this.shouldRender())throw new Error("I did not ask to render!");for(var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=this._render(t,n,this._getDecorations(e)),r=this._lineHeight.toString(),i=this._decorationsLeft.toString(),s=this._decorationsWidth.toString(),u='" style="left:'+i+"px;width:"+s+"px;height:"+r+'px;"></div>',d=[],a=t;a<=n;a++){for(var h=a-t,c=o[h],l="",p=0,f=c.length;p<f;p++)l+='<div class="cldr '+c[p]+u;d[h]=l}this._renderResult=d},t.prototype.render=function(e,t){if(!this._renderResult)return"";var n=t-e;if(n<0||n>=this._renderResult.length)throw new Error("Unexpected render request");return this._renderResult[n]},t}(n.DedupOverlay);t.LinesDecorationsOverlay=o});