/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},__decorate=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},__param=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};define(["require","exports","vs/nls","vs/base/common/winjs.base","vs/editor/common/editorAction","vs/editor/common/editorCommonExtensions","vs/editor/contrib/indentation/common/indentationCommands","vs/workbench/services/quickopen/common/quickOpenService","vs/editor/common/services/modelService","vs/editor/common/editorActionEnablement"],function(t,e,n,o,i,r,c,a,s,d){"use strict";var p=function(t){function e(e,n){t.call(this,e,n)}return __extends(e,t),e.prototype.run=function(){var t=this.editor.getModel();if(t){var e=t.getOptions(),n=new c.IndentationToSpacesCommand(this.editor.getSelection(),e.tabSize);return this.editor.executeCommands(this.id,[n]),t.updateOptions({insertSpaces:!0}),o.TPromise.as(!0)}},e.ID="editor.action.indentationToSpaces",e}(i.EditorAction);e.IndentationToSpacesAction=p;var u=function(t){function e(e,n){t.call(this,e,n)}return __extends(e,t),e.prototype.run=function(){var t=this.editor.getModel();if(t){var e=t.getOptions(),n=new c.IndentationToTabsCommand(this.editor.getSelection(),e.tabSize);return this.editor.executeCommands(this.id,[n]),t.updateOptions({insertSpaces:!1}),o.TPromise.as(!0)}},e.ID="editor.action.indentationToTabs",e}(i.EditorAction);e.IndentationToTabsAction=u;var l=function(t){function e(e,n,o,i,r){t.call(this,e,n,d.Behaviour.Writeable),this.insertSpaces=o,this.quickOpenService=i,this.modelService=r}return __extends(e,t),e.prototype.run=function(){var t=this,e=this.editor.getModel();if(e){var i=this.modelService.getCreationOptions(),r=[1,2,3,4,5,6,7,8].map(function(t){return{id:t.toString(),label:t.toString(),description:t===i.tabSize?n.localize("configuredTabSize","Configured Tab Size"):null}}),c=Math.min(e.getOptions().tabSize-1,7);return o.TPromise.timeout(50).then(function(){return t.quickOpenService.pick(r,{placeHolder:n.localize({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),autoFocus:{autoFocusIndex:c}}).then(function(n){return n&&e.updateOptions({tabSize:parseInt(n.label,10),insertSpaces:t.insertSpaces}),!0})})}},e}(i.EditorAction);e.ChangeIndentationSizeAction=l;var g=function(t){function e(e,n,o,i){t.call(this,e,n,!1,o,i)}return __extends(e,t),e.ID="editor.action.indentUsingTabs",e=__decorate([__param(2,a.IQuickOpenService),__param(3,s.IModelService)],e)}(l);e.IndentUsingTabs=g;var m=function(t){function e(e,n,o,i){t.call(this,e,n,!0,o,i)}return __extends(e,t),e.ID="editor.action.indentUsingSpaces",e=__decorate([__param(2,a.IQuickOpenService),__param(3,s.IModelService)],e)}(l);e.IndentUsingSpaces=m;var h=function(t){function e(e,n,o){t.call(this,e,n),this.modelService=o}return __extends(e,t),e.prototype.run=function(){var t=this.editor.getModel();if(t){var e=this.modelService.getCreationOptions();t.detectIndentation(e.insertSpaces,e.tabSize)}},e.ID="editor.action.detectIndentation",e=__decorate([__param(2,s.IModelService)],e)}(i.EditorAction);e.DetectIndentation=h;var v=function(t){function e(e,n){t.call(this,e,n,d.Behaviour.TextFocus)}return __extends(e,t),e.prototype.run=function(){return this.editor.updateOptions({renderWhitespace:!this.editor.getConfiguration().viewInfo.renderWhitespace}),o.TPromise.as(!0)},e.ID="editor.action.toggleRenderWhitespace",e}(i.EditorAction);e.ToggleRenderWhitespaceAction=v;var f=function(t){function e(e,n){t.call(this,e,n,d.Behaviour.TextFocus)}return __extends(e,t),e.prototype.run=function(){return this.editor.updateOptions({renderControlCharacters:!this.editor.getConfiguration().viewInfo.renderControlCharacters}),o.TPromise.as(!0)},e.ID="editor.action.toggleRenderControlCharacter",e}(i.EditorAction);e.ToggleRenderControlCharacterAction=f,r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(p,p.ID,n.localize("indentationToSpaces","Convert Indentation to Spaces"),(void 0),"Convert Indentation to Spaces")),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(u,u.ID,n.localize("indentationToTabs","Convert Indentation to Tabs"),(void 0),"Convert Indentation to Tabs")),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(m,m.ID,n.localize("indentUsingSpaces","Indent Using Spaces"),(void 0),"Indent Using Spaces")),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(g,g.ID,n.localize("indentUsingTabs","Indent Using Tabs"),(void 0),"Indent Using Tabs")),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(h,h.ID,n.localize("detectIndentation","Detect Indentation from Content"),(void 0),"Detect Indentation from Content")),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(v,v.ID,n.localize("toggleRenderWhitespace","Toggle Render Whitespace"),(void 0),"Toggle Render Whitespace")),r.CommonEditorRegistry.registerEditorAction(new r.EditorActionDescriptor(f,f.ID,n.localize("toggleRenderControlCharacters","Toggle Control Characters"),(void 0),"Toggle Render Control Characters"))});