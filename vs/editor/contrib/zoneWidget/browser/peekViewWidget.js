/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)};define(["require","exports","vs/nls","vs/base/common/actions","vs/base/common/strings","vs/base/browser/builder","vs/base/common/event","vs/base/browser/dom","vs/base/browser/ui/actionbar/actionbar","vs/platform/instantiation/common/instantiation","vs/editor/common/services/codeEditorService","./zoneWidget","vs/editor/browser/widget/embeddedCodeEditorWidget","vs/css!./peekViewWidget"],function(e,t,o,i,n,s,r,a,d,l,p,c,h){"use strict";function m(e,t){var o=e.get(p.ICodeEditorService).getFocusedCodeEditor();return o instanceof h.EmbeddedCodeEditorWidget?o.getParentEditor():o}t.IPeekViewService=l.createDecorator("peekViewService"),t.getOuterEditor=m;var y=function(e){function t(t,o,i){void 0===i&&(i={}),e.call(this,t,i),this._onDidClose=new r.Emitter,this._isActive=!1,this.contextKey=o}return __extends(t,e),t.prototype.dispose=function(){this._isActive=!1,e.prototype.dispose.call(this),this._onDidClose.fire(this)},Object.defineProperty(t.prototype,"onDidClose",{get:function(){return this._onDidClose.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!0,configurable:!0}),t.prototype.show=function(t,o){this._isActive=!0,this._headElement.style.borderTopColor=this.options.frameColor,this._bodyElement.style.borderTopColor=this.options.frameColor,this._bodyElement.style.borderBottomColor=this.options.frameColor,e.prototype.show.call(this,t,o)},t.prototype._fillContainer=function(e){s.$(e).addClass("peekview-widget"),this._headElement=s.$(".head").getHTMLElement(),this._bodyElement=s.$(".body").getHTMLElement(),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)},t.prototype._fillHead=function(e){var t=this,n=s.$(".peekview-title").on(a.EventType.CLICK,function(e){return t._onTitleClick(e)}).appendTo(this._headElement).getHTMLElement();this._primaryHeading=s.$("span.filename").appendTo(n).getHTMLElement(),this._secondaryHeading=s.$("span.dirname").appendTo(n).getHTMLElement(),this._metaHeading=s.$("span.meta").appendTo(n).getHTMLElement(),this._actionbarWidget=new d.ActionBar(s.$(".peekview-actions").appendTo(this._headElement)),this._actionbarWidget.push(new i.Action("peekview.close",o.localize("label.close","Close"),"close-peekview-action",(!0),function(){return t.dispose(),null}),{label:!1,icon:!0})},t.prototype._onTitleClick=function(e){},t.prototype.setTitle=function(e,t){s.$(this._primaryHeading).safeInnerHtml(e),t?s.$(this._secondaryHeading).safeInnerHtml(t):a.clearNode(this._secondaryHeading)},t.prototype.setMetaTitle=function(e){e?s.$(this._metaHeading).safeInnerHtml(e):a.clearNode(this._metaHeading)},t.prototype._fillBody=function(e){},t.prototype._doLayout=function(e,t){if(e<0)return this.dispose(),void this._onDidClose.fire(this);var o=Math.ceil(1.2*this.editor.getConfiguration().lineHeight),i=e-(o+2);this._doLayoutHead(o,t),this._doLayoutBody(i,t)},t.prototype._doLayoutHead=function(e,t){this._headElement.style.height=n.format("{0}px",e),this._headElement.style.lineHeight=this._headElement.style.height},t.prototype._doLayoutBody=function(e,t){this._bodyElement.style.height=n.format("{0}px",e)},t}(c.ZoneWidget);t.PeekViewWidget=y});