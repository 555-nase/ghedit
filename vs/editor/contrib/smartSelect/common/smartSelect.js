var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},__decorate=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},__param=this&&this.__param||function(t,e){return function(o,n){e(o,n,t)}};define(["require","exports","vs/nls","vs/base/common/arrays","vs/base/common/keyCodes","vs/base/common/winjs.base","vs/platform/instantiation/common/instantiation","vs/editor/common/core/range","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/common/editorCommonExtensions","./tokenSelectionSupport"],function(t,e,o,n,r,i,s,c,a,d,l,u){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var m=function(){function t(t){this.editor=t,this.next=null,this.previous=null,this.selection=t.getSelection()}return t}(),f=null,p=!1,h=function(t){function e(e,o,n,r){t.call(this,e,o,d.Behaviour.TextFocus|d.Behaviour.UpdateOnModelChange),this._tokenSelectionSupport=r.createInstance(u.TokenSelectionSupport),this._forward=n}return __extends(e,t),e.prototype.run=function(){var t=this,e=this.editor.getSelection(),o=this.editor.getModel();f&&f.editor!==this.editor&&(f=null);var r=i.TPromise.as(null);return f||(r=this._tokenSelectionSupport.getRangesToPosition(o.uri,e.getStartPosition()).then(function(e){if(!n.isFalsyOrEmpty(e)){var o;e.filter(function(e){var o=t.editor.getSelection(),n=new c.Range(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);return n.containsPosition(o.getStartPosition())&&n.containsPosition(o.getEndPosition())}).forEach(function(e){var n=e.range,r=new m(t.editor);r.selection=new c.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn),o&&(r.next=o,o.previous=r),o=r});var r=new m(t.editor);r.next=o,o&&(o.previous=r),f=r;var i=t.editor.onDidChangeCursorPosition(function(t){p||(f=null,i.dispose())})}})),r.then(function(){if(f&&(f=t._forward?f.next:f.previous)){p=!0;try{t.editor.setSelection(f.selection)}finally{p=!1}return!0}})},e}(a.EditorAction),y=function(t){function e(e,o,n){t.call(this,e,o,!0,n)}return __extends(e,t),e.ID="editor.action.smartSelect.grow",e=__decorate([__param(2,s.IInstantiationService)],e)}(h),g=function(t){function e(e,o,n){t.call(this,e,o,!1,n)}return __extends(e,t),e.ID="editor.action.smartSelect.shrink",e=__decorate([__param(2,s.IInstantiationService)],e)}(h);l.CommonEditorRegistry.registerEditorAction(new l.EditorActionDescriptor(y,y.ID,o.localize("smartSelect.grow","Expand Select"),{context:l.ContextKey.EditorTextFocus,primary:r.KeyMod.Shift|r.KeyMod.Alt|r.KeyCode.RightArrow,mac:{primary:r.KeyMod.CtrlCmd|r.KeyMod.WinCtrl|r.KeyMod.Shift|r.KeyCode.RightArrow}},"Expand Select")),l.CommonEditorRegistry.registerEditorAction(new l.EditorActionDescriptor(g,g.ID,o.localize("smartSelect.shrink","Shrink Select"),{context:l.ContextKey.EditorTextFocus,primary:r.KeyMod.Shift|r.KeyMod.Alt|r.KeyCode.LeftArrow,mac:{primary:r.KeyMod.CtrlCmd|r.KeyMod.WinCtrl|r.KeyMod.Shift|r.KeyCode.LeftArrow}},"Shrink Select"))});