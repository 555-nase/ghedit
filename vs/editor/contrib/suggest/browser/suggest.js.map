{"version":3,"sources":["vs/editor/contrib/suggest/browser/suggest.ts"],"names":[],"mappings":"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","file":"vs/editor/contrib/suggest/browser/suggest.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as nls from 'vs/nls';\nimport {onUnexpectedError} from 'vs/base/common/errors';\nimport {KeyCode, KeyMod} from 'vs/base/common/keyCodes';\nimport {IDisposable, cAll, dispose} from 'vs/base/common/lifecycle';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {IKeybindingContextKey, IKeybindingService, KbExpr} from 'vs/platform/keybinding/common/keybindingService';\nimport {EditorAction} from 'vs/editor/common/editorAction';\nimport {EventType, ICommonCodeEditor, IEditorActionDescriptorData, IEditorContribution, IModeSupportChangedEvent} from 'vs/editor/common/editorCommon';\nimport {CommonEditorRegistry, ContextKey, EditorActionDescriptor} from 'vs/editor/common/editorCommonExtensions';\nimport {ISuggestSupport, SuggestRegistry} from 'vs/editor/common/modes';\nimport {ICodeEditor} from 'vs/editor/browser/editorBrowser';\nimport {EditorBrowserRegistry} from 'vs/editor/browser/editorBrowserExtensions';\nimport {getSnippetController} from 'vs/editor/contrib/snippet/common/snippet';\nimport {ACCEPT_SELECTED_SUGGESTION_CMD, CONTEXT_SUGGEST_WIDGET_VISIBLE} from 'vs/editor/contrib/suggest/common/suggest';\nimport {KeybindingsRegistry} from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport {withCodeEditorFromCommandHandler} from 'vs/editor/common/config/config';\nimport {SuggestModel} from './suggestModel';\nimport {SuggestWidget} from './suggestWidget';\n\nexport class SuggestController implements IEditorContribution {\n\tstatic ID: string = 'editor.contrib.suggestController';\n\n\tstatic getSuggestController(editor: ICommonCodeEditor): SuggestController {\n\t\treturn <SuggestController>editor.getContribution(SuggestController.ID);\n\t}\n\n\tprivate model: SuggestModel;\n\tprivate widget: SuggestWidget;\n\tprivate triggerCharacterListeners: Function[];\n\tprivate suggestWidgetVisible: IKeybindingContextKey<boolean>;\n\tprivate toDispose: IDisposable[];\n\n\tconstructor(\n\t\tprivate editor: ICodeEditor,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\tthis.suggestWidgetVisible = keybindingService.createKey(CONTEXT_SUGGEST_WIDGET_VISIBLE, false);\n\t\tthis.model = new SuggestModel(this.editor);\n\t\tthis.widget = instantiationService.createInstance(SuggestWidget, this.editor, this.model);\n\n\t\tthis.triggerCharacterListeners = [];\n\n\t\tthis.toDispose = [];\n\t\tthis.toDispose.push(this.widget.onDidVisibilityChange(visible => visible ? this.suggestWidgetVisible.set(true) : this.suggestWidgetVisible.reset()));\n\t\tthis.toDispose.push(editor.addListener2(EventType.ConfigurationChanged, () => this.update()));\n\t\tthis.toDispose.push(editor.addListener2(EventType.ModelChanged, () => this.update()));\n\t\tthis.toDispose.push(editor.addListener2(EventType.ModelModeChanged, () => this.update()));\n\t\tthis.toDispose.push(editor.addListener2(EventType.ModelModeSupportChanged, (e: IModeSupportChangedEvent) => {\n\t\t\tif (e.suggestSupport) {\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}));\n\t\tthis.toDispose.push(SuggestRegistry.onDidChange(this.update, this));\n\n\t\tthis.toDispose.push(this.model.onDidAccept(e => getSnippetController(this.editor).run(e.snippet, e.overwriteBefore, e.overwriteAfter)));\n\n\t\tthis.update();\n\t}\n\n\tpublic getId(): string {\n\t\treturn SuggestController.ID;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.toDispose = dispose(this.toDispose);\n\t\tthis.triggerCharacterListeners = cAll(this.triggerCharacterListeners);\n\n\t\tif (this.widget) {\n\t\t\tthis.widget.dispose();\n\t\t\tthis.widget = null;\n\t\t}\n\t\tif (this.model) {\n\t\t\tthis.model.dispose();\n\t\t\tthis.model = null;\n\t\t}\n\t}\n\n\tprivate update(): void {\n\n\t\tthis.triggerCharacterListeners = cAll(this.triggerCharacterListeners);\n\n\t\tif (this.editor.getConfiguration().readOnly\n\t\t\t|| !this.editor.getModel()\n\t\t\t|| !this.editor.getConfiguration().suggestOnTriggerCharacters) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet groups = SuggestRegistry.orderedGroups(this.editor.getModel());\n\t\tif (groups.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet triggerCharacters: { [ch: string]: ISuggestSupport[][] } = Object.create(null);\n\n\t\tgroups.forEach(group => {\n\n\t\t\tlet groupTriggerCharacters: { [ch: string]: ISuggestSupport[] } = Object.create(null);\n\n\t\t\tgroup.forEach(support => {\n\t\t\t\tlet localTriggerCharacters = support.getTriggerCharacters();\n\t\t\t\tif (localTriggerCharacters) {\n\t\t\t\t\tfor (let ch of localTriggerCharacters) {\n\t\t\t\t\t\tlet array = groupTriggerCharacters[ch];\n\t\t\t\t\t\tif (array) {\n\t\t\t\t\t\t\tarray.push(support);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tarray = [support];\n\t\t\t\t\t\t\tgroupTriggerCharacters[ch] = array;\n\t\t\t\t\t\t\tif (triggerCharacters[ch]) {\n\t\t\t\t\t\t\t\ttriggerCharacters[ch].push(array);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttriggerCharacters[ch] = [array];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tObject.keys(triggerCharacters).forEach(ch => {\n\t\t\tthis.triggerCharacterListeners.push(this.editor.addTypingListener(ch, () => {\n\t\t\t\tthis.triggerCharacterHandler(ch, triggerCharacters[ch]);\n\t\t\t}));\n\t\t});\n\t}\n\n\tprivate triggerCharacterHandler(character: string, groups: ISuggestSupport[][]): void {\n\t\tconst position = this.editor.getPosition();\n\t\tconst lineContext = this.editor.getModel().getLineContext(position.lineNumber);\n\n\t\tgroups = groups.map(supports => {\n\t\t\treturn supports.filter(support => support.shouldAutotriggerSuggest(lineContext, position.column - 1, character));\n\t\t});\n\n\t\tif (groups.length > 0) {\n\t\t\tthis.triggerSuggest(character, groups).done(null, onUnexpectedError);\n\t\t}\n\t}\n\n\tpublic triggerSuggest(triggerCharacter?: string, groups?: ISuggestSupport[][]): TPromise<boolean> {\n\t\tthis.model.trigger(false, triggerCharacter, false, groups);\n\t\tthis.editor.focus();\n\n\t\treturn TPromise.as(false);\n\t}\n\n\tpublic acceptSelectedSuggestion(): void {\n\t\tif (this.widget) {\n\t\t\tthis.widget.acceptSelectedSuggestion();\n\t\t}\n\t}\n\n\tpublic cancelSuggestWidget(): void {\n\t\tif (this.widget) {\n\t\t\tthis.widget.cancel();\n\t\t}\n\t}\n\n\tpublic selectNextSuggestion(): void {\n\t\tif (this.widget) {\n\t\t\tthis.widget.selectNext();\n\t\t}\n\t}\n\n\tpublic selectNextPageSuggestion(): void {\n\t\tif (this.widget) {\n\t\t\tthis.widget.selectNextPage();\n\t\t}\n\t}\n\n\tpublic selectPrevSuggestion(): void {\n\t\tif (this.widget) {\n\t\t\tthis.widget.selectPrevious();\n\t\t}\n\t}\n\n\tpublic selectPrevPageSuggestion(): void {\n\t\tif (this.widget) {\n\t\t\tthis.widget.selectPreviousPage();\n\t\t}\n\t}\n\n\tpublic toggleSuggestionDetails(): void {\n\t\tif (this.widget) {\n\t\t\tthis.widget.toggleDetails();\n\t\t}\n\t}\n}\n\nexport class TriggerSuggestAction extends EditorAction {\n\n\tstatic ID: string = 'editor.action.triggerSuggest';\n\n\tconstructor(descriptor: IEditorActionDescriptorData, editor: ICommonCodeEditor) {\n\t\tsuper(descriptor, editor);\n\t}\n\n\tpublic isSupported(): boolean {\n\t\treturn SuggestRegistry.has(this.editor.getModel()) && !this.editor.getConfiguration().readOnly;\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\treturn SuggestController.getSuggestController(this.editor).triggerSuggest();\n\t}\n}\n\nconst weight = CommonEditorRegistry.commandWeight(90);\n\n// register action\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(TriggerSuggestAction, TriggerSuggestAction.ID, nls.localize('suggest.trigger.label', \"Trigger Suggest\"), {\n\tcontext: ContextKey.EditorTextFocus,\n\tprimary: KeyMod.CtrlCmd | KeyCode.Space,\n\tmac: { primary: KeyMod.WinCtrl | KeyCode.Space }\n}));\nCommonEditorRegistry.registerEditorCommand(ACCEPT_SELECTED_SUGGESTION_CMD, weight, { primary: KeyCode.Tab }, true, CONTEXT_SUGGEST_WIDGET_VISIBLE, (ctx, editor, args) => {\n\tconst controller = SuggestController.getSuggestController(editor);\n\tcontroller.acceptSelectedSuggestion();\n});\nKeybindingsRegistry.registerCommandDesc({\n\tid: 'acceptSelectedSuggestionOnEnter',\n\thandler(accessor, args) {\n\t\twithCodeEditorFromCommandHandler('acceptSelectedSuggestionOnEnter', accessor, args, (editor) => {\n\t\t\tconst controller = SuggestController.getSuggestController(editor);\n\t\t\tcontroller.acceptSelectedSuggestion();\n\t\t});\n\t},\n\tweight,\n\tcontext: KbExpr.and(KbExpr.has(CONTEXT_SUGGEST_WIDGET_VISIBLE), KbExpr.has('config.editor.acceptSuggestionOnEnter')),\n\tprimary: KeyCode.Enter,\n});\nCommonEditorRegistry.registerEditorCommand('hideSuggestWidget', weight, { primary: KeyCode.Escape, secondary: [KeyMod.Shift | KeyCode.Escape] }, true, CONTEXT_SUGGEST_WIDGET_VISIBLE, (ctx, editor, args) => {\n\tconst controller = SuggestController.getSuggestController(editor);\n\tcontroller.cancelSuggestWidget();\n});\nCommonEditorRegistry.registerEditorCommand('selectNextSuggestion', weight, { primary: KeyCode.DownArrow, secondary: [ KeyMod.Alt | KeyCode.DownArrow ] }, true, CONTEXT_SUGGEST_WIDGET_VISIBLE, (ctx, editor, args) => {\n\tconst controller = SuggestController.getSuggestController(editor);\n\tcontroller.selectNextSuggestion();\n});\nCommonEditorRegistry.registerEditorCommand('selectNextPageSuggestion', weight, { primary: KeyCode.PageDown, secondary: [ KeyMod.Alt | KeyCode.PageDown ] }, true, CONTEXT_SUGGEST_WIDGET_VISIBLE, (ctx, editor, args) => {\n\tconst controller = SuggestController.getSuggestController(editor);\n\tcontroller.selectNextPageSuggestion();\n});\nCommonEditorRegistry.registerEditorCommand('selectPrevSuggestion', weight, { primary: KeyCode.UpArrow, secondary: [ KeyMod.Alt | KeyCode.UpArrow ] }, true, CONTEXT_SUGGEST_WIDGET_VISIBLE, (ctx, editor, args) => {\n\tconst controller = SuggestController.getSuggestController(editor);\n\tcontroller.selectPrevSuggestion();\n});\nCommonEditorRegistry.registerEditorCommand('selectPrevPageSuggestion', weight, { primary: KeyCode.PageUp, secondary: [ KeyMod.Alt | KeyCode.PageUp ] }, true, CONTEXT_SUGGEST_WIDGET_VISIBLE, (ctx, editor, args) => {\n\tconst controller = SuggestController.getSuggestController(editor);\n\tcontroller.selectPrevPageSuggestion();\n});\nCommonEditorRegistry.registerEditorCommand('toggleSuggestionDetails', weight, { primary: KeyMod.CtrlCmd | KeyCode.Space, mac: { primary: KeyMod.WinCtrl | KeyCode.Space } }, true, CONTEXT_SUGGEST_WIDGET_VISIBLE, (ctx, editor, args) => {\n\tconst controller = SuggestController.getSuggestController(editor);\n\tcontroller.toggleSuggestionDetails();\n});\nEditorBrowserRegistry.registerEditorContribution(SuggestController);\n"]}