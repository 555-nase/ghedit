var __extends=this&&this.__extends||function(t,o){function e(){this.constructor=t}for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)};define(["require","exports","vs/base/common/winjs.base","vs/editor/common/editorAction","vs/editor/common/editorActionEnablement","vs/editor/browser/editorBrowserExtensions","./quickOpenEditorWidget"],function(t,o,e,i,n,r,s){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var c=function(){function t(t){this.editor=t}return t.get=function(o){return o.getContribution(t.ID)},t.prototype.getId=function(){return t.ID},t.prototype.dispose=function(){this.widget&&(this.widget.destroy(),this.widget=null)},t.prototype.run=function(t){var o=this;this.widget&&(this.widget.destroy(),this.widget=null),this.widget||(this.widget=new s.QuickOpenEditorWidget(this.editor,function(){return t.onOk()},function(){return t.onCancel()},function(e){o.widget.setInput(t.getModel(e),t.getAutoFocus(e))},{inputAriaLabel:t.inputAriaLabel}),this.widget.show(""))},t.ID="editor.controller.quickOpenController",t}();o.QuickOpenController=c;var l=function(t){function o(o,e,i,r){void 0===r&&(r=n.Behaviour.WidgetFocus),t.call(this,o,e,r),this.label=i}return __extends(o,t),o.prototype.run=function(){var t=this;return c.get(this.editor).run({inputAriaLabel:this._getInputAriaLabel(),getModel:function(o){return t._getModel(o)},getAutoFocus:function(o){return t._getAutoFocus(o)},onOk:function(){return t._onClose(!1)},onCancel:function(){return t._onClose(!0)}}),this.lastKnownEditorSelection||(this.lastKnownEditorSelection=this.editor.getSelection()),e.TPromise.as(!0)},o.prototype._getModel=function(t){throw new Error("Subclasses to implement")},o.prototype._getAutoFocus=function(t){throw new Error("Subclasses to implement")},o.prototype._getInputAriaLabel=function(){throw new Error("Subclasses to implement")},o.prototype.decorateLine=function(t,o){var e=this;o.changeDecorations(function(o){var i=[];e.lineHighlightDecorationId&&(i.push(e.lineHighlightDecorationId),e.lineHighlightDecorationId=null);var n=[{range:t,options:{className:"lineHighlight",isWholeLine:!0}}],r=o.deltaDecorations(i,n);e.lineHighlightDecorationId=r[0]})},o.prototype.clearDecorations=function(){var t=this;this.lineHighlightDecorationId&&this.editor.changeDecorations(function(o){o.deltaDecorations([t.lineHighlightDecorationId],[]),t.lineHighlightDecorationId=null})},o.prototype._onClose=function(t){this.clearDecorations(),t&&this.lastKnownEditorSelection&&(this.editor.setSelection(this.lastKnownEditorSelection),this.editor.revealRangeInCenterIfOutsideViewport(this.lastKnownEditorSelection)),this.lastKnownEditorSelection=null,this.editor.focus()},o.prototype.dispose=function(){t.prototype.dispose.call(this)},o}(i.EditorAction);o.BaseEditorQuickOpenAction=l,r.EditorBrowserRegistry.registerEditorContribution(c)});