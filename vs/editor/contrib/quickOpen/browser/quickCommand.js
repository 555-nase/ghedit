var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},__decorate=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},__param=this&&this.__param||function(t,e){return function(o,n){e(o,n,t)}};define(["require","exports","vs/nls","vs/base/common/errors","vs/base/common/filters","vs/base/common/winjs.base","vs/base/parts/quickopen/browser/quickOpenModel","vs/base/parts/quickopen/common/quickOpen","vs/platform/keybinding/common/keybinding","./editorQuickOpen"],function(t,e,o,n,r,i,c,a,s,u){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var p=function(t){function e(e,o,n,r){t.call(this),this.key=e,this.setHighlights(o),this.action=n,this.editor=r}return __extends(e,t),e.prototype.getLabel=function(){return this.action.label},e.prototype.getAriaLabel=function(){return o.localize("ariaLabelEntry","{0}, commands",this.getLabel())},e.prototype.getGroupLabel=function(){return this.key},e.prototype.run=function(t,e){var o=this;return t===a.Mode.OPEN&&(i.TPromise.timeout(50).done(function(){if(o.editor.focus(),o.action.enabled)try{var t=o.action.run()||i.TPromise.as(null);t.done(null,n.onUnexpectedError)}catch(e){n.onUnexpectedError(e)}},n.onUnexpectedError),!0)},e}(c.QuickOpenEntryGroup);e.EditorActionCommandEntry=p;var l=function(t){function e(e,n,r){t.call(this,e,n,o.localize("QuickCommandAction.label","Command Palette")),this._keybindingService=r}return __extends(e,t),e.prototype._getModel=function(t){return new c.QuickOpenModel(this._editorActionsToEntries(this.editor.getActions(),t))},e.prototype._sort=function(t,e){var o=t.getLabel().toLowerCase(),n=e.getLabel().toLowerCase();return o.localeCompare(n)},e.prototype._editorActionsToEntries=function(t,e){for(var o=this,n=[],i=0;i<t.length;i++){var c=t[i],a=c;if(a.isSupported()){var s=this._keybindingService.lookupKeybindings(a.id).map(function(t){return o._keybindingService.getLabelFor(t)});if(c.label){var u=r.matchesFuzzy(e,c.label);u&&n.push(new p(s.length>0?s.join(", "):"",u,c,this.editor))}}}return n=n.sort(this._sort)},e.prototype._getAutoFocus=function(t){return{autoFocusFirstEntry:!0,autoFocusPrefixMatch:t}},e.prototype._getInputAriaLabel=function(){return o.localize("quickCommandActionInput","Type the name of an action you want to execute")},e.ID="editor.action.quickCommand",e=__decorate([__param(2,s.IKeybindingService)],e)}(u.BaseEditorQuickOpenAction);e.QuickCommandAction=l});