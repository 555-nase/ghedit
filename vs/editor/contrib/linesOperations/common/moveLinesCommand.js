define(["require","exports","vs/editor/common/core/range","vs/editor/common/core/selection"],function(e,n,i,t){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var o=function(){function e(e,n){this._selection=e,this._isMovingDown=n}return e.prototype.getEditOperations=function(e,n){var o=e.getLineCount();if((!this._isMovingDown||this._selection.endLineNumber!==o)&&(this._isMovingDown||1!==this._selection.startLineNumber)){this._moveEndPositionDown=!1;var r=this._selection;if(r.startLineNumber<r.endLineNumber&&1===r.endColumn&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1))),r.startLineNumber===r.endLineNumber&&1===e.getLineMaxColumn(r.startLineNumber)){var s=r.startLineNumber,a=this._isMovingDown?s+1:s-1;1===e.getLineMaxColumn(a)?n.addEditOperation(new i.Range(1,1,1,1),null):(n.addEditOperation(new i.Range(s,1,s,1),e.getLineContent(a)),n.addEditOperation(new i.Range(a,1,a,e.getLineMaxColumn(a)),null)),r=new t.Selection(a,1,a,1)}else{var d,u;this._isMovingDown?(d=r.endLineNumber+1,u=e.getLineContent(d),n.addEditOperation(new i.Range(d-1,e.getLineMaxColumn(d-1),d,e.getLineMaxColumn(d)),null),n.addEditOperation(new i.Range(r.startLineNumber,1,r.startLineNumber,1),u+"\n")):(d=r.startLineNumber-1,u=e.getLineContent(d),n.addEditOperation(new i.Range(d,1,d+1,1),null),n.addEditOperation(new i.Range(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),"\n"+u))}this._selectionId=n.trackSelection(r)}},e.prototype.computeCursorState=function(e,n){var i=n.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),i},e}();n.MoveLinesCommand=o});