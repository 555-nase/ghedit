/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
define(["require","exports","vs/base/common/errors","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/modes","vs/base/common/async"],function(e,r,n,o,i,t,s){"use strict";function c(e,r){var i=t.ReferenceProviderRegistry.ordered(e).map(function(o){return s.asWinJsPromise(function(n){return o.provideReferences(e,r,{includeDeclaration:!0},n)}).then(function(e){if(Array.isArray(e))return e},function(e){n.onUnexpectedError(e)})});return o.TPromise.join(i).then(function(e){for(var r=[],n=0,o=e;n<o.length;n++){var i=o[n];i&&r.push.apply(r,i)}return r})}r.provideReferences=c,i.CommonEditorRegistry.registerDefaultLanguageCommand("_executeReferenceProvider",c)});