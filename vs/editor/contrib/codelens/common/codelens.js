/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
define(["require","exports","vs/base/common/errors","vs/base/common/uri","vs/base/common/winjs.base","vs/editor/common/editorCommonExtensions","vs/editor/common/modes","vs/editor/common/services/modelService","vs/base/common/async"],function(e,r,o,n,s,i,t,m,a){"use strict";function c(e){var r=[],n=t.CodeLensProviderRegistry.all(e).map(function(n){return a.asWinJsPromise(function(r){return n.provideCodeLenses(e,r)}).then(function(e){if(Array.isArray(e))for(var o=0,s=e;o<s.length;o++){var i=s[o];r.push({symbol:i,support:n})}},function(e){o.isPromiseCanceledError(e)||o.onUnexpectedError(e)})});return s.TPromise.join(n).then(function(){return r})}r.getCodeLensData=c,i.CommonEditorRegistry.registerLanguageCommand("_executeCodeLensProvider",function(e,r){var s=r.resource;if(!(s instanceof n["default"]))throw o.illegalArgument();var i=e.get(m.IModelService).getModel(s);if(!i)throw o.illegalArgument();return c(i)})});