{"version":3,"file":"vs/editor/contrib/hover/browser/hoverWidgets.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/contrib/hover/browser/hoverWidgets.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport {CommonKeybindings} from 'vs/base/common/keyCodes';\nimport {IDisposable, dispose} from 'vs/base/common/lifecycle';\nimport * as dom from 'vs/base/browser/dom';\nimport {IKeyboardEvent} from 'vs/base/browser/keyboardEvent';\nimport {StyleMutator} from 'vs/base/browser/styleMutator';\nimport {Position} from 'vs/editor/common/core/position';\nimport {IEditorPosition, IPosition} from 'vs/editor/common/editorCommon';\nimport * as editorBrowser from 'vs/editor/browser/editorBrowser';\n\nexport class ContentHoverWidget implements editorBrowser.IContentWidget {\n\n\tprivate _id: string;\n\t_editor: editorBrowser.ICodeEditor;\n\t_isVisible: boolean;\n\tprivate _containerDomNode: HTMLElement;\n\t_domNode: HTMLElement;\n\t_showAtPosition: IEditorPosition;\n\tprivate _stoleFocus: boolean;\n\tprivate _toDispose: IDisposable[];\n\n\t// Editor.IContentWidget.allowEditorOverflow\n\tpublic allowEditorOverflow = true;\n\n\tconstructor(id: string, editor: editorBrowser.ICodeEditor) {\n\t\tthis._id = id;\n\t\tthis._editor = editor;\n\t\tthis._isVisible = false;\n\n\t\tthis._containerDomNode = document.createElement('div');\n\t\tthis._containerDomNode.className = 'monaco-editor-hover monaco-editor-background';\n\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.style.display = 'inline-block';\n\t\tthis._containerDomNode.appendChild(this._domNode);\n\t\tthis._containerDomNode.tabIndex = 0;\n\t\tthis._toDispose = [];\n\t\tthis._toDispose.push(dom.addStandardDisposableListener(this._containerDomNode, 'keydown', (e: IKeyboardEvent) => {\n\t\t\tif (e.equals(CommonKeybindings.ESCAPE)) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}));\n\n\t\tthis._editor.addContentWidget(this);\n\t\tthis._showAtPosition = null;\n\t}\n\n\tpublic getId(): string {\n\t\treturn this._id;\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this._containerDomNode;\n\t}\n\n\tpublic showAt(position:IPosition, focus: boolean): void {\n\n\t\t// Position has changed\n\t\tthis._showAtPosition = new Position(position.lineNumber, position.column);\n\t\tthis._isVisible = true;\n\t\tvar editorMaxWidth = Math.min(800, parseInt(this._containerDomNode.style.maxWidth, 10));\n\n\t\t// When scrolled horizontally, the div does not want to occupy entire visible area.\n\t\tStyleMutator.setWidth(this._containerDomNode, editorMaxWidth);\n\t\tStyleMutator.setHeight(this._containerDomNode, 0);\n\t\tStyleMutator.setLeft(this._containerDomNode, 0);\n\n\t\tvar renderedWidth = Math.min(editorMaxWidth, this._domNode.clientWidth + 5);\n\t\tvar renderedHeight = this._domNode.clientHeight + 1;\n\n\t\tStyleMutator.setWidth(this._containerDomNode, renderedWidth);\n\t\tStyleMutator.setHeight(this._containerDomNode, renderedHeight);\n\n\t\tthis._editor.layoutContentWidget(this);\n\t\t// Simply force a synchronous render on the editor\n\t\t// such that the widget does not really render with left = '0px'\n\t\tthis._editor.render();\n\t\tthis._stoleFocus = focus;\n\t\tif (focus) {\n\t\t\tthis._containerDomNode.focus();\n\t\t}\n\t}\n\n\tpublic hide(): void {\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isVisible = false;\n\t\tthis._editor.layoutContentWidget(this);\n\t\tif (this._stoleFocus) {\n\t\t\tthis._editor.focus();\n\t\t}\n\t}\n\n\tpublic getPosition():editorBrowser.IContentWidgetPosition {\n\t\tif (this._isVisible) {\n\t\t\treturn {\n\t\t\t\tposition: this._showAtPosition,\n\t\t\t\tpreference: [\n\t\t\t\t\teditorBrowser.ContentWidgetPositionPreference.ABOVE,\n\t\t\t\t\teditorBrowser.ContentWidgetPositionPreference.BELOW\n\t\t\t\t]\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.hide();\n\t\tthis._toDispose = dispose(this._toDispose);\n\t}\n}\n\nexport class GlyphHoverWidget implements editorBrowser.IOverlayWidget {\n\n\tprivate _id: string;\n\t_editor: editorBrowser.ICodeEditor;\n\t_isVisible: boolean;\n\t_domNode: HTMLElement;\n\t_showAtLineNumber: number;\n\n\tconstructor(id: string, editor: editorBrowser.ICodeEditor) {\n\n\t\tthis._id = id;\n\t\tthis._editor = editor;\n\t\tthis._isVisible = false;\n\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.className = 'monaco-editor-hover monaco-editor-background';\n\t\tthis._domNode.style.display = 'none';\n\t\tthis._domNode.setAttribute('aria-hidden', 'true');\n\t\tthis._domNode.setAttribute('role', 'presentation');\n\n\t\tthis._showAtLineNumber = -1;\n\t\tthis._editor.addOverlayWidget(this);\n\t}\n\n\tpublic getId(): string {\n\t\treturn this._id;\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tpublic showAt(lineNumber: number): void {\n\t\tthis._showAtLineNumber = lineNumber;\n\n\t\tif (!this._isVisible) {\n\t\t\tthis._isVisible = true;\n\t\t\tthis._domNode.style.display = 'block';\n\t\t}\n\n\t\tvar editorLayout = this._editor.getLayoutInfo();\n\t\tvar topForLineNumber = this._editor.getTopForLineNumber(this._showAtLineNumber);\n\t\tvar editorScrollTop = this._editor.getScrollTop();\n\n\t\tthis._domNode.style.left = (editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth) + 'px';\n\t\tthis._domNode.style.top = (topForLineNumber - editorScrollTop) + 'px';\n\t}\n\n\tpublic hide(): void {\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isVisible = false;\n\t\tthis._domNode.style.display = 'none';\n\t}\n\n\tpublic getPosition():editorBrowser.IOverlayWidgetPosition {\n\t\treturn null;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.hide();\n\t}\n}\n"]}