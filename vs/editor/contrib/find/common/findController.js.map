{"version":3,"sources":["vs/editor/contrib/find/common/findController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;IAAA;;;oGAGgG;IAChG,YAAY,CAAC;IAkBb,WAAY,oBAAoB;QAC/B,iFAAa,CAAA;QACb,mFAAc,CAAA;QACd,yFAAiB,CAAA;IAClB,CAAC,EAJW,4BAAoB,KAApB,4BAAoB,QAI/B;IAJD,IAAY,oBAAoB,GAApB,4BAIX,CAAA;IAUD,IAAM,2BAA2B,GAAG,mBAAmB,CAAC;IAExD;QAA0C,wCAAU;QAanD,8BAAY,MAAqC,EAAsB,iBAAqC;YAb7G,iBAwLC;YA1KC,iBAAO,CAAC;YACR,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,kBAAkB,GAAG,iBAAiB,CAAC,SAAS,CAAC,2BAA2B,EAAE,KAAK,CAAC,CAAC;YAE1F,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,4BAAgB,EAAE,CAAC,CAAC;YACrD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,UAAC,CAAC,IAAK,OAAA,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAvB,CAAuB,CAAC,CAAC,CAAC;YAE9E,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YAEnB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,YAAY,CAAC,SAAS,CAAC,YAAY,EAAE;gBAC7E,IAAI,iBAAiB,GAAG,CAAC,KAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;gBAE5E,KAAI,CAAC,YAAY,EAAE,CAAC;gBAEpB,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC;oBACvB,KAAI,CAAC,MAAM,CAAC;wBACX,kBAAkB,EAAE,KAAK;wBACzB,6BAA6B,EAAE,KAAK;wBACpC,4BAA4B,EAAE,KAAK;wBACnC,WAAW,EAAE,oBAAoB,CAAC,aAAa;wBAC/C,aAAa,EAAE,KAAK;qBACpB,CAAC,CAAC;gBACJ,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC;QA7BM,sCAAiB,GAAxB,UAAyB,MAAqC;YAC7D,MAAM,CAAuB,MAAM,CAAC,eAAe,CAAC,oBAAoB,CAAC,EAAE,CAAC,CAAC;QAC9E,CAAC;QA6BM,sCAAO,GAAd;YACC,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,gBAAK,CAAC,OAAO,WAAE,CAAC;QACjB,CAAC;QAEO,2CAAY,GAApB;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjB,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;gBACtB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACpB,CAAC;QACF,CAAC;QAEM,oCAAK,GAAZ;YACC,MAAM,CAAC,oBAAoB,CAAC,EAAE,CAAC;QAChC,CAAC;QAEO,8CAAe,GAAvB,UAAwB,CAA8B;YACrD,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBAClB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;oBAC5B,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBACnC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACP,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;oBAChC,IAAI,CAAC,YAAY,EAAE,CAAC;gBACrB,CAAC;YACF,CAAC;QACF,CAAC;QAEM,uCAAQ,GAAf;YACC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACpB,CAAC;QAEM,8CAAe,GAAtB;YACC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,UAAU,EAAE,KAAK,EAAE,EAAE,KAAK,CAAC,CAAC;YACjD,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QACtB,CAAC;QAEM,kDAAmB,GAA1B;YACC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,KAAK,CAAC,CAAC;QAClE,CAAC;QAEM,+CAAgB,GAAvB;YACC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,KAAK,CAAC,CAAC;QAClE,CAAC;QAEM,0CAAW,GAAlB;YACC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,KAAK,CAAC,CAAC;QAC9D,CAAC;QAEM,8CAAe,GAAtB,UAAuB,YAAmB;YACzC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,YAAY,EAAE,YAAY,EAAE,EAAE,KAAK,CAAC,CAAC;QAC3D,CAAC;QAEM,uDAAwB,GAA/B;YACC,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;YAE5C,EAAE,CAAC,CAAC,SAAS,CAAC,eAAe,KAAK,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC3D,EAAE,CAAC,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;oBACzB,IAAI,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,iBAAiB,CAAC,SAAS,CAAC,gBAAgB,EAAE,CAAC,CAAC;oBAC7F,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;wBACpB,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC;oBAC5B,CAAC;gBACF,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACP,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBAC3D,CAAC;YACF,CAAC;YAED,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QAES,qCAAM,GAAhB,UAAiB,IAAsB;YACtC,IAAI,CAAC,YAAY,EAAE,CAAC;YAEpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;gBAC9B,iEAAiE;gBACjE,MAAM,CAAC;YACR,CAAC;YAED,IAAI,YAAY,GAAyB;gBACxC,UAAU,EAAE,IAAI;aAChB,CAAC;YAEF,4DAA4D;YAC5D,EAAE,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,CAAC;gBACxC,IAAI,qBAAqB,GAAG,IAAI,CAAC,wBAAwB,EAAE,CAAC;gBAC5D,EAAE,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC;oBAC3B,YAAY,CAAC,YAAY,GAAG,qBAAqB,CAAC;gBACnD,CAAC;YACF,CAAC;YAED,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;YAE5C,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC;YAChC,EAAE,CAAC,CAAC,IAAI,CAAC,4BAA4B,IAAI,SAAS,CAAC,eAAe,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC9F,mEAAmE;gBACnE,YAAY,CAAC,WAAW,GAAG,SAAS,CAAC;YACtC,CAAC;YAED,8BAA8B;YAC9B,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBAC7B,YAAY,CAAC,iBAAiB,GAAG,IAAI,CAAC;YACvC,CAAC;YAED,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;YAExC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,MAAM,GAAG,IAAI,uCAA2B,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;YAC1E,CAAC;QACF,CAAC;QAEM,oCAAK,GAAZ,UAAa,IAAsB;YAClC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACnB,CAAC;QAEM,8CAAe,GAAtB;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjB,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;gBAC9B,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEM,8CAAe,GAAtB;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjB,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;gBAC9B,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEM,sCAAO,GAAd;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjB,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;gBACtB,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEM,yCAAU,GAAjB;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjB,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;gBACzB,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QArLM,uBAAE,GAAG,+BAA+B,CAAC;QAWO;uBAAC,sCAAkB;gCAAA;QA2KvE,2BAAC;IAAD,CAxLA,AAwLC,CAxLyC,sBAAU,GAwLnD;IAxLY,4BAAoB,uBAwLhC,CAAA;IAED;QAAqC,mCAAY;QAEhD,yBAAY,UAAoD,EAAE,MAAsC;YACvG,kBAAM,UAAU,EAAE,MAAM,EAAE,kCAAS,CAAC,WAAW,CAAC,CAAC;QAClD,CAAC;QAEM,6BAAG,GAAV;YACC,IAAI,UAAU,GAAG,oBAAoB,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrE,UAAU,CAAC,KAAK,CAAC;gBAChB,kBAAkB,EAAE,KAAK;gBACzB,6BAA6B,EAAE,IAAI;gBACnC,4BAA4B,EAAE,IAAI;gBAClC,WAAW,EAAE,oBAAoB,CAAC,cAAc;gBAChD,aAAa,EAAE,IAAI;aACnB,CAAC,CAAC;YACH,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QACF,sBAAC;IAAD,CAjBA,AAiBC,CAjBoC,2BAAY,GAiBhD;IAjBY,uBAAe,kBAiB3B,CAAA;IAED;QAA8C,mCAAY;QACzD,yBAAY,UAAmD,EAAE,MAAqC;YACrG,kBAAM,UAAU,EAAE,MAAM,EAAE,kCAAS,CAAC,WAAW,CAAC,CAAC;QAClD,CAAC;QAEM,6BAAG,GAAV;YACC,IAAI,UAAU,GAAG,oBAAoB,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBAC5B,UAAU,CAAC,KAAK,CAAC;oBAChB,kBAAkB,EAAE,KAAK;oBACzB,6BAA6B,EAAE,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC;oBAChF,4BAA4B,EAAE,KAAK;oBACnC,WAAW,EAAE,oBAAoB,CAAC,aAAa;oBAC/C,aAAa,EAAE,IAAI;iBACnB,CAAC,CAAC;gBACH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACvB,CAAC;YACD,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QAGF,sBAAC;IAAD,CArBA,AAqBC,CArB6C,2BAAY,GAqBzD;IArBqB,uBAAe,kBAqBpC,CAAA;IAED;QAAyC,uCAAe;QAAxD;YAAyC,8BAAe;QAIxD,CAAC;QAHU,kCAAI,GAAd,UAAe,UAA+B;YAC7C,MAAM,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC;QACrC,CAAC;QACF,0BAAC;IAAD,CAJA,AAIC,CAJwC,eAAe,GAIvD;IAJY,2BAAmB,sBAI/B,CAAA;IAED;QAA6C,2CAAe;QAA5D;YAA6C,8BAAe;QAI5D,CAAC;QAHU,sCAAI,GAAd,UAAe,UAA+B;YAC7C,MAAM,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC;QACrC,CAAC;QACF,8BAAC;IAAD,CAJA,AAIC,CAJ4C,eAAe,GAI3D;IAJY,+BAAuB,0BAInC,CAAA;IAED;QAAuD,4CAAY;QAClE,kCAAY,UAAmD,EAAE,MAAqC;YACrG,kBAAM,UAAU,EAAE,MAAM,EAAE,kCAAS,CAAC,WAAW,CAAC,CAAC;QAClD,CAAC;QAEM,sCAAG,GAAV;YACC,IAAI,UAAU,GAAG,oBAAoB,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrE,IAAI,qBAAqB,GAAG,UAAU,CAAC,wBAAwB,EAAE,CAAC;YAClE,EAAE,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC;gBAC3B,UAAU,CAAC,eAAe,CAAC,qBAAqB,CAAC,CAAC;YACnD,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBAC5B,UAAU,CAAC,KAAK,CAAC;oBAChB,kBAAkB,EAAE,KAAK;oBACzB,6BAA6B,EAAE,KAAK;oBACpC,4BAA4B,EAAE,KAAK;oBACnC,WAAW,EAAE,oBAAoB,CAAC,aAAa;oBAC/C,aAAa,EAAE,IAAI;iBACnB,CAAC,CAAC;gBACH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACvB,CAAC;YACD,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QAGF,+BAAC;IAAD,CAzBA,AAyBC,CAzBsD,2BAAY,GAyBlE;IAzBqB,gCAAwB,2BAyB7C,CAAA;IAED;QAAkD,gDAAwB;QAA1E;YAAkD,8BAAwB;QAI1E,CAAC;QAHU,2CAAI,GAAd,UAAe,UAA+B;YAC7C,MAAM,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC;QACrC,CAAC;QACF,mCAAC;IAAD,CAJA,AAIC,CAJiD,wBAAwB,GAIzE;IAJY,oCAA4B,+BAIxC,CAAA;IAED;QAAsD,oDAAwB;QAA9E;YAAsD,8BAAwB;QAI9E,CAAC;QAHU,+CAAI,GAAd,UAAe,UAA+B;YAC7C,MAAM,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC;QACrC,CAAC;QACF,uCAAC;IAAD,CAJA,AAIC,CAJqD,wBAAwB,GAI7E;IAJY,wCAAgC,mCAI5C,CAAA;IAED;QAA4C,0CAAY;QAEvD,gCAAY,UAAmD,EAAE,MAAqC;YACrG,kBAAM,UAAU,EAAE,MAAM,EAAE,kCAAS,CAAC,WAAW,GAAG,kCAAS,CAAC,SAAS,CAAC,CAAC;QACxE,CAAC;QAEM,oCAAG,GAAV;YACC,IAAI,UAAU,GAAG,oBAAoB,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrE,UAAU,CAAC,KAAK,CAAC;gBAChB,kBAAkB,EAAE,IAAI;gBACxB,6BAA6B,EAAE,IAAI;gBACnC,4BAA4B,EAAE,IAAI;gBAClC,WAAW,EAAE,oBAAoB,CAAC,iBAAiB;gBACnD,aAAa,EAAE,IAAI;aACnB,CAAC,CAAC;YACH,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QACF,6BAAC;IAAD,CAjBA,AAiBC,CAjB2C,2BAAY,GAiBvD;IAjBY,8BAAsB,yBAiBlC,CAAA;IAUD,yBAAyB,MAAqC,EAAE,sBAA8B;QAC7F,IAAI,UAAU,GAAG,oBAAoB,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;QAChE,IAAI,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE,CAAC;QAClC,IAAI,UAAkB,EACrB,SAAwC,CAAC;QAE1C,iFAAiF;QACjF,IAAI,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;QAChC,IAAI,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;QAEhC,0CAA0C;QAC1C,gEAAgE;QAChE,sCAAsC;QACtC,wCAAwC;QACxC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC9E,wCAAwC;YACxC,UAAU,GAAG,KAAK,CAAC,YAAY,CAAC;QACjC,CAAC;QAAC,IAAI,CAAC,CAAC;YACP,sCAAsC;YACtC,IAAI,CAAC,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;YAE9B,EAAE,CAAC,CAAC,CAAC,CAAC,eAAe,KAAK,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC3C,+CAA+C;gBAC/C,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YAED,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;gBACjB,+CAA+C;gBAC/C,IAAI,IAAI,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,gBAAgB,EAAE,CAAC,CAAC;gBACrE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACX,MAAM,CAAC,IAAI,CAAC;gBACb,CAAC;gBACD,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC;gBACvB,SAAS,GAAG,qBAAS,CAAC,eAAe,CAAC,CAAC,CAAC,eAAe,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,eAAe,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAC/G,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,UAAU,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;YACnD,CAAC;YACD,EAAE,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC;gBAC5B,UAAU,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;YACxC,CAAC;QACF,CAAC;QAED,MAAM,CAAC;YACN,UAAU,EAAE,UAAU;YACtB,SAAS,EAAE,SAAS;YACpB,SAAS,EAAE,SAAS;YACpB,SAAS,EAAE,SAAS;SACpB,CAAC;IACH,CAAC;IAED;QAA+C,6CAAY;QAC1D,mCAAY,UAAmD,EAAE,MAAqC;YACrG,kBAAM,UAAU,EAAE,MAAM,EAAE,kCAAS,CAAC,WAAW,CAAC,CAAC;QAClD,CAAC;QAES,iDAAa,GAAvB;YACC,IAAI,CAAC,GAAG,eAAe,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAC3C,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACR,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACjB,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC;YACpB,CAAC;YAED,IAAI,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;YAChD,IAAI,kBAAkB,GAAG,aAAa,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAEjE,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,UAAU,EAAE,kBAAkB,CAAC,cAAc,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC;YAEzI,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YAED,MAAM,CAAC,qBAAS,CAAC,eAAe,CAAC,SAAS,CAAC,eAAe,EAAE,SAAS,CAAC,WAAW,EAAE,SAAS,CAAC,aAAa,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC;QAClI,CAAC;QACF,gCAAC;IAAD,CAzBA,AAyBC,CAzB8C,2BAAY,GAyB1D;IAzBY,iCAAyB,4BAyBrC,CAAA;IAED;QAAuD,qDAAyB;QAG/E,2CAAY,UAAmD,EAAE,MAAqC;YACrG,kBAAM,UAAU,EAAE,MAAM,CAAC,CAAC;QAC3B,CAAC;QAEM,+CAAG,GAAV;YACC,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAErC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;YAC3B,CAAC;YAED,IAAI,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;YAChD,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;YAC3D,IAAI,CAAC,MAAM,CAAC,oCAAoC,CAAC,SAAS,CAAC,CAAC;YAE5D,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QAlBM,oCAAE,GAAG,oBAAQ,CAAC,iCAAiC,CAAC;QAmBxD,wCAAC;IAAD,CApBA,AAoBC,CApBsD,yBAAyB,GAoB/E;IApBY,yCAAiC,oCAoB7C,CAAA;IAED;QAAwD,sDAAyB;QAGhF,4CAAY,UAAmD,EAAE,MAAqC;YACrG,kBAAM,UAAU,EAAE,MAAM,CAAC,CAAC;QAC3B,CAAC;QAEM,gDAAG,GAAV;YACC,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAErC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;YAC3B,CAAC;YAED,IAAI,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;YAChD,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;YAC9F,IAAI,CAAC,MAAM,CAAC,oCAAoC,CAAC,SAAS,CAAC,CAAC;YAE5D,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QAlBM,qCAAE,GAAG,oBAAQ,CAAC,kCAAkC,CAAC;QAmBzD,yCAAC;IAAD,CApBA,AAoBC,CApBuD,yBAAyB,GAoBhF;IApBY,0CAAkC,qCAoB9C,CAAA;IAED;QAA4C,0CAAY;QAIvD,gCAAY,UAAmD,EAAE,MAAqC;YACrG,IAAI,SAAS,GAAG,kCAAS,CAAC,WAAW,GAAG,kCAAS,CAAC,SAAS,CAAC;YAC5D,EAAE,CAAC,CAAC,UAAU,CAAC,EAAE,KAAK,sBAAsB,CAAC,SAAS,CAAC,CAAC,CAAC;gBACxD,SAAS,IAAI,kCAAS,CAAC,iBAAiB,CAAC;YAC1C,CAAC;YACD,kBAAM,UAAU,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;QACtC,CAAC;QAEM,2CAAU,GAAjB;YACC,MAAM,CAAC,sBAAsB,CAAC;QAC/B,CAAC;QAEM,oCAAG,GAAV;YACC,IAAI,CAAC,GAAG,eAAe,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAC3C,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACR,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;YAC3B,CAAC;YAED,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,UAAU,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC;YAEtG,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,qBAAS,CAAC,eAAe,CAAC,CAAC,CAAC,eAAe,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,aAAa,EAAE,CAAC,CAAC,SAAS,CAAC,EAAzF,CAAyF,CAAC,CAAC,CAAC;YACxI,CAAC;YACD,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QA3BM,yBAAE,GAAG,gCAAgC,CAAC;QACtC,gCAAS,GAAG,yBAAyB,CAAC;QA2B9C,6BAAC;IAAD,CA7BA,AA6BC,CA7B2C,2BAAY,GA6BvD;IA7BY,8BAAsB,yBA6BlC,CAAA;IAED;QAA0C,wCAAU;QAQnD,8BAAY,MAAqC;YARlD,iBAsJC;YA7IC,iBAAO,CAAC;YACR,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACtB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,wBAAgB,CAAC,cAAM,OAAA,KAAI,CAAC,OAAO,EAAE,EAAd,CAAc,EAAE,GAAG,CAAC,CAAC,CAAC;YAClF,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAEhC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,SAAS,CAAC,sBAAsB,EAAE,UAAC,CAA4C;gBAC9H,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;oBAC3B,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,UAAU,CAAC,CAAC,CAAC;wBAC7B,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,mBAAmB,IAAI,CAAC,KAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,CAAC,CAAC,SAAS,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC,CAAC;4BAC7G,kBAAkB;4BAClB,KAAI,CAAC,iBAAiB,EAAE,CAAC;wBAC1B,CAAC;wBACD,KAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;oBAC5B,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACP,KAAI,CAAC,iBAAiB,EAAE,CAAC;oBAE1B,CAAC;gBACF,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACP,KAAI,CAAC,OAAO,EAAE,CAAC;gBAChB,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,SAAS,CAAC,YAAY,EAAE,UAAC,CAAC;gBACzE,KAAI,CAAC,iBAAiB,EAAE,CAAC;YAC1B,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC,iBAAiB,CAAC,UAAC,CAAC;gBAC5F,KAAI,CAAC,OAAO,EAAE,CAAC;YAChB,CAAC,CAAC,CAAC,CAAC;QACL,CAAC;QAEM,oCAAK,GAAZ;YACC,MAAM,CAAC,oBAAoB,CAAC,EAAE,CAAC;QAChC,CAAC;QAEO,gDAAiB,GAAzB;YACC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAChC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACjC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;YACvE,CAAC;QACF,CAAC;QAEO,sCAAO,GAAf;YACC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAChC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBACxD,MAAM,CAAC;YACR,CAAC;YAED,IAAI,CAAC,GAAG,eAAe,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACR,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,MAAM,CAAC;YACR,CAAC;YAED,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;YACnC,IAAI,iBAAiB,GAAG,2BAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACvD,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACjB,6BAA6B;gBAC7B,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC;oBACvB,4EAA4E;oBAC5E,IAAI,CAAC,iBAAiB,EAAE,CAAC;oBACzB,MAAM,CAAC;gBACR,CAAC;gBAED,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,SAAS,CAAC;YACxC,CAAC;YACD,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBACnC,4BAA4B;gBAC5B,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,MAAM,CAAC;YACR,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC;gBAC/B,sBAAsB;gBACtB,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,MAAM,CAAC;YACR,CAAC;YACD,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;YAC7C,IAAI,iBAAiB,GAAG,KAAK,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7D,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC5C,IAAI,YAAY,GAAG,KAAK,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxD,EAAE,CAAC,CAAC,iBAAiB,KAAK,YAAY,CAAC,CAAC,CAAC;oBACxC,wCAAwC;oBACxC,IAAI,CAAC,iBAAiB,EAAE,CAAC;oBACzB,MAAM,CAAC;gBACR,CAAC;YACF,CAAC;YAGD,IAAI,UAAU,GAAG,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,UAAU,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC;YACxF,UAAU,CAAC,IAAI,CAAC,aAAK,CAAC,wBAAwB,CAAC,CAAC;YAEhD,UAAU,CAAC,IAAI,CAAC,aAAK,CAAC,wBAAwB,CAAC,CAAC;YAEhD,qDAAqD;YACrD,IAAI,OAAO,GAAgC,EAAE,CAAC;YAC9C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,UAAU,CAAC,MAAM,EAAE,IAAI,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,GAAI,CAAC;gBACrF,IAAI,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;gBAE1B,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;oBACf,iCAAiC;oBACjC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACpB,CAAC,EAAE,CAAC;gBACL,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACP,IAAI,GAAG,GAAG,aAAK,CAAC,wBAAwB,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/D,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;wBACb,sBAAsB;wBACtB,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;wBACpB,CAAC,EAAE,CAAC;oBACL,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;wBACpB,sBAAsB;wBACtB,CAAC,EAAE,CAAC;oBACL,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACP,wBAAwB;wBACxB,CAAC,EAAE,CAAC;wBACJ,CAAC,EAAE,CAAC;oBACL,CAAC;gBACF,CAAC;YACF,CAAC;YAED,IAAI,WAAW,GAAG,OAAO,CAAC,GAAG,CAAC,UAAA,CAAC;gBAC9B,MAAM,CAAC;oBACN,KAAK,EAAE,CAAC;oBACR,OAAO,EAAE;wBACR,UAAU,EAAE,YAAY,CAAC,sBAAsB,CAAC,2BAA2B;wBAC3E,SAAS,EAAE,oBAAoB;wBAC/B,mEAAmE;wBACnE,aAAa,EAAE,CAAC,iBAAiB,GAAG,SAAS,GAAG;4BAC/C,KAAK,EAAE,SAAS;4BAChB,SAAS,EAAE,SAAS;4BACpB,QAAQ,EAAE,YAAY,CAAC,iBAAiB,CAAC,MAAM;yBAC/C,CAAC;qBACF;iBACD,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;QAChF,CAAC;QAEM,sCAAO,GAAd;YACC,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,gBAAK,CAAC,OAAO,WAAE,CAAC;QACjB,CAAC;QApJM,uBAAE,GAAG,qCAAqC,CAAC;QAqJnD,2BAAC;IAAD,CAtJA,AAsJC,CAtJyC,sBAAU,GAsJnD;IAtJY,4BAAoB,uBAsJhC,CAAA;IAGD,6CAAoB,CAAC,oBAAoB,CAAC,IAAI,+CAAsB,CAAC,sBAAsB,EAAE,sBAAsB,CAAC,EAAE,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAgC,EAAE,IAAqC,CAAC,EAAE;QAC9M,OAAO,EAAE,mCAAU,CAAC,WAAW;QAC/B,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,iBAAM,CAAC,KAAK,GAAG,kBAAO,CAAC,KAAK;KACtD,CAAC,CAAC,CAAC;IACJ,qFAAqF;IACrF,6CAAoB,CAAC,oBAAoB,CAAC,IAAI,+CAAsB,CAAC,sBAAsB,EAAE,sBAAsB,CAAC,SAAS,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAiB,EAAE,IAAwB,CAAC,EAAE;QACzL,OAAO,EAAE,mCAAU,CAAC,eAAe;QACnC,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,kBAAO,CAAC,EAAE;KACpC,CAAC,CAAC,CAAC;IAEJ,mBAAmB;IACnB,6CAAoB,CAAC,oBAAoB,CAAC,IAAI,+CAAsB,CAAC,eAAe,EAAE,oBAAQ,CAAC,eAAe,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAiB,EAAC,IAAM,CAAC,EAAE;QACvJ,OAAO,EAAE,mCAAU,CAAC,IAAI;QACxB,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,kBAAO,CAAC,KAAK;KACvC,CAAC,CAAC,CAAC;IACJ,6CAAoB,CAAC,oBAAoB,CAAC,IAAI,+CAAsB,CAAC,mBAAmB,EAAE,oBAAQ,CAAC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAqB,EAAE,IAAW,CAAC,EAAE;QACzK,OAAO,EAAE,mCAAU,CAAC,WAAW;QAC/B,OAAO,EAAE,kBAAO,CAAC,EAAE;QACnB,GAAG,EAAE,EAAE,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,kBAAO,CAAC,KAAK,EAAE,SAAS,EAAE,CAAC,kBAAO,CAAC,EAAE,CAAC,EAAE;KACzE,CAAC,CAAC,CAAC;IACJ,6CAAoB,CAAC,oBAAoB,CAAC,IAAI,+CAAsB,CAAC,uBAAuB,EAAE,oBAAQ,CAAC,uBAAuB,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAyB,EAAE,IAAe,CAAC,EAAE;QACzL,OAAO,EAAE,mCAAU,CAAC,WAAW;QAC/B,OAAO,EAAE,iBAAM,CAAC,KAAK,GAAG,kBAAO,CAAC,EAAE;QAClC,GAAG,EAAE,EAAE,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,iBAAM,CAAC,KAAK,GAAG,kBAAO,CAAC,KAAK,EAAE,SAAS,EAAE,CAAC,iBAAM,CAAC,KAAK,GAAG,kBAAO,CAAC,EAAE,CAAC,EAAE;KACvG,CAAC,CAAC,CAAC;IACJ,6CAAoB,CAAC,oBAAoB,CAAC,IAAI,+CAAsB,CAAC,4BAA4B,EAAE,oBAAQ,CAAC,4BAA4B,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA8B,EAAE,IAAqB,CAAC,EAAE;QAC9M,OAAO,EAAE,mCAAU,CAAC,WAAW;QAC/B,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,kBAAO,CAAC,EAAE;KACpC,CAAC,CAAC,CAAC;IACJ,6CAAoB,CAAC,oBAAoB,CAAC,IAAI,+CAAsB,CAAC,gCAAgC,EAAE,oBAAQ,CAAC,gCAAgC,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAkC,EAAE,IAAyB,CAAC,EAAE;QAC9N,OAAO,EAAE,mCAAU,CAAC,WAAW;QAC/B,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,iBAAM,CAAC,KAAK,GAAG,kBAAO,CAAC,EAAE;KACnD,CAAC,CAAC,CAAC;IACJ,6CAAoB,CAAC,oBAAoB,CAAC,IAAI,+CAAsB,CAAC,sBAAsB,EAAE,oBAAQ,CAAC,sBAAsB,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAc,EAAE,IAAS,CAAC,EAAE;QACtK,OAAO,EAAE,mCAAU,CAAC,IAAI;QACxB,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,kBAAO,CAAC,KAAK;QACvC,GAAG,EAAE,EAAE,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,iBAAM,CAAC,GAAG,GAAG,kBAAO,CAAC,KAAK,EAAE;KAC7D,CAAC,CAAC,CAAC;IACJ,6CAAoB,CAAC,oBAAoB,CAAC,IAAI,+CAAsB,CAAC,kCAAkC,EAAE,kCAAkC,CAAC,EAAE,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA8B,EAAE,IAAwC,CAAC,EAAE;QACvO,OAAO,EAAE,mCAAU,CAAC,WAAW;QAC/B,OAAO,EAAE,iBAAM,CAAC,KAAK,CAAC,iBAAM,CAAC,OAAO,GAAG,kBAAO,CAAC,KAAK,EAAE,iBAAM,CAAC,OAAO,GAAG,kBAAO,CAAC,KAAK,CAAC;KACrF,CAAC,CAAC,CAAC;IACJ,6CAAoB,CAAC,oBAAoB,CAAC,IAAI,+CAAsB,CAAC,iCAAiC,EAAE,iCAAiC,CAAC,EAAE,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA6B,EAAE,IAAkC,CAAC,EAAE;QAC9N,OAAO,EAAE,mCAAU,CAAC,WAAW;QAC/B,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,kBAAO,CAAC,KAAK;KACvC,CAAC,CAAC,CAAC;IAEJ,6BAA6B,EAAS,EAAE,QAAgD,EAAE,WAAwB,EAAE,QAAsB;QAAtB,wBAAsB,GAAtB,eAAsB;QACzI,6CAAoB,CAAC,qBAAqB,CAAC,EAAE,EAAE,6CAAoB,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,KAAK,EAAE,QAAQ,EAAE,UAAC,GAAG,EAAE,MAAM,EAAE,IAAI;YACrI,QAAQ,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC1D,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,mBAAmB,CAAC,oBAAQ,CAAC,sBAAsB,EAAE,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,eAAe,EAAE,EAAnB,CAAmB,EAAE;QAC9E,OAAO,EAAE,kBAAO,CAAC,MAAM;QACvB,SAAS,EAAE,CAAC,iBAAM,CAAC,KAAK,GAAG,kBAAO,CAAC,MAAM,CAAC;KAC1C,EAAE,2BAA2B,CAAC,CAAC;IAChC,mBAAmB,CAAC,oBAAQ,CAAC,0BAA0B,EAAE,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,mBAAmB,EAAE,EAAvB,CAAuB,EAAE;QACtF,OAAO,EAAE,iBAAM,CAAC,GAAG,GAAG,kBAAO,CAAC,KAAK;QACnC,GAAG,EAAE,EAAE,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,iBAAM,CAAC,GAAG,GAAG,kBAAO,CAAC,KAAK,EAAE;KAC7D,CAAC,CAAC;IACH,mBAAmB,CAAC,oBAAQ,CAAC,sBAAsB,EAAE,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,gBAAgB,EAAE,EAApB,CAAoB,EAAE;QAC/E,OAAO,EAAE,iBAAM,CAAC,GAAG,GAAG,kBAAO,CAAC,KAAK;QACnC,GAAG,EAAE,EAAE,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,iBAAM,CAAC,GAAG,GAAG,kBAAO,CAAC,KAAK,EAAE;KAC7D,CAAC,CAAC;IACH,mBAAmB,CAAC,oBAAQ,CAAC,kBAAkB,EAAE,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,WAAW,EAAE,EAAf,CAAe,EAAE;QACtE,OAAO,EAAE,iBAAM,CAAC,GAAG,GAAG,kBAAO,CAAC,KAAK;QACnC,GAAG,EAAE,EAAE,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,iBAAM,CAAC,GAAG,GAAG,kBAAO,CAAC,KAAK,EAAE;KAC7D,CAAC,CAAC;IACH,mBAAmB,CAAC,oBAAQ,CAAC,gBAAgB,EAAE,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,OAAO,EAAE,EAAX,CAAW,EAAE;QAChE,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,iBAAM,CAAC,KAAK,GAAG,kBAAO,CAAC,KAAK;KACtD,CAAC,CAAC;IACH,mBAAmB,CAAC,oBAAQ,CAAC,gBAAgB,EAAE,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,UAAU,EAAE,EAAd,CAAc,EAAE;QACnE,OAAO,EAAE,iBAAM,CAAC,OAAO,GAAG,iBAAM,CAAC,GAAG,GAAG,kBAAO,CAAC,KAAK;KACpD,CAAC,CAAC","file":"vs/editor/contrib/find/common/findController.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as nls from 'vs/nls';\nimport {KeyCode, KeyMod} from 'vs/base/common/keyCodes';\nimport {Disposable} from 'vs/base/common/lifecycle';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport {IKeybindingContextKey, IKeybindingService, IKeybindings} from 'vs/platform/keybinding/common/keybindingService';\nimport {Range} from 'vs/editor/common/core/range';\nimport {Selection} from 'vs/editor/common/core/selection';\nimport {EditorAction} from 'vs/editor/common/editorAction';\nimport {Behaviour} from 'vs/editor/common/editorActionEnablement';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {CommonEditorRegistry, ContextKey, EditorActionDescriptor} from 'vs/editor/common/editorCommonExtensions';\nimport {FIND_IDS, FindModelBoundToEditorModel} from 'vs/editor/contrib/find/common/findModel';\nimport {FindReplaceState, FindReplaceStateChangedEvent, INewFindReplaceState} from 'vs/editor/contrib/find/common/findState';\nimport {OccurrencesRegistry} from 'vs/editor/common/modes';\nimport {RunOnceScheduler} from 'vs/base/common/async';\n\nexport enum FindStartFocusAction {\n\tNoFocusChange,\n\tFocusFindInput,\n\tFocusReplaceInput\n}\n\nexport interface IFindStartOptions {\n\tforceRevealReplace:boolean;\n\tseedSearchStringFromSelection:boolean;\n\tseedSearchScopeFromSelection:boolean;\n\tshouldFocus:FindStartFocusAction;\n\tshouldAnimate:boolean;\n}\n\nconst CONTEXT_FIND_WIDGET_VISIBLE = 'findWidgetVisible';\n\nexport class CommonFindController extends Disposable implements editorCommon.IEditorContribution {\n\n\tstatic ID = 'editor.contrib.findController';\n\n\tprivate _editor: editorCommon.ICommonCodeEditor;\n\tprivate _findWidgetVisible: IKeybindingContextKey<boolean>;\n\tprotected _state: FindReplaceState;\n\tprivate _model: FindModelBoundToEditorModel;\n\n\tstatic getFindController(editor:editorCommon.ICommonCodeEditor): CommonFindController {\n\t\treturn <CommonFindController>editor.getContribution(CommonFindController.ID);\n\t}\n\n\tconstructor(editor:editorCommon.ICommonCodeEditor, @IKeybindingService keybindingService: IKeybindingService) {\n\t\tsuper();\n\t\tthis._editor = editor;\n\t\tthis._findWidgetVisible = keybindingService.createKey(CONTEXT_FIND_WIDGET_VISIBLE, false);\n\n\t\tthis._state = this._register(new FindReplaceState());\n\t\tthis._register(this._state.addChangeListener((e) => this._onStateChanged(e)));\n\n\t\tthis._model = null;\n\n\t\tthis._register(this._editor.addListener2(editorCommon.EventType.ModelChanged, () => {\n\t\t\tlet shouldRestartFind = (this._editor.getModel() && this._state.isRevealed);\n\n\t\t\tthis.disposeModel();\n\n\t\t\tif (shouldRestartFind) {\n\t\t\t\tthis._start({\n\t\t\t\t\tforceRevealReplace: false,\n\t\t\t\t\tseedSearchStringFromSelection: false,\n\t\t\t\t\tseedSearchScopeFromSelection: false,\n\t\t\t\t\tshouldFocus: FindStartFocusAction.NoFocusChange,\n\t\t\t\t\tshouldAnimate: false\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.disposeModel();\n\t\tsuper.dispose();\n\t}\n\n\tprivate disposeModel(): void {\n\t\tif (this._model) {\n\t\t\tthis._model.dispose();\n\t\t\tthis._model = null;\n\t\t}\n\t}\n\n\tpublic getId(): string {\n\t\treturn CommonFindController.ID;\n\t}\n\n\tprivate _onStateChanged(e:FindReplaceStateChangedEvent): void {\n\t\tif (e.isRevealed) {\n\t\t\tif (this._state.isRevealed) {\n\t\t\t\tthis._findWidgetVisible.set(true);\n\t\t\t} else {\n\t\t\t\tthis._findWidgetVisible.reset();\n\t\t\t\tthis.disposeModel();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic getState(): FindReplaceState {\n\t\treturn this._state;\n\t}\n\n\tpublic closeFindWidget(): void {\n\t\tthis._state.change({ isRevealed: false }, false);\n\t\tthis._editor.focus();\n\t}\n\n\tpublic toggleCaseSensitive(): void {\n\t\tthis._state.change({ matchCase: !this._state.matchCase }, false);\n\t}\n\n\tpublic toggleWholeWords(): void {\n\t\tthis._state.change({ wholeWord: !this._state.wholeWord }, false);\n\t}\n\n\tpublic toggleRegex(): void {\n\t\tthis._state.change({ isRegex: !this._state.isRegex }, false);\n\t}\n\n\tpublic setSearchString(searchString:string): void {\n\t\tthis._state.change({ searchString: searchString }, false);\n\t}\n\n\tpublic getSelectionSearchString(): string {\n\t\tlet selection = this._editor.getSelection();\n\n\t\tif (selection.startLineNumber === selection.endLineNumber) {\n\t\t\tif (selection.isEmpty()) {\n\t\t\t\tlet wordAtPosition = this._editor.getModel().getWordAtPosition(selection.getStartPosition());\n\t\t\t\tif (wordAtPosition) {\n\t\t\t\t\treturn wordAtPosition.word;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn this._editor.getModel().getValueInRange(selection);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprotected _start(opts:IFindStartOptions): void {\n\t\tthis.disposeModel();\n\n\t\tif (!this._editor.getModel()) {\n\t\t\t// cannot do anything with an editor that doesn't have a model...\n\t\t\treturn;\n\t\t}\n\n\t\tlet stateChanges: INewFindReplaceState = {\n\t\t\tisRevealed: true\n\t\t};\n\n\t\t// Consider editor selection and overwrite the state with it\n\t\tif (opts.seedSearchStringFromSelection) {\n\t\t\tlet selectionSearchString = this.getSelectionSearchString();\n\t\t\tif (selectionSearchString) {\n\t\t\t\tstateChanges.searchString = selectionSearchString;\n\t\t\t}\n\t\t}\n\n\t\tlet selection = this._editor.getSelection();\n\n\t\tstateChanges.searchScope = null;\n\t\tif (opts.seedSearchScopeFromSelection && selection.startLineNumber < selection.endLineNumber) {\n\t\t\t// Take search scope into account only if it is more than one line.\n\t\t\tstateChanges.searchScope = selection;\n\t\t}\n\n\t\t// Overwrite isReplaceRevealed\n\t\tif (opts.forceRevealReplace) {\n\t\t\tstateChanges.isReplaceRevealed = true;\n\t\t}\n\n\t\tthis._state.change(stateChanges, false);\n\n\t\tif (!this._model) {\n\t\t\tthis._model = new FindModelBoundToEditorModel(this._editor, this._state);\n\t\t}\n\t}\n\n\tpublic start(opts:IFindStartOptions): void {\n\t\tthis._start(opts);\n\t}\n\n\tpublic moveToNextMatch(): boolean {\n\t\tif (this._model) {\n\t\t\tthis._model.moveToNextMatch();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic moveToPrevMatch(): boolean {\n\t\tif (this._model) {\n\t\t\tthis._model.moveToPrevMatch();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic replace(): boolean {\n\t\tif (this._model) {\n\t\t\tthis._model.replace();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic replaceAll(): boolean {\n\t\tif (this._model) {\n\t\t\tthis._model.replaceAll();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport class StartFindAction extends EditorAction {\n\n\tconstructor(descriptor: editorCommon.IEditorActionDescriptorData, editor: editorCommon.ICommonCodeEditor) {\n\t\tsuper(descriptor, editor, Behaviour.WidgetFocus);\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\tlet controller = CommonFindController.getFindController(this.editor);\n\t\tcontroller.start({\n\t\t\tforceRevealReplace: false,\n\t\t\tseedSearchStringFromSelection: true,\n\t\t\tseedSearchScopeFromSelection: true,\n\t\t\tshouldFocus: FindStartFocusAction.FocusFindInput,\n\t\t\tshouldAnimate: true\n\t\t});\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport abstract class MatchFindAction extends EditorAction {\n\tconstructor(descriptor:editorCommon.IEditorActionDescriptorData, editor:editorCommon.ICommonCodeEditor) {\n\t\tsuper(descriptor, editor, Behaviour.WidgetFocus);\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\tlet controller = CommonFindController.getFindController(this.editor);\n\t\tif (!this._run(controller)) {\n\t\t\tcontroller.start({\n\t\t\t\tforceRevealReplace: false,\n\t\t\t\tseedSearchStringFromSelection: (controller.getState().searchString.length === 0),\n\t\t\t\tseedSearchScopeFromSelection: false,\n\t\t\t\tshouldFocus: FindStartFocusAction.NoFocusChange,\n\t\t\t\tshouldAnimate: true\n\t\t\t});\n\t\t\tthis._run(controller);\n\t\t}\n\t\treturn TPromise.as(true);\n\t}\n\n\tprotected abstract _run(controller:CommonFindController): boolean;\n}\n\nexport class NextMatchFindAction extends MatchFindAction {\n\tprotected _run(controller:CommonFindController): boolean {\n\t\treturn controller.moveToNextMatch();\n\t}\n}\n\nexport class PreviousMatchFindAction extends MatchFindAction {\n\tprotected _run(controller:CommonFindController): boolean {\n\t\treturn controller.moveToPrevMatch();\n\t}\n}\n\nexport abstract class SelectionMatchFindAction extends EditorAction {\n\tconstructor(descriptor:editorCommon.IEditorActionDescriptorData, editor:editorCommon.ICommonCodeEditor) {\n\t\tsuper(descriptor, editor, Behaviour.WidgetFocus);\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\tlet controller = CommonFindController.getFindController(this.editor);\n\t\tlet selectionSearchString = controller.getSelectionSearchString();\n\t\tif (selectionSearchString) {\n\t\t\tcontroller.setSearchString(selectionSearchString);\n\t\t}\n\t\tif (!this._run(controller)) {\n\t\t\tcontroller.start({\n\t\t\t\tforceRevealReplace: false,\n\t\t\t\tseedSearchStringFromSelection: false,\n\t\t\t\tseedSearchScopeFromSelection: false,\n\t\t\t\tshouldFocus: FindStartFocusAction.NoFocusChange,\n\t\t\t\tshouldAnimate: true\n\t\t\t});\n\t\t\tthis._run(controller);\n\t\t}\n\t\treturn TPromise.as(true);\n\t}\n\n\tprotected abstract _run(controller:CommonFindController): boolean;\n}\n\nexport class NextSelectionMatchFindAction extends SelectionMatchFindAction {\n\tprotected _run(controller:CommonFindController): boolean {\n\t\treturn controller.moveToNextMatch();\n\t}\n}\n\nexport class PreviousSelectionMatchFindAction extends SelectionMatchFindAction {\n\tprotected _run(controller:CommonFindController): boolean {\n\t\treturn controller.moveToPrevMatch();\n\t}\n}\n\nexport class StartFindReplaceAction extends EditorAction {\n\n\tconstructor(descriptor:editorCommon.IEditorActionDescriptorData, editor:editorCommon.ICommonCodeEditor) {\n\t\tsuper(descriptor, editor, Behaviour.WidgetFocus | Behaviour.Writeable);\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\tlet controller = CommonFindController.getFindController(this.editor);\n\t\tcontroller.start({\n\t\t\tforceRevealReplace: true,\n\t\t\tseedSearchStringFromSelection: true,\n\t\t\tseedSearchScopeFromSelection: true,\n\t\t\tshouldFocus: FindStartFocusAction.FocusReplaceInput,\n\t\t\tshouldAnimate: true\n\t\t});\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport interface IMultiCursorFindResult {\n\tsearchText:string;\n\tmatchCase:boolean;\n\twholeWord:boolean;\n\n\tnextMatch: editorCommon.IEditorSelection;\n}\n\nfunction multiCursorFind(editor:editorCommon.ICommonCodeEditor, changeFindSearchString:boolean): IMultiCursorFindResult {\n\tlet controller = CommonFindController.getFindController(editor);\n\tlet state = controller.getState();\n\tlet searchText: string,\n\t\tnextMatch: editorCommon.IEditorSelection;\n\n\t// In any case, if the find widget was ever opened, the options are taken from it\n\tlet wholeWord = state.wholeWord;\n\tlet matchCase = state.matchCase;\n\n\t// Find widget owns what we search for if:\n\t//  - focus is not in the editor (i.e. it is in the find widget)\n\t//  - and the search widget is visible\n\t//  - and the search string is non-empty\n\tif (!editor.isFocused() && state.isRevealed && state.searchString.length > 0) {\n\t\t// Find widget owns what is searched for\n\t\tsearchText = state.searchString;\n\t} else {\n\t\t// Selection owns what is searched for\n\t\tlet s = editor.getSelection();\n\n\t\tif (s.startLineNumber !== s.endLineNumber) {\n\t\t\t// Cannot search for multiline string... yet...\n\t\t\treturn null;\n\t\t}\n\n\t\tif (s.isEmpty()) {\n\t\t\t// selection is empty => expand to current word\n\t\t\tlet word = editor.getModel().getWordAtPosition(s.getStartPosition());\n\t\t\tif (!word) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tsearchText = word.word;\n\t\t\tnextMatch = Selection.createSelection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n\t\t} else {\n\t\t\tsearchText = editor.getModel().getValueInRange(s);\n\t\t}\n\t\tif (changeFindSearchString) {\n\t\t\tcontroller.setSearchString(searchText);\n\t\t}\n\t}\n\n\treturn {\n\t\tsearchText: searchText,\n\t\tmatchCase: matchCase,\n\t\twholeWord: wholeWord,\n\t\tnextMatch: nextMatch\n\t};\n}\n\nexport class SelectNextFindMatchAction extends EditorAction {\n\tconstructor(descriptor:editorCommon.IEditorActionDescriptorData, editor:editorCommon.ICommonCodeEditor) {\n\t\tsuper(descriptor, editor, Behaviour.WidgetFocus);\n\t}\n\n\tprotected _getNextMatch(): editorCommon.IEditorSelection {\n\t\tlet r = multiCursorFind(this.editor, true);\n\t\tif (!r) {\n\t\t\treturn null;\n\t\t}\n\t\tif (r.nextMatch) {\n\t\t\treturn r.nextMatch;\n\t\t}\n\n\t\tlet allSelections = this.editor.getSelections();\n\t\tlet lastAddedSelection = allSelections[allSelections.length - 1];\n\n\t\tlet nextMatch = this.editor.getModel().findNextMatch(r.searchText, lastAddedSelection.getEndPosition(), false, r.matchCase, r.wholeWord);\n\n\t\tif (!nextMatch) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Selection.createSelection(nextMatch.startLineNumber, nextMatch.startColumn, nextMatch.endLineNumber, nextMatch.endColumn);\n\t}\n}\n\nexport class AddSelectionToNextFindMatchAction extends SelectNextFindMatchAction {\n\tstatic ID = FIND_IDS.AddSelectionToNextFindMatchAction;\n\n\tconstructor(descriptor:editorCommon.IEditorActionDescriptorData, editor:editorCommon.ICommonCodeEditor) {\n\t\tsuper(descriptor, editor);\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\tlet nextMatch = this._getNextMatch();\n\n\t\tif (!nextMatch) {\n\t\t\treturn TPromise.as(false);\n\t\t}\n\n\t\tlet allSelections = this.editor.getSelections();\n\t\tthis.editor.setSelections(allSelections.concat(nextMatch));\n\t\tthis.editor.revealRangeInCenterIfOutsideViewport(nextMatch);\n\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport class MoveSelectionToNextFindMatchAction extends SelectNextFindMatchAction {\n\tstatic ID = FIND_IDS.MoveSelectionToNextFindMatchAction;\n\n\tconstructor(descriptor:editorCommon.IEditorActionDescriptorData, editor:editorCommon.ICommonCodeEditor) {\n\t\tsuper(descriptor, editor);\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\tlet nextMatch = this._getNextMatch();\n\n\t\tif (!nextMatch) {\n\t\t\treturn TPromise.as(false);\n\t\t}\n\n\t\tlet allSelections = this.editor.getSelections();\n\t\tthis.editor.setSelections(allSelections.slice(0, allSelections.length - 1).concat(nextMatch));\n\t\tthis.editor.revealRangeInCenterIfOutsideViewport(nextMatch);\n\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport class SelectHighlightsAction extends EditorAction {\n\tstatic ID = 'editor.action.selectHighlights';\n\tstatic COMPAT_ID = 'editor.action.changeAll';\n\n\tconstructor(descriptor:editorCommon.IEditorActionDescriptorData, editor:editorCommon.ICommonCodeEditor) {\n\t\tlet behaviour = Behaviour.WidgetFocus | Behaviour.Writeable;\n\t\tif (descriptor.id === SelectHighlightsAction.COMPAT_ID) {\n\t\t\tbehaviour |= Behaviour.ShowInContextMenu;\n\t\t}\n\t\tsuper(descriptor, editor, behaviour);\n\t}\n\n\tpublic getGroupId(): string {\n\t\treturn '2_change/1_changeAll';\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\tlet r = multiCursorFind(this.editor, true);\n\t\tif (!r) {\n\t\t\treturn TPromise.as(false);\n\t\t}\n\n\t\tlet matches = this.editor.getModel().findMatches(r.searchText, true, false, r.matchCase, r.wholeWord);\n\n\t\tif (matches.length > 0) {\n\t\t\tthis.editor.setSelections(matches.map(m => Selection.createSelection(m.startLineNumber, m.startColumn, m.endLineNumber, m.endColumn)));\n\t\t}\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport class SelectionHighlighter extends Disposable implements editorCommon.IEditorContribution {\n\tstatic ID = 'editor.contrib.selectionHighlighter';\n\n\tprivate editor: editorCommon.ICommonCodeEditor;\n\tprivate decorations: string[];\n\tprivate updateSoon: RunOnceScheduler;\n\tprivate lastWordUnderCursor: editorCommon.IEditorRange;\n\n\tconstructor(editor:editorCommon.ICommonCodeEditor) {\n\t\tsuper();\n\t\tthis.editor = editor;\n\t\tthis.decorations = [];\n\t\tthis.updateSoon = this._register(new RunOnceScheduler(() => this._update(), 300));\n\t\tthis.lastWordUnderCursor = null;\n\n\t\tthis._register(editor.addListener2(editorCommon.EventType.CursorSelectionChanged, (e: editorCommon.ICursorSelectionChangedEvent) => {\n\t\t\tif (e.selection.isEmpty()) {\n\t\t\t\tif (e.reason === 'explicit') {\n\t\t\t\t\tif (!this.lastWordUnderCursor || !this.lastWordUnderCursor.containsPosition(e.selection.getStartPosition())) {\n\t\t\t\t\t\t// no longer valid\n\t\t\t\t\t\tthis.removeDecorations();\n\t\t\t\t\t}\n\t\t\t\t\tthis.updateSoon.schedule();\n\t\t\t\t} else {\n\t\t\t\t\tthis.removeDecorations();\n\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._update();\n\t\t\t}\n\t\t}));\n\t\tthis._register(editor.addListener2(editorCommon.EventType.ModelChanged, (e) => {\n\t\t\tthis.removeDecorations();\n\t\t}));\n\t\tthis._register(CommonFindController.getFindController(editor).getState().addChangeListener((e) => {\n\t\t\tthis._update();\n\t\t}));\n\t}\n\n\tpublic getId(): string {\n\t\treturn SelectionHighlighter.ID;\n\t}\n\n\tprivate removeDecorations(): void {\n\t\tthis.lastWordUnderCursor = null;\n\t\tif (this.decorations.length > 0) {\n\t\t\tthis.decorations = this.editor.deltaDecorations(this.decorations, []);\n\t\t}\n\t}\n\n\tprivate _update(): void {\n\t\tthis.lastWordUnderCursor = null;\n\t\tif (!this.editor.getConfiguration().selectionHighlight) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet r = multiCursorFind(this.editor, false);\n\t\tif (!r) {\n\t\t\tthis.removeDecorations();\n\t\t\treturn;\n\t\t}\n\n\t\tlet model = this.editor.getModel();\n\t\tlet hasFindOccurences = OccurrencesRegistry.has(model);\n\t\tif (r.nextMatch) {\n\t\t\t// This is an empty selection\n\t\t\tif (hasFindOccurences) {\n\t\t\t\t// Do not interfere with semantic word highlighting in the no selection case\n\t\t\t\tthis.removeDecorations();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastWordUnderCursor = r.nextMatch;\n\t\t}\n\t\tif (/^[ \\t]+$/.test(r.searchText)) {\n\t\t\t// whitespace only selection\n\t\t\tthis.removeDecorations();\n\t\t\treturn;\n\t\t}\n\t\tif (r.searchText.length > 200) {\n\t\t\t// very long selection\n\t\t\tthis.removeDecorations();\n\t\t\treturn;\n\t\t}\n\t\tlet selections = this.editor.getSelections();\n\t\tlet firstSelectedText = model.getValueInRange(selections[0]);\n\t\tfor (let i = 1; i < selections.length; i++) {\n\t\t\tlet selectedText = model.getValueInRange(selections[i]);\n\t\t\tif (firstSelectedText !== selectedText) {\n\t\t\t\t// not all selections have the same text\n\t\t\t\tthis.removeDecorations();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\n\t\tlet allMatches = model.findMatches(r.searchText, true, false, r.matchCase, r.wholeWord);\n\t\tallMatches.sort(Range.compareRangesUsingStarts);\n\n\t\tselections.sort(Range.compareRangesUsingStarts);\n\n\t\t// do not overlap with selection (issue #64 and #512)\n\t\tlet matches: editorCommon.IEditorRange[] = [];\n\t\tfor (let i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len; ) {\n\t\t\tlet match = allMatches[i];\n\n\t\t\tif (j >= lenJ) {\n\t\t\t\t// finished all editor selections\n\t\t\t\tmatches.push(match);\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tlet cmp = Range.compareRangesUsingStarts(match, selections[j]);\n\t\t\t\tif (cmp < 0) {\n\t\t\t\t\t// match is before sel\n\t\t\t\t\tmatches.push(match);\n\t\t\t\t\ti++;\n\t\t\t\t} else if (cmp > 0) {\n\t\t\t\t\t// sel is before match\n\t\t\t\t\tj++;\n\t\t\t\t} else {\n\t\t\t\t\t// sel is equal to match\n\t\t\t\t\ti++;\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet decorations = matches.map(r => {\n\t\t\treturn {\n\t\t\t\trange: r,\n\t\t\t\toptions: {\n\t\t\t\t\tstickiness: editorCommon.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t\t\t\tclassName: 'selectionHighlight',\n\t\t\t\t\t// Show in overviewRuler only if model has no semantic highlighting\n\t\t\t\t\toverviewRuler: (hasFindOccurences ? undefined : {\n\t\t\t\t\t\tcolor: '#A0A0A0',\n\t\t\t\t\t\tdarkColor: '#A0A0A0',\n\t\t\t\t\t\tposition: editorCommon.OverviewRulerLane.Center\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\n\t\tthis.decorations = this.editor.deltaDecorations(this.decorations, decorations);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.removeDecorations();\n\t\tsuper.dispose();\n\t}\n}\n\n\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(SelectHighlightsAction, SelectHighlightsAction.ID, nls.localize('selectAllOccurencesOfFindMatch', \"Select All Occurences of Find Match\"), {\n\tcontext: ContextKey.EditorFocus,\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KEY_L\n}));\n// register SelectHighlightsAction again to replace the now removed Change All action\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(SelectHighlightsAction, SelectHighlightsAction.COMPAT_ID, nls.localize('changeAll.label', \"Change All Occurrences\"), {\n\tcontext: ContextKey.EditorTextFocus,\n\tprimary: KeyMod.CtrlCmd | KeyCode.F2\n}));\n\n// register actions\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(StartFindAction, FIND_IDS.StartFindAction, nls.localize('startFindAction',\"Find\"), {\n\tcontext: ContextKey.None,\n\tprimary: KeyMod.CtrlCmd | KeyCode.KEY_F\n}));\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(NextMatchFindAction, FIND_IDS.NextMatchFindAction, nls.localize('findNextMatchAction', \"Find Next\"), {\n\tcontext: ContextKey.EditorFocus,\n\tprimary: KeyCode.F3,\n\tmac: { primary: KeyMod.CtrlCmd | KeyCode.KEY_G, secondary: [KeyCode.F3] }\n}));\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(PreviousMatchFindAction, FIND_IDS.PreviousMatchFindAction, nls.localize('findPreviousMatchAction', \"Find Previous\"), {\n\tcontext: ContextKey.EditorFocus,\n\tprimary: KeyMod.Shift | KeyCode.F3,\n\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KEY_G, secondary: [KeyMod.Shift | KeyCode.F3] }\n}));\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(NextSelectionMatchFindAction, FIND_IDS.NextSelectionMatchFindAction, nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"), {\n\tcontext: ContextKey.EditorFocus,\n\tprimary: KeyMod.CtrlCmd | KeyCode.F3\n}));\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(PreviousSelectionMatchFindAction, FIND_IDS.PreviousSelectionMatchFindAction, nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"), {\n\tcontext: ContextKey.EditorFocus,\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.F3\n}));\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(StartFindReplaceAction, FIND_IDS.StartFindReplaceAction, nls.localize('startReplace', \"Replace\"), {\n\tcontext: ContextKey.None,\n\tprimary: KeyMod.CtrlCmd | KeyCode.KEY_H,\n\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KEY_F }\n}));\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(MoveSelectionToNextFindMatchAction, MoveSelectionToNextFindMatchAction.ID, nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"), {\n\tcontext: ContextKey.EditorFocus,\n\tprimary: KeyMod.chord(KeyMod.CtrlCmd | KeyCode.KEY_K, KeyMod.CtrlCmd | KeyCode.KEY_D)\n}));\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(AddSelectionToNextFindMatchAction, AddSelectionToNextFindMatchAction.ID, nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"), {\n\tcontext: ContextKey.EditorFocus,\n\tprimary: KeyMod.CtrlCmd | KeyCode.KEY_D\n}));\n\nfunction registerFindCommand(id:string, callback:(controller:CommonFindController)=>void, keybindings:IKeybindings, needsKey:string = null): void {\n\tCommonEditorRegistry.registerEditorCommand(id, CommonEditorRegistry.commandWeight(5), keybindings, false, needsKey, (ctx, editor, args) => {\n\t\tcallback(CommonFindController.getFindController(editor));\n\t});\n}\n\nregisterFindCommand(FIND_IDS.CloseFindWidgetCommand, x => x.closeFindWidget(), {\n\tprimary: KeyCode.Escape,\n\tsecondary: [KeyMod.Shift | KeyCode.Escape]\n}, CONTEXT_FIND_WIDGET_VISIBLE);\nregisterFindCommand(FIND_IDS.ToggleCaseSensitiveCommand, x => x.toggleCaseSensitive(), {\n\tprimary: KeyMod.Alt | KeyCode.KEY_C,\n\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KEY_C }\n});\nregisterFindCommand(FIND_IDS.ToggleWholeWordCommand, x => x.toggleWholeWords(), {\n\tprimary: KeyMod.Alt | KeyCode.KEY_W,\n\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KEY_W }\n});\nregisterFindCommand(FIND_IDS.ToggleRegexCommand, x => x.toggleRegex(), {\n\tprimary: KeyMod.Alt | KeyCode.KEY_R,\n\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KEY_R }\n});\nregisterFindCommand(FIND_IDS.ReplaceOneAction, x => x.replace(), {\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KEY_1\n});\nregisterFindCommand(FIND_IDS.ReplaceAllAction, x => x.replaceAll(), {\n\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.Enter\n});\n"]}