/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},__decorate=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},__param=this&&this.__param||function(e,t){return function(o,n){t(o,n,e)}};define(["require","exports","electron","vs/base/common/platform","vs/base/common/lifecycle","vs/editor/common/editorCommon","vs/editor/browser/editorBrowserExtensions","vs/platform/keybinding/common/keybinding","vs/base/common/async","vs/editor/common/core/range"],function(e,t,o,n,r,i,s,c,a,f){"use strict";var l=function(e){function t(t,r){if(e.call(this),n.isLinux){var s=t.getConfiguration().contribInfo.selectionClipboard;this._register(t.onDidChangeConfiguration(function(e){e.contribInfo&&(s=t.getConfiguration().contribInfo.selectionClipboard)})),this._register(t.onMouseDown(function(e){s&&t.getModel()&&e.event.middleButton&&(e.event.preventDefault(),t.focus(),e.target.position&&t.setPosition(e.target.position),process.nextTick(function(){o.clipboard.readText("selection")}))}));var c=this._register(new a.RunOnceScheduler(function(){var e=t.getModel();if(e){var n=t.getSelections();n=n.slice(0),n.sort(f.Range.compareRangesUsingStarts);for(var r=[],s=0;s<n.length;s++){var c=n[s];if(c.isEmpty())return;r.push(e.getValueInRange(c,i.EndOfLinePreference.TextDefined))}var a=r.join(e.getEOL());o.clipboard.writeText(a,"selection")}},100));this._register(t.onDidChangeCursorSelection(function(e){s&&c.schedule()}))}}return __extends(t,e),t.prototype.getId=function(){return t.ID},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.ID="editor.contrib.selectionClipboard",t=__decorate([__param(1,c.IKeybindingService)],t)}(r.Disposable);s.EditorBrowserRegistry.registerEditorContribution(l)});