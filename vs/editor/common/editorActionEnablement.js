var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};define(["require","exports","vs/base/common/lifecycle"],function(t,e,i){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function o(t,e,i){return new s([new r(e,t),new a(e,t,i)])}!function(t){t[t.TextFocus=1]="TextFocus",t[t.WidgetFocus=2]="WidgetFocus",t[t.Writeable=4]="Writeable",t[t.UpdateOnModelChange=8]="UpdateOnModelChange",t[t.UpdateOnConfigurationChange=16]="UpdateOnConfigurationChange",t[t.UpdateOnCursorPositionChange=64]="UpdateOnCursorPositionChange"}(e.Behaviour||(e.Behaviour={}));var n=e.Behaviour;e.createActionEnablement=o;var s=function(){function t(t){this._delegates=t}return t.prototype.value=function(){return this._delegates.every(function(t){return t.value()})},t.prototype.reset=function(){this._delegates.forEach(function(t){t instanceof u&&t.reset()})},t.prototype.dispose=function(){this._delegates.forEach(function(t){return t.dispose()})},t}(),u=function(){function t(){this._value=null}return t.prototype.reset=function(){this._value=null},t.prototype.dispose=function(){},t.prototype.value=function(){return null===this._value&&(this._value=this._computeValue()),this._value},t.prototype._computeValue=function(){return!1},t}(),r=function(t){function e(e,i){var o=this;t.call(this),this._behaviour=e,this.editor=i,this.hasTextFocus=!1,this.hasWidgetFocus=!1,this.isReadOnly=!1,this._callOnDispose=[],this._behaviour&n.TextFocus&&(this._callOnDispose.push(this.editor.onDidFocusEditorText(function(){return o._updateTextFocus(!0)})),this._callOnDispose.push(this.editor.onDidBlurEditorText(function(){return o._updateTextFocus(!1)}))),this._behaviour&n.WidgetFocus&&(this._callOnDispose.push(this.editor.onDidFocusEditor(function(){return o._updateWidgetFocus(!0)})),this._callOnDispose.push(this.editor.onDidBlurEditor(function(){return o._updateWidgetFocus(!1)}))),this._behaviour&n.Writeable&&this._callOnDispose.push(this.editor.onDidChangeConfiguration(function(t){return o._update()}))}return __extends(e,t),e.prototype._updateTextFocus=function(t){this.hasTextFocus=t,this.reset()},e.prototype._updateWidgetFocus=function(t){this.hasWidgetFocus=t,this.reset()},e.prototype._update=function(){this.isReadOnly=this.editor.getConfiguration().readOnly,this.reset()},e.prototype.dispose=function(){t.prototype.dispose.call(this),i.dispose(this._callOnDispose)},e.prototype._computeValue=function(){return!(this._behaviour&n.TextFocus&&!this.hasTextFocus)&&(!(this._behaviour&n.WidgetFocus&&!this.hasWidgetFocus)&&!(this._behaviour&n.Writeable&&this.isReadOnly))},e}(u),a=function(t){function e(e,i,o){var s=this;t.call(this),this.editor=i,this._action=o,this._callOnDispose=[],e&n.UpdateOnModelChange&&(this._callOnDispose.push(this.editor.onDidChangeModel(function(){return s.reset()})),this._callOnDispose.push(this.editor.onDidChangeModelMode(function(){return s.reset()})),this._callOnDispose.push(this.editor.onDidChangeModelModeSupport(function(){return s.reset()}))),e&n.UpdateOnCursorPositionChange&&this._callOnDispose.push(this.editor.onDidChangeCursorPosition(function(){return s.reset()}))}return __extends(e,t),e.prototype._computeValue=function(){return!!this.editor.getModel()&&(!!this._action.isSupported()&&!!this._action.getEnablementState())},e}(u)});