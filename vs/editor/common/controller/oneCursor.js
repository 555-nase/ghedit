define(["require","exports","vs/base/common/errors","vs/base/common/strings","vs/editor/common/commands/replaceCommand","vs/editor/common/commands/shiftCommand","vs/editor/common/commands/surroundSelectionCommand","vs/editor/common/controller/cursorMoveHelper","vs/editor/common/core/position","vs/editor/common/core/range","vs/editor/common/core/selection","vs/editor/common/editorCommon","vs/editor/common/modes","vs/editor/common/modes/languageConfigurationRegistry"],function(e,t,n,o,i,r,l,s,u,a,m,c,d,g){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function h(e,t){var n={};return function(o){var i=e(o);return n.hasOwnProperty(i)||(n[i]=t(o)),n[i]}}!function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Separator=2]="Separator"}(t.WordType||(t.WordType={}));var p,f=t.WordType;!function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"}(p||(p={})),function(e){e[e.WordStart=0]="WordStart",e[e.WordEnd=1]="WordEnd"}(t.WordNavigationType||(t.WordNavigationType={}));var v=t.WordNavigationType,C=p.Regular,w=p.Whitespace,b=p.WordSeparator,P=f.None,S=f.Regular,N=f.Separator,L=function(){function e(e,t,n,o,i){this.editorId=e,this.model=t,this.configuration=n,this.modeConfiguration=o,this.viewModelHelper=i,this.helper=new M(this.model,this.configuration),this.bracketDecorations=[],this._set(new a.Range(1,1,1,1),0,new u.Position(1,1),0,new a.Range(1,1,1,1),new u.Position(1,1))}return e.prototype._set=function(t,n,o,i,r,l){this.selectionStart=t,this.selectionStartLeftoverVisibleColumns=n,this.position=o,this.leftoverVisibleColumns=i,this.viewSelectionStart=r,this.viewPosition=l,this._cachedSelection=e.computeSelection(this.selectionStart,this.position),this._cachedViewSelection=e.computeSelection(this.viewSelectionStart,this.viewPosition),this._selStartMarker=this._ensureMarker(this._selStartMarker,this._cachedSelection.startLineNumber,this._cachedSelection.startColumn,!0),this._selEndMarker=this._ensureMarker(this._selEndMarker,this._cachedSelection.endLineNumber,this._cachedSelection.endColumn,!1),this._selDirection=this._cachedSelection.getDirection()},e.prototype._ensureMarker=function(e,t,n,o){return e?(this.model._changeMarker(e,t,n),this.model._changeMarkerStickiness(e,o),e):this.model._addMarker(t,n,o)},e.prototype.saveState=function(){return{selectionStart:this.selectionStart,viewSelectionStart:this.viewSelectionStart,position:this.position,viewPosition:this.viewPosition,leftoverVisibleColumns:this.leftoverVisibleColumns,selectionStartLeftoverVisibleColumns:this.selectionStartLeftoverVisibleColumns}},e.prototype.restoreState=function(e){var t,n=this.model.validatePosition(e.position);t=e.selectionStart?this.model.validateRange(e.selectionStart):new a.Range(n.lineNumber,n.column,n.lineNumber,n.column);var o,i=this.viewModelHelper.validateViewPosition(e.viewPosition.lineNumber,e.viewPosition.column,n);o=e.viewSelectionStart?this.viewModelHelper.validateViewRange(e.viewSelectionStart.startLineNumber,e.viewSelectionStart.startColumn,e.viewSelectionStart.endLineNumber,e.viewSelectionStart.endColumn,t):this.viewModelHelper.convertModelRangeToViewRange(t),this._set(t,e.selectionStartLeftoverVisibleColumns,n,e.leftoverVisibleColumns,o,i)},e.prototype.updateModeConfiguration=function(e){this.modeConfiguration=e},e.prototype.duplicate=function(){var t=new e(this.editorId,this.model,this.configuration,this.modeConfiguration,this.viewModelHelper);return t._set(this.selectionStart,this.selectionStartLeftoverVisibleColumns,this.position,this.leftoverVisibleColumns,this.viewSelectionStart,this.viewPosition),t},e.prototype.dispose=function(){this.model._removeMarker(this._selStartMarker),this.model._removeMarker(this._selEndMarker),this.bracketDecorations=this.model.deltaDecorations(this.bracketDecorations,[],this.editorId)},e.prototype.adjustBracketDecorations=function(){var e=null,t=this.getSelection();t.isEmpty()&&(e=this.model.matchBracket(this.position));var n=[];if(e){var o={stickiness:c.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,className:"bracket-match"};n.push({range:e[0],options:o}),n.push({range:e[1],options:o})}this.bracketDecorations=this.model.deltaDecorations(this.bracketDecorations,n,this.editorId)},e.computeSelection=function(e,t){var n,o,i,r;return e.isEmpty()?(n=e.startLineNumber,o=e.startColumn,i=t.lineNumber,r=t.column):t.isBeforeOrEqual(e.getStartPosition())?(n=e.endLineNumber,o=e.endColumn,i=t.lineNumber,r=t.column):(n=e.startLineNumber,o=e.startColumn,i=t.lineNumber,r=t.column),new m.Selection(n,o,i,r)},e.prototype.setSelection=function(e){var t=this.model.validatePosition({lineNumber:e.positionLineNumber,column:e.positionColumn}),n=this.model.validatePosition({lineNumber:e.selectionStartLineNumber,column:e.selectionStartColumn}),o=new a.Range(n.lineNumber,n.column,n.lineNumber,n.column),i=this.viewModelHelper.convertModelPositionToViewPosition(t.lineNumber,t.column),r=this.viewModelHelper.convertModelRangeToViewRange(o);this._set(o,0,t,0,r,i)},e.prototype.setViewSelection=function(e){var t=this.viewModelHelper.validateViewRange(e.selectionStartLineNumber,e.selectionStartColumn,e.selectionStartLineNumber,e.selectionStartColumn,this.selectionStart),n=this.viewModelHelper.validateViewPosition(e.positionLineNumber,e.positionColumn,this.position);this._set(this.selectionStart,0,this.position,0,t,n)},e.prototype.setSelectionStart=function(e,t){this._set(e,this.selectionStartLeftoverVisibleColumns,this.position,this.leftoverVisibleColumns,t,this.viewPosition)},e.prototype.collapseSelection=function(){var e=new a.Range(this.position.lineNumber,this.position.column,this.position.lineNumber,this.position.column),t=new a.Range(this.viewPosition.lineNumber,this.viewPosition.column,this.viewPosition.lineNumber,this.viewPosition.column);this._set(e,0,this.position,this.leftoverVisibleColumns,t,this.viewPosition)},e.prototype.moveModelPosition=function(e,t,n,o,i){var r=this.viewModelHelper.convertModelPositionToViewPosition(t,n);this._move(e,t,n,r.lineNumber,r.column,o,i)},e.prototype.moveViewPosition=function(e,t,n,o,i){var r=this.viewModelHelper.convertViewToModelPosition(t,n);this._move(e,r.lineNumber,r.column,t,n,o,i)},e.prototype._move=function(e,t,n,o,i,r,l){if(l){var s=this.model.getEditableRange();if(t<s.startLineNumber||t===s.startLineNumber&&n<s.startColumn){t=s.startLineNumber,n=s.startColumn;var a=this.viewModelHelper.convertModelPositionToViewPosition(t,n);o=a.lineNumber,i=a.column}else if(t>s.endLineNumber||t===s.endLineNumber&&n>s.endColumn){t=s.endLineNumber,n=s.endColumn;var a=this.viewModelHelper.convertModelPositionToViewPosition(t,n);o=a.lineNumber,i=a.column}}this._actualMove(e,new u.Position(t,n),new u.Position(o,i),r)},e.prototype._actualMove=function(e,t,n,o){if(e)this._set(this.selectionStart,this.selectionStartLeftoverVisibleColumns,t,o,this.viewSelectionStart,n);else{var i=new a.Range(t.lineNumber,t.column,t.lineNumber,t.column),r=new a.Range(n.lineNumber,n.column,n.lineNumber,n.column);this._set(i,o,t,o,r,n)}},e.prototype._recoverSelectionFromMarkers=function(){var e=this.model._getMarker(this._selStartMarker),t=this.model._getMarker(this._selEndMarker);return this._selDirection===m.SelectionDirection.LTR?new m.Selection(e.lineNumber,e.column,t.lineNumber,t.column):new m.Selection(t.lineNumber,t.column,e.lineNumber,e.column)},e.prototype.recoverSelectionFromMarkers=function(e){e.cursorPositionChangeReason=c.CursorChangeReason.RecoverFromMarkers,e.shouldPushStackElementBefore=!0,e.shouldPushStackElementAfter=!0,e.shouldReveal=!1,e.shouldRevealHorizontal=!1;var t=this._recoverSelectionFromMarkers(),n=new a.Range(t.selectionStartLineNumber,t.selectionStartColumn,t.selectionStartLineNumber,t.selectionStartColumn),o=new u.Position(t.positionLineNumber,t.positionColumn),i=this.viewModelHelper.convertModelRangeToViewRange(n),r=this.viewModelHelper.convertViewToModelPosition(o.lineNumber,o.column);return this._set(n,0,o,0,i,r),!0},e.prototype.getPageSize=function(){var e=this.configuration.editor;return Math.floor(e.layoutInfo.height/e.fontInfo.lineHeight)-2},e.prototype.getSelectionStart=function(){return this.selectionStart},e.prototype.getPosition=function(){return this.position},e.prototype.getSelection=function(){return this._cachedSelection},e.prototype.getViewPosition=function(){return this.viewPosition},e.prototype.getViewSelection=function(){return this._cachedViewSelection},e.prototype.getValidViewPosition=function(){return this.viewModelHelper.validateViewPosition(this.viewPosition.lineNumber,this.viewPosition.column,this.position)},e.prototype.hasSelection=function(){return!this.getSelection().isEmpty()||!this.selectionStart.isEmpty()},e.prototype.getBracketsDecorations=function(){return this.bracketDecorations},e.prototype.getLeftoverVisibleColumns=function(){return this.leftoverVisibleColumns},e.prototype.getSelectionStartLeftoverVisibleColumns=function(){return this.selectionStartLeftoverVisibleColumns},e.prototype.setSelectionStartLeftoverVisibleColumns=function(e){this.selectionStartLeftoverVisibleColumns=e},e.prototype.validatePosition=function(e){return this.model.validatePosition(e)},e.prototype.validateViewPosition=function(e,t,n){return this.viewModelHelper.validateViewPosition(e,t,n)},e.prototype.convertViewToModelPosition=function(e,t){return this.viewModelHelper.convertViewToModelPosition(e,t)},e.prototype.convertViewSelectionToModelSelection=function(e){return this.viewModelHelper.convertViewSelectionToModelSelection(e)},e.prototype.convertModelPositionToViewPosition=function(e,t){return this.viewModelHelper.convertModelPositionToViewPosition(e,t)},e.prototype.getLineFromViewPortTop=function(e){void 0===e&&(e=1);var t=this.viewModelHelper.getCurrentVisibleModelRangeInViewPort(),n=this.model.getLineMinColumn(t.startLineNumber),o=t.startColumn===n?t.startLineNumber:t.startLineNumber+1;return o=o+e-1,o>t.endLineNumber?t.endLineNumber:o},e.prototype.getCenterLineInViewPort=function(){return Math.round((this.getLineFromViewPortTop()+this.getLineFromViewPortBottom()-1)/2)},e.prototype.getLineFromViewPortBottom=function(e){void 0===e&&(e=1);var t=this.viewModelHelper.getCurrentVisibleModelRangeInViewPort(),n=t.endLineNumber-e+1;return n>t.startLineNumber?n:this.getLineFromViewPortTop()},e.prototype.getLineContent=function(e){return this.model.getLineContent(e)},e.prototype.findPreviousWordOnLine=function(e){return this.helper.findPreviousWordOnLine(e)},e.prototype.findNextWordOnLine=function(e){return this.helper.findNextWordOnLine(e)},e.prototype.getLeftOfPosition=function(e,t){return this.helper.getLeftOfPosition(this.model,e,t)},e.prototype.getRightOfPosition=function(e,t){return this.helper.getRightOfPosition(this.model,e,t)},e.prototype.getPositionUp=function(e,t,n,o,i){return this.helper.getPositionUp(this.model,e,t,n,o,i)},e.prototype.getPositionDown=function(e,t,n,o,i){return this.helper.getPositionDown(this.model,e,t,n,o,i)},e.prototype.getColumnAtEndOfLine=function(e,t){return this.helper.getColumnAtEndOfLine(this.model,e,t)},e.prototype.getVisibleColumnFromColumn=function(e,t){return this.helper.visibleColumnFromColumn(this.model,e,t)},e.prototype.getColumnFromVisibleColumn=function(e,t){return this.helper.columnFromVisibleColumn(this.model,e,t)},e.prototype.getViewVisibleColumnFromColumn=function(e,t){return this.helper.visibleColumnFromColumn(this.viewModelHelper.viewModel,e,t)},e.prototype.getViewLineCount=function(){return this.viewModelHelper.viewModel.getLineCount()},e.prototype.getViewLineMaxColumn=function(e){return this.viewModelHelper.viewModel.getLineMaxColumn(e)},e.prototype.getViewLineMinColumn=function(e){return this.viewModelHelper.viewModel.getLineMinColumn(e)},e.prototype.getViewLineCenterColumn=function(e){return Math.round((this.getViewLineMaxColumn(e)+this.getViewLineMinColumn(e))/2)},e.prototype.getViewLineSize=function(e){return this.getViewLineMaxColumn(e)-this.getViewLineMinColumn(e)},e.prototype.getViewHalfLineSize=function(e){return Math.round(this.getViewLineSize(e)/2)},e.prototype.getViewLineFirstNonWhiteSpaceColumn=function(e){return this.viewModelHelper.viewModel.getLineFirstNonWhitespaceColumn(e)},e.prototype.getViewLineLastNonWhiteSpaceColumn=function(e){return this.viewModelHelper.viewModel.getLineLastNonWhitespaceColumn(e)},e.prototype.getLeftOfViewPosition=function(e,t){return this.helper.getLeftOfPosition(this.viewModelHelper.viewModel,e,t)},e.prototype.getRightOfViewPosition=function(e,t){return this.helper.getRightOfPosition(this.viewModelHelper.viewModel,e,t)},e.prototype.getViewPositionUp=function(e,t,n,o,i){return this.helper.getPositionUp(this.viewModelHelper.viewModel,e,t,n,o,i)},e.prototype.getViewPositionDown=function(e,t,n,o,i){return this.helper.getPositionDown(this.viewModelHelper.viewModel,e,t,n,o,i)},e.prototype.getColumnAtBeginningOfViewLine=function(e,t){return this.helper.getColumnAtBeginningOfLine(this.viewModelHelper.viewModel,e,t)},e.prototype.getColumnAtEndOfViewLine=function(e,t){return this.helper.getColumnAtEndOfLine(this.viewModelHelper.viewModel,e,t)},e.prototype.columnSelect=function(e,t,n,o){var i=this,r=this.helper.columnSelect(this.viewModelHelper.viewModel,e,t,n,o);return{reversed:r.reversed,viewSelections:r.viewSelections,selections:r.viewSelections.map(function(e){return i.convertViewSelectionToModelSelection(e)}),toLineNumber:n,toVisualColumn:o}},e}();t.OneCursor=L;var V=function(){function e(){}return e.jumpToBracket=function(e,t){var n=e.getBracketsDecorations();if(2!==n.length)return!1;var o=e.model.getDecorationRange(n[0]),i=e.model.getDecorationRange(n[1]),r=e.getPosition();return y.isPositionAtRangeEdges(r,o)||y.isPositionInsideRange(r,o)?(e.moveModelPosition(!1,i.endLineNumber,i.endColumn,0,!1),!0):!(!y.isPositionAtRangeEdges(r,i)&&!y.isPositionInsideRange(r,i))&&(e.moveModelPosition(!1,o.endLineNumber,o.endColumn,0,!1),!0)},e.moveTo=function(e,t,n,o,i,r){var l,s=e.model.validatePosition(n);l=o?e.validateViewPosition(o.lineNumber,o.column,s):e.convertModelPositionToViewPosition(s.lineNumber,s.column);var u="mouse"===i?c.CursorChangeReason.Explicit:c.CursorChangeReason.NotSet;return"api"===i&&(r.shouldRevealVerticalInCenter=!0),u&&(r.cursorPositionChangeReason=u),e.moveViewPosition(t,l.lineNumber,l.column,0,!1),!0},e.move=function(e,t,o,i){t.to||n.illegalArgument("to");var r,l=!!t.select,s=e.getValidViewPosition(),u=s.lineNumber,a=t.isPaged?t.pageSize||e.getPageSize():t.value;switch(t.to){case c.CursorMovePosition.Left:return this.moveLeft(e,l,c.CursorMoveByUnit.HalfLine===t.by?e.getViewHalfLineSize(u):t.value,i);case c.CursorMovePosition.Right:return this.moveRight(e,l,c.CursorMoveByUnit.HalfLine===t.by?e.getViewHalfLineSize(u):t.value,i);case c.CursorMovePosition.Up:return c.CursorMoveByUnit.WrappedLine===t.by&&this.moveUp(e,l,a,i);case c.CursorMovePosition.Down:return c.CursorMoveByUnit.WrappedLine===t.by&&this.moveDown(e,l,a,i);case c.CursorMovePosition.WrappedLineStart:r=e.getViewLineMinColumn(u);break;case c.CursorMovePosition.WrappedLineFirstNonWhitespaceCharacter:r=e.getViewLineFirstNonWhiteSpaceColumn(u);break;case c.CursorMovePosition.WrappedLineColumnCenter:r=e.getViewLineCenterColumn(u);break;case c.CursorMovePosition.WrappedLineEnd:r=e.getViewLineMaxColumn(u);break;case c.CursorMovePosition.WrappedLineLastNonWhitespaceCharacter:r=e.getViewLineLastNonWhiteSpaceColumn(u);break;case c.CursorMovePosition.ViewPortTop:u=e.convertModelPositionToViewPosition(e.getLineFromViewPortTop(t.value),1).lineNumber,r=e.getViewLineFirstNonWhiteSpaceColumn(u);break;case c.CursorMovePosition.ViewPortBottom:u=e.convertModelPositionToViewPosition(e.getLineFromViewPortBottom(t.value),1).lineNumber,r=e.getViewLineFirstNonWhiteSpaceColumn(u);break;case c.CursorMovePosition.ViewPortCenter:u=e.convertModelPositionToViewPosition(e.getCenterLineInViewPort(),1).lineNumber,r=e.getViewLineFirstNonWhiteSpaceColumn(u);break;default:return!1}return i.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(l,u,r,0,!0),!0},e._columnSelectOp=function(e,t,n){var o=e.getViewSelection(),i=e.getViewVisibleColumnFromColumn(o.selectionStartLineNumber,o.selectionStartColumn);return e.columnSelect(o.selectionStartLineNumber,i,t,n)},e.columnSelectMouse=function(e,t,n,o){var i,r=e.model.validatePosition(t);return i=n?e.validateViewPosition(n.lineNumber,n.column,r):e.convertModelPositionToViewPosition(r.lineNumber,r.column),this._columnSelectOp(e,i.lineNumber,o)},e.columnSelectLeft=function(e,t,n){return n>1&&n--,this._columnSelectOp(e,t,n)},e.columnSelectRight=function(e,t,n){for(var o=0,i=Math.min(e.getViewPosition().lineNumber,t),r=Math.max(e.getViewPosition().lineNumber,t),l=i;l<=r;l++){var s=e.getViewLineMaxColumn(l),u=e.getViewVisibleColumnFromColumn(l,s);o=Math.max(o,u)}return n<o&&n++,this._columnSelectOp(e,t,n)},e.columnSelectUp=function(e,t,n,o){var i=e?t.getPageSize():1;return n-=i,n<1&&(n=1),this._columnSelectOp(t,n,o)},e.columnSelectDown=function(e,t,n,o){var i=e?t.getPageSize():1;return n+=i,n>t.getViewLineCount()&&(n=t.getViewLineCount()),this._columnSelectOp(t,n,o)},e.moveLeft=function(e,t,n,o){void 0===n&&(n=1);var i,r;if(e.hasSelection()&&!t){var l=e.getViewSelection(),s=e.validateViewPosition(l.startLineNumber,l.startColumn,e.getSelection().getStartPosition());i=s.lineNumber,r=s.column}else{var u=e.getValidViewPosition(),a=e.getLeftOfViewPosition(u.lineNumber,u.column-(n-1));i=a.lineNumber,r=a.column}return o.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(t,i,r,0,!0),!0},e.moveWordLeft=function(e,t,n,o){var i=e.getPosition(),r=i.lineNumber,l=i.column;1===l&&r>1&&(r-=1,l=e.model.getLineMaxColumn(r));var s=e.findPreviousWordOnLine(new u.Position(r,l));return n===v.WordStart?l=s?s.start+1:1:(s&&l<=s.end+1&&(s=e.findPreviousWordOnLine(new u.Position(r,s.start+1))),l=s?s.end+1:1),o.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveModelPosition(t,r,l,0,!0),!0},e.moveRight=function(e,t,n,o){void 0===n&&(n=1);var i,r;if(e.hasSelection()&&!t){var l=e.getViewSelection(),s=e.validateViewPosition(l.endLineNumber,l.endColumn,e.getSelection().getEndPosition());i=s.lineNumber,r=s.column}else{var u=e.getValidViewPosition(),a=e.getRightOfViewPosition(u.lineNumber,u.column+(n-1));i=a.lineNumber,r=a.column}return o.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(t,i,r,0,!0),!0},e.moveWordRight=function(e,t,n,o){var i=e.getPosition(),r=i.lineNumber,l=i.column;l===e.model.getLineMaxColumn(r)&&r<e.model.getLineCount()&&(r+=1,l=1);var s=e.findNextWordOnLine(new u.Position(r,l));return n===v.WordEnd?l=s?s.end+1:e.model.getLineMaxColumn(r):(s&&l>=s.start+1&&(s=e.findNextWordOnLine(new u.Position(r,s.end+1))),l=s?s.start+1:e.model.getLineMaxColumn(r)),o.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveModelPosition(t,r,l,0,!0),!0},e.moveDown=function(e,t,n,o){var i,r,l=n>0?n:1;if(e.hasSelection()&&!t){var s=e.getViewSelection(),u=e.validateViewPosition(s.endLineNumber,s.endColumn,e.getSelection().getEndPosition());i=u.lineNumber,r=u.column}else{var a=e.getValidViewPosition();i=a.lineNumber,r=a.column}var m=e.getViewPositionDown(i,r,e.getLeftoverVisibleColumns(),l,!0);return o.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(t,m.lineNumber,m.column,m.leftoverVisibleColumns,!0),!0},e.translateDown=function(e,t){var n=e.getViewSelection(),o=e.getViewPositionDown(n.selectionStartLineNumber,n.selectionStartColumn,e.getSelectionStartLeftoverVisibleColumns(),1,!1);t.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(!1,o.lineNumber,o.column,e.getLeftoverVisibleColumns(),!0);var i=e.getViewPositionDown(n.positionLineNumber,n.positionColumn,e.getLeftoverVisibleColumns(),1,!1);return t.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(!0,i.lineNumber,i.column,i.leftoverVisibleColumns,!0),e.setSelectionStartLeftoverVisibleColumns(o.leftoverVisibleColumns),!0},e.moveUp=function(e,t,n,o){var i,r,l=n>0?n:1;if(e.hasSelection()&&!t){var s=e.getViewSelection(),u=e.validateViewPosition(s.startLineNumber,s.startColumn,e.getSelection().getStartPosition());i=u.lineNumber,r=u.column}else{var a=e.getValidViewPosition();i=a.lineNumber,r=a.column}var m=e.getViewPositionUp(i,r,e.getLeftoverVisibleColumns(),l,!0);return o.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(t,m.lineNumber,m.column,m.leftoverVisibleColumns,!0),!0},e.translateUp=function(e,t){var n=e.getViewSelection(),o=e.getViewPositionUp(n.selectionStartLineNumber,n.selectionStartColumn,e.getSelectionStartLeftoverVisibleColumns(),1,!1);t.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(!1,o.lineNumber,o.column,e.getLeftoverVisibleColumns(),!0);var i=e.getViewPositionUp(n.positionLineNumber,n.positionColumn,e.getLeftoverVisibleColumns(),1,!1);return t.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(!0,i.lineNumber,i.column,i.leftoverVisibleColumns,!0),e.setSelectionStartLeftoverVisibleColumns(o.leftoverVisibleColumns),!0},e.moveToBeginningOfLine=function(e,t,n){var o=e.getValidViewPosition(),i=o.lineNumber,r=o.column;return r=e.getColumnAtBeginningOfViewLine(i,r),n.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(t,i,r,0,!0),!0},e.moveToEndOfLine=function(e,t,n){var o=e.getValidViewPosition(),i=o.lineNumber,r=o.column;return r=e.getColumnAtEndOfViewLine(i,r),n.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveViewPosition(t,i,r,0,!0),!0},e.expandLineSelection=function(e,t){t.cursorPositionChangeReason=c.CursorChangeReason.Explicit;var n=e.getViewSelection(),o=n.startLineNumber,i=n.startColumn,r=n.endLineNumber,l=n.endColumn,s=e.getViewLineMaxColumn(r);if(1!==i||l!==s)i=1,l=s;else{var u=e.getViewPositionDown(r,l,0,1,!0);r=u.lineNumber,l=e.getViewLineMaxColumn(r)}return e.moveViewPosition(!1,o,i,0,!0),e.moveViewPosition(!0,r,l,0,!0),!0},e.moveToBeginningOfBuffer=function(e,t,n){return n.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveModelPosition(t,1,1,0,!0),!0},e.moveToEndOfBuffer=function(e,t,n){var o=e.model.getLineCount(),i=e.model.getLineMaxColumn(o);return n.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveModelPosition(t,o,i,0,!0),!0},e.selectAll=function(e,t){var n,o,i,r,l=!0;if(e.model.hasEditableRange()){var s=e.model.getEditableRange(),u=e.getSelection();u.equalsRange(s)||(l=!1,n=s.startLineNumber,o=s.startColumn,i=s.endLineNumber,r=s.endColumn)}return l&&(n=1,o=1,i=e.model.getLineCount(),r=e.model.getLineMaxColumn(i)),e.moveModelPosition(!1,n,o,0,!1),e.moveModelPosition(!0,i,r,0,!1),t.shouldReveal=!1,t.shouldRevealHorizontal=!1,!0},e.line=function(e,t,n,o,i){var r=e.validatePosition(n),l=o?e.validateViewPosition(o.lineNumber,o.column,r):e.convertModelPositionToViewPosition(r.lineNumber,r.column);if(i.cursorPositionChangeReason=c.CursorChangeReason.Explicit,i.shouldRevealHorizontal=!1,t&&e.hasSelection()){var s=e.getSelectionStart().getStartPosition().lineNumber;if(r.lineNumber<s)e.moveViewPosition(e.hasSelection(),l.lineNumber,1,0,!1);else if(r.lineNumber>s){var u=l.lineNumber+1,m=1;u>e.getViewLineCount()&&(u=e.getViewLineCount(),m=e.getViewLineMaxColumn(u)),e.moveViewPosition(e.hasSelection(),u,m,0,!1)}else{var d=e.getSelectionStart().getEndPosition();e.moveModelPosition(e.hasSelection(),d.lineNumber,d.column,0,!1)}return!0}var g=r.lineNumber+1,h=1;g>e.model.getLineCount()&&(g=e.model.getLineCount(),h=e.model.getLineMaxColumn(g));var p=new a.Range(r.lineNumber,1,g,h),f=e.convertModelPositionToViewPosition(r.lineNumber,1),v=e.convertModelPositionToViewPosition(g,h);return e.setSelectionStart(p,new a.Range(f.lineNumber,f.column,v.lineNumber,v.column)),e.moveModelPosition(e.hasSelection(),p.endLineNumber,p.endColumn,0,!1),!0},e.word=function(e,t,n,o){var i,r,l=e.validatePosition(n),s=e.findPreviousWordOnLine(l),m=s&&s.wordType===f.Regular&&s.start<l.column-1&&l.column-1<=s.end,d=e.findNextWordOnLine(l),g=d&&d.wordType===f.Regular&&d.start<l.column-1&&l.column-1<=d.end;if(t&&e.hasSelection()){var h=void 0,p=void 0;if(m?(h=s.start+1,p=s.end+1):g?(h=d.start+1,p=d.end+1):(h=l.column,p=l.column),i=l.lineNumber,l.isBeforeOrEqual(e.getSelectionStart().getStartPosition())){r=h;var v=new u.Position(i,r);e.getSelectionStart().containsPosition(v)&&(r=e.getSelectionStart().endColumn)}else{r=p;var v=new u.Position(i,r);e.getSelectionStart().containsPosition(v)&&(r=e.getSelectionStart().startColumn)}}else{var h=void 0,p=void 0;m?(h=s.start+1,p=s.end+1):g?(h=d.start+1,p=d.end+1):(h=s?s.end+1:1,p=d?d.start+1:e.model.getLineMaxColumn(l.lineNumber));var C=new a.Range(l.lineNumber,h,l.lineNumber,p),w=e.convertModelPositionToViewPosition(l.lineNumber,h),b=e.convertModelPositionToViewPosition(l.lineNumber,p);e.setSelectionStart(C,new a.Range(w.lineNumber,w.column,b.lineNumber,b.column)),i=C.endLineNumber,r=C.endColumn}return o.cursorPositionChangeReason=c.CursorChangeReason.Explicit,e.moveModelPosition(e.hasSelection(),i,r,0,!1),!0},e.cancelSelection=function(e,t){return!!e.hasSelection()&&(e.collapseSelection(),!0)},e._typeInterceptorEnter=function(e,t,n){return"\n"===t&&this._enter(e,!1,n)},e.lineInsertBefore=function(e,t){var n=e.getPosition().lineNumber;if(1===n)return t.executeCommand=new i.ReplaceCommandWithoutChangingPosition(new a.Range(1,1,1,1),"\n"),!0;n--;var o=e.model.getLineMaxColumn(n);return this._enter(e,!1,t,new u.Position(n,o),new a.Range(n,o,n,o))},e.lineInsertAfter=function(e,t){var n=e.getPosition(),o=e.model.getLineMaxColumn(n.lineNumber);return this._enter(e,!1,t,new u.Position(n.lineNumber,o),new a.Range(n.lineNumber,o,n.lineNumber,o))},e.lineBreakInsert=function(e,t){return this._enter(e,!0,t)},e._enter=function(e,t,n,o,l){"undefined"==typeof o&&(o=e.getPosition()),"undefined"==typeof l&&(l=e.getSelection()),n.shouldPushStackElementBefore=!0;var s=g.LanguageConfigurationRegistry.getEnterActionAtPosition(e.model,o.lineNumber,o.column),u=s.enterAction,a=s.indentation;if(n.isAutoWhitespaceCommand=!0,u.indentAction===d.IndentAction.None)this.actualType(e,"\n"+e.model.normalizeIndentation(a+u.appendText),t,n,l);else if(u.indentAction===d.IndentAction.Indent)this.actualType(e,"\n"+e.model.normalizeIndentation(a+u.appendText),t,n,l);else if(u.indentAction===d.IndentAction.IndentOutdent){var m=e.model.normalizeIndentation(a),c=e.model.normalizeIndentation(a+u.appendText),h="\n"+c+"\n"+m;t?n.executeCommand=new i.ReplaceCommandWithoutChangingPosition(l,h):n.executeCommand=new i.ReplaceCommandWithOffsetCursorState(l,h,(-1),c.length-m.length)}else if(u.indentAction===d.IndentAction.Outdent){for(var p=r.ShiftCommand.unshiftIndentCount(a,a.length+1,e.model.getOptions().tabSize),f="",v=0;v<p;v++)f+="\t";this.actualType(e,"\n"+e.model.normalizeIndentation(f+u.appendText),t,n,l)}return!0},e._typeInterceptorAutoClosingCloseChar=function(e,t,n){if(!e.configuration.editor.autoClosingBrackets)return!1;var o=e.getSelection();if(!o.isEmpty()||!e.modeConfiguration.autoClosingPairsClose.hasOwnProperty(t))return!1;var r=e.getPosition(),l=e.model.getLineContent(r.lineNumber),s=l[r.column-1];if(s!==t)return!1;var u=new a.Range(r.lineNumber,r.column,r.lineNumber,r.column+1);return n.executeCommand=new i.ReplaceCommand(u,t),!0},e._typeInterceptorAutoClosingOpenChar=function(e,t,o){if(!e.configuration.editor.autoClosingBrackets)return!1;var r=e.getSelection();if(!r.isEmpty()||!e.modeConfiguration.autoClosingPairsOpen.hasOwnProperty(t))return!1;var l=g.LanguageConfigurationRegistry.getCharacterPairSupport(e.model.getMode().getId());if(!l)return!1;var s=e.getPosition(),u=e.model.getLineContent(s.lineNumber),a=u[s.column-1];if(a){var m=!1;for(var c in e.modeConfiguration.autoClosingPairsClose)if(a===c){m=!0;break}if(!m&&!/\s/.test(a))return!1}var d=e.model.getLineContext(s.lineNumber),h=!1;try{h=l.shouldAutoClosePair(t,d,s.column-1)}catch(p){n.onUnexpectedError(p)}if(!h)return!1;o.shouldPushStackElementBefore=!0;var f=e.modeConfiguration.autoClosingPairsOpen[t];return o.executeCommand=new i.ReplaceCommandWithOffsetCursorState(r,t+f,0,(-f.length)),!0},e._typeInterceptorSurroundSelection=function(e,t,n){if(!e.configuration.editor.autoClosingBrackets)return!1;var o=e.getSelection();if(o.isEmpty()||!e.modeConfiguration.surroundingPairs.hasOwnProperty(t))return!1;var i,r,s,u,a,m,c=!0,d="\t".charCodeAt(0),g=" ".charCodeAt(0);for(i=o.startLineNumber;i<=o.endLineNumber;i++)for(m=e.model.getLineContent(i),r=i===o.startLineNumber?o.startColumn-1:0,s=i===o.endLineNumber?o.endColumn-1:m.length,u=r;u<s;u++)a=m.charCodeAt(u),a!==d&&a!==g&&(c=!1,i=o.endLineNumber+1,u=s);if(c)return!1;var h=e.modeConfiguration.surroundingPairs[t];return n.shouldPushStackElementBefore=!0,n.shouldPushStackElementAfter=!0,n.executeCommand=new l.SurroundSelectionCommand(o,t,h),!0},e._typeInterceptorElectricChar=function(e,t,n){var o=this;return!!e.modeConfiguration.electricChars.hasOwnProperty(t)&&(n.postOperationRunnable=function(t){return o._typeInterceptorElectricCharRunnable(e,t)},this.actualType(e,t,!1,n))},e._typeInterceptorElectricCharRunnable=function(e,t){var r,l=e.getPosition(),s=e.model.getLineContent(l.lineNumber),u=e.model.getLineContext(l.lineNumber),m=g.LanguageConfigurationRegistry.getElectricCharacterSupport(e.model.getMode().getId());if(m)try{r=m.onElectricCharacter(u,l.column-2)}catch(c){n.onUnexpectedError(c)}if(r){var d=r.matchOpenBracket,h=r.appendText;if(d){var p=e.model.findMatchingBracketUp(d,{lineNumber:l.lineNumber,column:l.column-d.length});if(p){var f=p.startLineNumber,v=e.model.getLineContent(f),C=o.getLeadingWhitespace(v),w=e.model.normalizeIndentation(C),b=e.model.getLineFirstNonWhitespaceColumn(l.lineNumber)||l.column,P=s.substring(0,b-1);if(P!==w){var S=s.substring(b-1,l.column-1),N=w+S,L=new a.Range(l.lineNumber,1,l.lineNumber,l.column);t.shouldPushStackElementAfter=!0,t.executeCommand=new i.ReplaceCommand(L,N)}}}else if(h){var V=-h.length;r.advanceCount&&(V+=r.advanceCount),t.shouldPushStackElementAfter=!0,t.executeCommand=new i.ReplaceCommandWithOffsetCursorState(e.getSelection(),h,0,V)}}},e.actualType=function(e,t,n,o,r){return"undefined"==typeof r&&(r=e.getSelection()),n?o.executeCommand=new i.ReplaceCommandWithoutChangingPosition(r,t):o.executeCommand=new i.ReplaceCommand(r,t),!0},e.type=function(e,t,n){return!!this._typeInterceptorEnter(e,t,n)||(!!this._typeInterceptorAutoClosingCloseChar(e,t,n)||(!!this._typeInterceptorAutoClosingOpenChar(e,t,n)||(!!this._typeInterceptorSurroundSelection(e,t,n)||(!!this._typeInterceptorElectricChar(e,t,n)||this.actualType(e,t,!1,n)))))},e.replacePreviousChar=function(e,t,n,o){var r,l=e.getPosition(),s=Math.max(1,l.column-n);return r=new a.Range(l.lineNumber,s,l.lineNumber,l.column),o.executeCommand=new i.ReplaceCommand(r,t),!0},e._goodIndentForLine=function(e,t){var n=t-1;for(n=t-1;n>=1;n--){var i=e.model.getLineContent(n),l=o.lastNonWhitespaceIndex(i);if(l>=0)break}if(n<1)return"\t";var s,u=g.LanguageConfigurationRegistry.getEnterActionAtPosition(e.model,n,e.model.getLineMaxColumn(n));if(u.enterAction.indentAction===d.IndentAction.Outdent){var a=e.model.getOptions(),m=r.ShiftCommand.unshiftIndentCount(u.indentation,u.indentation.length,a.tabSize);s="";for(var c=0;c<m;c++)s+="\t";s=e.model.normalizeIndentation(s)}else s=u.indentation;var h=s+u.enterAction.appendText;return 0===h.length?"\t":h},e._replaceJumpToNextIndent=function(e,t){var n="",o=t.getStartPosition(),r=e.model.getOptions();if(r.insertSpaces)for(var l=e.getVisibleColumnFromColumn(o.lineNumber,o.column),s=r.tabSize,u=s-l%s,a=0;a<u;a++)n+=" ";else n="\t";return new i.ReplaceCommand(t,n)},e.tab=function(e,t){var n=e.getSelection();if(n.isEmpty()){t.isAutoWhitespaceCommand=!0;var r=e.model.getLineContent(n.startLineNumber);if(/^\s*$/.test(r)){var l=e.model.normalizeIndentation(this._goodIndentForLine(e,n.startLineNumber));if(!o.startsWith(r,l))return t.executeCommand=new i.ReplaceCommand(new a.Range(n.startLineNumber,1,n.startLineNumber,r.length+1),l),!0}return t.executeCommand=this._replaceJumpToNextIndent(e,n),!0}if(n.startLineNumber===n.endLineNumber){var s=e.model.getLineMaxColumn(n.startLineNumber);if(1!==n.startColumn||n.endColumn!==s)return t.executeCommand=this._replaceJumpToNextIndent(e,n),!0}return this.indent(e,t)},e.indent=function(e,t){var n=e.getSelection();return t.shouldPushStackElementBefore=!0,t.shouldPushStackElementAfter=!0,t.executeCommand=new r.ShiftCommand(n,{isUnshift:!1,tabSize:e.model.getOptions().tabSize,oneIndent:e.model.getOneIndent()}),t.shouldRevealHorizontal=!1,!0},e.outdent=function(e,t){var n=e.getSelection();
return t.shouldPushStackElementBefore=!0,t.shouldPushStackElementAfter=!0,t.executeCommand=new r.ShiftCommand(n,{isUnshift:!0,tabSize:e.model.getOptions().tabSize,oneIndent:e.model.getOneIndent()}),t.shouldRevealHorizontal=!1,!0},e.paste=function(e,t,n,o){var r=e.getPosition();if(o.cursorPositionChangeReason=c.CursorChangeReason.Paste,n&&"\n"===t.charAt(t.length-1)&&t.indexOf("\n")===t.length-1){var l=new a.Range(r.lineNumber,1,r.lineNumber,1);return o.executeCommand=new i.ReplaceCommand(l,t),!0}return o.executeCommand=new i.ReplaceCommand(e.getSelection(),t),!0},e._autoClosingPairDelete=function(e,t){if(!e.configuration.editor.autoClosingBrackets)return!1;if(!e.getSelection().isEmpty())return!1;var n=e.getPosition(),o=e.model.getLineContent(n.lineNumber),r=o[n.column-2];if(!e.modeConfiguration.autoClosingPairsOpen.hasOwnProperty(r))return!1;var l=o[n.column-1],s=e.modeConfiguration.autoClosingPairsOpen[r];if(l!==s)return!1;var u=new a.Range(n.lineNumber,n.column-1,n.lineNumber,n.column+1);return t.executeCommand=new i.ReplaceCommand(u,""),!0},e.deleteLeft=function(e,t){if(this._autoClosingPairDelete(e,t))return!0;var n=e.getSelection();if(n.isEmpty()){var r=e.getPosition();if(e.configuration.editor.useTabStops&&r.column>1){var l=e.getLineContent(r.lineNumber),u=o.firstNonWhitespaceIndex(l),m=u===-1?l.length+1:u+1;if(r.column<=m){var c=e.getVisibleColumnFromColumn(r.lineNumber,r.column),d=s.CursorMoveHelper.prevTabColumn(c,e.model.getOptions().tabSize),g=e.getColumnFromVisibleColumn(r.lineNumber,d);n=new a.Range(r.lineNumber,g,r.lineNumber,r.column)}else n=new a.Range(r.lineNumber,r.column-1,r.lineNumber,r.column)}else{var h=e.getLeftOfPosition(r.lineNumber,r.column);n=new a.Range(h.lineNumber,h.column,r.lineNumber,r.column)}}return!!n.isEmpty()||(n.startLineNumber!==n.endLineNumber&&(t.shouldPushStackElementBefore=!0),t.executeCommand=new i.ReplaceCommand(n,""),!0)},e.deleteWordLeftWhitespace=function(e,t){var n=e.getPosition(),r=e.getLineContent(n.lineNumber),l=n.column-2,s=o.lastNonWhitespaceIndex(r,l);return s+1<l&&(t.executeCommand=new i.ReplaceCommand(new a.Range(n.lineNumber,s+2,n.lineNumber,n.column),""),!0)},e.deleteWordLeft=function(e,t,n,o){if(this._autoClosingPairDelete(e,o))return!0;var r=e.getSelection();if(r.isEmpty()){var l=e.getPosition(),s=l.lineNumber,m=l.column;if(1===s&&1===m)return!0;if(t&&this.deleteWordLeftWhitespace(e,o))return!0;var c=e.findPreviousWordOnLine(l);n===v.WordStart?m=c?c.start+1:1:(c&&m<=c.end+1&&(c=e.findPreviousWordOnLine(new u.Position(s,c.start+1))),m=c?c.end+1:1);var d=new a.Range(s,m,s,l.column);if(!d.isEmpty())return o.executeCommand=new i.ReplaceCommand(d,""),!0}return this.deleteLeft(e,o)},e.deleteRight=function(e,t){var n=e.getSelection();if(n.isEmpty()){var o=e.getPosition(),r=e.getRightOfPosition(o.lineNumber,o.column);n=new a.Range(r.lineNumber,r.column,o.lineNumber,o.column)}return!!n.isEmpty()||(n.startLineNumber!==n.endLineNumber&&(t.shouldPushStackElementBefore=!0),t.executeCommand=new i.ReplaceCommand(n,""),!0)},e._findFirstNonWhitespaceChar=function(e,t){for(var n=e.length,o=t;o<n;o++){var i=e.charAt(o);if(" "!==i&&"\t"!==i)return o}return n},e.deleteWordRightWhitespace=function(e,t){var n=e.getPosition(),o=e.getLineContent(n.lineNumber),r=n.column-1,l=this._findFirstNonWhitespaceChar(o,r);return r+1<l&&(t.executeCommand=new i.ReplaceCommand(new a.Range(n.lineNumber,n.column,n.lineNumber,l+1),""),!0)},e.deleteWordRight=function(e,t,n,o){var r=e.getSelection();if(r.isEmpty()){var l=e.getPosition(),s=l.lineNumber,m=l.column,c=e.model.getLineCount(),d=e.model.getLineMaxColumn(s);if(s===c&&m===d)return!0;if(t&&this.deleteWordRightWhitespace(e,o))return!0;var g=e.findNextWordOnLine(l);n===v.WordEnd?g?m=g.end+1:m<d||s===c?m=d:(s++,g=e.findNextWordOnLine(new u.Position(s,1)),m=g?g.start+1:e.model.getLineMaxColumn(s)):(g&&m>=g.start+1&&(g=e.findNextWordOnLine(new u.Position(s,g.end+1))),g?m=g.start+1:m<d||s===c?m=d:(s++,g=e.findNextWordOnLine(new u.Position(s,1)),m=g?g.start+1:e.model.getLineMaxColumn(s)));var h=new a.Range(s,m,l.lineNumber,l.column);if(!h.isEmpty())return o.executeCommand=new i.ReplaceCommand(h,""),!0}return this.deleteRight(e,o)},e.deleteAllLeft=function(e,t){if(this._autoClosingPairDelete(e,t))return!0;var n=e.getSelection();if(n.isEmpty()){var o=e.getPosition(),r=o.lineNumber,l=o.column;if(1===l)return!0;var s=new a.Range(r,1,r,l);if(!s.isEmpty())return t.executeCommand=new i.ReplaceCommand(s,""),!0}return this.deleteLeft(e,t)},e.deleteAllRight=function(e,t){var n=e.getSelection();if(n.isEmpty()){var o=e.getPosition(),r=o.lineNumber,l=o.column,s=e.model.getLineMaxColumn(r);if(l===s)return!0;var u=new a.Range(r,l,r,s);if(!u.isEmpty())return t.executeCommand=new i.ReplaceCommand(u,""),!0}return this.deleteRight(e,t)},e.cut=function(e,t,n){var o=e.getSelection();if(o.isEmpty()){if(!t)return!1;var r=e.getPosition(),l=void 0,s=void 0,u=void 0,m=void 0;r.lineNumber<e.model.getLineCount()?(l=r.lineNumber,s=1,u=r.lineNumber+1,m=1):r.lineNumber>1?(l=r.lineNumber-1,s=e.model.getLineMaxColumn(r.lineNumber-1),u=r.lineNumber,m=e.model.getLineMaxColumn(r.lineNumber)):(l=r.lineNumber,s=1,u=r.lineNumber,m=e.model.getLineMaxColumn(r.lineNumber));var c=new a.Range(l,s,u,m);c.isEmpty()||(n.executeCommand=new i.ReplaceCommand(c,""))}else this.deleteRight(e,n);return!0},e}();t.OneCursorOp=V;var M=function(){function e(e,t){var n=this;this.model=e,this.configuration=t,this.moveHelper=new s.CursorMoveHelper({getIndentationOptions:function(){return n.model.getOptions()}})}return e.prototype.getLeftOfPosition=function(e,t,n){return this.moveHelper.getLeftOfPosition(e,t,n)},e.prototype.getRightOfPosition=function(e,t,n){return this.moveHelper.getRightOfPosition(e,t,n)},e.prototype.getPositionUp=function(e,t,n,o,i,r){return this.moveHelper.getPositionUp(e,t,n,o,i,r)},e.prototype.getPositionDown=function(e,t,n,o,i,r){return this.moveHelper.getPositionDown(e,t,n,o,i,r)},e.prototype.getColumnAtBeginningOfLine=function(e,t,n){return this.moveHelper.getColumnAtBeginningOfLine(e,t,n)},e.prototype.getColumnAtEndOfLine=function(e,t,n){return this.moveHelper.getColumnAtEndOfLine(e,t,n)},e.prototype.columnSelect=function(e,t,n,o,i){return this.moveHelper.columnSelect(e,t,n,o,i)},e.prototype.visibleColumnFromColumn=function(e,t,n){return this.moveHelper.visibleColumnFromColumn(e,t,n)},e.prototype.columnFromVisibleColumn=function(e,t,n){return this.moveHelper.columnFromVisibleColumn(e,t,n)},e.prototype._createWord=function(e,t,n,o){return{start:n,end:o,wordType:t}},e.prototype.findPreviousWordOnLine=function(e){for(var t=this.model.validatePosition(e),n=R(this.configuration.editor.wordSeparators),o=this.model.getLineContent(t.lineNumber),i=P,r=t.column-2;r>=0;r--){var l=o.charCodeAt(r),s=n[l]||p.Regular;if(s===C){if(i===N)return this._createWord(o,i,r+1,this._findEndOfWord(o,n,i,r+1));i=S}else if(s===b){if(i===S)return this._createWord(o,i,r+1,this._findEndOfWord(o,n,i,r+1));i=N}else if(s===w&&i!==P)return this._createWord(o,i,r+1,this._findEndOfWord(o,n,i,r+1))}return i!==P?this._createWord(o,i,0,this._findEndOfWord(o,n,i,0)):null},e.prototype._findEndOfWord=function(e,t,n,o){for(var i=e.length,r=o;r<i;r++){var l=e.charCodeAt(r),s=t[l]||p.Regular;if(s===w)return r;if(n===S&&s===b)return r;if(n===N&&s===C)return r}return i},e.prototype.findNextWordOnLine=function(e){for(var t=this.model.validatePosition(e),n=R(this.configuration.editor.wordSeparators),o=this.model.getLineContent(t.lineNumber),i=P,r=o.length,l=t.column-1;l<r;l++){var s=o.charCodeAt(l),u=n[s]||p.Regular;if(u===C){if(i===N)return this._createWord(o,i,this._findStartOfWord(o,n,i,l-1),l);i=S}else if(u===b){if(i===S)return this._createWord(o,i,this._findStartOfWord(o,n,i,l-1),l);i=N}else if(u===w&&i!==P)return this._createWord(o,i,this._findStartOfWord(o,n,i,l-1),l)}return i!==P?this._createWord(o,i,this._findStartOfWord(o,n,i,r-1),r):null},e.prototype._findStartOfWord=function(e,t,n,o){for(var i=o;i>=0;i--){var r=e.charCodeAt(i),l=t[r]||p.Regular;if(l===w)return i+1;if(n===S&&l===b)return i+1;if(n===N&&l===C)return i+1}return 0},e}(),R=h(function(e){return e},function(e){for(var t=[],n=0;n<256;n++)t[n]=p.Regular;for(var o=0,i=e.length;o<i;o++)t[e.charCodeAt(o)]=p.WordSeparator;return t[" ".charCodeAt(0)]=p.Whitespace,t["\t".charCodeAt(0)]=p.Whitespace,t}),y=function(){function e(){}return e.rangeContainsPosition=function(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn))},e.isPositionInsideRange=function(e,t){return!(e.lineNumber<t.startLineNumber)&&(!(e.lineNumber>t.endLineNumber)&&(!(e.lineNumber===t.startLineNumber&&e.column<t.startColumn)&&!(e.lineNumber===t.endLineNumber&&e.column>t.endColumn)))},e.isPositionAtRangeEdges=function(e,t){return e.lineNumber===t.startLineNumber&&e.column===t.startColumn||e.lineNumber===t.endLineNumber&&e.column===t.endColumn},e}()});