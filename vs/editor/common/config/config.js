define(["require","exports","vs/base/common/keyCodes","vs/platform/editor/common/editor","vs/platform/keybinding/common/keybinding","vs/platform/keybinding/common/keybindingsRegistry","vs/editor/common/editorCommon","vs/editor/common/services/codeEditorService"],function(e,r,o,d,y,i,t,C){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function a(e,r,o){var d=r.get(C.ICodeEditorService).getFocusedCodeEditor();return d?d:(o&&console.warn("Cannot execute "+e+" because no code editor is focused."),null)}function K(e,r,o){var d=a(e,r,!0);d&&o(d)}function n(e){var r=e.get(d.IEditorService),o=r.getActiveEditor&&r.getActiveEditor();if(o){var y=o.getControl();if(y&&"function"==typeof y.getEditorType){var i=y;return i}}return null}function m(e,r,o){K(e,r,function(r){r.trigger("keyboard",e,o)})}function l(e,r,o,d,C){var a={id:e,handler:m.bind(null,e),weight:o?o:i.KeybindingsRegistry.WEIGHT.editorCore(),when:d?d:y.KbExpr.has(t.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),primary:r.primary,secondary:r.secondary,win:r.win,mac:r.mac,linux:r.linux,description:C};i.KeybindingsRegistry.registerCommandDesc(a)}function p(e,r){var o={id:e,handler:r,weight:i.KeybindingsRegistry.WEIGHT.editorCore(),when:null,primary:0};i.KeybindingsRegistry.registerCommandDesc(o);var d={id:"default:"+e,handler:r,weight:i.KeybindingsRegistry.WEIGHT.editorCore(),when:null,primary:0};i.KeybindingsRegistry.registerCommandDesc(d)}function s(e){p(e,m.bind(null,e))}function c(e,r){return e?o.KeyMod.Shift|o.KeyMod.Alt|r:o.KeyMod.Alt|r}function E(e,r){return e?o.KeyMod.CtrlCmd|o.KeyMod.Shift|r:o.KeyMod.CtrlCmd|r}function u(e,r,o){l(e,{primary:E(r,o),mac:{primary:c(r,o)}})}function M(e,r){var o=t.Handler.SelectAll,d=a(o,e,!1);if(d&&d.isFocused())return void d.trigger("keyboard",o,r);var y=document.activeElement;if(y&&["input","textarea"].indexOf(y.tagName.toLowerCase())>=0)return void y.select();var i=n(e);return i?(i.focus(),void i.trigger("keyboard",o,r)):void 0}var g=t.Handler,S=t.CommandDescription;r.findFocusedEditor=a,r.withCodeEditorFromCommandHandler=K,r.getActiveEditor=n,s(g.Type),s(g.ReplacePreviousChar),s(g.Paste),s(g.Cut),p(g.CompositionStart,function(){}),p(g.CompositionEnd,function(){}),l(g.CursorMove,{primary:null},null,null,S.CursorMove),l(g.CursorLeft,{primary:o.KeyCode.LeftArrow,mac:{primary:o.KeyCode.LeftArrow,secondary:[o.KeyMod.WinCtrl|o.KeyCode.KEY_B]}}),l(g.CursorLeftSelect,{primary:o.KeyMod.Shift|o.KeyCode.LeftArrow}),l(g.CursorRight,{primary:o.KeyCode.RightArrow,mac:{primary:o.KeyCode.RightArrow,secondary:[o.KeyMod.WinCtrl|o.KeyCode.KEY_F]}}),l(g.CursorRightSelect,{primary:o.KeyMod.Shift|o.KeyCode.RightArrow}),l(g.CursorUp,{primary:o.KeyCode.UpArrow,mac:{primary:o.KeyCode.UpArrow,secondary:[o.KeyMod.WinCtrl|o.KeyCode.KEY_P]}}),l(g.CursorUpSelect,{primary:o.KeyMod.Shift|o.KeyCode.UpArrow,secondary:[E(!0,o.KeyCode.UpArrow)],mac:{primary:o.KeyMod.Shift|o.KeyCode.UpArrow},linux:{primary:o.KeyMod.Shift|o.KeyCode.UpArrow}}),l(g.CursorDown,{primary:o.KeyCode.DownArrow,mac:{primary:o.KeyCode.DownArrow,secondary:[o.KeyMod.WinCtrl|o.KeyCode.KEY_N]}}),l(g.CursorDownSelect,{primary:o.KeyMod.Shift|o.KeyCode.DownArrow,secondary:[E(!0,o.KeyCode.DownArrow)],mac:{primary:o.KeyMod.Shift|o.KeyCode.DownArrow},linux:{primary:o.KeyMod.Shift|o.KeyCode.DownArrow}}),l(g.CursorPageUp,{primary:o.KeyCode.PageUp}),l(g.CursorPageUpSelect,{primary:o.KeyMod.Shift|o.KeyCode.PageUp}),l(g.CursorPageDown,{primary:o.KeyCode.PageDown}),l(g.CursorPageDownSelect,{primary:o.KeyMod.Shift|o.KeyCode.PageDown}),l(g.CursorHome,{primary:o.KeyCode.Home,mac:{primary:o.KeyCode.Home,secondary:[o.KeyMod.CtrlCmd|o.KeyCode.LeftArrow,o.KeyMod.WinCtrl|o.KeyCode.KEY_A]}}),l(g.CursorHomeSelect,{primary:o.KeyMod.Shift|o.KeyCode.Home,mac:{primary:o.KeyMod.Shift|o.KeyCode.Home,secondary:[o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.LeftArrow]}}),l(g.CursorEnd,{primary:o.KeyCode.End,mac:{primary:o.KeyCode.End,secondary:[o.KeyMod.CtrlCmd|o.KeyCode.RightArrow,o.KeyMod.WinCtrl|o.KeyCode.KEY_E]}}),l(g.CursorEndSelect,{primary:o.KeyMod.Shift|o.KeyCode.End,mac:{primary:o.KeyMod.Shift|o.KeyCode.End,secondary:[o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.RightArrow]}}),l(g.ExpandLineSelection,{primary:o.KeyMod.CtrlCmd|o.KeyCode.KEY_I}),l(g.ScrollLineUp,{primary:o.KeyMod.CtrlCmd|o.KeyCode.UpArrow,mac:{primary:o.KeyMod.WinCtrl|o.KeyCode.PageUp}}),l(g.ScrollLineDown,{primary:o.KeyMod.CtrlCmd|o.KeyCode.DownArrow,mac:{primary:o.KeyMod.WinCtrl|o.KeyCode.PageDown}}),l(g.ScrollPageUp,{primary:o.KeyMod.CtrlCmd|o.KeyCode.PageUp,win:{primary:o.KeyMod.Alt|o.KeyCode.PageUp},linux:{primary:o.KeyMod.Alt|o.KeyCode.PageUp}}),l(g.ScrollPageDown,{primary:o.KeyMod.CtrlCmd|o.KeyCode.PageDown,win:{primary:o.KeyMod.Alt|o.KeyCode.PageDown},linux:{primary:o.KeyMod.Alt|o.KeyCode.PageDown}}),l(g.CursorColumnSelectLeft,{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyMod.Alt|o.KeyCode.LeftArrow,linux:{primary:0}}),l(g.CursorColumnSelectRight,{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyMod.Alt|o.KeyCode.RightArrow,linux:{primary:0}}),l(g.CursorColumnSelectUp,{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyMod.Alt|o.KeyCode.UpArrow,linux:{primary:0}}),l(g.CursorColumnSelectPageUp,{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyMod.Alt|o.KeyCode.PageUp,linux:{primary:0}}),l(g.CursorColumnSelectDown,{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyMod.Alt|o.KeyCode.DownArrow,linux:{primary:0}}),l(g.CursorColumnSelectPageDown,{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyMod.Alt|o.KeyCode.PageDown,linux:{primary:0}}),l(g.Tab,{primary:o.KeyCode.Tab},i.KeybindingsRegistry.WEIGHT.editorCore(),y.KbExpr.and(y.KbExpr.has(t.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),y.KbExpr.not(t.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS))),l(g.Outdent,{primary:o.KeyMod.Shift|o.KeyCode.Tab},i.KeybindingsRegistry.WEIGHT.editorCore(),y.KbExpr.and(y.KbExpr.has(t.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),y.KbExpr.not(t.KEYBINDING_CONTEXT_EDITOR_TAB_MOVES_FOCUS))),l(g.DeleteLeft,{primary:o.KeyCode.Backspace,secondary:[o.KeyMod.Shift|o.KeyCode.Backspace],mac:{primary:o.KeyCode.Backspace,secondary:[o.KeyMod.Shift|o.KeyCode.Backspace,o.KeyMod.WinCtrl|o.KeyCode.KEY_H,o.KeyMod.WinCtrl|o.KeyCode.Backspace]}}),l(g.DeleteRight,{primary:o.KeyCode.Delete,mac:{primary:o.KeyCode.Delete,secondary:[o.KeyMod.WinCtrl|o.KeyCode.KEY_D,o.KeyMod.WinCtrl|o.KeyCode.Delete]}}),l(g.DeleteAllLeft,{primary:null,mac:{primary:o.KeyMod.CtrlCmd|o.KeyCode.Backspace}}),l(g.DeleteAllRight,{primary:null,mac:{primary:o.KeyMod.WinCtrl|o.KeyCode.KEY_K,secondary:[o.KeyMod.CtrlCmd|o.KeyCode.Delete]}}),u(g.CursorWordStartLeft,!1,o.KeyCode.LeftArrow),l(g.CursorWordEndLeft,{primary:0}),l(g.CursorWordLeft,{primary:0}),u(g.CursorWordStartLeftSelect,!0,o.KeyCode.LeftArrow),l(g.CursorWordEndLeftSelect,{primary:0}),l(g.CursorWordLeftSelect,{primary:0}),u(g.CursorWordEndRight,!1,o.KeyCode.RightArrow),l(g.CursorWordStartRight,{primary:0}),l(g.CursorWordRight,{primary:0}),u(g.CursorWordEndRightSelect,!0,o.KeyCode.RightArrow),l(g.CursorWordStartRightSelect,{primary:0}),l(g.CursorWordRightSelect,{primary:0}),u(g.DeleteWordLeft,!1,o.KeyCode.Backspace),l(g.DeleteWordStartLeft,{primary:0}),l(g.DeleteWordEndLeft,{primary:0}),u(g.DeleteWordRight,!1,o.KeyCode.Delete),l(g.DeleteWordStartRight,{primary:0}),l(g.DeleteWordEndRight,{primary:0}),l(g.CancelSelection,{primary:o.KeyCode.Escape,secondary:[o.KeyMod.Shift|o.KeyCode.Escape]},i.KeybindingsRegistry.WEIGHT.editorCore(),y.KbExpr.and(y.KbExpr.has(t.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),y.KbExpr.has(t.KEYBINDING_CONTEXT_EDITOR_HAS_NON_EMPTY_SELECTION))),l(g.RemoveSecondaryCursors,{primary:o.KeyCode.Escape,secondary:[o.KeyMod.Shift|o.KeyCode.Escape]},i.KeybindingsRegistry.WEIGHT.editorCore(1),y.KbExpr.and(y.KbExpr.has(t.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),y.KbExpr.has(t.KEYBINDING_CONTEXT_EDITOR_HAS_MULTIPLE_SELECTIONS))),l(g.CursorTop,{primary:o.KeyMod.CtrlCmd|o.KeyCode.Home,mac:{primary:o.KeyMod.CtrlCmd|o.KeyCode.UpArrow}}),l(g.CursorTopSelect,{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.Home,mac:{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.UpArrow}}),l(g.CursorBottom,{primary:o.KeyMod.CtrlCmd|o.KeyCode.End,mac:{primary:o.KeyMod.CtrlCmd|o.KeyCode.DownArrow}}),l(g.CursorBottomSelect,{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.End,mac:{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.DownArrow}}),l(g.LineBreakInsert,{primary:null,mac:{primary:o.KeyMod.WinCtrl|o.KeyCode.KEY_O}}),l(g.Undo,{primary:o.KeyMod.CtrlCmd|o.KeyCode.KEY_Z}),l(g.CursorUndo,{primary:o.KeyMod.CtrlCmd|o.KeyCode.KEY_U}),l(g.Redo,{primary:o.KeyMod.CtrlCmd|o.KeyCode.KEY_Y,secondary:[o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.KEY_Z],mac:{primary:o.KeyMod.CtrlCmd|o.KeyMod.Shift|o.KeyCode.KEY_Z}}),i.KeybindingsRegistry.registerCommandDesc({id:"editor.action.selectAll",handler:M,weight:i.KeybindingsRegistry.WEIGHT.editorCore(),when:y.KbExpr.has(t.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS),primary:o.KeyMod.CtrlCmd|o.KeyCode.KEY_A})});