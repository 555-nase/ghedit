define(["require","exports"],function(e,n){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function t(e){return e&&"function"==typeof e.getLineCount&&"function"==typeof e.getLineContent?v.computeLinks(e):[]}var r=[],o=1,a=12,i=13;r[1]={h:2,H:2,f:6,F:6},r[2]={t:3,T:3},r[3]={t:4,T:4},r[4]={p:5,P:5},r[5]={s:9,S:9,":":10},r[6]={i:7,I:7},r[7]={l:8,L:8},r[8]={e:9,E:9},r[9]={":":10},r[10]={"/":11},r[11]={"/":a};var c;!function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"}(c||(c={}));var s="(".charCodeAt(0),u=")".charCodeAt(0),f="[".charCodeAt(0),h="]".charCodeAt(0),d="{".charCodeAt(0),p="}".charCodeAt(0),C=function(){function e(){var e=" \t<>'\"、。｡､，．：；？！＠＃＄％＆＊‘“〈《「『【〔（［｛｢｣｝］）〕】』」》〉”’｀～…",n=".,;";this._asciiMap=[];for(var t=0;t<256;t++)this._asciiMap[t]=c.None;this._map=[];for(var t=0;t<e.length;t++)this._set(e.charCodeAt(t),c.ForceTermination);for(var t=0;t<n.length;t++)this._set(n.charCodeAt(t),c.CannotEndIn)}return e.prototype._set=function(e,n){e<256&&(this._asciiMap[e]=n),this._map[e]=n},e.prototype.classify=function(e){if(e<256)return this._asciiMap[e];var n=this._map[e];return n?n:c.None},e}(),m=new C,v=function(){function e(){}return e._createLink=function(e,n,t,r){var o=r-1;do{var a=e.charCodeAt(o),i=m.classify(a);if(i!==c.CannotEndIn)break;o--}while(o>t);return{range:{startLineNumber:n,startColumn:t+1,endLineNumber:n,endColumn:o+2},url:e.substring(t,o+1)}},e.computeLinks=function(n){for(var t=[],C=1,v=n.getLineCount();C<=v;C++){for(var l=n.getLineContent(C),k=l.length,L=0,_=0,A=o,N=!1,b=!1,T=!1;L<k;){var g=!1;if(A===i){var y=l.charCodeAt(L),F=void 0;switch(y){case s:N=!0,F=c.None;break;case u:F=N?c.None:c.ForceTermination;break;case f:b=!0,F=c.None;break;case h:F=b?c.None:c.ForceTermination;break;case d:T=!0,F=c.None;break;case p:F=T?c.None:c.ForceTermination;break;default:F=m.classify(y)}F===c.ForceTermination&&(t.push(e._createLink(l,C,_,L)),g=!0)}else if(A===a){var y=l.charCodeAt(L),F=m.classify(y);F===c.ForceTermination?g=!0:A=i}else{var E=l.charAt(L);r[A].hasOwnProperty(E)?A=r[A][E]:g=!0}g&&(A=o,N=!1,b=!1,T=!1,_=L+1),L++}A===i&&t.push(e._createLink(l,C,_,k))}return t},e}();n.computeLinks=t});