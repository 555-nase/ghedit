define(["require","exports","vs/editor/common/modes/supports"],function(r,t,o){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var i=function(){function r(r,t,o){this._registry=r,this._modeId=t,this._autoClosingPairs=o.autoClosingPairs,this._autoClosingPairs||(this._autoClosingPairs=o.brackets?o.brackets.map(function(r){return{open:r[0],close:r[1]}}):[]),this._surroundingPairs=o.surroundingPairs||this._autoClosingPairs}return r.prototype.getAutoClosingPairs=function(){return this._autoClosingPairs},r.prototype.shouldAutoClosePair=function(r,t,i){var n=this;return o.handleEvent(t,i,function(t,o,i){if(n._modeId===t){if(0===o.getTokenCount())return!0;for(var s=o.findIndexOfOffset(i-1),e=o.getTokenType(s),u=0;u<n._autoClosingPairs.length;++u)if(n._autoClosingPairs[u].open===r){if(n._autoClosingPairs[u].notIn)for(var a=0;a<n._autoClosingPairs[u].notIn.length;++a)if(e.indexOf(n._autoClosingPairs[u].notIn[a])>-1)return!1;break}return!0}var g=n._registry.getCharacterPairSupport(t);return g?g.shouldAutoClosePair(r,o,i):null})},r.prototype.getSurroundingPairs=function(){return this._surroundingPairs},r}();t.CharacterPairSupport=i});