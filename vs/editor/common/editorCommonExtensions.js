define(["require","exports","vs/base/common/errors","vs/base/common/uri","vs/platform/instantiation/common/descriptors","vs/platform/keybinding/common/keybinding","vs/platform/keybinding/common/keybindingsRegistry","vs/platform/platform","vs/platform/telemetry/common/telemetry","vs/editor/common/config/config","vs/editor/common/core/position","vs/editor/common/editorCommon","vs/editor/common/services/modelService","vs/platform/actions/common/actions"],function(t,i,o,n,r,e,s,d,c,u,a,m,g,p){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function b(t,i,o){u.withCodeEditorFromCommandHandler(t,i,function(i){i.trigger("keyboard",t,o)})}function l(t,i,n){var r=u.findFocusedEditor(t,i,!1);if(r)return void r.trigger("keyboard",t,n);var e=u.getActiveEditor(i);if(e){var s=e.getAction(t);return void(s&&(i.get(c.ITelemetryService).publicLog("editorActionInvoked",{name:s.label}),s.run().done(null,o.onUnexpectedError)))}}function E(t,i){var o=e.KbExpr.has(t?m.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS:m.KEYBINDING_CONTEXT_EDITOR_FOCUS);return i?e.KbExpr.and(o,e.KbExpr.has(i)):o}function f(t,i){return function(o,n){u.withCodeEditorFromCommandHandler(t,o,function(t){i(o,t,n||{})})}}!function(t){t[t.None=0]="None",t[t.EditorTextFocus=1]="EditorTextFocus",t[t.EditorFocus=2]="EditorFocus"}(i.ContextKey||(i.ContextKey={}));var y=i.ContextKey,C=function(){function t(t,o,n,r,e){void 0===r&&(r=i.defaultEditorActionKeybindingOptions),this.ctor=t,this.id=o,this.label=n,this.alias=e,this.kbOpts=r}return t}();i.EditorActionDescriptor=C;var v;!function(t){function i(t){d.Registry.as(x.EditorCommonContributions).registerEditorAction(t)}function r(t){d.Registry.as(x.EditorCommonContributions).registerEditorContribution2(t)}function e(){return d.Registry.as(x.EditorCommonContributions).getEditorContributions2()}function c(t){return void 0===t&&(t=0),s.KeybindingsRegistry.WEIGHT.editorContrib(t)}function u(t,i,o,n,r,e){var d={id:t,handler:f(t,e),weight:i,when:E(n,r),primary:o.primary,secondary:o.secondary,win:o.win,linux:o.linux,mac:o.mac};s.KeybindingsRegistry.registerCommandDesc(d)}function m(t,i){s.KeybindingsRegistry.registerCommandDesc({id:t,handler:function(t,o){return i(t,o||{})},weight:s.KeybindingsRegistry.WEIGHT.editorContrib(),primary:void 0,when:void 0})}function p(t,i){m(t,function(t,r){var e=r.resource,s=r.position;if(!(e instanceof n["default"]&&a.Position.isIPosition(s)))throw o.illegalArgument();var d=t.get(g.IModelService).getModel(e);if(!d)throw o.illegalArgument();var c=a.Position.lift(s);return i(d,c,r)})}t.registerEditorAction=i,t.registerEditorContribution=r,t.getEditorContributions=e,t.commandWeight=c,t.registerEditorCommand=u,t.registerLanguageCommand=m,t.registerDefaultLanguageCommand=p}(v=i.CommonEditorRegistry||(i.CommonEditorRegistry={}));var h=function(){function t(t){this._ctor=t}return t.prototype.createInstance=function(t,i){return t.createInstance(this._ctor,i)},t}(),O=function(){function t(t,i,o,n){this._descriptor=r.createSyncDescriptor(t,{id:i,label:o,alias:n})}return t.prototype.createInstance=function(t,i){return t.createInstance(this._descriptor,i)},t}(),x={EditorCommonContributions:"editor.commonContributions"},I=function(){function t(){this.editorContributions=[]}return t.prototype.registerEditorContribution2=function(t){this.editorContributions.push(new h(t))},t.prototype.registerEditorAction=function(t){var i=t.kbOpts.handler;i||(i=t.kbOpts.context===y.EditorTextFocus||t.kbOpts.context===y.EditorFocus?b.bind(null,t.id):l.bind(null,t.id));var o=null;if("undefined"==typeof t.kbOpts.kbExpr?t.kbOpts.context===y.EditorTextFocus?o=e.KbExpr.has(m.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS):t.kbOpts.context===y.EditorFocus&&(o=e.KbExpr.has(m.KEYBINDING_CONTEXT_EDITOR_FOCUS)):o=t.kbOpts.kbExpr,t.menuOpts){var n=t.menuOpts,r=n.menu,d=n.kbExpr,c=n.group,u=n.order;p.MenuRegistry.appendMenuItem(r||p.MenuId.EditorContext,{command:{id:t.id,title:t.label},when:d,group:c,order:u})}var a={id:t.id,handler:i,weight:s.KeybindingsRegistry.WEIGHT.editorContrib(),when:o,primary:t.kbOpts.primary,secondary:t.kbOpts.secondary,win:t.kbOpts.win,linux:t.kbOpts.linux,mac:t.kbOpts.mac};s.KeybindingsRegistry.registerCommandDesc(a),this.editorContributions.push(new O(t.ctor,t.id,t.label,t.alias))},t.prototype.getEditorContributions2=function(){return this.editorContributions.slice(0)},t}();d.Registry.add(x.EditorCommonContributions,new I),i.defaultEditorActionKeybindingOptions={primary:null,context:y.EditorTextFocus}});