var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)};define(["require","exports","vs/base/common/uri","vs/editor/common/editorCommon","vs/editor/common/model/editableTextModel","vs/editor/common/model/textModel"],function(t,e,o,n,i,r){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var s=0,d={},p=function(t){function e(e,i,r){if(void 0===r&&(r=null),t.call(this,[n.EventType.ModelDispose],e,i),s++,this.id="$model"+s,"undefined"==typeof r||null===r?this._associatedResource=o["default"].parse("inmemory://model/"+s):this._associatedResource=r,d[String(this._associatedResource)])throw new Error("Cannot instantiate a second Model with the same URI!");this._attachedEditorCount=0,d[String(this._associatedResource)]=!0}return __extends(e,t),e.prototype.onDidChangeModeSupport=function(t){return this.addListener2(n.EventType.ModelModeSupportChanged,t)},e.prototype.onDidChangeDecorations=function(t){return this.addListener2(n.EventType.ModelDecorationsChanged,t)},e.prototype.onDidChangeOptions=function(t){return this.addListener2(n.EventType.ModelOptionsChanged,t)},e.prototype.onWillDispose=function(t){return this.addListener2(n.EventType.ModelDispose,t)},e.prototype.onDidChangeMode=function(t){return this.addListener2(n.EventType.ModelModeChanged,t)},e.prototype.addBulkListener=function(e){return t.prototype.addBulkListener.call(this,e)},e.createFromString=function(t,o,n,i){void 0===o&&(o=r.TextModel.DEFAULT_CREATION_OPTIONS),void 0===n&&(n=null),void 0===i&&(i=null);var s=r.TextModel.toRawText(t,o);return new e(s,n,i)},e.prototype.getModeId=function(){return this.getMode().getId()},e.prototype.destroy=function(){this.dispose()},e.prototype.dispose=function(){this._isDisposing=!0,delete d[String(this._associatedResource)],this.emit(n.EventType.ModelDispose),t.prototype.dispose.call(this),this._isDisposing=!1},e.prototype.onBeforeAttached=function(){this._attachedEditorCount++,this._warmUpTokens()},e.prototype.onBeforeDetached=function(){this._attachedEditorCount--},e.prototype._shouldAutoTokenize=function(){return this.isAttachedToEditor()},e.prototype.isAttachedToEditor=function(){return this._attachedEditorCount>0},Object.defineProperty(e.prototype,"uri",{get:function(){return this._associatedResource},enumerable:!0,configurable:!0}),e}(i.EditableTextModel);e.Model=p});