define(["require","exports","vs/base/common/errors","vs/base/common/strings","vs/editor/common/core/viewLineToken"],function(e,n,t,r,i){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";var f=4294967295,a=65535,o=1,s=Math.pow(2,32),u=new i.ViewLineToken(0,""),l=[],d=[],h=[u],c=[0],g=function(){function e(){this._inflate=[""],this._deflate={"":0}}return e}();n.TokensInflatorMap=g;var I=function(){function e(){}return e.deflateArr=function(e,n){if(0===n.length)return d;if(1===n.length&&0===n[0].startIndex&&!n[0].type)return c;var r,i,f,a,u,l=e._inflate,h=e._deflate,g=-1,I=new Array(n.length);for(r=0,i=n.length;r<i;r++)u=n[r],u.startIndex<=g&&(u.startIndex=g+1,t.onUnexpectedError({message:"Invalid tokens detected",tokens:n})),h.hasOwnProperty(u.type)?f=h[u.type]:(f=l.length,h[u.type]=f,l.push(u.type)),a=f*s+u.startIndex*o,I[r]=a,g=u.startIndex;return I},e.getStartIndex=function(e){return e/o&f},e.getType=function(e,n){var t=n/s&a;return 0===t?r.empty:e._inflate[t]},e.inflateArr=function(e,n){if(0===n.length)return l;if(1===n.length&&0===n[0])return h;for(var t=[],r=e._inflate,u=0,d=n.length;u<d;u++){var c=n[u],g=c/o&f,I=c/s&a;t.push(new i.ViewLineToken(g,r[I]))}return t},e.findIndexOfOffset=function(e,n){return this.findIndexInSegmentsArray(e,n)},e.sliceAndInflate=function(e,n,t,r,u){if(0===n.length)return l;if(1===n.length&&0===n[0])return h;var d=this.findIndexInSegmentsArray(n,t),c=[],g=e._inflate,I=n[d],p=I/s&a,T=0;c.push(new i.ViewLineToken(T,g[p]));for(var v=d+1,y=n.length;v<y;v++){I=n[v];var _=I/o&f;if(_>=r)break;p=I/s&a,T=_-t+u,c.push(new i.ViewLineToken(T,g[p]))}return c},e.findIndexInSegmentsArray=function(e,n){for(var t,r,i=0,f=e.length-1;i<f;)t=i+Math.ceil((f-i)/2),r=4294967295&e[t],r>n?f=t-1:i=t;return i},e.START_INDEX_MASK=f,e.TYPE_MASK=a,e.START_INDEX_OFFSET=o,e.TYPE_OFFSET=s,e}();n.TokensBinaryEncoding=I});