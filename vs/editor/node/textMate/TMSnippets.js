var __decorate=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__param=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};define(["require","exports","vs/nls","vs/base/common/json","vs/base/common/paths","vs/base/node/pfs","vs/platform/extensions/common/extensionsRegistry","vs/editor/common/modes/snippetsRegistry","vs/editor/common/services/modeService","vs/editor/contrib/snippet/common/snippet","vs/platform/platform"],function(e,t,n,i,o,r,s,a,p,c,d){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function l(e,t){return r.readFile(t).then(function(n){var i=u(n.toString());v.registerSnippets(e,i,t)})}function u(e){var t=i.parse(e),n=Object.keys(t),o=[],r=function(e,t){var n=e.prefix,i=e.body;if(Array.isArray(i)&&(i=i.join("\n")),"string"==typeof n&&"string"==typeof i){var r=c.CodeSnippet.convertExternalSnippet(i,c.ExternalSnippetType.TextMateSnippet);null!==r&&o.push({prefix:n,description:e.description||t,codeSnippet:r})}};return n.forEach(function(e){var n=t[e];if(n.body&&n.prefix)r(n,e);else{var i=Object.keys(n);i.forEach(function(e){r(n[e],e)})}}),o}var f=s.ExtensionsRegistry.registerExtensionPoint("snippets",{description:n.localize("vscode.extension.contributes.snippets","Contributes snippets."),type:"array",defaultSnippets:[{body:[{language:"",path:""}]}],items:{type:"object",defaultSnippets:[{body:{language:"{{id}}",path:"./snippets/{{id}}.json."}}],properties:{language:{description:n.localize("vscode.extension.contributes.snippets-language","Language identifier for which this snippet is contributed to."),type:"string"},path:{description:n.localize("vscode.extension.contributes.snippets-path","Path of the snippets file. The path is relative to the extension folder and typically starts with './snippets/'."),type:"string"}}}}),g=function(){function e(e){var t=this;this._modeService=e,f.setHandler(function(e){for(var n=0;n<e.length;n++)for(var i=e[n].value,o=0;o<i.length;o++)t._withSnippetContribution(e[n].description.extensionFolderPath,i[o],e[n].collector)})}return e.prototype._withSnippetContribution=function(e,t,i){if(!t.language||"string"!=typeof t.language)return void i.error(n.localize("invalid.language","Unknown language in `contributes.{0}.language`. Provided value: {1}",f.name,String(t.language)));if(!t.path||"string"!=typeof t.path)return void i.error(n.localize("invalid.path.0","Expected string in `contributes.{0}.path`. Provided value: {1}",f.name,String(t.path)));var r=o.normalize(o.join(e,t.path));0!==r.indexOf(e)&&i.warn(n.localize("invalid.path.1","Expected `contributes.{0}.path` ({1}) to be included inside extension's folder ({2}). This might make the extension non-portable.",f.name,r,e));var s=t.language,a=this._modeService.onDidCreateMode(function(e){e.getId()===s&&(l(s,r),a.dispose())})},e=__decorate([__param(0,p.IModeService)],e)}();t.MainProcessTextMateSnippet=g;var v=d.Registry.as(a.Extensions.Snippets);t.readAndRegisterSnippets=l});