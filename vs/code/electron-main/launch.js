/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __decorate=this&&this.__decorate||function(e,n,t,o){var i,r=arguments.length,c=r<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,n,t,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(r<3?i(c):r>3?i(n,t,c):i(n,t))||c);return r>3&&c&&Object.defineProperty(n,t,c),c},__param=this&&this.__param||function(e,n){return function(t,o){n(t,o,e)}};define(["require","exports","vs/code/electron-main/windows","vs/base/common/winjs.base","vs/code/electron-main/log"],function(e,n,t,o,i){"use strict";var r=function(){function e(e){this.service=e}return e.prototype.call=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];switch(e){case"start":return this.service.start(n[0],n[1])}},e}();n.LaunchChannel=r;var c=function(){function e(e){this.channel=e}return e.prototype.start=function(e,n){return this.channel.call("start",e,n)},e}();n.LaunchChannelClient=c;var s=function(){function e(e,n){this.logService=e,this.windowsService=n}return e.prototype.start=function(e,n){var t=this;this.logService.log("Received data from other instance",e);var i;if(e.extensionDevelopmentPath?this.windowsService.openPluginDevelopmentHostWindow({cli:e,userEnv:n}):i=0===e.pathArguments.length&&e.openNewWindow?this.windowsService.open({cli:e,userEnv:n,forceNewWindow:!0,forceEmpty:!0}):0===e.pathArguments.length?[this.windowsService.focusLastActive(e)]:this.windowsService.open({cli:e,userEnv:n,forceNewWindow:e.waitForWindowClose||e.openNewWindow,preferNewWindow:!e.openInSameWindow,diffMode:e.diffMode}),e.waitForWindowClose&&i&&1===i.length&&i[0]){var r=i[0].id;return new o.TPromise(function(e,n){var o=t.windowsService.onClose(function(n){n===r&&(o(),e(null))})})}return o.TPromise.as(null)},e=__decorate([__param(0,i.ILogService),__param(1,t.IWindowsService)],e)}();n.LaunchService=s});