{"version":3,"file":"vs/languages/css/test/common/selectorPrinting.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/languages/css/test/common/selectorPrinting.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport assert = require('assert');\nimport parser = require('vs/languages/css/common/parser/cssParser');\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport objects = require('vs/base/common/objects');\nimport selectorPrinter = require('vs/languages/css/common/services/selectorPrinting');\nimport workerTests = require('./css-worker.test');\n\nfunction elementToString(element: selectorPrinter.IElement) : string {\n\tvar label = element.name || '';\n\tif (element.attributes) {\n\t\tlabel = label + '[';\n\t\tvar needsSeparator = false;\n\t\tfor (var key in element.attributes) {\n\t\t\tif (needsSeparator) {\n\t\t\t\tlabel = label + '|';\n\t\t\t}\n\t\t\tneedsSeparator = true;\n\t\t\tlabel = label + key + '=' + element.attributes[key];\n\t\t}\n\t\tlabel = label + ']';\n\t}\n\n\n\tif (element.children) {\n\t\tlabel = label + '{';\n\t\tfor (var index = 0; index < element.children.length; index++) {\n\t\t\tif (index > 0) {\n\t\t\t\tlabel = label + '|';\n\t\t\t}\n\t\t\tlabel = label +  elementToString(element.children[index]);\n\t\t}\n\t\tlabel = label + '}';\n\t}\n\treturn label;\n}\n\nexport function parseSelector(p: parser.Parser, input:string, selectorName:string, expected: string):void {\n\tvar styleSheet = p.parseStylesheet(workerTests.mockMirrorModel(input));\n\n\tvar node = nodes.getNodeAtOffset(styleSheet, input.indexOf(selectorName));\n\tvar selector = node.findParent(nodes.NodeType.Selector);\n\n\tvar element = selectorPrinter.selectorToElement(selector);\n\tassert.equal(elementToString(element), expected);\n}\n\nexport function assertElement(p: parser.Parser, input:string, element:selectorPrinter.IElement):void {\n\tvar node = p.internalParse(input, p._parseSimpleSelector);\n\n\tvar actual = selectorPrinter.toElement(node);\n\n\tassert.ok(actual.name === element.name);\n\tassert.ok(objects.equals(actual.attributes, element.attributes));\n}\n\n\nsuite('CSS - selector printing', () => {\n\n\ttest('class/hash/elementname/attr', function() {\n\t\tvar p = new parser.Parser();\n\t\tassertElement(p, 'element', { name: 'element' });\n\t\tassertElement(p, '.div', { attributes: { class: 'div'} });\n\t\tassertElement(p, '#first', { attributes: { id: 'first'} });\n\t\tassertElement(p, 'element.on', { name: 'element', attributes: { class: 'on'} });\n\t\tassertElement(p, 'element.on#first', { name: 'element', attributes: { class: 'on', id: 'first'} });\n\t\tassertElement(p, '.on#first', { attributes: { class: 'on', id: 'first'} });\n\n\t\tassertElement(p, '[lang=\\'de\\']', { attributes: { lang: 'de' } });\n\t\tassertElement(p, '[enabled]', { attributes: { enabled: undefined } });\n\n\t});\n\n\ttest('simple selector', function() {\n\t\tvar p = new parser.Parser();\n\t\tparseSelector(p, 'element { }', 'element', '{element}');\n\t\tparseSelector(p, 'element.div { }', 'element', '{element[class=div]}');\n\t\tparseSelector(p, 'element.on#first { }', 'element', '{element[class=on|id=first]}');\n\t\tparseSelector(p, 'element:hover { }', 'element', '{element[:hover=]}');\n\t\tparseSelector(p, 'element[lang=\\'de\\'] { }', 'element', '{element[lang=de]}');\n\t\tparseSelector(p, 'element[enabled] { }', 'element', '{element[enabled=undefined]}');\n\t\tparseSelector(p, 'element[foo~=\"warning\"] { }', 'element', '{element[foo= … warning … ]}');\n\t\tparseSelector(p, 'element[lang|=\"en\"] { }', 'element', '{element[lang=en-…]}');\n\t\tparseSelector(p, '* { }', '*', '{element}');\n\t});\n\n\ttest('selector', function() {\n\t\tvar p = new parser.Parser();\n\t\tparseSelector(p, 'e1 e2 { }', 'e1', '{e1{…{e2}}}');\n\t\tparseSelector(p, 'e1 .div { }', 'e1', '{e1{…{[class=div]}}}');\n\t\tparseSelector(p, 'e1 > e2 { }', 'e2', '{e1{e2}}');\n\t\tparseSelector(p, 'e1, e2 { }', 'e1', '{e1}');\n\t\tparseSelector(p, 'e1 + e2 { }', 'e2', '{e1|e2}');\n\t\tparseSelector(p, 'e1 ~ e2 { }', 'e2', '{e1|e2|⋮|e2}');\n\t});\n});"]}