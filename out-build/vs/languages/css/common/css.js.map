{"version":3,"file":"vs/languages/css/common/css.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/languages/css/common/css.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport WinJS = require('vs/base/common/winjs.base');\nimport objects = require('vs/base/common/objects');\nimport URI from 'vs/base/common/uri';\nimport EditorCommon = require('vs/editor/common/editorCommon');\nimport Modes = require('vs/editor/common/modes');\nimport {OneWorkerAttr, AllWorkersAttr} from 'vs/platform/thread/common/threadService';\nimport cssWorker = require('vs/languages/css/common/cssWorker');\nimport cssTokenTypes = require('vs/languages/css/common/cssTokenTypes');\nimport {AbstractMode, ModeWorkerManager} from 'vs/editor/common/modes/abstractMode';\nimport {AbstractState} from 'vs/editor/common/modes/abstractState';\nimport {IMarker} from 'vs/platform/markers/common/markers';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {IThreadService, ThreadAffinity} from 'vs/platform/thread/common/thread';\nimport {RichEditSupport} from 'vs/editor/common/modes/supports/richEditSupport';\nimport {TokenizationSupport} from 'vs/editor/common/modes/supports/tokenizationSupport';\nimport {DeclarationSupport} from 'vs/editor/common/modes/supports/declarationSupport';\nimport {ReferenceSupport} from 'vs/editor/common/modes/supports/referenceSupport';\nimport {SuggestSupport} from 'vs/editor/common/modes/supports/suggestSupport';\n\nexport enum States {\n\tSelector,\n\tRule,\n\tValue,\n\tValuePostUrl,\n\tValueInUrlFunction,\n\tUnit,\n\tMeta,\n\tMetaPostUrl,\n\tMetaInUrlFunction,\n}\n\nexport { cssTokenTypes };\n\nvar identRegEx = /^-?-?([a-zA-Z]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))([\\w\\-]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))*/;\n\nexport class State extends AbstractState {\n\n\tpublic kind:States;\n\tpublic inComment:boolean;\n\tpublic quote:string;\n\tpublic inMeta:boolean;\n\tpublic metaBraceCount: number;\n\n\tconstructor(mode:Modes.IMode, kind:States, inComment:boolean, quote:string, inMeta:boolean, metaBraceCount: number) {\n\t\tsuper(mode);\n\t\tthis.kind = kind;\n\t\tthis.inComment = inComment;\n\t\tthis.quote = quote;\n\t\tthis.inMeta = inMeta;\n\t\tthis.metaBraceCount = metaBraceCount;\n\t}\n\n\tprivate nextState(next:States, token:Modes.ITokenizationResult):Modes.ITokenizationResult {\n\t\tthis.kind = next;\n\t\treturn token;\n\t}\n\n\tpublic makeClone():State {\n\t\treturn new State(this.getMode(), this.kind, this.inComment, this.quote, this.inMeta, this.metaBraceCount);\n\t}\n\n\tpublic equals(other:Modes.IState):boolean {\n\t\treturn super.equals(other) && objects.equals(this, other);\n\t}\n\n\tprivate tokenizeInComment(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\tif (/\\*\\/$/.test(stream.advanceUntilString('*/', true))) {\n\t\t\tthis.inComment = false;\n\t\t}\n\t\treturn { type:'comment.css' };\n\t}\n\n\tprivate tokenizeInString(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\tvar ch:string, afterBackslash = false, quote = this.quote;\n\n\t\twhile (!stream.eos()) {\n\t\t\tch = stream.next();\n\n\t\t\tif (afterBackslash) {\n\t\t\t\t// Ignore any character after \\\n\t\t\t\tafterBackslash = false;\n\t\t\t} else if (ch === '\\\\') {\n\t\t\t\t// Mark next character for ignoring\n\t\t\t\tafterBackslash = true;\n\t\t\t} else if (ch === quote) {\n\t\t\t\t// Matching quote found\n\t\t\t\tthis.quote = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn { type:'string.css' };\n\t}\n\n\tprivate consumeIdent(stream:Modes.IStream) {\n\t\tstream.goBack(1);\n\t\tif (stream.advanceIfRegExp2(identRegEx)) {\n\t\t\treturn true;\n\t\t}\n\t\tstream.advance(1);\n\t\treturn false;\n\t}\n\n\tpublic tokenize(stream:Modes.IStream):Modes.ITokenizationResult {\n\t\tif (this.inComment) {\n\t\t\treturn this.tokenizeInComment(stream);\n\t\t}\n\t\tif (this.quote !== null) {\n\t\t\treturn this.tokenizeInString(stream);\n\t\t}\n\t\tif (stream.skipWhitespace2()) {\n\t\t\treturn { type:'' };\n\t\t}\n\t\tif (stream.advanceIfString2('/*')) {\n\t\t\tthis.inComment = true;\n\t\t\treturn this.tokenizeInComment(stream);\n\t\t}\n\t\tif (stream.advanceIfString2('\\'')) {\n\t\t\tthis.quote = '\\'';\n\t\t\treturn this.tokenizeInString(stream);\n\t\t}\n\t\tif (stream.advanceIfString2('\\\"')) {\n\t\t\tthis.quote = '\\\"';\n\t\t\treturn this.tokenizeInString(stream);\n\t\t}\n\n\t\tvar ch = stream.next();\n\n\t\t// These states can immediately transition to States.Value or Meta (without consuming ch), that's why they're handled above the switch stmt.\n\t\tswitch (this.kind) {\n\t\t\tcase States.ValuePostUrl:\n\t\t\t\tif (ch === '(') {\n\t\t\t\t\treturn this.nextState(States.ValueInUrlFunction, { type: 'punctuation.parenthesis.css' });\n\t\t\t\t}\n\t\t\t\tthis.kind = States.Value;\n\t\t\t\tbreak;\n\t\t\tcase States.MetaPostUrl:\n\t\t\t\tif (ch === '(') {\n\t\t\t\t\treturn this.nextState(States.MetaInUrlFunction, { type: 'punctuation.parenthesis.css' });\n\t\t\t\t}\n\t\t\t\tthis.kind = States.Meta;\n\t\t\t\tbreak;\n\t\t\tcase States.ValueInUrlFunction:\n\t\t\tcase States.MetaInUrlFunction:\n\t\t\t\t// This state is after 'url(' was encountered in the value\n\t\t\t\tif (ch !== ')') {\n\t\t\t\t\tstream.advanceIfRegExp2(/^[^\\)]*/);\n\t\t\t\t\treturn { type: 'string.css' };\n\t\t\t\t}\n\t\t\t\tthis.kind = (this.kind === States.ValueInUrlFunction) ? States.Value : States.Meta;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch (this.kind) {\n\t\t\tcase States.Selector:\n\t\t\t\tif (ch === '{') {\n\t\t\t\t\treturn this.nextState(States.Rule, { type: 'punctuation.bracket.css' });\n\t\t\t\t}\n\t\t\t\tif (ch === '(' || ch === ')') {\n\t\t\t\t\treturn { type: 'punctuation.parenthesis.css' };\n\t\t\t\t}\n\t\t\t\tif (ch === '@' && !this.inMeta) {  //@import, @media, @key-word-animation\n\t\t\t\t\tstream.advanceIfRegExp2(identRegEx);\n\t\t\t\t\treturn this.nextState(States.Meta, { type: cssTokenTypes.TOKEN_AT_KEYWORD + '.css' });\n\t\t\t\t}\n\t\t\t\tif (ch === '}' && this.inMeta) {  //@import, @media, @key-word-animation\n\t\t\t\t\tthis.inMeta = false;\n\t\t\t\t\treturn this.nextState(States.Selector, { type: 'punctuation.bracket.css' });\n\t\t\t\t}\n\t\t\t\tif (/[\\*\\(\\)\\[\\]\\+>=\\~\\|;]/.test(ch)) {\n\t\t\t\t\treturn { type: 'punctuation.css' };\n\t\t\t\t}\n\t\t\t\tif (ch === '#') {\n\t\t\t\t\tstream.advanceIfRegExp2(identRegEx);\n\t\t\t\t\treturn { type: cssTokenTypes.TOKEN_SELECTOR + '.id.css' };\n\t\t\t\t}\n\t\t\t\tif (ch === '.') {\n\t\t\t\t\tstream.advanceIfRegExp2(identRegEx);\n\t\t\t\t\treturn { type: cssTokenTypes.TOKEN_SELECTOR + '.class.css' };\n\t\t\t\t}\n\t\t\t\tthis.consumeIdent(stream);\n\t\t\t\treturn { type: cssTokenTypes.TOKEN_SELECTOR_TAG + '.css' };\n\n\t\t\tcase States.Meta:\n\t\t\t\tif (ch === '{') {\n\t\t\t\t\tvar nextState = States.Rule;\n\t\t\t\t\tif (this.inMeta) {\n\t\t\t\t\t\tnextState = States.Selector;\n\t\t\t\t\t}\n\t\t\t\t\treturn this.nextState(nextState, { type: 'punctuation.bracket.css' });\n\t\t\t\t}\n\t\t\t\tif (ch === '(' || ch === ')') {\n\t\t\t\t\treturn { type: 'punctuation.parenthesis.css' };\n\t\t\t\t}\n\t\t\t\tif (ch === ';') {\n\t\t\t\t\tif (this.metaBraceCount === 0) {\n\t\t\t\t\t\tthis.inMeta = false;\n\t\t\t\t\t}\n\t\t\t\t\treturn this.nextState(States.Selector, { type: 'punctuation.css' });\n\t\t\t\t}\n\t\t\t\tif ((ch === 'u' || ch === 'U') && stream.advanceIfStringCaseInsensitive2('rl')) {\n\t\t\t\t\tstream.advanceIfStringCaseInsensitive2('-prefix'); // support 'url-prefix' (part of @-mox-document)\n\t\t\t\t\treturn this.nextState(States.MetaPostUrl, { type: cssTokenTypes.TOKEN_VALUE + '.css' });\n\t\t\t\t}\n\t\t\t\tif (/[\\*\\(\\)\\[\\]\\+>=\\~\\|]/.test(ch)) {\n\t\t\t\t\treturn { type: 'punctuation.css' };\n\t\t\t\t}\n\t\t\t\tthis.inMeta = true;\n\t\t\t\tthis.consumeIdent(stream);\n\t\t\t\treturn { type: cssTokenTypes.TOKEN_VALUE + '.css' };\n\n\t\t\tcase States.Rule:\n\t\t\t\tif (ch === '}') {\n\t\t\t\t\treturn this.nextState(States.Selector, { type: 'punctuation.bracket.css' });\n\t\t\t\t}\n\t\t\t\tif (ch === ':') {\n\t\t\t\t\treturn this.nextState(States.Value, { type: 'punctuation.css' });\n\t\t\t\t}\n\t\t\t\tif (ch === '(' || ch === ')') {\n\t\t\t\t\treturn { type: 'punctuation.parenthesis.css' };\n\t\t\t\t}\n\t\t\t\tthis.consumeIdent(stream);\n\t\t\t\treturn { type: cssTokenTypes.TOKEN_PROPERTY + '.css' };\n\n\t\t\tcase States.Value:\n\t\t\t\tif (ch === '}') {\n\t\t\t\t\treturn this.nextState(States.Selector, { type: 'punctuation.bracket.css' });\n\t\t\t\t}\n\t\t\t\tif (ch === ';') {\n\t\t\t\t\treturn this.nextState(States.Rule, { type: 'punctuation.css' });\n\t\t\t\t}\n\t\t\t\tif ((ch === 'u' || ch === 'U') && stream.advanceIfStringCaseInsensitive2('rl')) {\n\t\t\t\t\treturn this.nextState(States.ValuePostUrl, { type: cssTokenTypes.TOKEN_VALUE + '.css' });\n\t\t\t\t}\n\n\t\t\t\tif (ch === '(' || ch === ')') {\n\t\t\t\t\treturn { type: 'punctuation.parenthesis.css' };\n\t\t\t\t}\n\t\t\t\tif (ch === ',') {\n\t\t\t\t\treturn { type: 'punctuation.css' };\n\t\t\t\t}\n\t\t\t\tif (ch === '#') {\n\t\t\t\t\tstream.advanceIfRegExp2(/^[\\w]*/);\n\t\t\t\t\treturn { type: cssTokenTypes.TOKEN_VALUE + '.hex.css' };\n\t\t\t\t}\n\t\t\t\tif (/\\d/.test(ch) || (/-|\\+/.test(ch) && !stream.eos() && /\\d/.test(stream.peek()))) {\n\t\t\t\t\tstream.advanceIfRegExp2(/^[\\d\\.]*/);\n\t\t\t\t\treturn this.nextState(States.Unit, { type: cssTokenTypes.TOKEN_VALUE + '.numeric.css' });\n\t\t\t\t}\n\t\t\t\tif (ch === '!') {\n\t\t\t\t\treturn { type: cssTokenTypes.TOKEN_VALUE + '.keyword.css' };  // !\n\t\t\t\t}\n\t\t\t\tif ((ch === 'i' || ch === 'I') && stream.advanceIfStringCaseInsensitive2('mportant')) {\n\t\t\t\t\treturn { type: cssTokenTypes.TOKEN_VALUE + '.keyword.css' };  // important\n\t\t\t\t}\n\t\t\t\tif (this.consumeIdent(stream)) {\n\t\t\t\t\treturn { type: cssTokenTypes.TOKEN_VALUE + '.css' };\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase States.Unit:\n\t\t\t\t// css units - see: http://www.w3.org/TR/css3-values/#font-relative-lengths\n\t\t\t\tstream.goBack(1);\n\t\t\t\tif(stream.advanceIfRegExp2(/^(em|ex|ch|rem|vw|vh|vm|cm|mm|in|px|pt|pc|deg|grad|rad|turn|s|ms|Hz|kHz|%)/)) {\n\t\t\t\t\treturn { type: cssTokenTypes.TOKEN_VALUE + '.unit.css' };\n\t\t\t\t}\n\t\t\t\t// no unit, back to value state\n\t\t\t\tthis.nextState(States.Value, null);\n\t\t\t\treturn this.tokenize(stream);\n\t\t}\n\t\treturn { type:'' };\n\t}\n}\n\nexport class CSSMode extends AbstractMode {\n\n\tpublic tokenizationSupport: Modes.ITokenizationSupport;\n\tpublic richEditSupport: Modes.IRichEditSupport;\n\tpublic inplaceReplaceSupport:Modes.IInplaceReplaceSupport;\n\tpublic configSupport:Modes.IConfigurationSupport;\n\tpublic referenceSupport: Modes.IReferenceSupport;\n\tpublic logicalSelectionSupport: Modes.ILogicalSelectionSupport;\n\tpublic extraInfoSupport:Modes.IExtraInfoSupport;\n\tpublic occurrencesSupport:Modes.IOccurrencesSupport;\n\tpublic outlineSupport: Modes.IOutlineSupport;\n\tpublic declarationSupport: Modes.IDeclarationSupport;\n\tpublic suggestSupport: Modes.ISuggestSupport;\n\tpublic quickFixSupport: Modes.IQuickFixSupport;\n\n\tprivate _modeWorkerManager: ModeWorkerManager<cssWorker.CSSWorker>;\n\tprivate _threadService:IThreadService;\n\n\tconstructor(\n\t\tdescriptor:Modes.IModeDescriptor,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThreadService threadService: IThreadService\n\t) {\n\t\tsuper(descriptor.id);\n\t\tthis._modeWorkerManager = new ModeWorkerManager<cssWorker.CSSWorker>(descriptor, 'vs/languages/css/common/cssWorker', 'CSSWorker', null, instantiationService);\n\t\tthis._threadService = threadService;\n\n\t\tthis.tokenizationSupport = new TokenizationSupport(this, {\n\t\t\tgetInitialState: () => new State(this, States.Selector, false, null, false, 0)\n\t\t}, false, false);\n\n\t\tthis.richEditSupport = new RichEditSupport(this.getId(), null, {\n\t\t\t// TODO@Martin: This definition does not work with umlauts for example\n\t\t\twordPattern: /(#?-?\\d*\\.\\d\\w*%?)|((::|[@#.!:])?[\\w-?]+%?)|::|[@#.!:]/g,\n\n\t\t\tcomments: {\n\t\t\t\tblockComment: ['/*', '*/']\n\t\t\t},\n\n\t\t\tbrackets: [\n\t\t\t\t['{', '}'],\n\t\t\t\t['[', ']'],\n\t\t\t\t['(', ')']\n\t\t\t],\n\n\t\t\t__characterPairSupport: {\n\t\t\t\tautoClosingPairs: [\n\t\t\t\t\t{ open: '{', close: '}' },\n\t\t\t\t\t{ open: '[', close: ']' },\n\t\t\t\t\t{ open: '(', close: ')' },\n\t\t\t\t\t{ open: '\"', close: '\"', notIn: ['string'] },\n\t\t\t\t\t{ open: '\\'', close: '\\'', notIn: ['string'] }\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.inplaceReplaceSupport = this;\n\t\tthis.configSupport = this;\n\t\tthis.occurrencesSupport = this;\n\t\tthis.extraInfoSupport = this;\n\t\tthis.referenceSupport = new ReferenceSupport(this.getId(), {\n\t\t\ttokens: [cssTokenTypes.TOKEN_PROPERTY + '.css', cssTokenTypes.TOKEN_VALUE + '.css', cssTokenTypes.TOKEN_SELECTOR_TAG + '.css'],\n\t\t\tfindReferences: (resource, position, /*unused*/includeDeclaration) => this.findReferences(resource, position)});\n\t\tthis.logicalSelectionSupport = this;\n\t\tthis.outlineSupport = this;\n\t\tthis.declarationSupport = new DeclarationSupport(this.getId(), {\n\t\t\ttokens: [cssTokenTypes.TOKEN_VALUE + '.css'],\n\t\t\tfindDeclaration: (resource, position) => this.findDeclaration(resource, position)});\n\n\t\tthis.suggestSupport = new SuggestSupport(this.getId(), {\n\t\t\ttriggerCharacters: [' ', ':'],\n\t\t\texcludeTokens: ['comment.css', 'string.css'],\n\t\t\tsuggest: (resource, position) => this.suggest(resource, position)});\n\n\n\t\tthis.quickFixSupport = this;\n\t}\n\n\tpublic creationDone(): void {\n\t\tif (this._threadService.isInMainThread) {\n\t\t\t// Pick a worker to do validation\n\t\t\tthis._pickAWorkerToValidate();\n\t\t}\n\t}\n\n\tprivate _worker<T>(runner:(worker:cssWorker.CSSWorker)=>WinJS.TPromise<T>): WinJS.TPromise<T> {\n\t\treturn this._modeWorkerManager.worker(runner);\n\t}\n\n\tpublic configure(options:any): WinJS.TPromise<void> {\n\t\tif (this._threadService.isInMainThread) {\n\t\t\treturn this._configureWorkers(options);\n\t\t} else {\n\t\t\treturn this._worker((w) => w._doConfigure(options));\n\t\t}\n\t}\n\n\tstatic $_configureWorkers = AllWorkersAttr(CSSMode, CSSMode.prototype._configureWorkers);\n\tprivate _configureWorkers(options:any): WinJS.TPromise<void> {\n\t\treturn this._worker((w) => w._doConfigure(options));\n\t}\n\n\tstatic $navigateValueSet = OneWorkerAttr(CSSMode, CSSMode.prototype.navigateValueSet);\n\tpublic navigateValueSet(resource:URI, position:EditorCommon.IRange, up:boolean):WinJS.TPromise<Modes.IInplaceReplaceSupportResult> {\n\t\treturn this._worker((w) => w.navigateValueSet(resource, position, up));\n\t}\n\n\tstatic $_pickAWorkerToValidate = OneWorkerAttr(CSSMode, CSSMode.prototype._pickAWorkerToValidate, ThreadAffinity.Group1);\n\tprivate _pickAWorkerToValidate(): WinJS.TPromise<void> {\n\t\treturn this._worker((w) => w.enableValidator());\n\t}\n\n\tstatic $findOccurrences = OneWorkerAttr(CSSMode, CSSMode.prototype.findOccurrences);\n\tpublic findOccurrences(resource:URI, position:EditorCommon.IPosition, strict:boolean = false): WinJS.TPromise<Modes.IOccurence[]> {\n\t\treturn this._worker((w) => w.findOccurrences(resource, position, strict));\n\t}\n\n\tstatic $suggest = OneWorkerAttr(CSSMode, CSSMode.prototype.suggest);\n\tpublic suggest(resource:URI, position:EditorCommon.IPosition):WinJS.TPromise<Modes.ISuggestResult[]> {\n\t\treturn this._worker((w) => w.suggest(resource, position));\n\t}\n\n\tstatic $findDeclaration = OneWorkerAttr(CSSMode, CSSMode.prototype.findDeclaration);\n\tpublic findDeclaration(resource:URI, position:EditorCommon.IPosition):WinJS.TPromise<Modes.IReference> {\n\t\treturn this._worker((w) => w.findDeclaration(resource, position));\n\t}\n\n\tstatic $computeInfo = OneWorkerAttr(CSSMode, CSSMode.prototype.computeInfo);\n\tpublic computeInfo(resource:URI, position:EditorCommon.IPosition): WinJS.TPromise<Modes.IComputeExtraInfoResult> {\n\t\treturn this._worker((w) => w.computeInfo(resource, position));\n\t}\n\n\tstatic $findReferences = OneWorkerAttr(CSSMode, CSSMode.prototype.findReferences);\n\tpublic findReferences(resource:URI, position:EditorCommon.IPosition):WinJS.TPromise<Modes.IReference[]> {\n\t\treturn this._worker((w) => w.findReferences(resource, position));\n\t}\n\n\tstatic $getRangesToPosition = OneWorkerAttr(CSSMode, CSSMode.prototype.getRangesToPosition);\n\tpublic getRangesToPosition(resource:URI, position:EditorCommon.IPosition):WinJS.TPromise<Modes.ILogicalSelectionEntry[]> {\n\t\treturn this._worker((w) => w.getRangesToPosition(resource, position));\n\t}\n\n\tstatic $getOutline = OneWorkerAttr(CSSMode, CSSMode.prototype.getOutline);\n\tpublic getOutline(resource:URI):WinJS.TPromise<Modes.IOutlineEntry[]> {\n\t\treturn this._worker((w) => w.getOutline(resource));\n\t}\n\n\tstatic $findColorDeclarations = OneWorkerAttr(CSSMode, CSSMode.prototype.findColorDeclarations);\n\tpublic findColorDeclarations(resource:URI):WinJS.TPromise<{range:EditorCommon.IRange; value:string; }[]> {\n\t\treturn this._worker((w) => w.findColorDeclarations(resource));\n\t}\n\n\tstatic getQuickFixes = OneWorkerAttr(CSSMode, CSSMode.prototype.getQuickFixes);\n\tpublic getQuickFixes(resource: URI, marker: IMarker | EditorCommon.IRange): WinJS.TPromise<Modes.IQuickFix[]>{\n\t\treturn this._worker((w) => w.getQuickFixes(resource, marker));\n\t}\n\n\tstatic runQuickFixAction = OneWorkerAttr(CSSMode, CSSMode.prototype.runQuickFixAction);\n\tpublic runQuickFixAction(resource:URI, range:EditorCommon.IRange, id: any):WinJS.TPromise<Modes.IQuickFixResult>{\n\t\treturn this._worker((w) => w.runQuickFixAction(resource, range, id));\n\t}\n}\n"]}