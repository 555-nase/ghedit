{"version":3,"sources":["vs/languages/css/common/cssWorker.ts"],"names":[],"mappings":"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","file":"vs/languages/css/common/cssWorker.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport nls = require('vs/nls');\nimport URI from 'vs/base/common/uri';\nimport _severity from 'vs/base/common/severity';\nimport strings = require('vs/base/common/strings');\nimport winjs = require('vs/base/common/winjs.base');\nimport languageService = require('vs/languages/css/common/services/cssLanguageService');\nimport languageFacts = require('vs/languages/css/common/services/languageFacts');\nimport occurrences = require('./services/occurrences');\nimport cssIntellisense = require('vs/languages/css/common/services/intelliSense');\nimport EditorCommon = require('vs/editor/common/editorCommon');\nimport Modes = require('vs/editor/common/modes');\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport _level = require('vs/languages/css/common/level');\nimport parser = require('vs/languages/css/common/parser/cssParser');\nimport selectorPrinting = require('vs/languages/css/common/services/selectorPrinting');\nimport lint = require('vs/languages/css/common/services/lint');\nimport lintRules = require('vs/languages/css/common/services/lintRules');\nimport {IMarker, IMarkerData} from 'vs/platform/markers/common/markers';\nimport {IMarkerService} from 'vs/platform/markers/common/markers';\nimport {IResourceService} from 'vs/editor/common/services/resourceService';\nimport {filterSuggestions} from 'vs/editor/common/modes/supports/suggestSupport';\nimport {ValidationHelper} from 'vs/editor/common/worker/validationHelper';\n\nexport class CSSWorker {\n\n\tpublic languageService: languageService.ILanguageService;\n\tprivate resourceService:IResourceService;\n\tprivate markerService: IMarkerService;\n\tprivate _modeId: string;\n\tprivate validationEnabled : boolean;\n\tprivate lintSettings : lintRules.IConfigurationSettings;\n\tprivate _validationHelper: ValidationHelper;\n\n\tconstructor(\n\t\tmodeId: string,\n\t\t@IResourceService resourceService: IResourceService,\n\t\t@IMarkerService markerService: IMarkerService\n\t) {\n\n\t\tthis._modeId = modeId;\n\t\tthis.resourceService = resourceService;\n\t\tthis.markerService = markerService;\n\n\t\tthis._validationHelper = new ValidationHelper(\n\t\t\tthis.resourceService,\n\t\t\tthis._modeId,\n\t\t\t(toValidate) => this.doValidate(toValidate)\n\t\t);\n\n\t\tthis.languageService = this.createLanguageService(resourceService, modeId);\n\t\tthis.lintSettings = {};\n\t\tthis.validationEnabled = true;\n\t}\n\n\tpublic navigateValueSet(resource:URI, range:EditorCommon.IRange, up:boolean):winjs.TPromise<Modes.IInplaceReplaceSupportResult> {\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource);\n\t\t\tlet offset = model.getOffsetFromPosition({ lineNumber: range.startLineNumber, column: range.startColumn });\n\t\t\tlet styleSheet = this.languageService.getStylesheet(resource);\n\n\t\t\tlet node = nodes.getNodeAtOffset(styleSheet, offset);\n\t\t\tif (!node) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet declaration = nodes.getParentDeclaration(node);\n\t\t\tif (!declaration) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet entry: languageFacts.IEntry = languageFacts.getProperties()[declaration.getFullPropertyName()];\n\t\t\tif (!entry || !entry.values) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet values = entry.values.filter(value => languageFacts.isCommonValue(value)).map(v => v.name);\n\n\t\t\tlet isColor = (entry.restrictions.indexOf('color') >= 0);\n\t\t\tif (isColor) {\n\t\t\t\tvalues = values.concat(Object.getOwnPropertyNames(languageFacts.colors), Object.getOwnPropertyNames(languageFacts.colorKeywords));\n\t\t\t}\n\n\t\t\tlet text = node.getText();\n\t\t\tfor (let i = 0, len = values.length; i < len; i++) {\n\t\t\t\tif (strings.equalsIgnoreCase(values[i], text)) {\n\t\t\t\t\tlet nextIdx = i;\n\t\t\t\t\tif(up) {\n\t\t\t\t\t\tnextIdx = (i + 1) % len;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnextIdx =  i - 1;\n\t\t\t\t\t\tif(nextIdx < 0) {\n\t\t\t\t\t\t\tnextIdx = len - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet result:Modes.IInplaceReplaceSupportResult = {\n\t\t\t\t\t\tvalue: values[nextIdx],\n\t\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t\t};\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// if none matches, take the first one\n\t\t\tif (values.length > 0) {\n\t\t\t\tlet result:Modes.IInplaceReplaceSupportResult = {\n\t\t\t\t\tvalue: values[0],\n\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t};\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tpublic createLanguageService(resourceService:IResourceService, modeId:string): languageService.CSSLanguageService {\n\t\treturn new languageService.CSSLanguageService(resourceService, this.createParser.bind(this), modeId);\n\t}\n\n\tpublic createParser() : parser.Parser {\n\t\treturn new parser.Parser();\n\t}\n\n\t_doConfigure(raw:any): winjs.TPromise<void> {\n\t\tif (raw) {\n\t\t\tthis.validationEnabled = raw.validate;\n\t\t\tif (raw.lint) {\n\t\t\t\tthis.lintSettings = lintRules.sanitize(raw.lint);\n\t\t\t} else {\n\t\t\t\tthis.lintSettings = {};\n\t\t\t}\n\t\t\tthis._validationHelper.triggerDueToConfigurationChange();\n\t\t}\n\n\t\treturn winjs.TPromise.as(void 0);\n\t}\n\n\tpublic enableValidator(): winjs.TPromise<void> {\n\t\tthis._validationHelper.enable();\n\t\treturn winjs.TPromise.as(null);\n\t}\n\n\tpublic doValidate(resources: URI[]):void {\n\t\tfor (var i = 0; i < resources.length; i++) {\n\t\t\tthis.doValidate1(resources[i]);\n\t\t}\n\t}\n\n\tprivate doValidate1(resource: URI):void {\n\t\tif (!this.validationEnabled) {\n\t\t\tthis.markerService.changeOne(this._modeId, resource, []);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.languageService.join().then(() => {\n\n\t\t\tlet modelMirror = this.resourceService.get(resource),\n\t\t\t\tnode = this.languageService.getStylesheet(resource),\n\t\t\t\tentries: nodes.IMarker[] = [];\n\n\t\t\tentries.push.apply(entries, nodes.ParseErrorCollector.entries(node));\n\t\t\tentries.push.apply(entries, this.collectLintEntries(node));\n\n\t\t\tlet markerData = entries\n\t\t\t\t.filter(entry => entry.getLevel() !== _level.Level.Ignore)\n\t\t\t\t.map(entry => this._createMarkerData(modelMirror, entry));\n\n\t\t\tthis.markerService.changeOne(this._modeId, resource, markerData);\n\t\t});\n\t}\n\n\tprivate _createMarkerData(model: EditorCommon.IMirrorModel, marker: nodes.IMarker): IMarkerData {\n\t\tlet range = model.getRangeFromOffsetAndLength(marker.getOffset(), marker.getLength());\n\t\treturn <IMarkerData> {\n\t\t\tcode: marker.getRule().id,\n\t\t\tmessage: marker.getMessage(),\n\t\t\tseverity: marker.getLevel() === _level.Level.Warning ? _severity.Warning : _severity.Error,\n\t\t\tstartLineNumber: range.startLineNumber,\n\t\t\tstartColumn: range.startColumn,\n\t\t\tendLineNumber: range.endLineNumber,\n\t\t\tendColumn: range.endColumn\n\t\t};\n\t}\n\n\tpublic collectLintEntries(stylesheet:nodes.Stylesheet):nodes.IMarker[] {\n\t\treturn lint.LintVisitor.entries(stylesheet, this.lintSettings);\n\t}\n\n\tpublic createIntellisense(): cssIntellisense.CSSIntellisense {\n\t\treturn new cssIntellisense.CSSIntellisense();\n\t}\n\n\tpublic suggest(resource:URI, position:EditorCommon.IPosition):winjs.TPromise<Modes.ISuggestResult[]> {\n\t\treturn this.doSuggest(resource, position).then(value => filterSuggestions(value));\n\t}\n\n\tprivate doSuggest(resource:URI, position:EditorCommon.IPosition):winjs.TPromise<Modes.ISuggestResult> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource);\n\t\t\tlet result = this.createIntellisense().getCompletionsAtPosition(this.languageService, model, resource, position);\n\t\t\treturn result;\n\t\t});\n\n\t}\n\n\tpublic getRangesToPosition(resource:URI, position:EditorCommon.IPosition):winjs.TPromise<Modes.ILogicalSelectionEntry[]> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\toffset = model.getOffsetFromPosition(position),\n\t\t\t\tstyleSheet = this.languageService.getStylesheet(resource),\n\t\t\t\tpath = nodes.getNodePath(styleSheet, offset),\n\t\t\t\tresult: Modes.ILogicalSelectionEntry[] = [];\n\n\t\t\tfor (let i = 0; i < path.length; i++) {\n\t\t\t\tlet node = path[i];\n\t\t\t\tif(node.offset === -1 || node.length === -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(node.parent && node.parent.offset === node.offset && node.parent.length === node.length) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tresult.push({\n\t\t\t\t\ttype: 'node',\n\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tpublic getOutline(resource:URI):winjs.TPromise<Modes.IOutlineEntry[]> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\tstylesheet = this.languageService.getStylesheet(resource),\n\t\t\t\tresult:Modes.IOutlineEntry[] = [];\n\n\t\t\tstylesheet.accept((node) => {\n\n\t\t\t\tlet entry:Modes.IOutlineEntry = {\n\t\t\t\t\tlabel: null,\n\t\t\t\t\ttype: 'rule',\n\t\t\t\t\trange: null,\n\t\t\t\t\tchildren: []\n\t\t\t\t};\n\n\t\t\t\tif(node instanceof nodes.Selector) {\n\t\t\t\t\tentry.label = node.getText();\n\t\t\t\t} else if(node instanceof nodes.VariableDeclaration) {\n\t\t\t\t\tentry.label = (<nodes.VariableDeclaration> node).getName();\n\t\t\t\t\tentry.type = 'letiable';\n\t\t\t\t} else if(node instanceof nodes.MixinDeclaration) {\n\t\t\t\t\tentry.label = (<nodes.MixinDeclaration> node).getName();\n\t\t\t\t\tentry.type = 'method';\n\t\t\t\t} else if(node instanceof nodes.FunctionDeclaration) {\n\t\t\t\t\tentry.label = (<nodes.FunctionDeclaration> node).getName();\n\t\t\t\t\tentry.type = 'function';\n\t\t\t\t} else if(node instanceof nodes.Keyframe) {\n\t\t\t\t\tentry.label = nls.localize('literal.keyframes', \"@keyframes {0}\", (<nodes.Keyframe> node).getName());\n\t\t\t\t} else if(node instanceof nodes.FontFace) {\n\t\t\t\t\tentry.label = nls.localize('literal.fontface', \"@font-face\");\n\t\t\t\t}\n\n\t\t\t\tif(entry.label) {\n\t\t\t\t\tentry.range = this._range(node, model, true);\n\t\t\t\t\tresult.push(entry);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tpublic computeInfo(resource:URI, position:EditorCommon.IPosition): winjs.TPromise<Modes.IComputeExtraInfoResult> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\toffset = model.getOffsetFromPosition(position),\n\t\t\t\tstylesheet = this.languageService.getStylesheet(resource),\n\t\t\t\tnodepath = nodes.getNodePath(stylesheet, offset);\n\n\t\t\tfor (let i = 0; i < nodepath.length; i++) {\n\t\t\t\tlet node = nodepath[i];\n\t\t\t\tif (node instanceof nodes.Selector) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\thtmlContent: [selectorPrinting.selectorToHtml(<nodes.Selector> node)],\n\t\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (node instanceof nodes.SimpleSelector) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\thtmlContent: [selectorPrinting.simpleSelectorToHtml(<nodes.SimpleSelector> node)],\n\t\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (node instanceof nodes.Declaration) {\n\t\t\t\t\tlet propertyName = node.getFullPropertyName();\n\t\t\t\t\tlet entry = languageFacts.getProperties()[propertyName];\n\t\t\t\t\tif (entry) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\thtmlContent: [{ text: entry.description }],\n\t\t\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tpublic findDeclaration(resource:URI, position:EditorCommon.IPosition):winjs.TPromise<Modes.IReference> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\toffset = model.getOffsetFromPosition(position),\n\t\t\t\tnode = occurrences.findDeclaration(this.languageService.getStylesheet(resource), offset);\n\n\t\t\tif (!node) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn <Modes.IReference> {\n\t\t\t\tresource: resource,\n\t\t\t\trange: this._range(node, model, true)\n\t\t\t};\n\t\t});\n\t}\n\n\tpublic findOccurrences(resource:URI, position:EditorCommon.IPosition, strict?:boolean):winjs.TPromise<Modes.IOccurence[]> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\toffset = model.getOffsetFromPosition(position),\n\t\t\t\tnodes = occurrences.findOccurrences(this.languageService.getStylesheet(resource), offset);\n\n\t\t\treturn nodes.map((occurrence) => {\n\t\t\t\treturn {\n\t\t\t\t\trange: this._range(occurrence.node, model),\n\t\t\t\t\tkind: occurrence.kind\n\t\t\t\t};\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic findReferences(resource:URI, position:EditorCommon.IPosition):winjs.TPromise<Modes.IReference[]> {\n\n\t\treturn this.languageService.join().then(() => {\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\toffset = model.getOffsetFromPosition(position),\n\t\t\t\tnodes = occurrences.findOccurrences(this.languageService.getStylesheet(resource), offset);\n\n\t\t\treturn nodes.map((occurrence) => {\n\t\t\t\treturn <Modes.IReference> {\n\t\t\t\t\tresource: model.getAssociatedResource(),\n\t\t\t\t\trange: this._range(occurrence.node, model)\n\t\t\t\t};\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic findColorDeclarations(resource:URI):winjs.Promise {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\tstyleSheet = this.languageService.getStylesheet(resource),\n\t\t\t\tresult:{range:EditorCommon.IRange; value:string; }[] = [];\n\n\t\t\tstyleSheet.accept((node) => {\n\t\t\t\tif (languageFacts.isColorValue(node)) {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\trange: this._range(node, model),\n\t\t\t\t\t\tvalue: node.getText()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\t_range(node:{offset:number; length:number;}, model:EditorCommon.IMirrorModel, empty:boolean = false):EditorCommon.IRange {\n\t\tif (empty) {\n\t\t\tlet position = model.getPositionFromOffset(node.offset);\n\t\t\treturn {\n\t\t\t\tstartLineNumber: position.lineNumber,\n\t\t\t\tstartColumn: position.column,\n\t\t\t\tendLineNumber: position.lineNumber,\n\t\t\t\tendColumn: position.column\n\t\t\t};\n\t\t} else {\n\t\t\treturn model.getRangeFromOffsetAndLength(node.offset, node.length);\n\t\t}\n\t}\n\n\tprivate getFixesForUnknownProperty(property: nodes.Property) : Modes.IQuickFix[] {\n\n\t\tlet propertyName = property.getName();\n\t\tlet result: Modes.IQuickFix[] = [];\n\t\tfor (let p in languageFacts.getProperties()) {\n\t\t\tlet score = strings.difference(propertyName, p);\n\t\t\tif (score >= propertyName.length / 2 /*score_lim*/) {\n\t\t\t\tresult.push({\n\t\t\t\t\tcommand: {\n\t\t\t\t\t\tid: 'css.renameProptery',\n\t\t\t\t\t\ttitle: nls.localize('css.quickfix.rename', \"Rename to '{0}'\", p),\n\t\t\t\t\t\targuments: [{ type: 'rename', name: p }]\n\t\t\t\t\t},\n\t\t\t\t\tscore\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Sort in descending order.\n\t\tresult.sort((a, b) => {\n\t\t\treturn b.score - a.score;\n\t\t});\n\n\t\treturn result.slice(0, 3 /*max_result*/);\n\t}\n\n\tpublic getQuickFixes(resource: URI, marker: IMarker | EditorCommon.IRange): winjs.TPromise<Modes.IQuickFix[]> {\n\t\tif ((<IMarker> marker).code !== lintRules.Rules.UnknownProperty.id) {\n\t\t\treturn winjs.TPromise.as([]);\n\t\t}\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\toffset = model.getOffsetFromPosition({ column: marker.startColumn, lineNumber: marker.startLineNumber }),\n\t\t\t\tstylesheet = this.languageService.getStylesheet(resource),\n\t\t\t\tnodepath = nodes.getNodePath(stylesheet, offset);\n\n\t\t\tfor (let i = nodepath.length - 1; i >= 0; i--) {\n\t\t\t\tlet node = nodepath[i];\n\t\t\t\tif (node instanceof nodes.Declaration) {\n\t\t\t\t\tlet property = (<nodes.Declaration> node).getProperty();\n\t\t\t\t\tif (property && property.offset === offset && property.length === marker.endColumn - marker.startColumn) {\n\t\t\t\t\t\treturn this.getFixesForUnknownProperty(property);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [];\n\t\t});\n\t}\n\n\tpublic runQuickFixAction(resource: URI, range: EditorCommon.IRange, quickFix: Modes.IQuickFix): winjs.TPromise<Modes.IQuickFixResult>{\n\t\tlet [{type, name}] = quickFix.command.arguments;\n\t\tswitch (type) {\n\t\t\tcase 'rename': {\n\t\t\t\treturn winjs.TPromise.as({\n\t\t\t\t\tedits: [{ resource, range, newText: name }]\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n"]}