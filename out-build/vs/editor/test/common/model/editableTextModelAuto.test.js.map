{"version":3,"file":"vs/editor/test/common/model/editableTextModelAuto.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/test/common/model/editableTextModelAuto.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport {Position} from 'vs/editor/common/core/position';\nimport {Range} from 'vs/editor/common/core/range';\nimport {IIdentifiedSingleEditOperation} from 'vs/editor/common/editorCommon';\nimport {testApplyEditsWithSyncedModels} from 'vs/editor/test/common/model/editableTextModelTestUtils';\n\nconst GENERATE_TESTS = false;\n\nsuite('EditorModel Auto Tests', () => {\n\tfunction editOp(startLineNumber: number, startColumn: number, endLineNumber: number, endColumn: number, text:string[]): IIdentifiedSingleEditOperation {\n\t\treturn {\n\t\t\tidentifier: null,\n\t\t\trange: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\n\t\t\ttext: text.join('\\n'),\n\t\t\tforceMoveMarkers: false\n\t\t};\n\t}\n\n\ttest('auto1', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t\t'ioe',\n\t\t\t\t\t'',\n\t\t\t\t\t'yjct',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 2, 1, 2, ['b', 'r', 'fq']),\n\t\t\t\teditOp(1, 4, 2, 1, ['', '']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t\t'ib',\n\t\t\t\t\t'r',\n\t\t\t\t\t'fqoe',\n\t\t\t\t\t'',\n\t\t\t\t\t'yjct',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto2', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t\t'f',\n\t\t\t\t\t'littnhskrq',\n\t\t\t\t\t'utxvsizqnk',\n\t\t\t\t\t'lslqz',\n\t\t\t\t\t'jxn',\n\t\t\t\t\t'gmm',\n\t\t\t],\n\t\t\t[\n\t\t\t\t\teditOp(1, 2, 1, 2, ['', 'o']),\n\t\t\t\t\teditOp(2, 4, 2, 4, ['zaq', 'avb']),\n\t\t\t\t\teditOp(2, 5, 6, 2, ['jlr', 'zl', 'j']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t\t'f',\n\t\t\t\t\t'o',\n\t\t\t\t\t'litzaq',\n\t\t\t\t\t'avbtjlr',\n\t\t\t\t\t'zl',\n\t\t\t\t\t'jmm',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto3', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t\t'ofw',\n\t\t\t\t\t'qsxmziuvzw',\n\t\t\t\t\t'rp',\n\t\t\t\t\t'qsnymek',\n\t\t\t\t\t'elth',\n\t\t\t\t\t'wmgzbwudxz',\n\t\t\t\t\t'iwsdkndh',\n\t\t\t\t\t'bujlbwb',\n\t\t\t\t\t'asuouxfv',\n\t\t\t\t\t'xuccnb',\n\t\t\t],\n\t\t\t[\n\t\t\t\t\teditOp(4, 3, 4, 3, ['']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t\t'ofw',\n\t\t\t\t\t'qsxmziuvzw',\n\t\t\t\t\t'rp',\n\t\t\t\t\t'qsnymek',\n\t\t\t\t\t'elth',\n\t\t\t\t\t'wmgzbwudxz',\n\t\t\t\t\t'iwsdkndh',\n\t\t\t\t\t'bujlbwb',\n\t\t\t\t\t'asuouxfv',\n\t\t\t\t\t'xuccnb',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto4', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'fefymj',\n\t\t\t\t'qum',\n\t\t\t\t'vmiwxxaiqq',\n\t\t\t\t'dz',\n\t\t\t\t'lnqdgorosf',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 3, 1, 5, ['hp']),\n\t\t\t\teditOp(1, 7, 2, 1, ['kcg', '', 'mpx']),\n\t\t\t\teditOp(2, 2, 2, 2, ['', 'aw', '']),\n\t\t\t\teditOp(2, 2, 2, 2, ['vqr', 'mo']),\n\t\t\t\teditOp(4, 2, 5, 3, ['xyc']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'fehpmjkcg',\n\t\t\t\t'',\n\t\t\t\t'mpxq',\n\t\t\t\t'aw',\n\t\t\t\t'vqr',\n\t\t\t\t'moum',\n\t\t\t\t'vmiwxxaiqq',\n\t\t\t\t'dxycqdgorosf',\n\t\t\t]\n\t\t);\n\t});\n});\n\nfunction getRandomInt(min: number, max: number): number {\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction getRandomString(minLength: number, maxLength: number): string {\n\tlet length = getRandomInt(minLength, maxLength);\n\tlet r = '';\n\tfor (let i = 0; i < length; i++) {\n\t\tr += String.fromCharCode(getRandomInt('a'.charCodeAt(0), 'z'.charCodeAt(0)));\n\t}\n\treturn r;\n}\n\nfunction generateFile(small:boolean): string {\n\tlet lineCount = getRandomInt(1, small ? 3 : 10);\n\tlet lines: string[] = [];\n\tfor (let i = 0; i < lineCount; i++) {\n\t\tlines.push(getRandomString(0, small ? 3 : 10));\n\t}\n\treturn lines.join('\\n');\n}\n\nfunction generateEdits(content:string): ITestModelEdit[] {\n\n\tlet result:ITestModelEdit[] = [];\n\tlet cnt = getRandomInt(1, 5);\n\n\tlet maxOffset = content.length;\n\n\twhile (cnt > 0 && maxOffset > 0) {\n\n\t\tlet offset = getRandomInt(0, maxOffset);\n\t\tlet length = getRandomInt(0, maxOffset - offset);\n\t\tlet text = generateFile(true);\n\n\t\tresult.push({\n\t\t\toffset: offset,\n\t\t\tlength: length,\n\t\t\ttext: text\n\t\t});\n\n\t\tmaxOffset = offset;\n\t\tcnt--;\n\t}\n\n\tresult.reverse();\n\n\treturn result;\n}\n\ninterface ITestModelEdit {\n\toffset: number;\n\tlength: number;\n\ttext: string;\n}\n\nclass TestModel {\n\n\tpublic initialContent: string;\n\tpublic resultingContent: string;\n\tpublic edits: IIdentifiedSingleEditOperation[];\n\n\tprivate static _generateOffsetToPosition(content:string): Position[] {\n\t\tlet result: Position[] = [];\n\t\tlet lineNumber = 1;\n\t\tlet column = 1;\n\n\t\tfor (let offset = 0, len = content.length; offset <= len; offset++) {\n\t\t\tlet ch = content.charAt(offset);\n\n\t\t\tresult[offset] = new Position(lineNumber, column);\n\n\t\t\tif (ch === '\\n') {\n\t\t\t\tlineNumber++;\n\t\t\t\tcolumn = 1;\n\t\t\t} else {\n\t\t\t\tcolumn++;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tconstructor() {\n\t\tthis.initialContent = generateFile(false);\n\n\t\tlet edits = generateEdits(this.initialContent);\n\n\t\tlet offsetToPosition = TestModel._generateOffsetToPosition(this.initialContent);\n\t\tthis.edits = [];\n\t\tfor (let i = 0; i < edits.length; i++) {\n\t\t\tlet startPosition = offsetToPosition[edits[i].offset];\n\t\t\tlet endPosition = offsetToPosition[edits[i].offset + edits[i].length];\n\t\t\tthis.edits.push({\n\t\t\t\tidentifier: null,\n\t\t\t\trange: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n\t\t\t\ttext: edits[i].text,\n\t\t\t\tforceMoveMarkers: false\n\t\t\t});\n\t\t}\n\n\t\tthis.resultingContent = this.initialContent;\n\t\tfor (let i = edits.length - 1; i >= 0; i--) {\n\t\t\tthis.resultingContent = (\n\t\t\t\tthis.resultingContent.substring(0, edits[i].offset) +\n\t\t\t\tedits[i].text +\n\t\t\t\tthis.resultingContent.substring(edits[i].offset + edits[i].length)\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic print(): string {\n\t\tlet r: string[] = [];\n\t\tr.push('testApplyEditsWithSyncedModels(');\n\t\tr.push('\\t[');\n\t\tlet initialLines = this.initialContent.split('\\n');\n\t\tr = r.concat(initialLines.map((i) => `\\t\\t'${i}',`));\n\t\tr.push('\\t],');\n\t\tr.push('\\t[');\n\t\tr = r.concat(this.edits.map((i) => {\n\t\t\tlet text = `['` + i.text.split('\\n').join(`', '`) + `']`;\n\t\t\treturn `\\t\\teditOp(${i.range.startLineNumber}, ${i.range.startColumn}, ${i.range.endLineNumber}, ${i.range.endColumn}, ${text}),`;\n\t\t}));\n\t\tr.push('\\t],');\n\t\tr.push('\\t[');\n\t\tlet resultLines = this.resultingContent.split('\\n');\n\t\tr = r.concat(resultLines.map((i) => `\\t\\t'${i}',`));\n\t\tr.push('\\t]');\n\t\tr.push(');');\n\n\t\treturn r.join('\\n');\n\t}\n}\n\nif (GENERATE_TESTS) {\n\tlet number = 1;\n\twhile(true) {\n\n\t\tconsole.log('------BEGIN NEW TEST: ' + number);\n\n\t\tlet testModel = new TestModel();\n\n\t\t// console.log(testModel.print());\n\n\t\tconsole.log('------END NEW TEST: ' + (number++));\n\n\t\ttry {\n\t\t\ttestApplyEditsWithSyncedModels(\n\t\t\t\ttestModel.initialContent.split('\\n'),\n\t\t\t\ttestModel.edits,\n\t\t\t\ttestModel.resultingContent.split('\\n')\n\t\t\t);\n\t\t\t// throw new Error('a');\n\t\t} catch(err) {\n\t\t\tconsole.log(err);\n\t\t\tconsole.log(testModel.print());\n\t\t\tbreak;\n\t\t}\n\n\t\t// break;\n\t}\n\n}\n"]}