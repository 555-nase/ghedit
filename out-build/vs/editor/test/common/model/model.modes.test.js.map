{"version":3,"file":"vs/editor/test/common/model/model.modes.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/test/common/model/model.modes.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as assert from 'assert';\nimport {EditOperation} from 'vs/editor/common/core/editOperation';\nimport {Position} from 'vs/editor/common/core/position';\nimport {Range} from 'vs/editor/common/core/range';\nimport {Model} from 'vs/editor/common/model/model';\nimport {ModelMode1, ModelMode2, NMode} from 'vs/editor/test/common/testModes';\n\n// --------- utils\n\nfunction checkAndClear(highlighter, arr) {\n\tassert.deepEqual(highlighter.calledFor, arr);\n\thighlighter.calledFor = [];\n}\n\nfunction invalidEqual(model, indexArray) {\n\tvar i, len, asHash = {};\n\tfor (i = 0, len = indexArray.length; i < len; i++) {\n\t\tasHash[indexArray[i]] = true;\n\t}\n\tfor (i = 0, len = model.getLineCount(); i < len; i++) {\n\t\tassert.equal(model._lines[i].isInvalid, asHash.hasOwnProperty(i));\n\t}\n}\n\nfunction stateEqual(state, content) {\n\tassert.equal(state.prevLineContent, content);\n}\n\nfunction statesEqual(model:Model, states:string[]) {\n\tvar i, len = states.length - 1;\n\tfor (i = 0; i < len; i++) {\n\t\tstateEqual(model._lines[i].getState(), states[i]);\n\t}\n\tstateEqual((<any>model)._lastState, states[len]);\n}\n\n\nvar LINE1 = '1';\nvar LINE2 = '2';\nvar LINE3 = '3';\nvar LINE4 = '4';\nvar LINE5 = '5';\n\n\nsuite('Editor Model - Model Modes 1', () => {\n\n\tvar thisHighlighter: ModelMode1;\n\tvar thisModel: Model;\n\n\tsetup(() => {\n\t\tthisHighlighter = new ModelMode1();\n\t\tvar text =\n\t\t\tLINE1 + '\\r\\n' +\n\t\t\tLINE2 + '\\n' +\n\t\t\tLINE3 + '\\n' +\n\t\t\tLINE4 + '\\r\\n' +\n\t\t\tLINE5;\n\t\tthisModel = new Model(text, Model.DEFAULT_CREATION_OPTIONS, thisHighlighter);\n\t});\n\n\tteardown(() => {\n\t\tthisModel.dispose();\n\t});\n\ttest('model calls syntax highlighter 1', () => {\n\t\tthisModel.getLineTokens(1);\n\t\tcheckAndClear(thisHighlighter, ['1']);\n\t});\n\n\ttest('model calls syntax highlighter 2', () => {\n\t\tthisModel.getLineTokens(2);\n\t\tcheckAndClear(thisHighlighter, ['1', '2']);\n\n\t\tthisModel.getLineTokens(2);\n\t\tcheckAndClear(thisHighlighter, []);\n\t});\n\n\ttest('model caches states', () => {\n\t\tthisModel.getLineTokens(1);\n\t\tcheckAndClear(thisHighlighter, ['1']);\n\n\t\tthisModel.getLineTokens(2);\n\t\tcheckAndClear(thisHighlighter, ['2']);\n\n\t\tthisModel.getLineTokens(3);\n\t\tcheckAndClear(thisHighlighter, ['3']);\n\n\t\tthisModel.getLineTokens(4);\n\t\tcheckAndClear(thisHighlighter, ['4']);\n\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, ['5']);\n\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, []);\n\t});\n\n\ttest('model invalidates states for one line insert', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, ['1', '2', '3', '4', '5']);\n\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), '-')]);\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, ['-']);\n\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, []);\n\t});\n\n\ttest('model invalidates states for many lines insert', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, ['1', '2', '3', '4', '5']);\n\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), '0\\n-\\n+')]);\n\t\tassert.equal(thisModel.getLineCount(), 7);\n\t\tthisModel.getLineTokens(7);\n\t\tcheckAndClear(thisHighlighter, ['0', '-', '+']);\n\n\t\tthisModel.getLineTokens(7);\n\t\tcheckAndClear(thisHighlighter, []);\n\t});\n\n\ttest('model invalidates states for one new line', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, ['1', '2', '3', '4', '5']);\n\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 2), '\\n')]);\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(2, 1), 'a')]);\n\t\tthisModel.getLineTokens(6);\n\t\tcheckAndClear(thisHighlighter, ['1', 'a']);\n\t});\n\n\ttest('model invalidates states for one line delete', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, ['1', '2', '3', '4', '5']);\n\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 2), '-')]);\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, ['1']);\n\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 2))]);\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, ['-']);\n\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, []);\n\t});\n\n\ttest('model invalidates states for many lines delete', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tcheckAndClear(thisHighlighter, ['1', '2', '3', '4', '5']);\n\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 3, 1))]);\n\t\tthisModel.getLineTokens(3);\n\t\tcheckAndClear(thisHighlighter, ['3']);\n\n\t\tthisModel.getLineTokens(3);\n\t\tcheckAndClear(thisHighlighter, []);\n\t});\n});\n\n\n\nsuite('Editor Model - Model Modes 2', () => {\n\n\tvar thisHighlighter: ModelMode1;\n\tvar thisModel: Model;\n\n\tsetup(() => {\n\t\tthisHighlighter = new ModelMode2();\n\t\tvar text =\n\t\t\t'Line1' + '\\r\\n' +\n\t\t\t'Line2' + '\\n' +\n\t\t\t'Line3' + '\\n' +\n\t\t\t'Line4' + '\\r\\n' +\n\t\t\t'Line5';\n\t\tthisModel = new Model(text, Model.DEFAULT_CREATION_OPTIONS, thisHighlighter);\n\t});\n\n\tteardown(() => {\n\t\tthisModel.dispose();\n\t});\n\ttest('getTokensForInvalidLines one text insert', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tstatesEqual(thisModel, ['', 'Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 6), '-')]);\n\t\tinvalidEqual(thisModel, [0]);\n\t\tstatesEqual(thisModel, ['', 'Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.getLineTokens(5);\n\t\tstatesEqual(thisModel, ['', 'Line1-', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t});\n\n\ttest('getTokensForInvalidLines two text insert', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tstatesEqual(thisModel, ['', 'Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([\n\t\t\tEditOperation.insert(new Position(1, 6), '-'),\n\t\t\tEditOperation.insert(new Position(3, 6), '-')\n\t\t]);\n\n\t\tinvalidEqual(thisModel, [0, 2]);\n\t\tthisModel.getLineTokens(5);\n\t\tstatesEqual(thisModel, ['', 'Line1-', 'Line2', 'Line3-', 'Line4', 'Line5']);\n\t});\n\n\ttest('getTokensForInvalidLines one multi-line text insert, one small text insert', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tstatesEqual(thisModel, ['', 'Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 6), '\\nNew line\\nAnother new line')]);\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(5, 6), '-')]);\n\t\tinvalidEqual(thisModel, [0, 4]);\n\t\tthisModel.getLineTokens(7);\n\t\tstatesEqual(thisModel, ['', 'Line1', 'New line', 'Another new line', 'Line2', 'Line3-', 'Line4', 'Line5']);\n\t});\n\n\ttest('getTokensForInvalidLines one delete text', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tstatesEqual(thisModel, ['', 'Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 5))]);\n\t\tinvalidEqual(thisModel, [0]);\n\t\tthisModel.getLineTokens(5);\n\t\tstatesEqual(thisModel, ['', '1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t});\n\n\ttest('getTokensForInvalidLines one line delete text', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tstatesEqual(thisModel, ['', 'Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 2, 1))]);\n\t\tinvalidEqual(thisModel, [0]);\n\t\tstatesEqual(thisModel, ['', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.getLineTokens(4);\n\t\tstatesEqual(thisModel, ['', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t});\n\n\ttest('getTokensForInvalidLines multiple lines delete text', () => {\n\t\tthisModel.getLineTokens(5);\n\t\tstatesEqual(thisModel, ['', 'Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 3, 3))]);\n\t\tinvalidEqual(thisModel, [0]);\n\t\tstatesEqual(thisModel, ['', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.getLineTokens(3);\n\t\tstatesEqual(thisModel, ['', 'ne3', 'Line4', 'Line5']);\n\t});\n});\n\n\nsuite('Editor Model - Token Iterator', () => {\n\n\tvar thisModel: Model;\n\n\tsetup(() => {\n\t\tvar nmode = new NMode(3);\n\t\tvar text =\n\t\t\t'foobarfoobar' + '\\r\\n' +\n\t\t\t'foobarfoobar' + '\\r\\n' +\n\t\t\t'foobarfoobar' + '\\r\\n';\n\t\tthisModel = new Model(text, Model.DEFAULT_CREATION_OPTIONS, nmode);\n\t});\n\n\tteardown(() => {\n\t\tthisModel.dispose();\n\t});\n\n\ttest('all tokens with ranges', () => {\n\t\tvar calls = 0;\n\t\tvar ranges = [\n\t\t\t[1, 4, 4, 7, 7, 10, 10, 13],\n\t\t\t[1, 4, 4, 7, 7, 10, 10, 13],\n\t\t\t[1, 4, 4, 7, 7, 10, 10, 13],\n\t\t];\n\t\tthisModel.tokenIterator(new Position(1, 1), (iter) => {\n\t\t\tvar a = [], line = 0;\n\t\t\twhile(iter.hasNext()) {\n\t\t\t\tcalls++;\n\t\t\t\tif(a.length === 0) {\n\t\t\t\t\ta = ranges.shift();\n\t\t\t\t\tline += 1;\n\t\t\t\t}\n\t\t\t\tvar next = iter.next();\n\t\t\t\tassert.equal(next.lineNumber, line);\n\t\t\t\tassert.equal(next.startColumn, a.shift());\n\t\t\t\tassert.equal(next.endColumn, a.shift());\n\t\t\t}\n\t\t});\n\t\tassert.equal(calls, 12, 'calls');\n\t});\n\n\ttest('all tokens from beginning with next', () => {\n\t\tvar n = 0;\n\t\tthisModel.tokenIterator(new Position(1, 1), (iter) => {\n\t\t\twhile(iter.hasNext()) {\n\t\t\t\titer.next();\n\t\t\t\tn++;\n\t\t\t}\n\t\t});\n\t\tassert.equal(n, 12);\n\t});\n\n\ttest('all tokens from beginning with prev', () => {\n\t\tvar n = 0;\n\t\tthisModel.tokenIterator(new Position(1, 1), (iter) => {\n\t\t\twhile(iter.hasPrev()) {\n\t\t\t\titer.prev();\n\t\t\t\tn++;\n\t\t\t}\n\t\t});\n\t\tassert.equal(n, 1);\n\t});\n\n\ttest('all tokens from end with prev', () => {\n\t\tvar n = 0;\n\t\tthisModel.tokenIterator(new Position(3, 12), (iter) => {\n\t\t\twhile(iter.hasPrev()) {\n\t\t\t\titer.prev();\n\t\t\t\tn++;\n\t\t\t}\n\t\t});\n\t\tassert.equal(n, 12);\n\t});\n\n\ttest('all tokens from end with next', () => {\n\t\tvar n = 0;\n\t\tthisModel.tokenIterator(new Position(3, 12), (iter) => {\n\t\t\twhile(iter.hasNext()) {\n\t\t\t\titer.next();\n\t\t\t\tn++;\n\t\t\t}\n\t\t});\n\t\tassert.equal(n, 1);\n\t});\n\n\ttest('prev and next are assert.equal at start', () => {\n\t\tvar calls = 0;\n\t\tthisModel.tokenIterator(new Position(1, 2), (iter) => {\n\t\t\tcalls++;\n\t\t\tvar next = iter.next();\n\t\t\tvar prev = iter.prev();\n\t\t\tassert.deepEqual(next, prev);\n\t\t});\n\t\tassert.equal(calls, 1, 'calls');\n\t});\n\n\ttest('position variance within token', () => {\n\t\tvar calls = 0;\n\n\t\tthisModel.tokenIterator(new Position(1, 4), (iter) => {\n\t\t\tcalls++;\n\t\t\tvar next = iter.next();\n\t\t\tassert.equal(next.lineNumber, 1);\n\t\t\tassert.equal(next.startColumn, 4);\n\t\t\tassert.equal(next.endColumn, 7);\n\t\t});\n\n\t\tthisModel.tokenIterator(new Position(1, 5), (iter) => {\n\t\t\tcalls++;\n\t\t\tvar next = iter.next();\n\t\t\tassert.equal(next.lineNumber, 1);\n\t\t\tassert.equal(next.startColumn, 4);\n\t\t\tassert.equal(next.endColumn, 7);\n\t\t});\n\n\t\tthisModel.tokenIterator(new Position(1, 6), (iter) => {\n\t\t\tcalls++;\n\t\t\tvar next = iter.next();\n\t\t\tassert.equal(next.lineNumber, 1);\n\t\t\tassert.equal(next.startColumn, 4);\n\t\t\tassert.equal(next.endColumn, 7);\n\t\t});\n\n\t\tassert.equal(calls, 3, 'calls');\n\t});\n\n\ttest('iterator allows next/prev', () => {\n\t\tvar n = 0;\n\t\tvar up = [], down = [];\n\t\tthisModel.tokenIterator(new Position(1, 1), (iter) => {\n\t\t\twhile(iter.hasNext()) {\n\t\t\t\tvar next = iter.next();\n\t\t\t\tup.push(next);\n\t\t\t\tn++;\n\t\t\t}\n\t\t\twhile(iter.hasPrev()) {\n\t\t\t\tvar prev = iter.prev();\n\t\t\t\tdown.push(prev);\n\t\t\t\tn++;\n\t\t\t}\n\t\t});\n\t\tassert.equal(n, 24);\n\t\tassert.equal(up.length, 12);\n\t\tassert.equal(down.length, 12);\n\t\twhile(up.length) {\n\t\t\tassert.deepEqual(up.pop(), down.shift());\n\t\t}\n\t});\n\n\ttest('iterator allows prev/next', () => {\n\t\tvar n = 0;\n\t\tvar up = [], down = [];\n\t\tthisModel.tokenIterator(new Position(3, 12), (iter) => {\n\t\t\twhile(iter.hasPrev()) {\n\t\t\t\tvar prev = iter.prev();\n\t\t\t\tdown.push(prev);\n\t\t\t\tn++;\n\t\t\t}\n\t\t\twhile(iter.hasNext()) {\n\t\t\t\tvar next = iter.next();\n\t\t\t\tup.push(next);\n\t\t\t\tn++;\n\t\t\t}\n\t\t});\n\t\tassert.equal(n, 24);\n\t\tassert.equal(up.length, 12);\n\t\tassert.equal(down.length, 12);\n\t\twhile(up.length) {\n\t\t\tassert.deepEqual(up.pop(), down.shift());\n\t\t}\n\t});\n\n\n\ttest('iterator can not be used outside of callback', () => {\n\t\tvar illegalIterReference;\n\t\tthisModel.tokenIterator(new Position(3, 12), (iter) => {\n\t\t\tillegalIterReference = iter;\n\t\t});\n\n\n\t\ttry {\n\t\t\tillegalIterReference.hasNext();\n\t\t\tassert.ok(false);\n\t\t} catch(e) {\n\t\t\tassert.ok(true);\n\t\t}\n\t\ttry {\n\t\t\tillegalIterReference.next();\n\t\t\tassert.ok(false);\n\t\t} catch(e) {\n\t\t\tassert.ok(true);\n\t\t}\n\t\ttry {\n\t\t\tillegalIterReference.hasPrev();\n\t\t\tassert.ok(false);\n\t\t} catch(e) {\n\t\t\tassert.ok(true);\n\t\t}\n\t\ttry {\n\t\t\tillegalIterReference.prev();\n\t\t\tassert.ok(false);\n\t\t} catch(e) {\n\t\t\tassert.ok(true);\n\t\t}\n\t});\n});\n\n\n"]}