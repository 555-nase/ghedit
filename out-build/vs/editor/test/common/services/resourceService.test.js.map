{"version":3,"file":"vs/editor/test/common/services/resourceService.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/test/common/services/resourceService.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as assert from 'assert';\nimport URI from 'vs/base/common/uri';\nimport {createTestMirrorModelFromString} from 'vs/editor/common/model/mirrorModel';\nimport {ResourceEvents} from 'vs/editor/common/services/resourceService';\nimport {ResourceService} from 'vs/editor/common/services/resourceServiceImpl';\n\nsuite('Editor Services - ResourceService', () => {\n\n\ttest('insert, remove, all', () => {\n\n\t\tvar service = new ResourceService();\n\n\t\tservice.insert(URI.parse('test://1'), createTestMirrorModelFromString('hi'));\n\t\tassert.equal(service.all().length, 1);\n\n\t\tservice.insert(URI.parse('test://2'), createTestMirrorModelFromString('hi'));\n\t\tassert.equal(service.all().length, 2);\n\n\t\tassert.ok(service.contains(URI.parse('test://1')));\n\t\tassert.ok(service.contains(URI.parse('test://2')));\n\n\t\tservice.remove(URI.parse('test://1'));\n\t\tservice.remove(URI.parse('test://1'));\n\t\tservice.remove(URI.parse('test://2'));\n\t\tassert.equal(service.all().length, 0);\n\t});\n\n\n\ttest('event - add, remove', () => {\n\n\t\tvar eventCnt = 0;\n\n\t\tvar url = URI.parse('far');\n\t\tvar element = createTestMirrorModelFromString('hi');\n\t\tvar service = new ResourceService();\n\t\tservice.addListener(ResourceEvents.ADDED, () => {\n\t\t\teventCnt++;\n\t\t\tassert.ok(true);\n\t\t});\n\t\tservice.addListener(ResourceEvents.REMOVED, () => {\n\t\t\teventCnt++;\n\t\t\tassert.ok(true);\n\t\t});\n\n\t\tservice.insert(url, element);\n\t\tservice.remove(url);\n\t\tassert.equal(eventCnt, 2, 'events');\n\t});\n\n\ttest('event - propagation', () => {\n\n\t\tvar eventCnt = 0;\n\n\t\tvar url = URI.parse('far');\n\t\tvar element = createTestMirrorModelFromString('hi');\n\t\tvar event = {};\n\n\t\tvar service = new ResourceService();\n\t\tservice.insert(url, element);\n\n\t\tservice.addBulkListener((events) => {\n\t\t\teventCnt++;\n\t\t\tassert.equal(events.length, 1);\n\t\t\tassert.equal(events[0].getData().originalEvents.length, 1);\n\t\t\tassert.ok(events[0].getData().originalEvents[0].getData() === event);\n\t\t});\n\n\t\telement.emit('changed', event);\n\t\tassert.equal(eventCnt, 1, 'events');\n\t});\n\n});\n"]}