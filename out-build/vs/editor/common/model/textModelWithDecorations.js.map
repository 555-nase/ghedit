{"version":3,"file":"vs/editor/common/model/textModelWithDecorations.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/common/model/textModelWithDecorations.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport {onUnexpectedError} from 'vs/base/common/errors';\nimport {IHTMLContentElement, htmlContentElementArrEquals} from 'vs/base/common/htmlContent';\nimport * as strings from 'vs/base/common/strings';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport {IdGenerator} from 'vs/editor/common/core/idGenerator';\nimport {Range} from 'vs/editor/common/core/range';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {TextModelWithTrackedRanges} from 'vs/editor/common/model/textModelWithTrackedRanges';\nimport {IMode} from 'vs/editor/common/modes';\n\nexport class DeferredEventsBuilder {\n\n\tpublic changedMarkers:{[markerId:string]:boolean;};\n\n\tpublic oldDecorationRange:{[decorationId:string]:editorCommon.IRange;};\n\tpublic oldDecorationOptions:{[decorationId:string]:editorCommon.IModelDecorationOptions;};\n\n\tpublic newOrChangedDecorations:{[decorationId:string]:boolean;};\n\tpublic removedDecorations:{[decorationId:string]:boolean;};\n\n\tconstructor() {\n\t\tthis.changedMarkers = {};\n\t\tthis.oldDecorationRange = {};\n\t\tthis.oldDecorationOptions = {};\n\t\tthis.newOrChangedDecorations = {};\n\t\tthis.removedDecorations = {};\n\t}\n\n\t// --- Build decoration events\n\n\tpublic addNewDecoration(id:string): void {\n\t\tthis.newOrChangedDecorations[id] = true;\n\t}\n\n\tpublic addRemovedDecoration(id:string, ownerId:number, range:editorCommon.IRange, options:editorCommon.IModelDecorationOptions): void {\n\t\tif (this.newOrChangedDecorations.hasOwnProperty(id)) {\n\t\t\tdelete this.newOrChangedDecorations[id];\n\t\t}\n\t\tif (!this.oldDecorationRange.hasOwnProperty(id)) {\n\t\t\tthis.oldDecorationRange[id] = range;\n\t\t}\n\t\tif (!this.oldDecorationOptions.hasOwnProperty(id)) {\n\t\t\tthis.oldDecorationOptions[id] = options;\n\t\t}\n\t\tthis.removedDecorations[id] = true;\n\t}\n\n\tpublic addMovedDecoration(id:string, oldRange:editorCommon.IRange): void {\n\t\tif (!this.oldDecorationRange.hasOwnProperty(id)) {\n\t\t\tthis.oldDecorationRange[id] = oldRange;\n\t\t}\n\t\tthis.newOrChangedDecorations[id] = true;\n\t}\n\n\tpublic addUpdatedDecoration(id:string, oldOptions:editorCommon.IModelDecorationOptions): void {\n\t\tif (!this.oldDecorationOptions.hasOwnProperty(id)) {\n\t\t\tthis.oldDecorationOptions[id] = oldOptions;\n\t\t}\n\t\tthis.newOrChangedDecorations[id] = true;\n\t}\n}\n\ninterface IInternalDecoration {\n\tid:string;\n\townerId:number;\n\trangeId:string;\n\toptions:ModelDecorationOptions;\n}\n\ninterface IInternalDecorationsMap {\n\t[key:string]:IInternalDecoration;\n}\n\ninterface IRangeIdToDecorationIdMap {\n\t[key:string]:string;\n}\n\ninterface IOldDecoration {\n\trange: editorCommon.IEditorRange;\n\toptions: ModelDecorationOptions;\n\tid: string;\n}\n\nvar _INSTANCE_COUNT = 0;\n\nexport class TextModelWithDecorations extends TextModelWithTrackedRanges implements editorCommon.ITextModelWithDecorations {\n\n\tprivate _currentDeferredEvents:DeferredEventsBuilder;\n\tprivate _decorationIdGenerator: IdGenerator;\n\tprivate decorations:IInternalDecorationsMap;\n\tprivate rangeIdToDecorationId:IRangeIdToDecorationIdMap;\n\n\tconstructor(allowedEventTypes:string[], rawText:editorCommon.IRawText, modeOrPromise:IMode|TPromise<IMode>) {\n\t\tallowedEventTypes.push(editorCommon.EventType.ModelDecorationsChanged);\n\t\tsuper(allowedEventTypes, rawText, modeOrPromise);\n\n\t\t// Initialize decorations\n\t\tthis._decorationIdGenerator = new IdGenerator((++_INSTANCE_COUNT) + ';');\n\t\tthis.decorations = {};\n\t\tthis.rangeIdToDecorationId = {};\n\t\tthis._currentDeferredEvents = null;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.decorations = null;\n\t\tthis.rangeIdToDecorationId = null;\n\t\tsuper.dispose();\n\t}\n\n\t_resetValue(e:editorCommon.IModelContentChangedFlushEvent, newValue:editorCommon.IRawText): void {\n\t\tsuper._resetValue(e, newValue);\n\n\t\t// Destroy all my decorations\n\t\tthis.decorations = {};\n\t\tthis.rangeIdToDecorationId = {};\n\t}\n\n\tpublic changeDecorations(callback: (changeAccessor:editorCommon.IModelDecorationsChangeAccessor)=>any, ownerId:number=0): any {\n\t\treturn this._withDeferredEvents((deferredEventsBuilder:DeferredEventsBuilder) => {\n\t\t\tvar changeAccessor:editorCommon.IModelDecorationsChangeAccessor = {\n\t\t\t\taddDecoration: (range:editorCommon.IRange, options:editorCommon.IModelDecorationOptions): string => {\n\t\t\t\t\treturn this._addDecorationImpl(deferredEventsBuilder, ownerId, this.validateRange(range), _normalizeOptions(options));\n\t\t\t\t},\n\t\t\t\tchangeDecoration: (id:string, newRange:editorCommon.IRange): void => {\n\t\t\t\t\tthis._changeDecorationImpl(deferredEventsBuilder, id, this.validateRange(newRange));\n\t\t\t\t},\n\t\t\t\tchangeDecorationOptions: (id: string, options:editorCommon.IModelDecorationOptions) => {\n\t\t\t\t\tthis._changeDecorationOptionsImpl(deferredEventsBuilder, id, _normalizeOptions(options));\n\t\t\t\t},\n\t\t\t\tremoveDecoration: (id:string): void => {\n\t\t\t\t\tthis._removeDecorationImpl(deferredEventsBuilder, id);\n\t\t\t\t},\n\t\t\t\tdeltaDecorations: (oldDecorations:string[], newDecorations:editorCommon.IModelDeltaDecoration[]): string[] => {\n\t\t\t\t\treturn this._deltaDecorationsImpl(deferredEventsBuilder, ownerId, oldDecorations, this._normalizeDeltaDecorations(newDecorations));\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar result: any = null;\n\t\t\ttry {\n\t\t\t\tresult = callback(changeAccessor);\n\t\t\t} catch (e) {\n\t\t\t\tonUnexpectedError(e);\n\t\t\t}\n\t\t\t// Invalidate change accessor\n\t\t\tchangeAccessor.addDecoration = null;\n\t\t\tchangeAccessor.changeDecoration = null;\n\t\t\tchangeAccessor.removeDecoration = null;\n\t\t\tchangeAccessor.deltaDecorations = null;\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tpublic deltaDecorations(oldDecorations:string[], newDecorations:editorCommon.IModelDeltaDecoration[], ownerId:number=0): string[] {\n\t\tif (!oldDecorations) {\n\t\t\toldDecorations = [];\n\t\t}\n\t\treturn this.changeDecorations((changeAccessor) => {\n\t\t\treturn changeAccessor.deltaDecorations(oldDecorations, newDecorations);\n\t\t}, ownerId);\n\t}\n\n\tpublic removeAllDecorationsWithOwnerId(ownerId:number): void {\n\t\tlet toRemove:string[] = [];\n\n\t\tlet keys = Object.keys(this.decorations);\n\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\tlet decorationId = keys[i];\n\t\t\tlet decoration = this.decorations[decorationId];\n\n\t\t\tif (decoration.ownerId === ownerId) {\n\t\t\t\ttoRemove.push(decoration.id);\n\t\t\t}\n\t\t}\n\n\t\tthis._removeDecorationsImpl(null, toRemove);\n\t}\n\n\tpublic getDecorationOptions(decorationId:string): editorCommon.IModelDecorationOptions {\n\t\tif (this.decorations.hasOwnProperty(decorationId)) {\n\t\t\treturn this.decorations[decorationId].options;\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic getDecorationRange(decorationId:string): editorCommon.IEditorRange {\n\t\tif (this.decorations.hasOwnProperty(decorationId)) {\n\t\t\tvar decoration = this.decorations[decorationId];\n\t\t\treturn this.getTrackedRange(decoration.rangeId);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic getLineDecorations(lineNumber:number, ownerId:number=0, filterOutValidation:boolean=false): editorCommon.IModelDecoration[] {\n\t\tif (lineNumber < 1 || lineNumber > this.getLineCount()) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn this.getLinesDecorations(lineNumber, lineNumber, ownerId, filterOutValidation);\n\t}\n\n\tprivate _getDecorationsInRange(startLineNumber:number, startColumn:number, endLineNumber:number, endColumn:number, ownerId:number, filterOutValidation:boolean): editorCommon.IModelDecoration[] {\n\t\tvar result:editorCommon.IModelDecoration[] = [],\n\t\t\tdecoration:IInternalDecoration,\n\t\t\tlineRanges = this.getLinesTrackedRanges(startLineNumber, endLineNumber),\n\t\t\ti:number,\n\t\t\tlineRange: editorCommon.IModelTrackedRange,\n\t\t\tlen:number;\n\n\t\tfor (i = 0, len = lineRanges.length; i < len; i++) {\n\t\t\tlineRange = lineRanges[i];\n\n\t\t\t// Look at line range only if there is a corresponding decoration for it\n\t\t\tif (this.rangeIdToDecorationId.hasOwnProperty(lineRange.id)) {\n\t\t\t\tdecoration = this.decorations[this.rangeIdToDecorationId[lineRange.id]];\n\n\t\t\t\tif (ownerId && decoration.ownerId && decoration.ownerId !== ownerId) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (filterOutValidation) {\n\t\t\t\t\tif (decoration.options.className === editorCommon.ClassName.EditorErrorDecoration || decoration.options.className === editorCommon.ClassName.EditorWarningDecoration) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lineRange.range.startLineNumber === startLineNumber && lineRange.range.endColumn < startColumn) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (lineRange.range.endLineNumber === endLineNumber && lineRange.range.startColumn > endColumn) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult.push({\n\t\t\t\t\tid: decoration.id,\n\t\t\t\t\townerId: decoration.ownerId,\n\t\t\t\t\trange: lineRange.range,\n\t\t\t\t\toptions: decoration.options\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic getLinesDecorations(startLineNumber: number, endLineNumber: number, ownerId:number=0, filterOutValidation:boolean=false): editorCommon.IModelDecoration[] {\n\t\tvar lineCount = this.getLineCount();\n\t\tstartLineNumber = Math.min(lineCount, Math.max(1, startLineNumber));\n\t\tendLineNumber = Math.min(lineCount, Math.max(1, endLineNumber));\n\t\treturn this._getDecorationsInRange(startLineNumber, 1, endLineNumber, Number.MAX_VALUE, ownerId, filterOutValidation);\n\t}\n\n\tpublic getDecorationsInRange(range: editorCommon.IRange, ownerId?: number, filterOutValidation?: boolean): editorCommon.IModelDecoration[] {\n\t\tvar validatedRange = this.validateRange(range);\n\t\treturn this._getDecorationsInRange(validatedRange.startLineNumber, validatedRange.startColumn, validatedRange.endLineNumber, validatedRange.endColumn, ownerId, filterOutValidation);\n\t}\n\n\tpublic getAllDecorations(ownerId:number=0, filterOutValidation:boolean=false): editorCommon.IModelDecoration[] {\n\t\tlet result:editorCommon.IModelDecoration[] = [];\n\n\t\tlet keys = Object.keys(this.decorations);\n\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\tlet decorationId = keys[i];\n\t\t\tlet decoration = this.decorations[decorationId];\n\n\t\t\tif (ownerId && decoration.ownerId && decoration.ownerId !== ownerId) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (filterOutValidation) {\n\t\t\t\tif (decoration.options.className === editorCommon.ClassName.EditorErrorDecoration || decoration.options.className === editorCommon.ClassName.EditorWarningDecoration) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push({\n\t\t\t\tid: decoration.id,\n\t\t\t\townerId: decoration.ownerId,\n\t\t\t\trange: this.getTrackedRange(decoration.rangeId),\n\t\t\t\toptions: decoration.options\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_withDeferredEvents(callback:(deferredEventsBuilder:DeferredEventsBuilder)=>any): any {\n\t\treturn this.deferredEmit(() => {\n\t\t\tvar createDeferredEvents = this._currentDeferredEvents ? false : true;\n\t\t\tif (createDeferredEvents) {\n\t\t\t\tthis._currentDeferredEvents = new DeferredEventsBuilder();\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvar result = callback(this._currentDeferredEvents);\n\t\t\t\tif (createDeferredEvents) {\n\t\t\t\t\tthis._handleCollectedEvents(this._currentDeferredEvents);\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (createDeferredEvents) {\n\t\t\t\t\tthis._currentDeferredEvents = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tprivate _handleCollectedEvents(b:DeferredEventsBuilder): void {\n\t\t// Normalize changed markers into an array\n\t\tvar changedMarkers = this._getMarkersInMap(b.changedMarkers);\n\n\t\t// Collect changed tracked ranges\n\t\tvar changedRanges = this._onChangedMarkers(changedMarkers);\n\n\t\t// Collect decoration change events with the deferred event builder\n\t\tthis._onChangedRanges(b, changedRanges);\n\n\t\t// Emit a single decorations changed event\n\t\tthis._handleCollectedDecorationsEvents(b);\n\n\t\t// Reset markers for next round of events\n\t\tfor (var i = 0, len = changedMarkers.length; i < len; i++) {\n\t\t\tchangedMarkers[i].oldLineNumber = 0;\n\t\t\tchangedMarkers[i].oldColumn = 0;\n\t\t}\n\t}\n\n\tprivate _onChangedRanges(eventBuilder:DeferredEventsBuilder, changedRanges:editorCommon.IChangedTrackedRanges): void {\n\t\tlet keys = Object.keys(changedRanges);\n\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\tlet rangeId = keys[i];\n\t\t\tif (this.rangeIdToDecorationId.hasOwnProperty(rangeId)) {\n\t\t\t\tlet decorationId = this.rangeIdToDecorationId[rangeId];\n\n\t\t\t\teventBuilder.addMovedDecoration(decorationId, changedRanges[rangeId]);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _handleCollectedDecorationsEvents(b:DeferredEventsBuilder): void {\n\t\tvar addedOrChangedDecorations:editorCommon.IModelDecorationsChangedEventDecorationData[] = [],\n\t\t\tremovedDecorations:string[] = [],\n\t\t\tdecorationIds:string[] = [],\n\t\t\tdecorationData:editorCommon.IModelDecorationsChangedEventDecorationData,\n\t\t\toldRange:editorCommon.IRange;\n\n\t\tlet keys = Object.keys(b.newOrChangedDecorations);\n\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\tlet decorationId = keys[i];\n\n\t\t\tdecorationIds.push(decorationId);\n\t\t\tdecorationData = this._getDecorationData(decorationId);\n\t\t\tdecorationData.isForValidation = (decorationData.options.className === editorCommon.ClassName.EditorErrorDecoration || decorationData.options.className === editorCommon.ClassName.EditorWarningDecoration);\n\t\t\taddedOrChangedDecorations.push(decorationData);\n\t\t\tif (b.oldDecorationRange.hasOwnProperty(decorationId)) {\n\t\t\t\toldRange = b.oldDecorationRange[decorationId];\n\t\t\t\toldRange.startLineNumber = oldRange.startLineNumber || decorationData.range.startLineNumber;\n\t\t\t\toldRange.startColumn = oldRange.startColumn || decorationData.range.startColumn;\n\t\t\t\toldRange.endLineNumber = oldRange.endLineNumber || decorationData.range.endLineNumber;\n\t\t\t\toldRange.endColumn = oldRange.endColumn || decorationData.range.endColumn;\n\t\t\t}\n\t\t}\n\n\t\tkeys = Object.keys(b.removedDecorations);\n\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\tlet decorationId = keys[i];\n\t\t\tdecorationIds.push(decorationId);\n\t\t\tremovedDecorations.push(decorationId);\n\t\t}\n\n\t\tif (decorationIds.length > 0) {\n\t\t\tvar e:editorCommon.IModelDecorationsChangedEvent = {\n\t\t\t\tids: decorationIds,\n\t\t\t\taddedOrChangedDecorations: addedOrChangedDecorations,\n\t\t\t\tremovedDecorations: removedDecorations,\n\t\t\t\toldOptions: b.oldDecorationOptions,\n\t\t\t\toldRanges: b.oldDecorationRange\n\t\t\t};\n\t\t\tthis.emitModelDecorationsChangedEvent(e);\n\t\t}\n\t}\n\n\tprivate _getDecorationData(decorationId:string): editorCommon.IModelDecorationsChangedEventDecorationData {\n\t\tvar decoration = this.decorations[decorationId];\n\t\treturn {\n\t\t\tid: decoration.id,\n\t\t\townerId: decoration.ownerId,\n\t\t\trange: this.getTrackedRange(decoration.rangeId),\n\t\t\tisForValidation: false,\n\t\t\toptions: decoration.options\n\t\t};\n\t}\n\n\tprivate emitModelDecorationsChangedEvent(e:editorCommon.IModelDecorationsChangedEvent): void {\n\t\tif (!this._isDisposing) {\n\t\t\tthis.emit(editorCommon.EventType.ModelDecorationsChanged, e);\n\t\t}\n\t}\n\n\tprivate _normalizeDeltaDecorations(deltaDecorations:editorCommon.IModelDeltaDecoration[]): ModelDeltaDecoration[] {\n\t\tlet result:ModelDeltaDecoration[] = [];\n\t\tfor (let i = 0, len = deltaDecorations.length; i < len; i++) {\n\t\t\tlet deltaDecoration = deltaDecorations[i];\n\t\t\tresult.push(new ModelDeltaDecoration(i, this.validateRange(deltaDecoration.range), _normalizeOptions(deltaDecoration.options)));\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _addDecorationImpl(eventBuilder:DeferredEventsBuilder, ownerId:number, range:editorCommon.IEditorRange, options:ModelDecorationOptions): string {\n\t\tvar rangeId = this.addTrackedRange(range, options.stickiness);\n\n\t\tvar decoration = new ModelInternalDecoration(this._decorationIdGenerator.generate(), ownerId, rangeId, options);\n\n\t\tthis.decorations[decoration.id] = decoration;\n\t\tthis.rangeIdToDecorationId[rangeId] = decoration.id;\n\n\t\teventBuilder.addNewDecoration(decoration.id);\n\n\t\treturn decoration.id;\n\t}\n\n\tprivate _addDecorationsImpl(eventBuilder:DeferredEventsBuilder, ownerId:number, newDecorations: ModelDeltaDecoration[]): string[] {\n\t\tvar rangeIds = this._addTrackedRanges(newDecorations.map(d => d.range), newDecorations.map(d => d.options.stickiness));\n\t\tvar result: string[] = [];\n\n\t\tfor (let i = 0, len = newDecorations.length; i < len; i++) {\n\t\t\tlet rangeId = rangeIds[i];\n\n\t\t\tvar decoration = new ModelInternalDecoration(this._decorationIdGenerator.generate(), ownerId, rangeId, newDecorations[i].options);\n\n\t\t\tthis.decorations[decoration.id] = decoration;\n\t\t\tthis.rangeIdToDecorationId[rangeId] = decoration.id;\n\n\t\t\teventBuilder.addNewDecoration(decoration.id);\n\n\t\t\tresult.push(decoration.id);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate _changeDecorationImpl(eventBuilder:DeferredEventsBuilder, id:string, newRange:editorCommon.IEditorRange): void {\n\t\tif (this.decorations.hasOwnProperty(id)) {\n\t\t\tvar decoration = this.decorations[id];\n\t\t\tvar oldRange = this.getTrackedRange(decoration.rangeId);\n\n\t\t\tthis.changeTrackedRange(decoration.rangeId, newRange);\n\n\t\t\teventBuilder.addMovedDecoration(id, oldRange);\n\t\t}\n\t}\n\n\tprivate _changeDecorationOptionsImpl(eventBuilder:DeferredEventsBuilder, id:string, options:ModelDecorationOptions): void {\n\t\tif (this.decorations.hasOwnProperty(id)) {\n\t\t\tvar decoration = this.decorations[id];\n\t\t\tvar oldOptions = decoration.options;\n\n\t\t\tif (oldOptions.stickiness !== options.stickiness) {\n\t\t\t\tthis.changeTrackedRangeStickiness(decoration.rangeId, options.stickiness);\n\t\t\t}\n\n\t\t\tdecoration.options = options;\n\n\t\t\teventBuilder.addUpdatedDecoration(id, oldOptions);\n\t\t}\n\t}\n\n\tprivate _removeDecorationImpl(eventBuilder:DeferredEventsBuilder, id:string): void {\n\t\tif (this.decorations.hasOwnProperty(id)) {\n\t\t\tvar decoration = this.decorations[id];\n\t\t\tvar oldRange:editorCommon.IEditorRange = null;\n\t\t\tif (eventBuilder) {\n\t\t\t\toldRange = this.getTrackedRange(decoration.rangeId);\n\t\t\t}\n\n\t\t\tthis.removeTrackedRange(decoration.rangeId);\n\t\t\tdelete this.rangeIdToDecorationId[decoration.rangeId];\n\t\t\tdelete this.decorations[id];\n\n\t\t\tif (eventBuilder) {\n\t\t\t\teventBuilder.addRemovedDecoration(id, decoration.ownerId, oldRange, decoration.options);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _removeDecorationsImpl(eventBuilder:DeferredEventsBuilder, ids:string[]): void {\n\t\tvar removeTrackedRanges: string[] = [];\n\n\t\tfor (let i = 0, len = ids.length; i < len; i++) {\n\t\t\tlet id = ids[i];\n\n\t\t\tif (!this.decorations.hasOwnProperty(id)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet decoration = this.decorations[id];\n\n\t\t\tif (eventBuilder) {\n\t\t\t\tlet oldRange = this.getTrackedRange(decoration.rangeId);\n\t\t\t\teventBuilder.addRemovedDecoration(id, decoration.ownerId, oldRange, decoration.options);\n\t\t\t}\n\n\t\t\tremoveTrackedRanges.push(decoration.rangeId);\n\t\t\tdelete this.rangeIdToDecorationId[decoration.rangeId];\n\t\t\tdelete this.decorations[id];\n\t\t}\n\n\t\tif (removeTrackedRanges.length > 0) {\n\t\t\tthis.removeTrackedRanges(removeTrackedRanges);\n\t\t}\n\t}\n\n\tprivate _resolveOldDecorations(oldDecorations:string[]): IOldDecoration[] {\n\t\tlet result:IOldDecoration[] = [];\n\t\tfor (let i = 0, len = oldDecorations.length; i < len; i++) {\n\t\t\tlet id = oldDecorations[i];\n\t\t\tif (!this.decorations.hasOwnProperty(id)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet decoration = this.decorations[id];\n\n\t\t\tresult.push({\n\t\t\t\tid: id,\n\t\t\t\trange: this.getTrackedRange(decoration.rangeId),\n\t\t\t\toptions: decoration.options\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _deltaDecorationsImpl(eventBuilder:DeferredEventsBuilder, ownerId:number, oldDecorationsIds:string[], newDecorations: ModelDeltaDecoration[]): string[] {\n\n\t\tif (oldDecorationsIds.length === 0) {\n\t\t\t// Nothing to remove\n\t\t\treturn this._addDecorationsImpl(eventBuilder, ownerId, newDecorations);\n\t\t}\n\n\t\tif (newDecorations.length === 0) {\n\t\t\t// Nothing to add\n\t\t\tthis._removeDecorationsImpl(eventBuilder, oldDecorationsIds);\n\t\t\treturn [];\n\t\t}\n\n\t\tlet oldDecorations = this._resolveOldDecorations(oldDecorationsIds);\n\n\t\toldDecorations.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n\t\tnewDecorations.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n\n\t\tlet result:string[] = [],\n\t\t\toldDecorationsIndex = 0,\n\t\t\toldDecorationsLength = oldDecorations.length,\n\t\t\tnewDecorationsIndex = 0,\n\t\t\tnewDecorationsLength = newDecorations.length,\n\t\t\tdecorationsToAdd: ModelDeltaDecoration[] = [],\n\t\t\tdecorationsToRemove: string[] = [];\n\n\t\twhile (oldDecorationsIndex < oldDecorationsLength && newDecorationsIndex < newDecorationsLength) {\n\t\t\tlet oldDecoration = oldDecorations[oldDecorationsIndex];\n\t\t\tlet newDecoration = newDecorations[newDecorationsIndex];\n\t\t\tlet comparison = Range.compareRangesUsingStarts(oldDecoration.range, newDecoration.range);\n\n\t\t\tif (comparison < 0) {\n\t\t\t\t// `oldDecoration` is before `newDecoration` => remove `oldDecoration`\n\t\t\t\tdecorationsToRemove.push(oldDecoration.id);\n\t\t\t\toldDecorationsIndex++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (comparison > 0) {\n\t\t\t\t// `newDecoration` is before `oldDecoration` => add `newDecoration`\n\t\t\t\tdecorationsToAdd.push(newDecoration);\n\t\t\t\tnewDecorationsIndex++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// The ranges of `oldDecoration` and `newDecoration` are equal\n\n\t\t\tif (!oldDecoration.options.equals(newDecoration.options)) {\n\t\t\t\t// The options do not match => remove `oldDecoration`\n\t\t\t\tdecorationsToRemove.push(oldDecoration.id);\n\t\t\t\toldDecorationsIndex++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Bingo! We can reuse `oldDecoration` for `newDecoration`\n\t\t\tresult[newDecoration.index] = oldDecoration.id;\n\t\t\toldDecorationsIndex++;\n\t\t\tnewDecorationsIndex++;\n\t\t}\n\n\t\twhile (oldDecorationsIndex < oldDecorationsLength) {\n\t\t\t// No more new decorations => remove decoration at `oldDecorationsIndex`\n\t\t\tdecorationsToRemove.push(oldDecorations[oldDecorationsIndex].id);\n\t\t\toldDecorationsIndex++;\n\t\t}\n\n\t\twhile (newDecorationsIndex < newDecorationsLength) {\n\t\t\t// No more old decorations => add decoration at `newDecorationsIndex`\n\t\t\tdecorationsToAdd.push(newDecorations[newDecorationsIndex]);\n\t\t\tnewDecorationsIndex++;\n\t\t}\n\n\t\t// Remove `decorationsToRemove`\n\t\tif (decorationsToRemove.length > 0) {\n\t\t\tthis._removeDecorationsImpl(eventBuilder, decorationsToRemove);\n\t\t}\n\n\t\t// Add `decorationsToAdd`\n\t\tif (decorationsToAdd.length > 0) {\n\t\t\tlet newIds = this._addDecorationsImpl(eventBuilder, ownerId, decorationsToAdd);\n\t\t\tfor (let i = 0, len = decorationsToAdd.length; i < len; i++) {\n\t\t\t\tresult[decorationsToAdd[i].index] = newIds[i];\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nfunction cleanClassName(className:string): string {\n\treturn className.replace(/[^a-z0-9\\-]/gi, ' ');\n}\n\nclass ModelInternalDecoration implements IInternalDecoration {\n\tid:string;\n\townerId:number;\n\trangeId:string;\n\toptions:ModelDecorationOptions;\n\n\tconstructor(id:string, ownerId:number, rangeId:string, options:ModelDecorationOptions) {\n\t\tthis.id = id;\n\t\tthis.ownerId = ownerId;\n\t\tthis.rangeId = rangeId;\n\t\tthis.options = options;\n\t}\n}\n\nclass ModelDecorationOptions implements editorCommon.IModelDecorationOptions {\n\n\tstickiness:editorCommon.TrackedRangeStickiness;\n\tclassName:string;\n\thoverMessage:string;\n\thtmlMessage:IHTMLContentElement[];\n\tisWholeLine:boolean;\n\tshowInOverviewRuler:string;\n\toverviewRuler:editorCommon.IModelDecorationOverviewRulerOptions;\n\tglyphMarginClassName:string;\n\tlinesDecorationsClassName:string;\n\tinlineClassName:string;\n\n\tconstructor(options:editorCommon.IModelDecorationOptions) {\n\t\tthis.stickiness = options.stickiness||editorCommon.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges;\n\t\tthis.className = cleanClassName(options.className||strings.empty);\n\t\tthis.hoverMessage = options.hoverMessage||strings.empty;\n\t\tthis.htmlMessage = options.htmlMessage||[];\n\t\tthis.isWholeLine = options.isWholeLine||false;\n\t\tthis.overviewRuler = _normalizeOverviewRulerOptions(options.overviewRuler, options.showInOverviewRuler);\n\t\tthis.glyphMarginClassName = cleanClassName(options.glyphMarginClassName||strings.empty);\n\t\tthis.linesDecorationsClassName = cleanClassName(options.linesDecorationsClassName||strings.empty);\n\t\tthis.inlineClassName = cleanClassName(options.inlineClassName||strings.empty);\n\t}\n\n\tprivate static _overviewRulerEquals(a:editorCommon.IModelDecorationOverviewRulerOptions, b:editorCommon.IModelDecorationOverviewRulerOptions): boolean {\n\t\treturn (\n\t\t\ta.color === b.color\n\t\t\t&& a.position === b.position\n\t\t\t&& a.darkColor === b.darkColor\n\t\t);\n\t}\n\n\tpublic equals(other:ModelDecorationOptions): boolean {\n\t\treturn (\n\t\t\tthis.stickiness === other.stickiness\n\t\t\t&& this.className === other.className\n\t\t\t&& this.hoverMessage === other.hoverMessage\n\t\t\t&& this.isWholeLine === other.isWholeLine\n\t\t\t&& this.showInOverviewRuler === other.showInOverviewRuler\n\t\t\t&& this.glyphMarginClassName === other.glyphMarginClassName\n\t\t\t&& this.linesDecorationsClassName === other.linesDecorationsClassName\n\t\t\t&& this.inlineClassName === other.inlineClassName\n\t\t\t&& htmlContentElementArrEquals(this.htmlMessage, other.htmlMessage)\n\t\t\t&& ModelDecorationOptions._overviewRulerEquals(this.overviewRuler, other.overviewRuler)\n\t\t);\n\t}\n}\n\nclass ModelDeltaDecoration implements editorCommon.IModelDeltaDecoration {\n\n\tindex: number;\n\trange: editorCommon.IEditorRange;\n\toptions: ModelDecorationOptions;\n\n\tconstructor(index: number, range: editorCommon.IEditorRange, options: ModelDecorationOptions) {\n\t\tthis.index = index;\n\t\tthis.range = range;\n\t\tthis.options = options;\n\t}\n}\n\nfunction _normalizeOptions(options:editorCommon.IModelDecorationOptions): ModelDecorationOptions {\n\treturn new ModelDecorationOptions(options);\n}\n\nclass ModelDecorationOverviewRulerOptions implements editorCommon.IModelDecorationOverviewRulerOptions {\n\tcolor: string;\n\tdarkColor: string;\n\tposition: editorCommon.OverviewRulerLane;\n\n\tconstructor(options:editorCommon.IModelDecorationOverviewRulerOptions, legacyShowInOverviewRuler:string) {\n\t\tthis.color = strings.empty;\n\t\tthis.darkColor = strings.empty;\n\t\tthis.position = editorCommon.OverviewRulerLane.Center;\n\n\t\tif (legacyShowInOverviewRuler) {\n\t\t\tthis.color = legacyShowInOverviewRuler;\n\t\t}\n\t\tif (options && options.color) {\n\t\t\tthis.color = options.color;\n\t\t}\n\t\tif (options && options.darkColor) {\n\t\t\tthis.darkColor = options.darkColor;\n\t\t}\n\t\tif (options && options.hasOwnProperty('position')) {\n\t\t\tthis.position = options.position;\n\t\t}\n\t}\n}\n\nfunction _normalizeOverviewRulerOptions(options:editorCommon.IModelDecorationOverviewRulerOptions, legacyShowInOverviewRuler: string = null): editorCommon.IModelDecorationOverviewRulerOptions {\n\treturn new ModelDecorationOverviewRulerOptions(options, legacyShowInOverviewRuler);\n}\n"]}