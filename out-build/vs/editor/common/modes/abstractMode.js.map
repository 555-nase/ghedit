{"version":3,"file":"vs/editor/common/modes/abstractMode.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/common/modes/abstractMode.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;IAAA;;;oGAGgG;IAChG,YAAY,CAAC;IAab,0BAAiC,YAAwB;QAAxB,4BAAwB,GAAxB,iBAAwB;QACxD,MAAM,CAAC,mBAAQ,CAAC,gBAAgB,CAAC,YAAY,CAAC,CAAC;IAChD,CAAC;IAFe,wBAAgB,mBAE/B,CAAA;IAED;QAQC,2BACC,UAAgC,EAChC,cAAqB,EACrB,eAAsB,EACtB,mBAA0B,EAC1B,oBAA2C;YAE3C,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,IAAI,CAAC,iBAAiB,GAAG,oCAAsB,CAAC,cAAc,EAAE,eAAe,CAAC,CAAC;YACjF,IAAI,CAAC,oBAAoB,GAAG,mBAAmB,CAAC;YAChD,IAAI,CAAC,qBAAqB,GAAG,oBAAoB,CAAC;YAClD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QACjC,CAAC;QAGM,kCAAM,GAAb,UAAiB,MAAoB;YACpC,MAAM,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC/C,CAAC;QAEO,8CAAkB,GAA1B;YAAA,iBAiBC;YAhBA,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBAC/B,qDAAqD;gBAErD,iDAAiD;gBACjD,IAAI,sBAAsB,GAAG,CAAC,IAAI,CAAC,oBAAoB,GAAG,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,oBAAoB,CAAC,GAAG,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;gBAExI,IAAI,CAAC,mBAAmB,GAAG,sBAAsB,CAAC,IAAI,CAAC;oBACtD,iEAAiE;oBACjE,MAAM,CAAC,iBAAiB,CAAC,WAAW,CAAC,KAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;gBACzE,CAAC,CAAC,CAAC,IAAI,CAAC;oBACP,2CAA2C;oBAC3C,MAAM,CAAC,KAAI,CAAC,qBAAqB,CAAC,cAAc,CAAY,KAAI,CAAC,iBAAiB,EAAE,KAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;gBAC1G,CAAC,CAAC,CAAC;YACJ,CAAC;YAED,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC;QACjC,CAAC;QAEc,6BAAW,GAA1B,UAA2B,UAAiB;YAC3C,MAAM,CAAC,IAAI,qBAAQ,CAAC,UAAC,CAAC,EAAE,CAAC,EAAE,CAAC;gBAC3B,OAAO,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC7B,CAAC,EAAE;gBACF,6BAA6B;YAC9B,CAAC,CAAC,CAAC;QACJ,CAAC;QACF,wBAAC;IAAD,CAAC,AArDD,IAqDC;IArDY,yBAAiB,oBAqD7B,CAAA;IAED;QAMC,sBAAY,MAAa;YACxB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,aAAa,GAAG,IAAI,2BAAY,EAAE,CAAC;YACxC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC7B,CAAC;QAEM,4BAAK,GAAZ;YACC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;QACrB,CAAC;QAEM,uCAAgB,GAAvB;YACC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,eAAe,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC;YACjD,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC;QAC7B,CAAC;QAEM,gDAAyB,GAAhC,UAAiC,QAA+C;YAC/E,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,oBAAoB,EAAE,QAAQ,CAAC,CAAC;QACxE,CAAC;QAEM,sCAAe,GAAtB,UAA0B,OAAc,EAAE,QAAgC;YAA1E,iBAaC;YAZA,IAAI,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;YACjC,IAAI,CAAC,OAAO,CAAC,GAAG,WAAW,CAAC;YAC5B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,oBAAoB,EAAE,8BAA8B,CAAC,OAAO,CAAC,CAAC,CAAC;YAEvF,MAAM,CAAC;gBACN,OAAO,EAAE;oBACR,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,KAAK,WAAW,CAAC,CAAC,CAAC;wBACnC,OAAO,KAAI,CAAC,OAAO,CAAC,CAAC;wBACrB,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,oBAAoB,EAAE,8BAA8B,CAAC,OAAO,CAAC,CAAC,CAAC;oBACxF,CAAC;gBACF,CAAC;aACD,CAAC;QACH,CAAC;QACF,mBAAC;IAAD,CAAC,AAzCD,IAyCC;IAzCqB,oBAAY,eAyCjC,CAAA;IAED;QASC,wBAAY,UAAuB;YATpC,iBA+DC;YArDC,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,IAAI,CAAC,aAAa,GAAG,IAAI,2BAAY,EAAE,CAAC;YACxC,IAAI,CAAC,GAAG,GAAG,iCAAiC,GAAG,UAAU,CAAC,KAAK,EAAE,CAAC;YAClE,IAAI,CAAC,eAAe,EAAE,CAAC;YAEvB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,yBAAyB,CAAC,CAAC,CAAC;gBAChD,IAAI,CAAC,WAAW,CAAC,yBAAyB,CAAC,UAAC,CAAC;oBAC5C,EAAE,CAAC,CAAC,CAAC,CAAC,mBAAmB,IAAI,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;wBAChD,KAAI,CAAC,eAAe,EAAE,CAAC;wBACvB,IAAI,QAAQ,GAAG,cAAc,CAAC,8BAA8B,CAAC,CAAC,CAAC,CAAC;wBAChE,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,oBAAoB,EAAE,QAAQ,CAAC,CAAC;oBACzD,CAAC;gBACF,CAAC,CAAC,CAAC;YACJ,CAAC;QACF,CAAC;QAEM,8BAAK,GAAZ;YACC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;QACjB,CAAC;QAEM,yCAAgB,GAAvB;YACC,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QAEO,wCAAe,GAAvB;YACC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC;YAChE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC;QACzD,CAAC;QAEc,6CAA8B,GAA7C,UAA8C,iBAA0C;YACvF,IAAI,KAAK,GAA4B;gBACpC,eAAe,EAAE,KAAK;gBACtB,mBAAmB,EAAE,iBAAiB,CAAC,mBAAmB;gBAC1D,kBAAkB,EAAC,KAAK;gBACxB,kBAAkB,EAAC,KAAK;gBACxB,sBAAsB,EAAC,KAAK;gBAC5B,oBAAoB,EAAC,KAAK;gBAC1B,gBAAgB,EAAC,KAAK;gBACtB,cAAc,EAAC,KAAK;gBACpB,qBAAqB,EAAC,KAAK;gBAC3B,gBAAgB,EAAC,KAAK;gBACtB,cAAc,EAAC,KAAK;gBACpB,uBAAuB,EAAC,KAAK;gBAC7B,iBAAiB,EAAC,KAAK;gBACvB,qBAAqB,EAAC,KAAK;gBAC3B,iBAAiB,EAAC,KAAK;gBACvB,WAAW,EAAC,KAAK;gBACjB,aAAa,EAAC,KAAK;gBACnB,eAAe,EAAC,KAAK;gBACrB,eAAe,EAAE,iBAAiB,CAAC,eAAe;aAClD,CAAC;YACF,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QACF,qBAAC;IAAD,CAAC,AA/DD,IA+DC;IAEU,eAAO,GAA4C,CAAC;QAE9D,IAAI,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACzB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAExB,MAAM,CAAC,iBAAiB,SAAgB,EAAE,IAAW;YACpD,IAAI,CAAC,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAChC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACd,KAAK,CAAC;oBACL,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC;gBACjB,KAAK,CAAC;oBACL,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAC3B,KAAK,CAAC;oBACL,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAC3B,KAAK,CAAC;oBACL,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAC3B,KAAK,CAAC;oBACL,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAC3B,KAAK,CAAC;oBACL,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAC3B,KAAK,CAAC;oBACL,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAC3B,KAAK,CAAC;oBACL,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAC3B,KAAK,CAAC;oBACL,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAC3B,KAAK,EAAE;oBACN,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAC3B,KAAK,EAAE;oBACN,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC;gBACzD,KAAK,EAAE;oBACN,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;gBAC7E,KAAK,EAAE;oBACN,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;gBAC7E,KAAK,EAAE;oBACN,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;gBAC7E,KAAK,EAAE;oBACN,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;gBAC7E;oBACC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;YAC9E,CAAC;QACF,CAAC,CAAC;IACH,CAAC,CAAC,EAAE,CAAC;IAEL;QAAsC,oCAAY;QAIjD,0BACC,UAAgC,EACV,mBAAyC;YAE/D,kBAAM,UAAU,CAAC,EAAE,CAAC,CAAC;YAErB,EAAE,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBACzB,IAAI,CAAC,cAAc,GAAG,IAAI,sCAAqB,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,mBAAmB,CAAC,CAAC;YACpF,CAAC;QACF,CAAC;QAPA;uBAAC,0CAAoB;4BAAA;QAQvB,uBAAC;IAAD,CAAC,AAdD,CAAsC,YAAY,GAcjD;IAdY,wBAAgB,mBAc5B,CAAA;IAED;QAAwC,yBAA4B;aAA5B,WAA4B,CAA5B,sBAA4B,CAA5B,IAA4B;YAA5B,wCAA4B;;QACnE,IAAI,KAAK,GAA4B;YACpC,eAAe,EAAE,KAAK;YACtB,mBAAmB,EAAC,KAAK;YACzB,kBAAkB,EAAC,KAAK;YACxB,kBAAkB,EAAC,KAAK;YACxB,sBAAsB,EAAC,KAAK;YAC5B,oBAAoB,EAAC,KAAK;YAC1B,gBAAgB,EAAC,KAAK;YACtB,cAAc,EAAC,KAAK;YACpB,qBAAqB,EAAC,KAAK;YAC3B,gBAAgB,EAAC,KAAK;YACtB,cAAc,EAAC,KAAK;YACpB,uBAAuB,EAAC,KAAK;YAC7B,iBAAiB,EAAC,KAAK;YACvB,qBAAqB,EAAC,KAAK;YAC3B,iBAAiB,EAAC,KAAK;YACvB,WAAW,EAAC,KAAK;YACjB,aAAa,EAAC,KAAK;YACnB,eAAe,EAAC,KAAK;YACrB,eAAe,EAAE,KAAK;SACtB,CAAC;QACF,eAAe,CAAC,OAAO,CAAC,UAAA,OAAO,IAAI,OAAA,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI,EAArB,CAAqB,CAAC,CAAC;QAC1D,MAAM,CAAC,KAAK,CAAC;IACd,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport {EventEmitter} from 'vs/base/common/eventEmitter';\nimport {IDisposable} from 'vs/base/common/lifecycle';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport {AsyncDescriptor1, createAsyncDescriptor1} from 'vs/platform/instantiation/common/descriptors';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {IModeSupportChangedEvent} from 'vs/editor/common/editorCommon';\nimport * as modes from 'vs/editor/common/modes';\nimport {NullMode} from 'vs/editor/common/modes/nullMode';\nimport {TextualSuggestSupport} from 'vs/editor/common/modes/supports/suggestSupport';\nimport {IEditorWorkerService} from 'vs/editor/common/services/editorWorkerService';\n\nexport function createWordRegExp(allowInWords:string = ''): RegExp {\n\treturn NullMode.createWordRegExp(allowInWords);\n}\n\nexport class ModeWorkerManager<W> {\n\n\tprivate _descriptor: modes.IModeDescriptor;\n\tprivate _workerDescriptor: AsyncDescriptor1<string, W>;\n\tprivate _superWorkerModuleId: string;\n\tprivate _instantiationService: IInstantiationService;\n\tprivate _workerPiecePromise:TPromise<W>;\n\n\tconstructor(\n\t\tdescriptor:modes.IModeDescriptor,\n\t\tworkerModuleId:string,\n\t\tworkerClassName:string,\n\t\tsuperWorkerModuleId:string,\n\t\tinstantiationService: IInstantiationService\n\t) {\n\t\tthis._descriptor = descriptor;\n\t\tthis._workerDescriptor = createAsyncDescriptor1(workerModuleId, workerClassName);\n\t\tthis._superWorkerModuleId = superWorkerModuleId;\n\t\tthis._instantiationService = instantiationService;\n\t\tthis._workerPiecePromise = null;\n\t}\n\n\tpublic worker<T>(runner:(worker:W)=>TPromise<T>): TPromise<T>\n\tpublic worker<T>(runner:(worker:W)=>T): TPromise<T> {\n\t\treturn this._getOrCreateWorker().then(runner);\n\t}\n\n\tprivate _getOrCreateWorker(): TPromise<W> {\n\t\tif (!this._workerPiecePromise) {\n\t\t\t// TODO@Alex: workaround for missing `bundles` config\n\n\t\t\t// First, load the code of the worker super class\n\t\t\tlet superWorkerCodePromise = (this._superWorkerModuleId ? ModeWorkerManager._loadModule(this._superWorkerModuleId) : TPromise.as(null));\n\n\t\t\tthis._workerPiecePromise = superWorkerCodePromise.then(() => {\n\t\t\t\t// Second, load the code of the worker (without instantiating it)\n\t\t\t\treturn ModeWorkerManager._loadModule(this._workerDescriptor.moduleName);\n\t\t\t}).then(() => {\n\t\t\t\t// Finally, create the mode worker instance\n\t\t\t\treturn this._instantiationService.createInstance<string, W>(this._workerDescriptor, this._descriptor.id);\n\t\t\t});\n\t\t}\n\n\t\treturn this._workerPiecePromise;\n\t}\n\n\tprivate static _loadModule(moduleName:string): TPromise<any> {\n\t\treturn new TPromise((c, e, p) => {\n\t\t\trequire([moduleName], c, e);\n\t\t}, () => {\n\t\t\t// Cannot cancel loading code\n\t\t});\n\t}\n}\n\nexport abstract class AbstractMode implements modes.IMode {\n\n\tprivate _modeId: string;\n\tprivate _eventEmitter: EventEmitter;\n\tprivate _simplifiedMode: modes.IMode;\n\n\tconstructor(modeId:string) {\n\t\tthis._modeId = modeId;\n\t\tthis._eventEmitter = new EventEmitter();\n\t\tthis._simplifiedMode = null;\n\t}\n\n\tpublic getId(): string {\n\t\treturn this._modeId;\n\t}\n\n\tpublic toSimplifiedMode(): modes.IMode {\n\t\tif (!this._simplifiedMode) {\n\t\t\tthis._simplifiedMode = new SimplifiedMode(this);\n\t\t}\n\t\treturn this._simplifiedMode;\n\t}\n\n\tpublic addSupportChangedListener(callback: (e: IModeSupportChangedEvent) => void) : IDisposable {\n\t\treturn this._eventEmitter.addListener2('modeSupportChanged', callback);\n\t}\n\n\tpublic registerSupport<T>(support:string, callback:(mode:modes.IMode) => T) : IDisposable {\n\t\tvar supportImpl = callback(this);\n\t\tthis[support] = supportImpl;\n\t\tthis._eventEmitter.emit('modeSupportChanged', _createModeSupportChangedEvent(support));\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tif (this[support] === supportImpl) {\n\t\t\t\t\tdelete this[support];\n\t\t\t\t\tthis._eventEmitter.emit('modeSupportChanged', _createModeSupportChangedEvent(support));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass SimplifiedMode implements modes.IMode {\n\n\ttokenizationSupport: modes.ITokenizationSupport;\n\trichEditSupport: modes.IRichEditSupport;\n\n\tprivate _sourceMode: modes.IMode;\n\tprivate _eventEmitter: EventEmitter;\n\tprivate _id: string;\n\n\tconstructor(sourceMode: modes.IMode) {\n\t\tthis._sourceMode = sourceMode;\n\t\tthis._eventEmitter = new EventEmitter();\n\t\tthis._id = 'vs.editor.modes.simplifiedMode:' + sourceMode.getId();\n\t\tthis._assignSupports();\n\n\t\tif (this._sourceMode.addSupportChangedListener) {\n\t\t\tthis._sourceMode.addSupportChangedListener((e) => {\n\t\t\t\tif (e.tokenizationSupport || e.richEditSupport) {\n\t\t\t\t\tthis._assignSupports();\n\t\t\t\t\tlet newEvent = SimplifiedMode._createModeSupportChangedEvent(e);\n\t\t\t\t\tthis._eventEmitter.emit('modeSupportChanged', newEvent);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic getId(): string {\n\t\treturn this._id;\n\t}\n\n\tpublic toSimplifiedMode(): modes.IMode {\n\t\treturn this;\n\t}\n\n\tprivate _assignSupports(): void {\n\t\tthis.tokenizationSupport = this._sourceMode.tokenizationSupport;\n\t\tthis.richEditSupport = this._sourceMode.richEditSupport;\n\t}\n\n\tprivate static _createModeSupportChangedEvent(originalModeEvent:IModeSupportChangedEvent): IModeSupportChangedEvent {\n\t\tvar event:IModeSupportChangedEvent = {\n\t\t\tcodeLensSupport: false,\n\t\t\ttokenizationSupport: originalModeEvent.tokenizationSupport,\n\t\t\toccurrencesSupport:false,\n\t\t\tdeclarationSupport:false,\n\t\t\ttypeDeclarationSupport:false,\n\t\t\tnavigateTypesSupport:false,\n\t\t\treferenceSupport:false,\n\t\t\tsuggestSupport:false,\n\t\t\tparameterHintsSupport:false,\n\t\t\textraInfoSupport:false,\n\t\t\toutlineSupport:false,\n\t\t\tlogicalSelectionSupport:false,\n\t\t\tformattingSupport:false,\n\t\t\tinplaceReplaceSupport:false,\n\t\t\temitOutputSupport:false,\n\t\t\tlinkSupport:false,\n\t\t\tconfigSupport:false,\n\t\t\tquickFixSupport:false,\n\t\t\trichEditSupport: originalModeEvent.richEditSupport,\n\t\t};\n\t\treturn event;\n\t}\n}\n\nexport var isDigit:(character:string, base:number)=>boolean = (function () {\n\n\tvar _0 = '0'.charCodeAt(0),\n\t\t_1 = '1'.charCodeAt(0),\n\t\t_2 = '2'.charCodeAt(0),\n\t\t_3 = '3'.charCodeAt(0),\n\t\t_4 = '4'.charCodeAt(0),\n\t\t_5 = '5'.charCodeAt(0),\n\t\t_6 = '6'.charCodeAt(0),\n\t\t_7 = '7'.charCodeAt(0),\n\t\t_8 = '8'.charCodeAt(0),\n\t\t_9 = '9'.charCodeAt(0),\n\t\t_a = 'a'.charCodeAt(0),\n\t\t_b = 'b'.charCodeAt(0),\n\t\t_c = 'c'.charCodeAt(0),\n\t\t_d = 'd'.charCodeAt(0),\n\t\t_e = 'e'.charCodeAt(0),\n\t\t_f = 'f'.charCodeAt(0),\n\t\t_A = 'A'.charCodeAt(0),\n\t\t_B = 'B'.charCodeAt(0),\n\t\t_C = 'C'.charCodeAt(0),\n\t\t_D = 'D'.charCodeAt(0),\n\t\t_E = 'E'.charCodeAt(0),\n\t\t_F = 'F'.charCodeAt(0);\n\n\treturn function isDigit(character:string, base:number):boolean {\n\t\tvar c = character.charCodeAt(0);\n\t\tswitch (base) {\n\t\t\tcase 1:\n\t\t\t\treturn c === _0;\n\t\t\tcase 2:\n\t\t\t\treturn c >= _0 && c <= _1;\n\t\t\tcase 3:\n\t\t\t\treturn c >= _0 && c <= _2;\n\t\t\tcase 4:\n\t\t\t\treturn c >= _0 && c <= _3;\n\t\t\tcase 5:\n\t\t\t\treturn c >= _0 && c <= _4;\n\t\t\tcase 6:\n\t\t\t\treturn c >= _0 && c <= _5;\n\t\t\tcase 7:\n\t\t\t\treturn c >= _0 && c <= _6;\n\t\t\tcase 8:\n\t\t\t\treturn c >= _0 && c <= _7;\n\t\t\tcase 9:\n\t\t\t\treturn c >= _0 && c <= _8;\n\t\t\tcase 10:\n\t\t\t\treturn c >= _0 && c <= _9;\n\t\t\tcase 11:\n\t\t\t\treturn (c >= _0 && c <= _9) || (c === _a) || (c === _A);\n\t\t\tcase 12:\n\t\t\t\treturn (c >= _0 && c <= _9) || (c >= _a && c <= _b) || (c >= _A && c <= _B);\n\t\t\tcase 13:\n\t\t\t\treturn (c >= _0 && c <= _9) || (c >= _a && c <= _c) || (c >= _A && c <= _C);\n\t\t\tcase 14:\n\t\t\t\treturn (c >= _0 && c <= _9) || (c >= _a && c <= _d) || (c >= _A && c <= _D);\n\t\t\tcase 15:\n\t\t\t\treturn (c >= _0 && c <= _9) || (c >= _a && c <= _e) || (c >= _A && c <= _E);\n\t\t\tdefault:\n\t\t\t\treturn (c >= _0 && c <= _9) || (c >= _a && c <= _f) || (c >= _A && c <= _F);\n\t\t}\n\t};\n})();\n\nexport class FrankensteinMode extends AbstractMode {\n\n\tpublic suggestSupport:modes.ISuggestSupport;\n\n\tconstructor(\n\t\tdescriptor:modes.IModeDescriptor,\n\t\t@IEditorWorkerService editorWorkerService: IEditorWorkerService\n\t) {\n\t\tsuper(descriptor.id);\n\n\t\tif (editorWorkerService) {\n\t\t\tthis.suggestSupport = new TextualSuggestSupport(this.getId(), editorWorkerService);\n\t\t}\n\t}\n}\n\nfunction _createModeSupportChangedEvent(...changedSupports: string[]): IModeSupportChangedEvent {\n\tvar event:IModeSupportChangedEvent = {\n\t\tcodeLensSupport: false,\n\t\ttokenizationSupport:false,\n\t\toccurrencesSupport:false,\n\t\tdeclarationSupport:false,\n\t\ttypeDeclarationSupport:false,\n\t\tnavigateTypesSupport:false,\n\t\treferenceSupport:false,\n\t\tsuggestSupport:false,\n\t\tparameterHintsSupport:false,\n\t\textraInfoSupport:false,\n\t\toutlineSupport:false,\n\t\tlogicalSelectionSupport:false,\n\t\tformattingSupport:false,\n\t\tinplaceReplaceSupport:false,\n\t\temitOutputSupport:false,\n\t\tlinkSupport:false,\n\t\tconfigSupport:false,\n\t\tquickFixSupport:false,\n\t\trichEditSupport: false\n\t};\n\tchangedSupports.forEach(support => event[support] = true);\n\treturn event;\n}"]}