{"version":3,"sources":["vs/editor/common/controller/cursor.ts"],"names":[],"mappings":"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","file":"vs/editor/common/controller/cursor.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as nls from 'vs/nls';\nimport {onUnexpectedError} from 'vs/base/common/errors';\nimport {EventEmitter} from 'vs/base/common/eventEmitter';\nimport {IDisposable, dispose} from 'vs/base/common/lifecycle';\nimport {ReplaceCommand} from 'vs/editor/common/commands/replaceCommand';\nimport {CursorCollection, ICursorCollectionState} from 'vs/editor/common/controller/cursorCollection';\nimport {DispatcherEvent} from 'vs/editor/common/controller/handlerDispatcher';\nimport {WordNavigationType, IOneCursorOperationContext, IPostOperationRunnable, IViewModelHelper, OneCursor, OneCursorOp} from 'vs/editor/common/controller/oneCursor';\nimport {Position} from 'vs/editor/common/core/position';\nimport {Range} from 'vs/editor/common/core/range';\nimport {Selection} from 'vs/editor/common/core/selection';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {IColumnSelectResult} from 'vs/editor/common/controller/cursorMoveHelper';\n\nexport interface ITypingListener {\n\t(): void;\n}\n\nenum RevealTarget {\n\tPrimary = 0,\n\tTopMost = 1,\n\tBottomMost = 2\n}\n\ninterface IMultipleCursorOperationContext {\n\tcursorPositionChangeReason: string;\n\tshouldReveal: boolean;\n\tshouldRevealVerticalInCenter: boolean;\n\tshouldRevealHorizontal: boolean;\n\tshouldRevealTarget: RevealTarget;\n\tshouldPushStackElementBefore: boolean;\n\tshouldPushStackElementAfter: boolean;\n\teventSource: string;\n\teventData: any;\n\thasExecutedCommands: boolean;\n\tisCursorUndo: boolean;\n\texecuteCommands: editorCommon.ICommand[];\n\tpostOperationRunnables: IPostOperationRunnable[];\n\trequestScrollDeltaLines: number;\n\tsetColumnSelectToLineNumber: number;\n\tsetColumnSelectToVisualColumn: number;\n}\n\ninterface IExecContext {\n\tselectionStartMarkers: string[];\n\tpositionMarkers: string[];\n}\n\ninterface ICommandData {\n\toperations: editorCommon.IIdentifiedSingleEditOperation[];\n\thadTrackedRange: boolean;\n}\n\ninterface ICommandsData {\n\toperations: editorCommon.IIdentifiedSingleEditOperation[];\n\thadTrackedRanges: boolean[];\n\tanyoneHadTrackedRange: boolean;\n}\n\nexport class Cursor extends EventEmitter {\n\n\tprivate editorId:number;\n\t/* protected */public configuration:editorCommon.IConfiguration;\n\tprivate model:editorCommon.IModel;\n\n\tprivate modelUnbinds:IDisposable[];\n\n\t// Typing listeners\n\tprivate typingListeners:{\n\t\t[character:string]:ITypingListener[];\n\t};\n\n\tprivate cursors: CursorCollection;\n\tprivate cursorUndoStack: ICursorCollectionState[];\n\tprivate viewModelHelper:IViewModelHelper;\n\n\tprivate _isHandling:boolean;\n\tprivate charactersTyped:string;\n\n\tprivate enableEmptySelectionClipboard:boolean;\n\n\tconstructor(editorId:number, configuration:editorCommon.IConfiguration, model:editorCommon.IModel, viewModelHelper:IViewModelHelper, enableEmptySelectionClipboard:boolean) {\n\t\tsuper([\n\t\t\teditorCommon.EventType.CursorPositionChanged,\n\t\t\teditorCommon.EventType.CursorSelectionChanged,\n\t\t\teditorCommon.EventType.CursorRevealRange,\n\t\t\teditorCommon.EventType.CursorScrollRequest\n\t\t]);\n\t\tthis.editorId = editorId;\n\t\tthis.configuration = configuration;\n\t\tthis.model = model;\n\t\tthis.viewModelHelper = viewModelHelper;\n\t\tthis.enableEmptySelectionClipboard = enableEmptySelectionClipboard;\n\t\tif (!this.viewModelHelper) {\n\t\t\tthis.viewModelHelper = {\n\t\t\t\tviewModel: this.model,\n\t\t\t\tconvertModelPositionToViewPosition: (lineNumber:number, column:number) => {\n\t\t\t\t\treturn new Position(lineNumber, column);\n\t\t\t\t},\n\t\t\t\tconvertModelRangeToViewRange: (modelRange: editorCommon.IEditorRange) => {\n\t\t\t\t\treturn modelRange;\n\t\t\t\t},\n\t\t\t\tconvertViewToModelPosition: (lineNumber:number, column:number) => {\n\t\t\t\t\treturn new Position(lineNumber, column);\n\t\t\t\t},\n\t\t\t\tconvertViewSelectionToModelSelection: (viewSelection:editorCommon.IEditorSelection) => {\n\t\t\t\t\treturn viewSelection;\n\t\t\t\t},\n\t\t\t\tvalidateViewPosition: (viewLineNumber:number, viewColumn:number, modelPosition:editorCommon.IEditorPosition) => {\n\t\t\t\t\treturn modelPosition;\n\t\t\t\t},\n\t\t\t\tvalidateViewRange: (viewStartLineNumber:number, viewStartColumn:number, viewEndLineNumber:number, viewEndColumn:number, modelRange:editorCommon.IEditorRange) => {\n\t\t\t\t\treturn modelRange;\n\t\t\t\t}\n\n\t\t\t};\n\t\t}\n\n\t\tthis.cursors = new CursorCollection(this.editorId, this.model, this.configuration, this.viewModelHelper);\n\t\tthis.cursorUndoStack = [];\n\n\t\tthis.typingListeners = {};\n\n\t\tthis._isHandling = false;\n\n\t\tthis.modelUnbinds = [];\n\t\tthis.modelUnbinds.push(this.model.addListener2(editorCommon.EventType.ModelContentChanged, (e:editorCommon.IModelContentChangedEvent) => {\n\t\t\tthis._onModelContentChanged(e);\n\t\t}));\n\t\tthis.modelUnbinds.push(this.model.addListener2(editorCommon.EventType.ModelModeChanged, (e:editorCommon.IModelModeChangedEvent) => {\n\t\t\tthis._onModelModeChanged();\n\t\t}));\n\t\tthis.modelUnbinds.push(this.model.addListener2(editorCommon.EventType.ModelModeSupportChanged, (e: editorCommon.IModeSupportChangedEvent) => {\n\t\t\t// TODO@Alex: react only if certain supports changed?\n\t\t\tthis._onModelModeChanged();\n\t\t}));\n\n\t\tthis._registerHandlers();\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.modelUnbinds = dispose(this.modelUnbinds);\n\t\tthis.model = null;\n\t\tthis.cursors.dispose();\n\t\tthis.cursors = null;\n\t\tthis.configuration.handlerDispatcher.clearHandlers();\n\t\tthis.configuration = null;\n\t\tthis.viewModelHelper = null;\n\t\tsuper.dispose();\n\t}\n\n\tpublic saveState(): editorCommon.ICursorState[] {\n\n\t\tvar selections = this.cursors.getSelections(),\n\t\t\tresult:editorCommon.ICursorState[] = [],\n\t\t\tselection: editorCommon.IEditorSelection;\n\n\t\tfor (var i = 0; i < selections.length; i++) {\n\t\t\tselection = selections[i];\n\n\t\t\tresult.push({\n\t\t\t\tinSelectionMode: !selection.isEmpty(),\n\t\t\t\tselectionStart: {\n\t\t\t\t\tlineNumber: selection.selectionStartLineNumber,\n\t\t\t\t\tcolumn: selection.selectionStartColumn,\n\t\t\t\t},\n\t\t\t\tposition: {\n\t\t\t\t\tlineNumber: selection.positionLineNumber,\n\t\t\t\t\tcolumn: selection.positionColumn,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic restoreState(states:editorCommon.ICursorState[]): void {\n\n\t\tvar desiredSelections:editorCommon.ISelection[] = [],\n\t\t\tstate:editorCommon.ICursorState;\n\n\t\tfor (var i = 0; i < states.length; i++) {\n\t\t\tstate = states[i];\n\n\t\t\tvar positionLineNumber = 1, positionColumn = 1;\n\n\t\t\t// Avoid missing properties on the literal\n\t\t\tif (state.position && state.position.lineNumber) {\n\t\t\t\tpositionLineNumber = state.position.lineNumber;\n\t\t\t}\n\t\t\tif (state.position && state.position.column) {\n\t\t\t\tpositionColumn = state.position.column;\n\t\t\t}\n\n\t\t\tvar selectionStartLineNumber = positionLineNumber, selectionStartColumn = positionColumn;\n\n\t\t\t// Avoid missing properties on the literal\n\t\t\tif (state.selectionStart && state.selectionStart.lineNumber) {\n\t\t\t\tselectionStartLineNumber = state.selectionStart.lineNumber;\n\t\t\t}\n\t\t\tif (state.selectionStart && state.selectionStart.column) {\n\t\t\t\tselectionStartColumn = state.selectionStart.column;\n\t\t\t}\n\n\t\t\tdesiredSelections.push({\n\t\t\t\tselectionStartLineNumber: selectionStartLineNumber,\n\t\t\t\tselectionStartColumn: selectionStartColumn,\n\t\t\t\tpositionLineNumber: positionLineNumber,\n\t\t\t\tpositionColumn: positionColumn\n\t\t\t});\n\t\t}\n\n\t\tthis._onHandler('restoreState', (ctx:IMultipleCursorOperationContext) => {\n\t\t\tthis.cursors.setSelections(desiredSelections);\n\t\t\treturn false;\n\t\t}, new DispatcherEvent('restoreState', null));\n\t}\n\n\tpublic setEditableRange(range:editorCommon.IRange): void {\n\t\tthis.model.setEditableRange(range);\n\t}\n\n\tpublic getEditableRange(): editorCommon.IEditorRange {\n\t\treturn this.model.getEditableRange();\n\t}\n\n\tpublic addTypingListener(character:string, callback: ITypingListener): void {\n\t\tif (!this.typingListeners.hasOwnProperty(character)) {\n\t\t\tthis.typingListeners[character] = [];\n\t\t}\n\t\tthis.typingListeners[character].push(callback);\n\t}\n\n\tpublic removeTypingListener(character:string, callback: ITypingListener): void {\n\t\tif (this.typingListeners.hasOwnProperty(character)) {\n\t\t\tvar listeners = this.typingListeners[character];\n\t\t\tfor (var i = 0; i < listeners.length; i++) {\n\t\t\t\tif (listeners[i] === callback) {\n\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _onModelModeChanged(): void {\n\t\t// the mode of this model has changed\n\t\tthis.cursors.updateMode();\n\t}\n\n\tprivate _onModelContentChanged(e:editorCommon.IModelContentChangedEvent): void {\n\t\tif (e.changeType === editorCommon.EventType.ModelContentChangedFlush) {\n\t\t\t// a model.setValue() was called\n\t\t\tthis.cursors.dispose();\n\n\t\t\tthis.cursors = new CursorCollection(this.editorId, this.model, this.configuration, this.viewModelHelper);\n\n\t\t\tthis.emitCursorPositionChanged('model', 'contentFlush');\n\t\t\tthis.emitCursorSelectionChanged('model', 'contentFlush');\n\t\t} else {\n\t\t\tif (!this._isHandling) {\n\t\t\t\tthis._onHandler('recoverSelectionFromMarkers', (ctx:IMultipleCursorOperationContext) => {\n\t\t\t\t\tvar result = this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => oneCursor.recoverSelectionFromMarkers(oneCtx));\n\t\t\t\t\tctx.shouldPushStackElementBefore = false;\n\t\t\t\t\tctx.shouldPushStackElementAfter = false;\n\t\t\t\t\treturn result;\n\t\t\t\t}, new DispatcherEvent('modelChange', null));\n\t\t\t}\n\t\t}\n\t}\n\n\t// ------ some getters/setters\n\n\tpublic getSelection(): editorCommon.IEditorSelection {\n\t\treturn this.cursors.getSelection(0);\n\t}\n\n\tpublic getSelections(): editorCommon.IEditorSelection[] {\n\t\treturn this.cursors.getSelections();\n\t}\n\n\tpublic getPosition(): editorCommon.IEditorPosition {\n\t\treturn this.cursors.getPosition(0);\n\t}\n\n\tpublic setSelections(source: string, selections: editorCommon.ISelection[]): void {\n\t\tthis._onHandler('setSelections', (ctx:IMultipleCursorOperationContext) => {\n\t\t\tctx.shouldReveal = false;\n\t\t\tthis.cursors.setSelections(selections);\n\t\t\treturn false;\n\t\t}, new DispatcherEvent(source, null));\n\t}\n\n\t// ------ auxiliary handling logic\n\n\tprivate _createAndInterpretHandlerCtx(eventSource: string, eventData: any, callback:(currentHandlerCtx:IMultipleCursorOperationContext)=>void): boolean {\n\n\t\tvar currentHandlerCtx:IMultipleCursorOperationContext = {\n\t\t\tcursorPositionChangeReason: '',\n\t\t\tshouldReveal: true,\n\t\t\tshouldRevealVerticalInCenter: false,\n\t\t\tshouldRevealHorizontal: true,\n\t\t\tshouldRevealTarget: RevealTarget.Primary,\n\t\t\teventSource: eventSource,\n\t\t\teventData: eventData,\n\t\t\texecuteCommands: [],\n\t\t\thasExecutedCommands: false,\n\t\t\tisCursorUndo: false,\n\t\t\tpostOperationRunnables: [],\n\t\t\tshouldPushStackElementBefore: false,\n\t\t\tshouldPushStackElementAfter: false,\n\t\t\trequestScrollDeltaLines: 0,\n\t\t\tsetColumnSelectToLineNumber: 0,\n\t\t\tsetColumnSelectToVisualColumn: 0\n\t\t};\n\n\t\tcallback(currentHandlerCtx);\n\n\t\tthis._interpretHandlerContext(currentHandlerCtx);\n\t\tthis.cursors.normalize();\n\n\t\treturn currentHandlerCtx.hasExecutedCommands;\n\t}\n\n\tprivate _onHandler(command:string, handler:(ctx:IMultipleCursorOperationContext)=>boolean, e:editorCommon.IDispatcherEvent): boolean {\n\n\t\tthis._isHandling = true;\n\t\tthis.charactersTyped = '';\n\n\t\tvar handled = false;\n\n\t\ttry {\n\t\t\tvar oldSelections = this.cursors.getSelections();\n\t\t\tvar oldViewSelections = this.cursors.getViewSelections();\n\t\t\tvar prevCursorsState = this.cursors.saveState();\n\n\t\t\tvar eventSource = e.getSource();\n\t\t\tvar cursorPositionChangeReason: string;\n\t\t\tvar shouldReveal: boolean;\n\t\t\tvar shouldRevealVerticalInCenter: boolean;\n\t\t\tvar shouldRevealHorizontal: boolean;\n\t\t\tvar shouldRevealTarget: RevealTarget;\n\t\t\tvar isCursorUndo: boolean;\n\t\t\tvar requestScrollDeltaLines: number;\n\n\t\t\tvar hasExecutedCommands = this._createAndInterpretHandlerCtx(eventSource, e.getData(), (currentHandlerCtx:IMultipleCursorOperationContext) => {\n\t\t\t\thandled = handler(currentHandlerCtx);\n\n\t\t\t\tcursorPositionChangeReason = currentHandlerCtx.cursorPositionChangeReason;\n\t\t\t\tshouldReveal = currentHandlerCtx.shouldReveal;\n\t\t\t\tshouldRevealTarget = currentHandlerCtx.shouldRevealTarget;\n\t\t\t\tshouldRevealVerticalInCenter = currentHandlerCtx.shouldRevealVerticalInCenter;\n\t\t\t\tshouldRevealHorizontal = currentHandlerCtx.shouldRevealHorizontal;\n\t\t\t\tisCursorUndo = currentHandlerCtx.isCursorUndo;\n\t\t\t\trequestScrollDeltaLines = currentHandlerCtx.requestScrollDeltaLines;\n\t\t\t});\n\n\t\t\tif (hasExecutedCommands) {\n\t\t\t\tthis.cursorUndoStack = [];\n\t\t\t}\n\n\t\t\t// Ping typing listeners after the model emits events & after I emit events\n\t\t\tfor (var i = 0; i < this.charactersTyped.length; i++) {\n\t\t\t\tvar chr = this.charactersTyped.charAt(i);\n\t\t\t\tif (this.typingListeners.hasOwnProperty(chr)) {\n\t\t\t\t\tvar listeners = this.typingListeners[chr].slice(0);\n\t\t\t\t\tfor (var j = 0, lenJ = listeners.length; j < lenJ; j++) {\n\t\t\t\t\t\t// Hoping that listeners understand that the view might be in an awkward state\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlisteners[j]();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tonUnexpectedError(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar newSelections = this.cursors.getSelections();\n\t\t\tvar newViewSelections = this.cursors.getViewSelections();\n\n\t\t\tvar somethingChanged = false;\n\t\t\tif (oldSelections.length !== newSelections.length) {\n\t\t\t\tsomethingChanged = true;\n\t\t\t} else {\n\t\t\t\tfor (var i = 0, len = oldSelections.length; !somethingChanged && i < len; i++) {\n\t\t\t\t\tif (!oldSelections[i].equalsSelection(newSelections[i])) {\n\t\t\t\t\t\tsomethingChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (var i = 0, len = oldViewSelections.length; !somethingChanged && i < len; i++) {\n\t\t\t\t\tif (!oldViewSelections[i].equalsSelection(newViewSelections[i])) {\n\t\t\t\t\t\tsomethingChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tif (somethingChanged) {\n\t\t\t\tif (!hasExecutedCommands && !isCursorUndo) {\n\t\t\t\t\tthis.cursorUndoStack.push(prevCursorsState);\n\t\t\t\t}\n\t\t\t\tif (this.cursorUndoStack.length > 50) {\n\t\t\t\t\tthis.cursorUndoStack = this.cursorUndoStack.splice(0, this.cursorUndoStack.length - 50);\n\t\t\t\t}\n\t\t\t\tthis.emitCursorPositionChanged(eventSource, cursorPositionChangeReason);\n\n\t\t\t\tif (shouldReveal) {\n\t\t\t\t\tthis.emitCursorRevealRange(shouldRevealTarget, shouldRevealVerticalInCenter ? editorCommon.VerticalRevealType.Center : editorCommon.VerticalRevealType.Simple, shouldRevealHorizontal);\n\t\t\t\t}\n\t\t\t\tthis.emitCursorSelectionChanged(eventSource, cursorPositionChangeReason);\n\t\t\t}\n\n\t\t\tif (requestScrollDeltaLines) {\n\t\t\t\tthis.emitCursorScrollRequest(requestScrollDeltaLines);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tonUnexpectedError(err);\n\t\t}\n\n\t\tthis._isHandling = false;\n\n\t\treturn handled;\n\t}\n\n\tprivate _interpretHandlerContext(ctx: IMultipleCursorOperationContext): void {\n\t\tif (ctx.shouldPushStackElementBefore) {\n\t\t\tthis.model.pushStackElement();\n\t\t\tctx.shouldPushStackElementBefore = false;\n\t\t}\n\n\t\tthis._columnSelectToLineNumber = ctx.setColumnSelectToLineNumber;\n\t\tthis._columnSelectToVisualColumn = ctx.setColumnSelectToVisualColumn;\n\n\t\tctx.hasExecutedCommands = this._internalExecuteCommands(ctx.executeCommands, ctx.postOperationRunnables) || ctx.hasExecutedCommands;\n\t\tctx.executeCommands = [];\n\n\t\tif (ctx.shouldPushStackElementAfter) {\n\t\t\tthis.model.pushStackElement();\n\t\t\tctx.shouldPushStackElementAfter = false;\n\t\t}\n\n\t\tvar hasPostOperationRunnables = false;\n\t\tfor (var i = 0, len = ctx.postOperationRunnables.length; i < len; i++) {\n\t\t\tif (ctx.postOperationRunnables[i]) {\n\t\t\t\thasPostOperationRunnables = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (hasPostOperationRunnables) {\n\t\t\tvar postOperationRunnables = ctx.postOperationRunnables.slice(0);\n\t\t\tctx.postOperationRunnables = [];\n\n\t\t\tthis._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => {\n\t\t\t\tif (postOperationRunnables[cursorIndex]) {\n\t\t\t\t\tpostOperationRunnables[cursorIndex](oneCtx);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tthis._interpretHandlerContext(ctx);\n\t\t}\n\t}\n\n\tprivate _interpretCommandResult(cursorState:editorCommon.IEditorSelection[]): boolean {\n\t\tif (!cursorState) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.cursors.setSelections(cursorState);\n\t\treturn true;\n\t}\n\n\tprivate _getEditOperationsFromCommand(ctx: IExecContext, majorIdentifier: number, command: editorCommon.ICommand): ICommandData {\n\t\t// This method acts as a transaction, if the command fails\n\t\t// everything it has done is ignored\n\t\tvar operations: editorCommon.IIdentifiedSingleEditOperation[] = [],\n\t\t\toperationMinor = 0;\n\n\t\tvar addEditOperation = (selection:editorCommon.IEditorRange, text:string) => {\n\t\t\tif (selection.isEmpty() && text === '') {\n\t\t\t\t// This command wants to add a no-op => no thank you\n\t\t\t\treturn;\n\t\t\t}\n\t\t\toperations.push({\n\t\t\t\tidentifier: {\n\t\t\t\t\tmajor: majorIdentifier,\n\t\t\t\t\tminor: operationMinor++\n\t\t\t\t},\n\t\t\t\trange: selection,\n\t\t\t\ttext: text,\n\t\t\t\tforceMoveMarkers: false\n\t\t\t});\n\t\t};\n\n\t\tvar hadTrackedRange = false;\n\t\tvar trackSelection = (selection: editorCommon.IEditorSelection, trackPreviousOnEmpty?:boolean ) => {\n\t\t\tvar selectionMarkerStickToPreviousCharacter:boolean,\n\t\t\t\tpositionMarkerStickToPreviousCharacter:boolean;\n\n\t\t\tif (selection.isEmpty()) {\n\t\t\t\t// Try to lock it with surrounding text\n\t\t\t\tif (typeof trackPreviousOnEmpty === 'boolean') {\n\t\t\t\t\tselectionMarkerStickToPreviousCharacter = trackPreviousOnEmpty;\n\t\t\t\t\tpositionMarkerStickToPreviousCharacter = trackPreviousOnEmpty;\n\t\t\t\t} else {\n\t\t\t\t\tvar maxLineColumn = this.model.getLineMaxColumn(selection.startLineNumber);\n\t\t\t\t\tif (selection.startColumn === maxLineColumn) {\n\t\t\t\t\t\tselectionMarkerStickToPreviousCharacter = true;\n\t\t\t\t\t\tpositionMarkerStickToPreviousCharacter = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselectionMarkerStickToPreviousCharacter = false;\n\t\t\t\t\t\tpositionMarkerStickToPreviousCharacter = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (selection.getDirection() === editorCommon.SelectionDirection.LTR) {\n\t\t\t\t\tselectionMarkerStickToPreviousCharacter = false;\n\t\t\t\t\tpositionMarkerStickToPreviousCharacter = true;\n\t\t\t\t} else {\n\t\t\t\t\tselectionMarkerStickToPreviousCharacter = true;\n\t\t\t\t\tpositionMarkerStickToPreviousCharacter = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar l = ctx.selectionStartMarkers.length;\n\t\t\tctx.selectionStartMarkers[l] = this.model._addMarker(selection.selectionStartLineNumber, selection.selectionStartColumn, selectionMarkerStickToPreviousCharacter);\n\t\t\tctx.positionMarkers[l] = this.model._addMarker(selection.positionLineNumber, selection.positionColumn, positionMarkerStickToPreviousCharacter);\n\t\t\treturn l.toString();\n\t\t};\n\n\t\tvar editOperationBuilder:editorCommon.IEditOperationBuilder = {\n\t\t\taddEditOperation: addEditOperation,\n\t\t\ttrackSelection: trackSelection\n\t\t};\n\n\t\ttry {\n\t\t\tcommand.getEditOperations(this.model, editOperationBuilder);\n\t\t} catch (e) {\n\t\t\te.friendlyMessage = nls.localize('corrupt.commands', \"Unexpected exception while executing command.\");\n\t\t\tonUnexpectedError(e);\n\t\t\treturn {\n\t\t\t\toperations: [],\n\t\t\t\thadTrackedRange: false\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\toperations: operations,\n\t\t\thadTrackedRange: hadTrackedRange\n\t\t};\n\t}\n\n\tprivate _getEditOperations(ctx: IExecContext, commands: editorCommon.ICommand[]): ICommandsData {\n\t\tvar oneResult: ICommandData;\n\t\tvar operations: editorCommon.IIdentifiedSingleEditOperation[] = [];\n\t\tvar hadTrackedRanges: boolean[] = [];\n\t\tvar anyoneHadTrackedRange: boolean;\n\n\t\tfor (var i = 0; i < commands.length; i++) {\n\t\t\tif (commands[i]) {\n\t\t\t\toneResult = this._getEditOperationsFromCommand(ctx, i, commands[i]);\n\t\t\t\toperations = operations.concat(oneResult.operations);\n\t\t\t\thadTrackedRanges[i] = oneResult.hadTrackedRange;\n\t\t\t\tanyoneHadTrackedRange = anyoneHadTrackedRange || hadTrackedRanges[i];\n\t\t\t} else {\n\t\t\t\thadTrackedRanges[i] = false;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\toperations: operations,\n\t\t\thadTrackedRanges: hadTrackedRanges,\n\t\t\tanyoneHadTrackedRange: anyoneHadTrackedRange\n\t\t};\n\t}\n\n\tprivate _getLoserCursorMap(operations: editorCommon.IIdentifiedSingleEditOperation[]): { [index: string]: boolean; } {\n\t\t// This is destructive on the array\n\t\toperations = operations.slice(0);\n\n\t\t// Sort operations with last one first\n\t\toperations.sort((a:editorCommon.IIdentifiedSingleEditOperation, b:editorCommon.IIdentifiedSingleEditOperation): number => {\n\t\t\t// Note the minus!\n\t\t\treturn -(Range.compareRangesUsingEnds(a.range, b.range));\n\t\t});\n\n\t\t// Operations can not overlap!\n\t\tvar loserCursorsMap:{ [index:string]: boolean; } = {};\n\n\t\tvar previousOp: editorCommon.IIdentifiedSingleEditOperation;\n\t\tvar currentOp: editorCommon.IIdentifiedSingleEditOperation;\n\t\tvar loserMajor: number;\n\n\t\tfor (var i = 1; i < operations.length; i++) {\n\t\t\tpreviousOp = operations[i - 1];\n\t\t\tcurrentOp = operations[i];\n\n\t\t\tif (previousOp.range.getStartPosition().isBefore(currentOp.range.getEndPosition())) {\n\n\t\t\t\tif (previousOp.identifier.major > currentOp.identifier.major) {\n\t\t\t\t\t// previousOp loses the battle\n\t\t\t\t\tloserMajor = previousOp.identifier.major;\n\t\t\t\t} else {\n\t\t\t\t\tloserMajor = currentOp.identifier.major;\n\t\t\t\t}\n\n\t\t\t\tloserCursorsMap[loserMajor.toString()] = true;\n\n\t\t\t\tfor (var j = 0; j < operations.length; j++) {\n\t\t\t\t\tif (operations[j].identifier.major === loserMajor) {\n\t\t\t\t\t\toperations.splice(j, 1);\n\t\t\t\t\t\tif (j < i) {\n\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tj--;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (i > 0) {\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn loserCursorsMap;\n\t}\n\n\tprivate _collapseDeleteCommands(rawCmds: editorCommon.ICommand[], postOperationRunnables: IPostOperationRunnable[]): boolean {\n\t\tif (rawCmds.length === 1) {\n\t\t\treturn ;\n\t\t}\n\n\t\t// Merge adjacent delete commands\n\t\tvar allAreDeleteCommands = rawCmds.every((command) => {\n\t\t\tif (!(command instanceof ReplaceCommand)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar replCmd = (<ReplaceCommand>command);\n\t\t\tif (replCmd.getText().length > 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t\tif (!allAreDeleteCommands) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar commands = <ReplaceCommand[]>rawCmds;\n\t\tvar cursors = commands.map((cmd, i) => {\n\t\t\treturn {\n\t\t\t\trange: commands[i].getRange(),\n\t\t\t\tpostOperationRunnable: postOperationRunnables[i],\n\t\t\t\torder: i\n\t\t\t};\n\t\t});\n\n\t\tcursors.sort((a, b) => {\n\t\t\treturn Range.compareRangesUsingStarts(a.range, b.range);\n\t\t});\n\n\t\tvar previousCursor = cursors[0];\n\t\tfor (var i = 1; i < cursors.length; i++) {\n\t\t\tif (previousCursor.range.endLineNumber === cursors[i].range.startLineNumber && previousCursor.range.endColumn === cursors[i].range.startColumn) {\n\t\t\t\t// Merge ranges\n\t\t\t\tvar mergedRange = new Range(\n\t\t\t\t\tpreviousCursor.range.startLineNumber,\n\t\t\t\t\tpreviousCursor.range.startColumn,\n\t\t\t\t\tcursors[i].range.endLineNumber,\n\t\t\t\t\tcursors[i].range.endColumn\n\t\t\t\t);\n\n\t\t\t\tpreviousCursor.range = mergedRange;\n\n\t\t\t\tcommands[cursors[i].order].setRange(mergedRange);\n\t\t\t\tcommands[previousCursor.order].setRange(mergedRange);\n\t\t\t} else {\n\t\t\t\t// Push previous cursor\n\t\t\t\tpreviousCursor = cursors[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _internalExecuteCommands(commands: editorCommon.ICommand[], postOperationRunnables: IPostOperationRunnable[]): boolean {\n\t\tvar ctx:IExecContext = {\n\t\t\tselectionStartMarkers: [],\n\t\t\tpositionMarkers: []\n\t\t};\n\n\t\tthis._collapseDeleteCommands(commands, postOperationRunnables);\n\n\t\tvar r = this._innerExecuteCommands(ctx, commands, postOperationRunnables);\n\t\tfor (var i = 0; i < ctx.selectionStartMarkers.length; i++) {\n\t\t\tthis.model._removeMarker(ctx.selectionStartMarkers[i]);\n\t\t\tthis.model._removeMarker(ctx.positionMarkers[i]);\n\t\t}\n\t\treturn r;\n\t}\n\n\tprivate _arrayIsEmpty(commands: editorCommon.ICommand[]): boolean {\n\t\tvar i:number,\n\t\t\tlen:number;\n\n\t\tfor (i = 0, len = commands.length; i < len; i++) {\n\t\t\tif (commands[i]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate _innerExecuteCommands(ctx: IExecContext, commands: editorCommon.ICommand[], postOperationRunnables: IPostOperationRunnable[]): boolean {\n\n\t\tif (this.configuration.editor.readOnly) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this._arrayIsEmpty(commands)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar selectionsBefore = this.cursors.getSelections();\n\n\t\tvar commandsData = this._getEditOperations(ctx, commands);\n\t\tif (commandsData.operations.length === 0 && !commandsData.anyoneHadTrackedRange) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar rawOperations = commandsData.operations;\n\n\t\tvar editableRange = this.model.getEditableRange();\n\t\tvar editableRangeStart = editableRange.getStartPosition();\n\t\tvar editableRangeEnd = editableRange.getEndPosition();\n\t\tfor (var i = 0; i < rawOperations.length; i++) {\n\t\t\tvar operationRange = rawOperations[i].range;\n\t\t\tif (!editableRangeStart.isBeforeOrEqual(operationRange.getStartPosition()) || !operationRange.getEndPosition().isBeforeOrEqual(editableRangeEnd)) {\n\t\t\t\t// These commands are outside of the editable range\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tvar loserCursorsMap = this._getLoserCursorMap(rawOperations);\n\t\tif (loserCursorsMap.hasOwnProperty('0')) {\n\t\t\t// These commands are very messed up\n\t\t\tconsole.warn('Ignoring commands');\n\t\t\treturn false;\n\t\t}\n\n\t\t// Remove operations belonging to losing cursors\n\t\tvar filteredOperations: editorCommon.IIdentifiedSingleEditOperation[] = [];\n\t\tfor (var i = 0; i < rawOperations.length; i++) {\n\t\t\tif (!loserCursorsMap.hasOwnProperty(rawOperations[i].identifier.major.toString())) {\n\t\t\t\tfilteredOperations.push(rawOperations[i]);\n\t\t\t}\n\t\t}\n\n\t\tvar selectionsAfter = this.model.pushEditOperations(selectionsBefore, filteredOperations, (inverseEditOperations:editorCommon.IIdentifiedSingleEditOperation[]): editorCommon.IEditorSelection[] => {\n\t\t\tvar groupedInverseEditOperations:editorCommon.IIdentifiedSingleEditOperation[][] = [];\n\t\t\tfor (var i = 0; i < selectionsBefore.length; i++) {\n\t\t\t\tgroupedInverseEditOperations[i] = [];\n\t\t\t}\n\t\t\tfor (var i = 0; i < inverseEditOperations.length; i++) {\n\t\t\t\tvar op = inverseEditOperations[i];\n\t\t\t\tgroupedInverseEditOperations[op.identifier.major].push(op);\n\t\t\t}\n\t\t\tvar minorBasedSorter = (a:editorCommon.IIdentifiedSingleEditOperation, b:editorCommon.IIdentifiedSingleEditOperation) => {\n\t\t\t\treturn a.identifier.minor - b.identifier.minor;\n\t\t\t};\n\t\t\tvar cursorSelections: editorCommon.IEditorSelection[] = [];\n\t\t\tfor (var i = 0; i < selectionsBefore.length; i++) {\n\t\t\t\tif (groupedInverseEditOperations[i].length > 0 || commandsData.hadTrackedRanges[i]) {\n\t\t\t\t\tgroupedInverseEditOperations[i].sort(minorBasedSorter);\n\t\t\t\t\tcursorSelections[i] = commands[i].computeCursorState(this.model, {\n\t\t\t\t\t\tgetInverseEditOperations: () => {\n\t\t\t\t\t\t\treturn groupedInverseEditOperations[i];\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tgetTrackedSelection: (id: string) => {\n\t\t\t\t\t\t\tvar idx = parseInt(id, 10);\n\t\t\t\t\t\t\tvar selectionStartMarker = this.model._getMarker(ctx.selectionStartMarkers[idx]);\n\t\t\t\t\t\t\tvar positionMarker = this.model._getMarker(ctx.positionMarkers[idx]);\n\t\t\t\t\t\t\treturn new Selection(selectionStartMarker.lineNumber, selectionStartMarker.column, positionMarker.lineNumber, positionMarker.column);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcursorSelections[i] = selectionsBefore[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cursorSelections;\n\t\t});\n\n\t\t// Extract losing cursors\n\t\tvar losingCursorIndex: string;\n\t\tvar losingCursors: number[] = [];\n\t\tfor (losingCursorIndex in loserCursorsMap) {\n\t\t\tif (loserCursorsMap.hasOwnProperty(losingCursorIndex)) {\n\t\t\t\tlosingCursors.push(parseInt(losingCursorIndex, 10));\n\t\t\t}\n\t\t}\n\n\t\t// Sort losing cursors descending\n\t\tlosingCursors.sort((a:number, b:number): number => {\n\t\t\treturn b - a;\n\t\t});\n\n\t\t// Remove losing cursors\n\t\tfor (var i = 0; i < losingCursors.length; i++) {\n\t\t\tselectionsAfter.splice(losingCursors[i], 1);\n\t\t\tpostOperationRunnables.splice(losingCursors[i], 1);\n\t\t}\n\n\t\treturn this._interpretCommandResult(selectionsAfter);\n\t}\n\n\n\t// -----------------------------------------------------------------------------------------------------------\n\t// ----- emitting events\n\n\tprivate emitCursorPositionChanged(source:string, reason:string): void {\n\t\tvar positions = this.cursors.getPositions();\n\t\tvar primaryPosition = positions[0];\n\t\tvar secondaryPositions = positions.slice(1);\n\n\t\tvar viewPositions = this.cursors.getViewPositions();\n\t\tvar primaryViewPosition = viewPositions[0];\n\t\tvar secondaryViewPositions = viewPositions.slice(1);\n\n\t\tvar isInEditableRange:boolean = true;\n\t\tif (this.model.hasEditableRange()) {\n\t\t\tvar editableRange = this.model.getEditableRange();\n\t\t\tif (!editableRange.containsPosition(primaryPosition)) {\n\t\t\t\tisInEditableRange = false;\n\t\t\t}\n\t\t}\n\t\tvar e:editorCommon.ICursorPositionChangedEvent = {\n\t\t\tposition: primaryPosition,\n\t\t\tviewPosition: primaryViewPosition,\n\t\t\tsecondaryPositions: secondaryPositions,\n\t\t\tsecondaryViewPositions: secondaryViewPositions,\n\t\t\treason: reason,\n\t\t\tsource: source,\n\t\t\tisInEditableRange: isInEditableRange\n\t\t};\n\t\tthis.emit(editorCommon.EventType.CursorPositionChanged, e);\n\t}\n\n\tprivate emitCursorSelectionChanged(source:string, reason:string): void {\n\t\tlet selections = this.cursors.getSelections();\n\t\tlet primarySelection = selections[0];\n\t\tlet secondarySelections = selections.slice(1);\n\n\t\tlet viewSelections = this.cursors.getViewSelections();\n\t\tlet primaryViewSelection = viewSelections[0];\n\t\tlet secondaryViewSelections = viewSelections.slice(1);\n\n\t\tlet e:editorCommon.ICursorSelectionChangedEvent = {\n\t\t\tselection: primarySelection,\n\t\t\tviewSelection: primaryViewSelection,\n\t\t\tsecondarySelections: secondarySelections,\n\t\t\tsecondaryViewSelections: secondaryViewSelections,\n\t\t\tsource: source,\n\t\t\treason: reason\n\t\t};\n\t\tthis.emit(editorCommon.EventType.CursorSelectionChanged, e);\n\t}\n\n\tprivate emitCursorScrollRequest(lineScrollOffset: number): void {\n\t\tvar e:editorCommon.ICursorScrollRequestEvent = {\n\t\t\tdeltaLines: lineScrollOffset\n\t\t};\n\t\tthis.emit(editorCommon.EventType.CursorScrollRequest, e);\n\t}\n\n\tprivate emitCursorRevealRange(revealTarget: RevealTarget, verticalType: editorCommon.VerticalRevealType, revealHorizontal: boolean): void {\n\t\tvar positions = this.cursors.getPositions();\n\t\tvar viewPositions = this.cursors.getViewPositions();\n\n\t\tvar position = positions[0];\n\t\tvar viewPosition = viewPositions[0];\n\n\t\tif (revealTarget === RevealTarget.TopMost) {\n\t\t\tfor (var i = 1; i < positions.length; i++) {\n\t\t\t\tif (positions[i].isBefore(position)) {\n\t\t\t\t\tposition = positions[i];\n\t\t\t\t\tviewPosition = viewPositions[i];\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (revealTarget === RevealTarget.BottomMost) {\n\t\t\tfor (var i = 1; i < positions.length; i++) {\n\t\t\t\tif (position.isBeforeOrEqual(positions[i])) {\n\t\t\t\t\tposition = positions[i];\n\t\t\t\t\tviewPosition = viewPositions[i];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (positions.length > 1) {\n\t\t\t\t// no revealing!\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n\t\tvar viewRange = new Range(viewPosition.lineNumber, viewPosition.column, viewPosition.lineNumber, viewPosition.column);\n\t\tvar e:editorCommon.ICursorRevealRangeEvent = {\n\t\t\trange: range,\n\t\t\tviewRange: viewRange,\n\t\t\tverticalType: verticalType,\n\t\t\trevealHorizontal: revealHorizontal\n\t\t};\n\t\tthis.emit(editorCommon.EventType.CursorRevealRange, e);\n\t}\n\n\t// -----------------------------------------------------------------------------------------------------------\n\t// ----- handlers beyond this point\n\n\tprivate _registerHandlers(): void {\n\t\tlet H = editorCommon.Handler;\n\t\tlet handlersMap:{\n\t\t\t[key:string]:(ctx:IMultipleCursorOperationContext)=>boolean;\n\t\t} = {};\n\n\t\thandlersMap[H.JumpToBracket] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._jumpToBracket(ctx);\n\n\t\thandlersMap[H.MoveTo] = \t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveTo(false, ctx);\n\t\thandlersMap[H.MoveToSelect] = \t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveTo(true, ctx);\n\t\thandlersMap[H.ColumnSelect] = \t\t\t\t(ctx:IMultipleCursorOperationContext) => this._columnSelectMouse(ctx);\n\t\thandlersMap[H.AddCursorUp] = \t\t\t\t(ctx:IMultipleCursorOperationContext) => this._addCursorUp(ctx);\n\t\thandlersMap[H.AddCursorDown] = \t\t\t\t(ctx:IMultipleCursorOperationContext) => this._addCursorDown(ctx);\n\t\thandlersMap[H.CreateCursor] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._createCursor(ctx);\n\t\thandlersMap[H.LastCursorMoveToSelect] =\t\t(ctx:IMultipleCursorOperationContext) => this._lastCursorMoveTo(ctx);\n\n\n\t\thandlersMap[H.CursorLeft] = \t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveLeft(false, ctx);\n\t\thandlersMap[H.CursorLeftSelect] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveLeft(true, ctx);\n\n\t\thandlersMap[H.CursorWordLeft] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveWordLeft(false, WordNavigationType.WordStart, ctx);\n\t\thandlersMap[H.CursorWordStartLeft] =\t\t(ctx:IMultipleCursorOperationContext) => this._moveWordLeft(false, WordNavigationType.WordStart, ctx);\n\t\thandlersMap[H.CursorWordEndLeft] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveWordLeft(false, WordNavigationType.WordEnd, ctx);\n\n\t\thandlersMap[H.CursorWordLeftSelect] =\t\t(ctx:IMultipleCursorOperationContext) => this._moveWordLeft(true, WordNavigationType.WordStart, ctx);\n\t\thandlersMap[H.CursorWordStartLeftSelect] =\t(ctx:IMultipleCursorOperationContext) => this._moveWordLeft(true, WordNavigationType.WordStart, ctx);\n\t\thandlersMap[H.CursorWordEndLeftSelect] =\t(ctx:IMultipleCursorOperationContext) => this._moveWordLeft(true, WordNavigationType.WordEnd, ctx);\n\n\t\thandlersMap[H.CursorRight] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveRight(false, ctx);\n\t\thandlersMap[H.CursorRightSelect] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveRight(true, ctx);\n\n\t\thandlersMap[H.CursorWordRight] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveWordRight(false, WordNavigationType.WordEnd, ctx);\n\t\thandlersMap[H.CursorWordStartRight] =\t\t(ctx:IMultipleCursorOperationContext) => this._moveWordRight(false, WordNavigationType.WordStart, ctx);\n\t\thandlersMap[H.CursorWordEndRight] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveWordRight(false, WordNavigationType.WordEnd, ctx);\n\n\t\thandlersMap[H.CursorWordRightSelect] =\t\t(ctx:IMultipleCursorOperationContext) => this._moveWordRight(true, WordNavigationType.WordEnd, ctx);\n\t\thandlersMap[H.CursorWordStartRightSelect] =\t(ctx:IMultipleCursorOperationContext) => this._moveWordRight(true, WordNavigationType.WordStart, ctx);\n\t\thandlersMap[H.CursorWordEndRightSelect] =\t(ctx:IMultipleCursorOperationContext) => this._moveWordRight(true, WordNavigationType.WordEnd, ctx);\n\n\t\thandlersMap[H.CursorUp] =\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveUp(false, false, ctx);\n\t\thandlersMap[H.CursorUpSelect] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveUp(true, false, ctx);\n\t\thandlersMap[H.CursorDown] =\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveDown(false, false, ctx);\n\t\thandlersMap[H.CursorDownSelect] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveDown(true, false, ctx);\n\n\t\thandlersMap[H.CursorPageUp] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveUp(false, true, ctx);\n\t\thandlersMap[H.CursorPageUpSelect] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveUp(true, true, ctx);\n\t\thandlersMap[H.CursorPageDown] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveDown(false, true, ctx);\n\t\thandlersMap[H.CursorPageDownSelect] =\t\t(ctx:IMultipleCursorOperationContext) => this._moveDown(true, true, ctx);\n\n\t\thandlersMap[H.CursorHome] =\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveToBeginningOfLine(false, ctx);\n\t\thandlersMap[H.CursorHomeSelect] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveToBeginningOfLine(true, ctx);\n\n\t\thandlersMap[H.CursorEnd] =\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveToEndOfLine(false, ctx);\n\t\thandlersMap[H.CursorEndSelect] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveToEndOfLine(true, ctx);\n\n\t\thandlersMap[H.CursorTop] =\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveToBeginningOfBuffer(false, ctx);\n\t\thandlersMap[H.CursorTopSelect] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveToBeginningOfBuffer(true, ctx);\n\t\thandlersMap[H.CursorBottom] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveToEndOfBuffer(false, ctx);\n\t\thandlersMap[H.CursorBottomSelect] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._moveToEndOfBuffer(true, ctx);\n\n\t\thandlersMap[H.CursorColumnSelectLeft] =\t\t(ctx:IMultipleCursorOperationContext) => this._columnSelectLeft(ctx);\n\t\thandlersMap[H.CursorColumnSelectRight] =\t(ctx:IMultipleCursorOperationContext) => this._columnSelectRight(ctx);\n\t\thandlersMap[H.CursorColumnSelectUp] =\t\t(ctx:IMultipleCursorOperationContext) => this._columnSelectUp(false, ctx);\n\t\thandlersMap[H.CursorColumnSelectPageUp] =\t(ctx:IMultipleCursorOperationContext) => this._columnSelectUp(true, ctx);\n\t\thandlersMap[H.CursorColumnSelectDown] =\t\t(ctx:IMultipleCursorOperationContext) => this._columnSelectDown(false, ctx);\n\t\thandlersMap[H.CursorColumnSelectPageDown] =\t(ctx:IMultipleCursorOperationContext) => this._columnSelectDown(true, ctx);\n\n\t\thandlersMap[H.SelectAll] =\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._selectAll(ctx);\n\n\t\thandlersMap[H.LineSelect] = \t\t\t\t(ctx:IMultipleCursorOperationContext) => this._line(false, ctx);\n\t\thandlersMap[H.LineSelectDrag] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._line(true, ctx);\n\t\thandlersMap[H.LastCursorLineSelect] = \t\t(ctx:IMultipleCursorOperationContext) => this._lastCursorLine(false, ctx);\n\t\thandlersMap[H.LastCursorLineSelectDrag] = \t(ctx:IMultipleCursorOperationContext) => this._lastCursorLine(true, ctx);\n\n\t\thandlersMap[H.LineInsertBefore] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._lineInsertBefore(ctx);\n\t\thandlersMap[H.LineInsertAfter] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._lineInsertAfter(ctx);\n\t\thandlersMap[H.LineBreakInsert] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._lineBreakInsert(ctx);\n\n\t\thandlersMap[H.WordSelect] = \t\t\t\t(ctx:IMultipleCursorOperationContext) => this._word(false, ctx);\n\t\thandlersMap[H.WordSelectDrag] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._word(true, ctx);\n\t\thandlersMap[H.LastCursorWordSelect] =\t\t(ctx:IMultipleCursorOperationContext) => this._lastCursorWord(ctx);\n\t\thandlersMap[H.CancelSelection] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._cancelSelection(ctx);\n\t\thandlersMap[H.RemoveSecondaryCursors] =\t\t(ctx:IMultipleCursorOperationContext) => this._removeSecondaryCursors(ctx);\n\n\t\thandlersMap[H.Type] =\t\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._type(ctx);\n\t\thandlersMap[H.ReplacePreviousChar] =\t\t(ctx:IMultipleCursorOperationContext) => this._replacePreviousChar(ctx);\n\t\thandlersMap[H.Tab] =\t\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._tab(ctx);\n\t\thandlersMap[H.Indent] =\t\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._indent(ctx);\n\t\thandlersMap[H.Outdent] =\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._outdent(ctx);\n\t\thandlersMap[H.Paste] =\t\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._paste(ctx);\n\n\t\thandlersMap[H.ScrollLineUp] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._scrollUp(false, ctx);\n\t\thandlersMap[H.ScrollLineDown] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._scrollDown(false, ctx);\n\t\thandlersMap[H.ScrollPageUp] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._scrollUp(true, ctx);\n\t\thandlersMap[H.ScrollPageDown] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._scrollDown(true, ctx);\n\n\t\thandlersMap[H.DeleteLeft] =\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._deleteLeft(ctx);\n\n\t\thandlersMap[H.DeleteWordLeft] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._deleteWordLeft(true, WordNavigationType.WordStart, ctx);\n\t\thandlersMap[H.DeleteWordStartLeft] =\t\t(ctx:IMultipleCursorOperationContext) => this._deleteWordLeft(false, WordNavigationType.WordStart, ctx);\n\t\thandlersMap[H.DeleteWordEndLeft] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._deleteWordLeft(false, WordNavigationType.WordEnd, ctx);\n\n\t\thandlersMap[H.DeleteRight] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._deleteRight(ctx);\n\n\t\thandlersMap[H.DeleteWordRight] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._deleteWordRight(true, WordNavigationType.WordEnd, ctx);\n\t\thandlersMap[H.DeleteWordStartRight] =\t\t(ctx:IMultipleCursorOperationContext) => this._deleteWordRight(false, WordNavigationType.WordStart, ctx);\n\t\thandlersMap[H.DeleteWordEndRight] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._deleteWordRight(false, WordNavigationType.WordEnd, ctx);\n\n\t\thandlersMap[H.DeleteAllLeft] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._deleteAllLeft(ctx);\n\t\thandlersMap[H.DeleteAllRight] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._deleteAllRight(ctx);\n\t\thandlersMap[H.Cut] =\t\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._cut(ctx);\n\n\t\thandlersMap[H.ExpandLineSelection] =\t\t(ctx:IMultipleCursorOperationContext) => this._expandLineSelection(ctx);\n\n\t\thandlersMap[H.Undo] =\t\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._undo(ctx);\n\t\thandlersMap[H.CursorUndo] =\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._cursorUndo(ctx);\n\t\thandlersMap[H.Redo] =\t\t\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._redo(ctx);\n\n\t\thandlersMap[H.ExecuteCommand] =\t\t\t\t(ctx:IMultipleCursorOperationContext) => this._externalExecuteCommand(ctx);\n\t\thandlersMap[H.ExecuteCommands] =\t\t\t(ctx:IMultipleCursorOperationContext) => this._externalExecuteCommands(ctx);\n\n\t\tlet createHandler = (handlerId:string, handlerExec:(ctx:IMultipleCursorOperationContext)=>boolean) => {\n\t\t\treturn (e:editorCommon.IDispatcherEvent) => this._onHandler(handlerId, handlerExec, e);\n\t\t};\n\n\t\tlet keys = Object.keys(handlersMap);\n\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\tlet handler = keys[i];\n\t\t\tthis.configuration.handlerDispatcher.setHandler(handler, createHandler(handler, handlersMap[handler]));\n\t\t}\n\t}\n\n\tprivate _invokeForAllSorted(ctx: IMultipleCursorOperationContext, callable: (cursorIndex: number, cursor: OneCursor, ctx: IOneCursorOperationContext) => boolean, pushStackElementBefore: boolean = true, pushStackElementAfter: boolean = true): boolean {\n\t\treturn this._doInvokeForAll(ctx, true, callable, pushStackElementBefore, pushStackElementAfter);\n\t}\n\n\tprivate _invokeForAll(ctx: IMultipleCursorOperationContext, callable: (cursorIndex: number, cursor: OneCursor, ctx: IOneCursorOperationContext) => boolean, pushStackElementBefore: boolean = true, pushStackElementAfter: boolean = true): boolean {\n\t\treturn this._doInvokeForAll(ctx, false, callable, pushStackElementBefore, pushStackElementAfter);\n\t}\n\n\tprivate _doInvokeForAll(ctx: IMultipleCursorOperationContext, sorted: boolean, callable: (cursorIndex: number, cursor: OneCursor, ctx: IOneCursorOperationContext) => boolean, pushStackElementBefore: boolean = true, pushStackElementAfter: boolean = true): boolean {\n\t\tlet result = false;\n\t\tlet cursors = this.cursors.getAll();\n\n\t\tif (sorted) {\n\t\t\tcursors = cursors.sort((a, b) => {\n\t\t\t\treturn Range.compareRangesUsingStarts(a.getSelection(), b.getSelection());\n\t\t\t});\n\t\t}\n\n\t\tlet context:IOneCursorOperationContext;\n\n\t\tctx.shouldPushStackElementBefore = pushStackElementBefore;\n\t\tctx.shouldPushStackElementAfter = pushStackElementAfter;\n\n\t\tfor (let i = 0; i < cursors.length; i++) {\n\t\t\tcontext = {\n\t\t\t\tcursorPositionChangeReason: '',\n\t\t\t\tshouldReveal: true,\n\t\t\t\tshouldRevealVerticalInCenter: false,\n\t\t\t\tshouldRevealHorizontal: true,\n\t\t\t\texecuteCommand: null,\n\t\t\t\tpostOperationRunnable: null,\n\t\t\t\tshouldPushStackElementBefore: false,\n\t\t\t\tshouldPushStackElementAfter: false,\n\t\t\t\trequestScrollDeltaLines: 0\n\t\t\t};\n\n\t\t\tresult = callable(i, cursors[i], context) || result;\n\n\t\t\tif (i === 0) {\n\t\t\t\tctx.cursorPositionChangeReason = context.cursorPositionChangeReason;\n\t\t\t\tctx.shouldRevealHorizontal = context.shouldRevealHorizontal;\n\t\t\t\tctx.shouldReveal = context.shouldReveal;\n\t\t\t\tctx.shouldRevealVerticalInCenter = context.shouldRevealVerticalInCenter;\n\t\t\t\tctx.requestScrollDeltaLines = context.requestScrollDeltaLines;\n\t\t\t}\n\n\t\t\tctx.shouldPushStackElementBefore = ctx.shouldPushStackElementBefore || context.shouldPushStackElementBefore;\n\t\t\tctx.shouldPushStackElementAfter = ctx.shouldPushStackElementAfter || context.shouldPushStackElementAfter;\n\n\t\t\tctx.executeCommands[i] = context.executeCommand;\n\t\t\tctx.postOperationRunnables[i] = context.postOperationRunnable;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate _jumpToBracket(ctx: IMultipleCursorOperationContext): boolean {\n\t\tthis.cursors.killSecondaryCursors();\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.jumpToBracket(oneCursor, oneCtx));\n\t}\n\n\tprivate _moveTo(inSelectionMode:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\tthis.cursors.killSecondaryCursors();\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveTo(oneCursor, inSelectionMode, ctx.eventData.position, ctx.eventData.viewPosition, ctx.eventSource, oneCtx));\n\t}\n\n\tprivate _columnSelectToLineNumber: number = 0;\n\tprivate _getColumnSelectToLineNumber(): number {\n\t\tif (!this._columnSelectToLineNumber) {\n\t\t\tlet primaryCursor = this.cursors.getAll()[0];\n\t\t\tlet primaryPos = primaryCursor.getViewPosition();\n\t\t\treturn primaryPos.lineNumber;\n\t\t}\n\t\treturn this._columnSelectToLineNumber;\n\t}\n\n\tprivate _columnSelectToVisualColumn: number = 0;\n\tprivate _getColumnSelectToVisualColumn(): number {\n\t\tif (!this._columnSelectToVisualColumn) {\n\t\t\tlet primaryCursor = this.cursors.getAll()[0];\n\t\t\tlet primaryPos = primaryCursor.getViewPosition();\n\t\t\treturn primaryCursor.getViewVisibleColumnFromColumn(primaryPos.lineNumber, primaryPos.column);\n\t\t}\n\t\treturn this._columnSelectToVisualColumn;\n\t}\n\n\tprivate _columnSelectMouse(ctx: IMultipleCursorOperationContext): boolean {\n\t\tlet cursors = this.cursors.getAll();\n\t\tlet result = OneCursorOp.columnSelectMouse(cursors[0], ctx.eventData.position, ctx.eventData.viewPosition,  ctx.eventData.mouseColumn - 1);\n\n\t\tctx.shouldRevealTarget = (result.reversed ? RevealTarget.TopMost : RevealTarget.BottomMost);\n\t\tctx.shouldReveal = true;\n\t\tctx.setColumnSelectToLineNumber = result.toLineNumber;\n\t\tctx.setColumnSelectToVisualColumn = result.toVisualColumn;\n\n\t\tthis.cursors.setSelections(result.selections, result.viewSelections);\n\t\treturn true;\n\t}\n\n\tprivate _columnSelectOp(ctx: IMultipleCursorOperationContext, op:(cursor:OneCursor, toViewLineNumber:number, toViewVisualColumn: number) => IColumnSelectResult): boolean {\n\t\tlet primary = this.cursors.getAll()[0];\n\t\tlet result = op(primary, this._getColumnSelectToLineNumber(), this._getColumnSelectToVisualColumn());\n\n\t\tctx.shouldRevealTarget = (result.reversed ? RevealTarget.TopMost : RevealTarget.BottomMost);\n\t\tctx.shouldReveal = true;\n\t\tctx.setColumnSelectToLineNumber = result.toLineNumber;\n\t\tctx.setColumnSelectToVisualColumn = result.toVisualColumn;\n\n\t\tthis.cursors.setSelections(result.selections, result.viewSelections);\n\t\treturn true;\n\t}\n\n\tprivate _columnSelectLeft(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._columnSelectOp(ctx, (cursor, toViewLineNumber, toViewVisualColumn) => OneCursorOp.columnSelectLeft(cursor, toViewLineNumber, toViewVisualColumn));\n\t}\n\n\tprivate _columnSelectRight(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._columnSelectOp(ctx, (cursor, toViewLineNumber, toViewVisualColumn) => OneCursorOp.columnSelectRight(cursor, toViewLineNumber, toViewVisualColumn));\n\t}\n\n\tprivate _columnSelectUp(isPaged:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._columnSelectOp(ctx, (cursor, toViewLineNumber, toViewVisualColumn) => OneCursorOp.columnSelectUp(isPaged, cursor, toViewLineNumber, toViewVisualColumn));\n\t}\n\n\tprivate _columnSelectDown(isPaged:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._columnSelectOp(ctx, (cursor, toViewLineNumber, toViewVisualColumn) => OneCursorOp.columnSelectDown(isPaged, cursor, toViewLineNumber, toViewVisualColumn));\n\t}\n\n\tprivate _createCursor(ctx: IMultipleCursorOperationContext): boolean {\n\t\tif (this.configuration.editor.readOnly || this.model.hasEditableRange()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.cursors.addSecondaryCursor({\n\t\t\tselectionStartLineNumber: 1,\n\t\t\tselectionStartColumn: 1,\n\t\t\tpositionLineNumber: 1,\n\t\t\tpositionColumn: 1\n\t\t});\n\n\t\t// Manually move to get events\n\t\tvar lastAddedCursor = this.cursors.getLastAddedCursor();\n\t\tthis._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => {\n\t\t\tif (oneCursor === lastAddedCursor) {\n\t\t\t\tif (ctx.eventData.wholeLine) {\n\t\t\t\t\treturn OneCursorOp.line(oneCursor, false, ctx.eventData.position, ctx.eventData.viewPosition, oneCtx);\n\t\t\t\t} else {\n\t\t\t\t\treturn OneCursorOp.moveTo(oneCursor, false, ctx.eventData.position, ctx.eventData.viewPosition, ctx.eventSource, oneCtx);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tctx.shouldReveal = false;\n\t\tctx.shouldRevealHorizontal = false;\n\n\t\treturn true;\n\t}\n\n\tprivate _lastCursorMoveTo(ctx: IMultipleCursorOperationContext): boolean {\n\t\tif (this.configuration.editor.readOnly || this.model.hasEditableRange()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar lastAddedCursor = this.cursors.getLastAddedCursor();\n\t\tthis._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => {\n\t\t\tif (oneCursor === lastAddedCursor) {\n\t\t\t\treturn OneCursorOp.moveTo(oneCursor,true, ctx.eventData.position, ctx.eventData.viewPosition, ctx.eventSource, oneCtx);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tctx.shouldReveal = false;\n\t\tctx.shouldRevealHorizontal = false;\n\n\t\treturn true;\n\t}\n\n\tprivate _addCursorUp(ctx: IMultipleCursorOperationContext): boolean {\n\t\tif (this.configuration.editor.readOnly) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar originalCnt = this.cursors.getSelections().length;\n\t\tthis.cursors.duplicateCursors();\n\t\tctx.shouldRevealTarget = RevealTarget.TopMost;\n\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => {\n\t\t\tif (cursorIndex >= originalCnt) {\n\t\t\t\treturn OneCursorOp.translateUp(oneCursor, oneCtx);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tprivate _addCursorDown(ctx: IMultipleCursorOperationContext): boolean {\n\t\tif (this.configuration.editor.readOnly) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar originalCnt = this.cursors.getSelections().length;\n\t\tthis.cursors.duplicateCursors();\n\t\tctx.shouldRevealTarget = RevealTarget.BottomMost;\n\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => {\n\t\t\tif (cursorIndex >= originalCnt) {\n\t\t\t\treturn OneCursorOp.translateDown(oneCursor, oneCtx);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tprivate _moveLeft(inSelectionMode:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveLeft(oneCursor, inSelectionMode, oneCtx));\n\t}\n\n\tprivate _moveWordLeft(inSelectionMode:boolean, wordNavigationType:WordNavigationType, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveWordLeft(oneCursor, inSelectionMode, wordNavigationType, oneCtx));\n\t}\n\n\tprivate _moveRight(inSelectionMode:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveRight(oneCursor, inSelectionMode, oneCtx));\n\t}\n\n\tprivate _moveWordRight(inSelectionMode:boolean, wordNavigationType:WordNavigationType, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveWordRight(oneCursor, inSelectionMode, wordNavigationType, oneCtx));\n\t}\n\n\tprivate _moveDown(inSelectionMode:boolean, isPaged:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveDown(oneCursor, inSelectionMode, isPaged, oneCtx));\n\t}\n\n\tprivate _moveUp(inSelectionMode:boolean, isPaged:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveUp(oneCursor, inSelectionMode, isPaged, oneCtx));\n\t}\n\n\tprivate _moveToBeginningOfLine(inSelectionMode:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveToBeginningOfLine(oneCursor, inSelectionMode, oneCtx));\n\t}\n\n\tprivate _moveToEndOfLine(inSelectionMode:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveToEndOfLine(oneCursor, inSelectionMode, oneCtx));\n\t}\n\n\tprivate _moveToBeginningOfBuffer(inSelectionMode:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveToBeginningOfBuffer(oneCursor, inSelectionMode, oneCtx));\n\t}\n\n\tprivate _moveToEndOfBuffer(inSelectionMode:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.moveToEndOfBuffer(oneCursor, inSelectionMode, oneCtx));\n\t}\n\n\tprivate _selectAll(ctx: IMultipleCursorOperationContext): boolean {\n\t\tthis.cursors.killSecondaryCursors();\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.selectAll(oneCursor, oneCtx));\n\t}\n\n\tprivate _line(inSelectionMode:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\tthis.cursors.killSecondaryCursors();\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.line(oneCursor, inSelectionMode, ctx.eventData.position, ctx.eventData.viewPosition, oneCtx));\n\t}\n\n\tprivate _lastCursorLine(inSelectionMode:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\tif (this.configuration.editor.readOnly || this.model.hasEditableRange()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar lastAddedCursor = this.cursors.getLastAddedCursor();\n\t\tthis._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => {\n\t\t\tif (oneCursor === lastAddedCursor) {\n\t\t\t\treturn OneCursorOp.line(oneCursor, inSelectionMode, ctx.eventData.position, ctx.eventData.viewPosition, oneCtx);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tctx.shouldReveal = false;\n\t\tctx.shouldRevealHorizontal = false;\n\n\t\treturn true;\n\t}\n\n\tprivate _expandLineSelection(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.expandLineSelection(oneCursor, oneCtx));\n\t}\n\n\tprivate _lineInsertBefore(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.lineInsertBefore(oneCursor, oneCtx));\n\t}\n\n\tprivate _lineInsertAfter(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.lineInsertAfter(oneCursor, oneCtx));\n\t}\n\n\tprivate _lineBreakInsert(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.lineBreakInsert(oneCursor, oneCtx));\n\t}\n\n\tprivate _word(inSelectionMode:boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\tthis.cursors.killSecondaryCursors();\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.word(oneCursor, inSelectionMode, ctx.eventData.position, oneCtx));\n\t}\n\n\tprivate _lastCursorWord(ctx: IMultipleCursorOperationContext): boolean {\n\t\tif (this.configuration.editor.readOnly || this.model.hasEditableRange()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar lastAddedCursor = this.cursors.getLastAddedCursor();\n\t\tthis._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => {\n\t\t\tif (oneCursor === lastAddedCursor) {\n\t\t\t\treturn OneCursorOp.word(oneCursor, true, ctx.eventData.position, oneCtx);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tctx.shouldReveal = false;\n\t\tctx.shouldRevealHorizontal = false;\n\n\t\treturn true;\n\t}\n\n\tprivate _removeSecondaryCursors(ctx: IMultipleCursorOperationContext): boolean {\n\t\tthis.cursors.killSecondaryCursors();\n\t\treturn true;\n\t}\n\n\tprivate _cancelSelection(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.cancelSelection(oneCursor, oneCtx));\n\t}\n\n\tprivate _type(ctx: IMultipleCursorOperationContext): boolean {\n\t\tvar text = ctx.eventData.text;\n\n\t\tif (ctx.eventSource === 'keyboard') {\n\t\t\t// If this event is coming straight from the keyboard, look for electric characters and enter\n\n\t\t\tvar i:number, len:number, chr:string;\n\t\t\tfor (i = 0, len = text.length; i < len; i++) {\n\t\t\t\tchr = text.charAt(i);\n\n\t\t\t\tthis.charactersTyped += chr;\n\n\t\t\t\t// Here we must interpret each typed character individually, that's why we create a new context\n\t\t\t\tctx.hasExecutedCommands = this._createAndInterpretHandlerCtx(ctx.eventSource, ctx.eventData, (charHandlerCtx:IMultipleCursorOperationContext) => {\n\n\t\t\t\t\tthis._invokeForAll(charHandlerCtx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.type(oneCursor, chr, oneCtx), false, false);\n\n\t\t\t\t\t// The last typed character gets to win\n\t\t\t\t\tctx.cursorPositionChangeReason = charHandlerCtx.cursorPositionChangeReason;\n\t\t\t\t\tctx.shouldReveal = charHandlerCtx.shouldReveal;\n\t\t\t\t\tctx.shouldRevealVerticalInCenter = charHandlerCtx.shouldRevealVerticalInCenter;\n\t\t\t\t\tctx.shouldRevealHorizontal = charHandlerCtx.shouldRevealHorizontal;\n\t\t\t\t}) || ctx.hasExecutedCommands;\n\n\t\t\t}\n\t\t} else {\n\t\t\tthis._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.actualType(oneCursor, text, false, oneCtx));\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate _replacePreviousChar(ctx: IMultipleCursorOperationContext): boolean {\n\t\tlet text = ctx.eventData.text;\n\t\tlet replaceCharCnt = ctx.eventData.replaceCharCnt;\n\t\treturn this._invokeForAll(ctx,(cursorIndex, oneCursor, oneCtx) => OneCursorOp.replacePreviousChar(oneCursor, text, replaceCharCnt, oneCtx));\n\n\t}\n\n\tprivate _tab(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.tab(oneCursor, oneCtx), false, false);\n\t}\n\n\tprivate _indent(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.indent(oneCursor, oneCtx));\n\t}\n\n\tprivate _outdent(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.outdent(oneCursor, oneCtx));\n\t}\n\n\tprivate _paste(ctx: IMultipleCursorOperationContext): boolean {\n\t\tvar distributedPaste = this._distributePasteToCursors(ctx);\n\n\t\tif (distributedPaste) {\n\t\t\treturn this._invokeForAllSorted(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.paste(oneCursor, distributedPaste[cursorIndex], false, oneCtx));\n\t\t} else {\n\t\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.paste(oneCursor, ctx.eventData.text, ctx.eventData.pasteOnNewLine, oneCtx));\n\t\t}\n\t}\n\n\tprivate _scrollUp(isPaged: boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\tctx.requestScrollDeltaLines = isPaged ? -this.configuration.editor.pageSize : -1;\n\t\treturn true;\n\t}\n\n\tprivate _scrollDown(isPaged: boolean, ctx: IMultipleCursorOperationContext): boolean {\n\t\tctx.requestScrollDeltaLines = isPaged ? this.configuration.editor.pageSize : 1;\n\t\treturn true;\n\t}\n\n\tprivate _distributePasteToCursors(ctx: IMultipleCursorOperationContext): string[] {\n\t\tif (ctx.eventData.pasteOnNewLine) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar selections = this.cursors.getSelections();\n\t\tif (selections.length === 1) {\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (var i = 0; i < selections.length; i++) {\n\t\t\tif (selections[i].startLineNumber !== selections[i].endLineNumber) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tvar pastePieces = ctx.eventData.text.split(/\\r\\n|\\r|\\n/);\n\t\tif (pastePieces.length !== selections.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn pastePieces;\n\t}\n\n\tprivate _deleteLeft(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.deleteLeft(oneCursor, oneCtx), false, false);\n\t}\n\n\tprivate _deleteWordLeft(whitespaceHeuristics:boolean, wordNavigationType:WordNavigationType, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.deleteWordLeft(oneCursor, whitespaceHeuristics, wordNavigationType, oneCtx), false, false);\n\t}\n\n\tprivate _deleteRight(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.deleteRight(oneCursor, oneCtx), false, false);\n\t}\n\n\tprivate _deleteWordRight(whitespaceHeuristics:boolean, wordNavigationType:WordNavigationType, ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.deleteWordRight(oneCursor, whitespaceHeuristics, wordNavigationType, oneCtx), false, false);\n\t}\n\n\tprivate _deleteAllLeft(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.deleteAllLeft(oneCursor, oneCtx), false, false);\n\t}\n\n\tprivate _deleteAllRight(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.deleteAllRight(oneCursor, oneCtx), false, false);\n\t}\n\n\tprivate _cut(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => OneCursorOp.cut(oneCursor, this.enableEmptySelectionClipboard, oneCtx));\n\t}\n\n\tprivate _undo(ctx: IMultipleCursorOperationContext): boolean {\n\t\tctx.cursorPositionChangeReason = 'undo';\n\t\tctx.hasExecutedCommands = true;\n\t\tthis._interpretCommandResult(this.model.undo());\n\t\treturn true;\n\t}\n\n\tprivate _cursorUndo(ctx: IMultipleCursorOperationContext): boolean {\n\t\tif (this.cursorUndoStack.length === 0) {\n\t\t\treturn false;\n\t\t}\n\t\tctx.cursorPositionChangeReason = 'undo';\n\t\tctx.isCursorUndo = true;\n\t\tthis.cursors.restoreState(this.cursorUndoStack.pop());\n\t\treturn true;\n\t}\n\n\tprivate _redo(ctx: IMultipleCursorOperationContext): boolean {\n\t\tctx.cursorPositionChangeReason = 'redo';\n\t\tctx.hasExecutedCommands = true;\n\t\tthis._interpretCommandResult(this.model.redo());\n\t\treturn true;\n\t}\n\n\tprivate _externalExecuteCommand(ctx: IMultipleCursorOperationContext): boolean {\n\t\tthis.cursors.killSecondaryCursors();\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => {\n\t\t\toneCtx.shouldPushStackElementBefore = true;\n\t\t\toneCtx.shouldPushStackElementAfter = true;\n\t\t\toneCtx.executeCommand = ctx.eventData;\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tprivate _externalExecuteCommands(ctx: IMultipleCursorOperationContext): boolean {\n\t\treturn this._invokeForAll(ctx, (cursorIndex: number, oneCursor: OneCursor, oneCtx: IOneCursorOperationContext) => {\n\t\t\toneCtx.shouldPushStackElementBefore = true;\n\t\t\toneCtx.shouldPushStackElementAfter = true;\n\t\t\toneCtx.executeCommand = ctx.eventData[cursorIndex];\n\t\t\treturn false;\n\t\t});\n\t}\n}\n"]}