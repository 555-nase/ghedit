{"version":3,"file":"vs/editor/contrib/quickFix/common/quickFix.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/contrib/quickFix/common/quickFix.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;IAEhG,YAAY,CAAC;IAgBb,uBAA8B,KAAa,EAAE,KAAa;QAEzD,IAAM,UAAU,GAAiB,EAAE,CAAC;QACpC,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,IAAM,QAAQ,GAAG,wBAAgB,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,UAAA,OAAO;YACvD,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,qBAAqB,EAAE,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,UAAA,MAAM;gBAC7E,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBAC5B,MAAM,CAAC;gBACR,CAAC;gBACD,GAAG,CAAC,CAAY,UAAM,EAAN,iBAAM,EAAN,oBAAM,EAAN,IAAM,CAAC;oBAAlB,IAAI,GAAG,eAAA;oBACX,UAAU,CAAC,IAAI,CAAC;wBACf,OAAO,EAAE,GAAG,CAAC,OAAO;wBACpB,KAAK,EAAE,GAAG,CAAC,KAAK;wBAChB,EAAE,EAAE,eAAa,MAAM,EAAI;wBAC3B,SAAA,OAAO;qBACP,CAAC,CAAC;iBACH;YACF,CAAC,EAAE,UAAA,GAAG;gBACL,0BAAiB,CAAC,GAAG,CAAC,CAAC;YACxB,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,qBAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,cAAM,OAAA,UAAU,EAAV,CAAU,CAAC,CAAC;IACvD,CAAC;IAvBe,qBAAa,gBAuB5B,CAAA;IAED,6CAAoB,CAAC,uBAAuB,CAAC,4BAA4B,EAAE,UAAS,QAAQ,EAAE,IAAI;QAE1F,4BAAQ,EAAE,kBAAK,CAAS;QAC/B,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,YAAY,aAAG,CAAC,IAAI,CAAC,aAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC1D,MAAM,wBAAe,EAAE,CAAC;QACzB,CAAC;QAED,IAAM,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,4BAAa,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC7D,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACZ,MAAM,wBAAe,EAAE,CAAC;QACzB,CAAC;QAED,MAAM,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IACpC,CAAC,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport {illegalArgument, onUnexpectedError} from 'vs/base/common/errors';\nimport URI from 'vs/base/common/uri';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport {Range} from 'vs/editor/common/core/range';\nimport {IModel, IRange} from 'vs/editor/common/editorCommon';\nimport {CommonEditorRegistry} from 'vs/editor/common/editorCommonExtensions';\nimport {QuickFixRegistry, IQuickFix, IQuickFixSupport} from 'vs/editor/common/modes';\nimport {IModelService} from 'vs/editor/common/services/modelService';\n\nexport interface IQuickFix2 extends IQuickFix {\n\tsupport: IQuickFixSupport;\n\tid: string;\n}\n\nexport function getQuickFixes(model: IModel, range: IRange): TPromise<IQuickFix2[]> {\n\n\tconst quickFixes: IQuickFix2[] = [];\n\tlet idPool = 0;\n\tconst promises = QuickFixRegistry.all(model).map(support => {\n\t\treturn support.getQuickFixes(model.getAssociatedResource(), range).then(result => {\n\t\t\tif (!Array.isArray(result)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (let fix of result) {\n\t\t\t\tquickFixes.push({\n\t\t\t\t\tcommand: fix.command,\n\t\t\t\t\tscore: fix.score,\n\t\t\t\t\tid: `quickfix_#${idPool++}`,\n\t\t\t\t\tsupport\n\t\t\t\t});\n\t\t\t}\n\t\t}, err => {\n\t\t\tonUnexpectedError(err);\n\t\t});\n\t});\n\n\treturn TPromise.join(promises).then(() => quickFixes);\n}\n\nCommonEditorRegistry.registerLanguageCommand('_executeCodeActionProvider', function(accessor, args) {\n\n\tconst {resource, range} = args;\n\tif (!(resource instanceof URI) || !Range.isIRange(range)) {\n\t\tthrow illegalArgument();\n\t}\n\n\tconst model = accessor.get(IModelService).getModel(resource);\n\tif (!model) {\n\t\tthrow illegalArgument();\n\t}\n\n\treturn getQuickFixes(model, range);\n});"]}