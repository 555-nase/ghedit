{"version":3,"sources":["vs/editor/contrib/referenceSearch/browser/referenceSearch.ts"],"names":[],"mappings":"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","file":"vs/editor/contrib/referenceSearch/browser/referenceSearch.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as nls from 'vs/nls';\nimport {isFalsyOrEmpty} from 'vs/base/common/arrays';\nimport {onUnexpectedError} from 'vs/base/common/errors';\nimport {KeyCode, KeyMod} from 'vs/base/common/keyCodes';\nimport {cAll} from 'vs/base/common/lifecycle';\nimport Severity from 'vs/base/common/severity';\nimport URI from 'vs/base/common/uri';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport {IEditorService} from 'vs/platform/editor/common/editor';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {ICommandHandler, IKeybindingContextKey, IKeybindingService} from 'vs/platform/keybinding/common/keybindingService';\nimport {KeybindingsRegistry} from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport {IMessageService} from 'vs/platform/message/common/message';\nimport {ITelemetryService} from 'vs/platform/telemetry/common/telemetry';\nimport {IWorkspaceContextService} from 'vs/platform/workspace/common/workspace';\nimport {Position} from 'vs/editor/common/core/position';\nimport {Range} from 'vs/editor/common/core/range';\nimport {EditorAction} from 'vs/editor/common/editorAction';\nimport {Behaviour} from 'vs/editor/common/editorActionEnablement';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {CommonEditorRegistry, ContextKey, EditorActionDescriptor} from 'vs/editor/common/editorCommonExtensions';\nimport {IReference, ReferenceSearchRegistry} from 'vs/editor/common/modes';\nimport {ICodeEditor} from 'vs/editor/browser/editorBrowser';\nimport {EditorBrowserRegistry} from 'vs/editor/browser/editorBrowserExtensions';\nimport {Events, IPeekViewService, getOuterEditor} from 'vs/editor/contrib/zoneWidget/browser/peekViewWidget';\nimport {findReferences} from '../common/referenceSearch';\nimport {EventType, ReferencesModel} from './referenceSearchModel';\nimport {ReferenceWidget} from './referenceSearchWidget';\n\nexport class FindReferencesController implements editorCommon.IEditorContribution {\n\n\tpublic static ID = 'editor.contrib.findReferencesController';\n\n\tprivate editor:ICodeEditor;\n\tprivate widget:ReferenceWidget;\n\tprivate requestIdPool: number;\n\tprivate callOnClear:Function[];\n\tprivate model:ReferencesModel;\n\tprivate modelRevealing:boolean;\n\n\tprivate editorService: IEditorService;\n\tprivate telemetryService: ITelemetryService;\n\tprivate messageService: IMessageService;\n\tprivate instantiationService: IInstantiationService;\n\tprivate contextService: IWorkspaceContextService;\n\tprivate peekViewService: IPeekViewService;\n\tprivate keybindingService: IKeybindingService;\n\n\tprivate _startTime: number = -1;\n\tprivate _referenceSearchVisible: IKeybindingContextKey<boolean>;\n\n\tstatic getController(editor:editorCommon.ICommonCodeEditor): FindReferencesController {\n\t\treturn <FindReferencesController> editor.getContribution(FindReferencesController.ID);\n\t}\n\n\tpublic constructor(editor:ICodeEditor, @IEditorService editorService: IEditorService, @ITelemetryService telemetryService: ITelemetryService, @IMessageService messageService: IMessageService, @IInstantiationService instantiationService: IInstantiationService, @IPeekViewService peekViewService: IPeekViewService, @IWorkspaceContextService contextService: IWorkspaceContextService, @IKeybindingService keybindingService: IKeybindingService) {\n\t\tthis.requestIdPool = 0;\n\t\tthis.callOnClear = [];\n\t\tthis.editorService = editorService;\n\t\tthis.telemetryService = telemetryService;\n\t\tthis.messageService = messageService;\n\t\tthis.instantiationService = instantiationService;\n\t\tthis.peekViewService = peekViewService;\n\t\tthis.contextService = contextService;\n\t\tthis.keybindingService = keybindingService;\n\t\tthis.modelRevealing = false;\n\t\tthis.editor = editor;\n\t\tthis._referenceSearchVisible = keybindingService.createKey(CONTEXT_REFERENCE_SEARCH_VISIBLE, false);\n\t}\n\n\tpublic getId(): string {\n\t\treturn FindReferencesController.ID;\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this.widget) {\n\t\t\tthis.widget.dispose();\n\t\t\tthis.widget = null;\n\t\t}\n\t\tthis.editor = null;\n\t}\n\n\tpublic isInPeekView() : boolean {\n\t\treturn this.peekViewService && this.peekViewService.isActive;\n\t}\n\n\tpublic closeReferenceSearch(): void {\n\t\tthis.clear();\n\t}\n\n\tpublic processRequest(range: editorCommon.IEditorRange, referencesPromise: TPromise<IReference[]>, metaTitleFn:(references:IReference[])=>string) : ReferenceWidget {\n\t\tvar widgetPosition = !this.widget ? null : this.widget.position;\n\n\t\t// clean up from previous invocation\n\t\tvar widgetClosed = this.clear();\n\n\t\t// Close if the position is still the same\n\t\tif(widgetClosed && !!widgetPosition && range.containsPosition(widgetPosition)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis._referenceSearchVisible.set(true);\n\n\t\t// close the widget on model/mode changes\n\t\tthis.callOnClear.push(this.editor.addListener(editorCommon.EventType.ModelModeChanged, () => { this.clear(); }));\n\t\tthis.callOnClear.push(this.editor.addListener(editorCommon.EventType.ModelChanged, () => {\n\t\t\tif(!this.modelRevealing) {\n\t\t\t\tthis.clear();\n\t\t\t}\n\t\t}));\n\n\t\tthis.widget = new ReferenceWidget(this.editorService, this.keybindingService, this.contextService, this.instantiationService, this.editor);\n\t\tthis.widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n\t\tthis.widget.show(range, 18);\n\t\tthis.callOnClear.push(this.widget.addListener(Events.Closed, () => {\n\t\t\tthis.widget = null;\n\t\t\treferencesPromise.cancel();\n\t\t\tthis.clear();\n\t\t}));\n\t\tthis.callOnClear.push(this.widget.addListener(ReferenceWidget.Events.EditorDoubleClick, (event:any) => {\n\n\t\t\tif(!event.reference) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// open editor\n\t\t\tthis.editorService.openEditor({\n\t\t\t\tresource: event.reference,\n\t\t\t\toptions: { selection: event.range }\n\t\t\t}, event.originalEvent.ctrlKey || event.originalEvent.metaKey).done(null, onUnexpectedError);\n\n\t\t\t// close zone\n\t\t\tif (!(event.originalEvent.ctrlKey || event.originalEvent.metaKey)) {\n\t\t\t\tthis.clear();\n\t\t\t}\n\t\t}));\n\t\tvar requestId = ++this.requestIdPool,\n\t\t\teditorModel = this.editor.getModel();\n\n\t\tvar timer = this.telemetryService.timedPublicLog('findReferences', {\n\t\t\tmode: editorModel.getMode().getId()\n\t\t});\n\n\t\treferencesPromise.then((references:IReference[]) => {\n\n\t\t\t// still current request? widget still open?\n\t\t\tif(requestId !== this.requestIdPool || !this.widget) {\n\t\t\t\ttimer.stop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// has a result\n\t\t\tif (isFalsyOrEmpty(references)) {\n\t\t\t\tthis.widget.showMessage(nls.localize('noResults', \"No results\"));\n\t\t\t\ttimer.stop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// create result model\n\t\t\tthis.model = new ReferencesModel(references, this.editorService);\n\t\t\tthis.model.currentReference = this.model.findReference(editorModel.getAssociatedResource(), range.getStartPosition());\n\n\t\t\tvar unbind = this.model.addListener(EventType.CurrentReferenceChanged, () => {\n\n\t\t\t\tthis.modelRevealing = true;\n\n\t\t\t\tthis.editorService.openEditor({\n\t\t\t\t\tresource: this.model.currentReference.resource,\n\t\t\t\t\toptions: { selection: this.model.currentReference.range }\n\t\t\t\t}).done((openedEditor) => {\n\t\t\t\t\tif(!openedEditor || openedEditor.getControl() !== this.editor) {\n\t\t\t\t\t\t// TODO@Alex TODO@Joh\n\t\t\t\t\t\t// when opening the current reference we might end up\n\t\t\t\t\t\t// in a different editor instance. that means we also have\n\t\t\t\t\t\t// a different instance of this reference search controller\n\t\t\t\t\t\t// and cannot hold onto the widget (which likely doesn't\n\t\t\t\t\t\t// exist). Instead of bailing out we should find the\n\t\t\t\t\t\t// 'sister' action and pass our current model on to it.\n\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.modelRevealing = false;\n\t\t\t\t\tthis.widget.show(this.model.currentReference.range, 18);\n\t\t\t\t\tthis.widget.focus();\n\t\t\t\t}, (err) => {\n\t\t\t\t\tthis.modelRevealing = false;\n\t\t\t\t\tonUnexpectedError(err);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.callOnClear.push(unbind);\n\n\t\t\t// show widget\n\t\t\tthis._startTime = Date.now();\n\t\t\tif (this.widget) {\n\t\t\t\tthis.widget.setMetaTitle(metaTitleFn(references));\n\t\t\t\tthis.widget.setModel(this.model);\n\t\t\t}\n\t\t\ttimer.stop();\n\n\t\t}, (error:any) => {\n\t\t\tthis.messageService.show(Severity.Error, error);\n\t\t\ttimer.stop();\n\t\t});\n\n\t\treturn this.widget;\n\t}\n\n\tprivate clear():boolean {\n\n\t\tif (this._startTime !== -1) {\n\t\t\tthis.telemetryService.publicLog('zoneWidgetShown', {\n\t\t\t\tmode: 'reference search',\n\t\t\t\telapsedTime: Date.now() - this._startTime\n\t\t\t});\n\t\t\tthis._startTime = -1;\n\t\t}\n\n\t\tthis._referenceSearchVisible.reset();\n\n\t\tcAll(this.callOnClear);\n\n\t\tthis.model = null;\n\n\t\tvar result = false;\n\t\tif(this.widget) {\n\t\t\tthis.widget.dispose();\n\t\t\tthis.widget = null;\n\t\t\tresult = true;\n\t\t}\n\n\t\tthis.editor.focus();\n\t\tthis.requestIdPool += 1; // Cancel pending requests\n\t\treturn result;\n\t}\n\n}\n\n\nexport class ReferenceAction extends EditorAction {\n\n\tpublic static ID = 'editor.action.referenceSearch.trigger';\n\n\tprivate peekViewService: IPeekViewService;\n\n\t// state - changes with every invocation\n\n\tconstructor(descriptor:editorCommon.IEditorActionDescriptorData, editor:editorCommon.ICommonCodeEditor, @IPeekViewService peekViewService: IPeekViewService, @IKeybindingService keybindingService: IKeybindingService) {\n\t\tsuper(descriptor, editor, Behaviour.WidgetFocus | Behaviour.ShowInContextMenu | Behaviour.UpdateOnCursorPositionChange);\n\n\t\tthis.label = nls.localize('references.action.label', \"Find All References\");\n\n\t\tthis.peekViewService = peekViewService;\n\t\tif (this.peekViewService) {\n\t\t\tkeybindingService.createKey(this.peekViewService.contextKey, true);\n\t\t}\n\t}\n\n\tpublic getGroupId(): string {\n\t\treturn '1_goto/4_references';\n\t}\n\n\tpublic isSupported():boolean {\n\t\treturn ReferenceSearchRegistry.has(this.editor.getModel()) && super.isSupported();\n\t}\n\n\tpublic getEnablementState():boolean {\n\t\tif(this.peekViewService && this.peekViewService.isActive) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet model = this.editor.getModel();\n\t\tlet position = this.editor.getSelection().getStartPosition();\n\t\tlet context = model.getLineContext(position.lineNumber);\n\t\tlet offset = position.column - 1;\n\n\t\treturn ReferenceSearchRegistry.all(model).some(support => {\n\t\t\treturn support.canFindReferences(context, offset);\n\t\t});\n\t}\n\n\tpublic run():TPromise<boolean> {\n\t\tlet range = this.editor.getSelection();\n\t\tlet model = this.editor.getModel();\n\t\tlet request = findReferences(model, range.getStartPosition());\n\t\tlet controller = FindReferencesController.getController(this.editor);\n\t\treturn TPromise.as(controller.processRequest(range, request, metaTitle)).then(() => true);\n\t}\n}\n\nfunction metaTitle(references: IReference[]): string {\n\tif (references.length > 1) {\n\t\treturn nls.localize('meta.titleReference', \" – {0} references\", references.length);\n\t}\n}\n\nlet findReferencesCommand: ICommandHandler = (accessor, args:[URI, editorCommon.IPosition]) => {\n\n\tlet [resource, position] = args;\n\tif (!(resource instanceof URI)) {\n\t\tthrow new Error('illegal argument, uri');\n\t}\n\tif (!position) {\n\t\tthrow new Error('illega argument, position');\n\t}\n\n\treturn accessor.get(IEditorService).openEditor({ resource }).then(editor => {\n\n\t\tlet control = <editorCommon.ICommonCodeEditor>editor.getControl();\n\t\tif (!control || typeof control.getEditorType !== 'function') {\n\t\t\treturn;\n\t\t}\n\n\t\tlet request = findReferences(control.getModel(), position);\n\t\tlet controller = FindReferencesController.getController(control);\n\t\tlet range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n\t\treturn TPromise.as(controller.processRequest(range, request, metaTitle));\n\t});\n};\n\nlet showReferencesCommand: ICommandHandler = (accessor, args:[URI, editorCommon.IPosition, IReference[]]) => {\n\tif (!(args[0] instanceof URI)) {\n\t\tthrow new Error('illegal argument, uri expected');\n\t}\n\n\treturn accessor.get(IEditorService).openEditor({ resource: args[0] }).then(editor => {\n\n\t\tlet control = <editorCommon.ICommonCodeEditor>editor.getControl();\n\t\tif (!control || typeof control.getEditorType !== 'function') {\n\t\t\treturn;\n\t\t}\n\n\t\tlet controller = FindReferencesController.getController(control);\n\t\tlet range = Position.asEmptyRange(args[1]);\n\t\treturn TPromise.as(controller.processRequest(Range.lift(range), TPromise.as(args[2]), metaTitle)).then(() => true);\n\t});\n};\n\nvar CONTEXT_REFERENCE_SEARCH_VISIBLE = 'referenceSearchVisible';\n\n// register action\nEditorBrowserRegistry.registerEditorContribution(FindReferencesController);\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(ReferenceAction, ReferenceAction.ID, nls.localize('references.action.name', \"Show References\"), {\n\tcontext: ContextKey.EditorTextFocus,\n\tprimary: KeyMod.Shift | KeyCode.F12\n}));\nKeybindingsRegistry.registerCommandDesc({\n\tid: 'editor.action.findReferences',\n\thandler: findReferencesCommand,\n\tweight: CommonEditorRegistry.commandWeight(50),\n\tcontext: null,\n\tprimary: undefined\n});\nKeybindingsRegistry.registerCommandDesc({\n\tid: 'editor.action.showReferences',\n\thandler: showReferencesCommand,\n\tweight: CommonEditorRegistry.commandWeight(50),\n\tcontext: null,\n\tprimary: undefined,\n\tdescription: {\n\t\tdescription: 'Show references at a position in a file',\n\t\targs: [\n\t\t\t{ name: 'uri', description: 'The text document in which to show references', constraint: URI },\n\t\t\t{ name: 'position', description: 'The position at which to show', constraint: Position.isIPosition },\n\t\t\t{ name: 'locations', description: 'An array of locations.', constraint: Array },\n\t\t]\n\t}\n});\nCommonEditorRegistry.registerEditorCommand('closeReferenceSearch', CommonEditorRegistry.commandWeight(50), { primary: KeyCode.Escape, secondary: [KeyMod.Shift | KeyCode.Escape] }, false, CONTEXT_REFERENCE_SEARCH_VISIBLE, (accessor, editor, args) => {\n\tvar outerEditor = getOuterEditor(accessor, args);\n\tif (outerEditor) {\n\t\tvar controller = FindReferencesController.getController(outerEditor);\n\t\tcontroller.closeReferenceSearch();\n\t}\n});\nCommonEditorRegistry.registerEditorCommand('closeReferenceSearchEditor', CommonEditorRegistry.commandWeight(-101), { primary: KeyCode.Escape, secondary: [KeyMod.Shift | KeyCode.Escape] }, false, ReferenceWidget.INNER_EDITOR_CONTEXT_KEY, (accessor, editor, args) => {\n\tvar outerEditor = getOuterEditor(accessor, args);\n\tif (outerEditor) {\n\t\tvar controller = FindReferencesController.getController(outerEditor);\n\t\tcontroller.closeReferenceSearch();\n\t}\n});\n"]}