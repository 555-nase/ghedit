{"version":3,"sources":["vs/editor/contrib/suggest/browser/suggestWidget.ts"],"names":[],"mappings":"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","file":"vs/editor/contrib/suggest/browser/suggestWidget.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./suggest';\nimport * as nls from 'vs/nls';\nimport * as strings from 'vs/base/common/strings';\nimport {isPromiseCanceledError, onUnexpectedError} from 'vs/base/common/errors';\nimport Event, { Emitter } from 'vs/base/common/event';\nimport {IDisposable, dispose} from 'vs/base/common/lifecycle';\nimport * as timer from 'vs/base/common/timer';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport {addClass, append, emmet as $, hide, removeClass, show, toggleClass} from 'vs/base/browser/dom';\nimport {HighlightedLabel} from 'vs/base/browser/ui/highlightedlabel/highlightedLabel';\nimport {IDelegate, IFocusChangeEvent, IRenderer, ISelectionChangeEvent} from 'vs/base/browser/ui/list/list';\nimport {List} from 'vs/base/browser/ui/list/listWidget';\nimport {ScrollableElement} from 'vs/base/browser/ui/scrollbar/scrollableElementImpl';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {IKeybindingContextKey, IKeybindingService} from 'vs/platform/keybinding/common/keybindingService';\nimport {ITelemetryService} from 'vs/platform/telemetry/common/telemetry';\nimport {EventType, IModeSupportChangedEvent} from 'vs/editor/common/editorCommon';\nimport {SuggestRegistry} from 'vs/editor/common/modes';\nimport {ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition} from 'vs/editor/browser/editorBrowser';\nimport {CONTEXT_SUGGESTION_SUPPORTS_ACCEPT_ON_KEY} from '../common/suggest';\nimport {CompletionItem, CompletionModel} from './completionModel';\nimport {ICancelEvent, ISuggestEvent, ITriggerEvent, SuggestModel} from './suggestModel';\nimport {alert} from 'vs/base/browser/ui/aria/aria';\nimport {DomNodeScrollable} from 'vs/base/browser/ui/scrollbar/domNodeScrollable';\n\ninterface ISuggestionTemplateData {\n\troot: HTMLElement;\n\ticon: HTMLElement;\n\tcolorspan: HTMLElement;\n\thighlightedLabel: HighlightedLabel;\n\ttypeLabel: HTMLElement;\n\tdocumentationDetails: HTMLElement;\n\tdocumentation: HTMLElement;\n}\n\nclass Renderer implements IRenderer<CompletionItem, ISuggestionTemplateData> {\n\n\tprivate triggerKeybindingLabel: string;\n\n\tconstructor(\n\t\tprivate widget: SuggestWidget,\n\t\t@IKeybindingService keybindingService: IKeybindingService\n\t) {\n\t\tconst keybindings = keybindingService.lookupKeybindings('editor.action.triggerSuggest');\n\t\tthis.triggerKeybindingLabel = keybindings.length === 0 ? '' : ` (${keybindingService.getLabelFor(keybindings[0])})`;\n\t}\n\n\tget templateId(): string {\n\t\treturn 'suggestion';\n\t}\n\n\trenderTemplate(container: HTMLElement): ISuggestionTemplateData {\n\t\tconst data = <ISuggestionTemplateData>Object.create(null);\n\t\tdata.root = container;\n\n\t\tdata.icon = append(container, $('.icon'));\n\t\tdata.colorspan = append(data.icon, $('span.colorspan'));\n\n\t\tconst text = append(container, $('.text'));\n\t\tconst main = append(text, $('.main'));\n\t\tdata.highlightedLabel = new HighlightedLabel(main);\n\t\tdata.typeLabel = append(main, $('span.type-label'));\n\t\tconst docs = append(text, $('.docs'));\n\t\tdata.documentation = append(docs, $('span.docs-text'));\n\t\tdata.documentationDetails = append(docs, $('span.docs-details.octicon.octicon-info'));\n\t\tdata.documentationDetails.title = nls.localize('readMore', \"Read More...{0}\", this.triggerKeybindingLabel);\n\n\t\treturn data;\n\t}\n\n\trenderElement(element: CompletionItem, index: number, templateData: ISuggestionTemplateData): void {\n\t\tconst data = <ISuggestionTemplateData>templateData;\n\t\tconst suggestion = (<CompletionItem>element).suggestion;\n\n\t\tif (suggestion.documentationLabel) {\n\t\t\tdata.root.setAttribute('aria-label', nls.localize('suggestionWithDetailsAriaLabel', \"{0}, suggestion, has details\", suggestion.label));\n\t\t} else {\n\t\t\tdata.root.setAttribute('aria-label', nls.localize('suggestionAriaLabel', \"{0}, suggestion\", suggestion.label));\n\t\t}\n\n\t\tif (suggestion.type === 'customcolor') {\n\t\t\tdata.icon.className = 'icon customcolor';\n\t\t\tdata.colorspan.style.backgroundColor = suggestion.label;\n\t\t} else {\n\t\t\tdata.icon.className = 'icon ' + suggestion.type;\n\t\t\tdata.colorspan.style.backgroundColor = '';\n\t\t}\n\n\t\tdata.highlightedLabel.set(suggestion.label, (<CompletionItem>element).highlights);\n\t\tdata.typeLabel.textContent = suggestion.typeLabel || '';\n\t\tdata.documentation.textContent = suggestion.documentationLabel || '';\n\n\t\tif (suggestion.documentationLabel) {\n\t\t\tshow(data.documentationDetails);\n\t\t\tdata.documentationDetails.onmousedown = e => {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t};\n\t\t\tdata.documentationDetails.onclick = e => {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.widget.toggleDetails();\n\t\t\t};\n\t\t} else {\n\t\t\thide(data.documentationDetails);\n\t\t\tdata.documentationDetails.onmousedown = null;\n\t\t\tdata.documentationDetails.onclick = null;\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: ISuggestionTemplateData): void {\n\t\ttemplateData.highlightedLabel.dispose();\n\t}\n}\n\nconst FocusHeight = 35;\nconst UnfocusedHeight = 19;\n\nclass Delegate implements IDelegate<CompletionItem> {\n\n\tconstructor(private listProvider: () => List<CompletionItem>) { }\n\n\tgetHeight(element: CompletionItem): number {\n\t\tconst focus = this.listProvider().getFocus()[0];\n\n\t\tif (element.suggestion.documentationLabel && element === focus) {\n\t\t\treturn FocusHeight;\n\t\t}\n\n\t\treturn UnfocusedHeight;\n\t}\n\n\tgetTemplateId(element: CompletionItem): string {\n\t\treturn 'suggestion';\n\t}\n}\n\nfunction computeScore(suggestion: string, currentWord: string, currentWordLowerCase: string): number {\n\tconst suggestionLowerCase = suggestion.toLowerCase();\n\tlet score = 0;\n\n\tfor (let i = 0; i < currentWord.length && i < suggestion.length; i++) {\n\t\tif (currentWord[i] === suggestion[i]) {\n\t\t\tscore += 2;\n\t\t} else if (currentWordLowerCase[i] === suggestionLowerCase[i]) {\n\t\t\tscore += 1;\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn score;\n}\n\ninterface ITelemetryData {\n\tsuggestionCount?: number;\n\tsuggestedIndex?: number;\n\tselectedIndex?: number;\n\thintLength?: number;\n\twasCancelled?: boolean;\n\twasAutomaticallyTriggered?: boolean;\n}\n\nenum State {\n\tHidden,\n\tLoading,\n\tEmpty,\n\tOpen,\n\tFrozen,\n\tDetails\n}\n\nclass SuggestionDetails {\n\n\tprivate el: HTMLElement;\n\tprivate title: HTMLElement;\n\tprivate back: HTMLElement;\n\tprivate scrollable: DomNodeScrollable;\n\tprivate scrollbar: ScrollableElement;\n\tprivate body: HTMLElement;\n\tprivate type: HTMLElement;\n\tprivate docs: HTMLElement;\n\tprivate ariaLabel:string;\n\n\tconstructor(container: HTMLElement, private widget: SuggestWidget) {\n\t\tthis.el = append(container, $('.details'));\n\t\tconst header = append(this.el, $('.header'));\n\t\tthis.title = append(header, $('span.title'));\n\t\tthis.back = append(header, $('span.go-back.octicon.octicon-mail-reply'));\n\t\tthis.back.title = nls.localize('goback', \"Go back\");\n\t\tthis.body = $('.body');\n\t\tthis.scrollable = new DomNodeScrollable(this.body);\n\t\tthis.scrollbar = new ScrollableElement(this.body, this.scrollable, {});\n\t\tappend(this.el, this.scrollbar.getDomNode());\n\t\tthis.type = append(this.body, $('p.type'));\n\t\tthis.docs = append(this.body, $('p.docs'));\n\n\t\tthis.ariaLabel = null;\n\t}\n\n\tget element() {\n\t\treturn this.el;\n\t}\n\n\trender(item: CompletionItem): void {\n\t\tif (!item) {\n\t\t\tthis.title.textContent = '';\n\t\t\tthis.type.textContent = '';\n\t\t\tthis.docs.textContent = '';\n\t\t\tthis.ariaLabel = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.title.innerText = item.suggestion.label;\n\t\tthis.type.innerText = item.suggestion.typeLabel || '';\n\t\tthis.docs.innerText = item.suggestion.documentationLabel;\n\t\tthis.back.onmousedown = e => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t};\n\t\tthis.back.onclick = e => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tthis.widget.toggleDetails();\n\t\t};\n\n\t\tthis.scrollbar.onElementDimensions();\n\t\tthis.scrollable.onContentsDimensions();\n\n\t\tthis.ariaLabel = strings.format('{0}\\n{1}\\n{2}', item.suggestion.label || '', item.suggestion.typeLabel || '', item.suggestion.documentationLabel || '');\n\t}\n\n\tgetAriaLabel(): string {\n\t\treturn this.ariaLabel;\n\t}\n\n\tscrollDown(much = 8): void {\n\t\tthis.body.scrollTop += much;\n\t}\n\n\tscrollUp(much = 8): void {\n\t\tthis.body.scrollTop -= much;\n\t}\n\n\tpageDown(): void {\n\t\tthis.scrollDown(80);\n\t}\n\n\tpageUp(): void {\n\t\tthis.scrollUp(80);\n\t}\n\n\tdispose(): void {\n\t\tthis.scrollbar.dispose();\n\t\tthis.scrollable.dispose();\n\n\t\tthis.el.parentElement.removeChild(this.el);\n\t\tthis.el = null;\n\t}\n}\n\nexport class SuggestWidget implements IContentWidget, IDisposable {\n\n\tstatic ID: string = 'editor.widget.suggestWidget';\n\tstatic WIDTH: number = 438;\n\n\tstatic LOADING_MESSAGE: string = nls.localize('suggestWidget.loading', \"Loading...\");\n\tstatic NO_SUGGESTIONS_MESSAGE: string = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\n\n\tpublic allowEditorOverflow: boolean = true; // Editor.IContentWidget.allowEditorOverflow\n\n\tprivate state: State;\n\tprivate isAuto: boolean;\n\tprivate shouldShowEmptySuggestionList: boolean;\n\tprivate suggestionSupportsAutoAccept: IKeybindingContextKey<boolean>;\n\tprivate loadingTimeout: number;\n\tprivate currentSuggestionDetails: TPromise<void>;\n\tprivate focusedItem: CompletionItem;\n\tprivate completionModel: CompletionModel;\n\n\tprivate telemetryData: ITelemetryData;\n\tprivate telemetryService: ITelemetryService;\n\tprivate telemetryTimer: timer.ITimerEvent;\n\n\tprivate element: HTMLElement;\n\tprivate messageElement: HTMLElement;\n\tprivate listElement: HTMLElement;\n\tprivate details: SuggestionDetails;\n\tprivate delegate: IDelegate<CompletionItem>;\n\tprivate list: List<CompletionItem>;\n\n\tprivate editorBlurTimeout: TPromise<void>;\n\tprivate showTimeout: TPromise<void>;\n\tprivate toDispose: IDisposable[];\n\n\tprivate _onDidVisibilityChange: Emitter<boolean> = new Emitter();\n\tpublic get onDidVisibilityChange(): Event<boolean> { return this._onDidVisibilityChange.event; }\n\n\tconstructor(\n\t\tprivate editor: ICodeEditor,\n\t\tprivate model: SuggestModel,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\tthis.isAuto = false;\n\t\tthis.focusedItem = null;\n\t\tthis.suggestionSupportsAutoAccept = keybindingService.createKey(CONTEXT_SUGGESTION_SUPPORTS_ACCEPT_ON_KEY, true);\n\n\t\tthis.telemetryData = null;\n\t\tthis.telemetryService = telemetryService;\n\n\t\tthis.element = $('.editor-widget.suggest-widget.monaco-editor-background');\n\t\tthis.element.style.width = SuggestWidget.WIDTH + 'px';\n\t\tthis.element.style.top = '0';\n\t\tthis.element.style.left = '0';\n\n\t\tif (!this.editor.getConfiguration().iconsInSuggestions) {\n\t\t\taddClass(this.element, 'no-icons');\n\t\t}\n\n\t\tthis.messageElement = append(this.element, $('.message'));\n\t\tthis.listElement = append(this.element, $('.tree'));\n\t\tthis.details = new SuggestionDetails(this.element, this);\n\n\t\tlet renderer: IRenderer<CompletionItem, any> = instantiationService.createInstance(Renderer, this);\n\n\t\tthis.delegate = new Delegate(() => this.list);\n\t\tthis.list = new List(this.listElement, this.delegate, [renderer]);\n\n\t\tthis.toDispose = [\n\t\t\teditor.addListener2(EventType.ModelChanged, () => this.onModelModeChanged()),\n\t\t\teditor.addListener2(EventType.ModelModeChanged, () => this.onModelModeChanged()),\n\t\t\teditor.addListener2(EventType.ModelModeSupportChanged, (e: IModeSupportChangedEvent) => e.suggestSupport && this.onModelModeChanged()),\n\t\t\tSuggestRegistry.onDidChange(() => this.onModelModeChanged()),\n\t\t\teditor.addListener2(EventType.EditorTextBlur, () => this.onEditorBlur()),\n\t\t\tthis.list.onSelectionChange(e => this.onListSelection(e)),\n\t\t\tthis.list.onFocusChange(e => this.onListFocus(e)),\n\t\t\tthis.editor.addListener2(EventType.CursorSelectionChanged, () => this.onCursorSelectionChanged()),\n\t\t\tthis.model.onDidTrigger(e => this.onDidTrigger(e)),\n\t\t\tthis.model.onDidSuggest(e => this.onDidSuggest(e)),\n\t\t\tthis.model.onDidCancel(e => this.onDidCancel(e))\n\t\t];\n\n\t\tthis.onModelModeChanged();\n\t\tthis.editor.addContentWidget(this);\n\t\tthis.setState(State.Hidden);\n\n\t\t// TODO@Alex: this is useful, but spammy\n\t\t// var isVisible = false;\n\t\t// this.onDidVisibilityChange((newIsVisible) => {\n\t\t// \tif (isVisible === newIsVisible) {\n\t\t// \t\treturn;\n\t\t// \t}\n\t\t// \tisVisible = newIsVisible;\n\t\t// \tif (isVisible) {\n\t\t// \t\talert(nls.localize('suggestWidgetAriaVisible', \"Suggestions opened\"));\n\t\t// \t} else {\n\t\t// \t\talert(nls.localize('suggestWidgetAriaInvisible', \"Suggestions closed\"));\n\t\t// \t}\n\t\t// });\n\t}\n\n\tprivate onCursorSelectionChanged(): void {\n\t\tif (this.state === State.Hidden) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editor.layoutContentWidget(this);\n\t}\n\n\tprivate onEditorBlur(): void {\n\t\tthis.editorBlurTimeout = TPromise.timeout(150).then(() => {\n\t\t\tif (!this.editor.isFocused()) {\n\t\t\t\tthis.setState(State.Hidden);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate onListSelection(e: ISelectionChangeEvent<CompletionItem>): void {\n\t\tif (!e.elements.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.telemetryData.selectedIndex = 0;\n\t\tthis.telemetryData.wasCancelled = false;\n\t\tthis.telemetryData.selectedIndex = e.indexes[0];\n\t\tthis.submitTelemetryData();\n\n\t\tconst item = e.elements[0];\n\t\tconst container = item.container;\n\t\tconst overwriteBefore = (typeof item.suggestion.overwriteBefore === 'undefined') ? container.currentWord.length : item.suggestion.overwriteBefore;\n\t\tconst overwriteAfter = (typeof item.suggestion.overwriteAfter === 'undefined') ? 0 : Math.max(0, item.suggestion.overwriteAfter);\n\t\tthis.model.accept(item.suggestion, overwriteBefore, overwriteAfter);\n\n\t\talert(nls.localize('suggestionAriaAccepted', \"{0}, accepted\", item.suggestion.label));\n\n\t\tthis.editor.focus();\n\t}\n\n\tprivate _getSuggestionAriaAlertLabel(item:CompletionItem): string {\n\t\tif (item.suggestion.documentationLabel) {\n\t\t\treturn nls.localize('ariaCurrentSuggestionWithDetails',\"{0}, suggestion, has details\", item.suggestion.label);\n\t\t} else {\n\t\t\treturn nls.localize('ariaCurrentSuggestion',\"{0}, suggestion\", item.suggestion.label);\n\t\t}\n\t}\n\n\tprivate _lastAriaAlertLabel: string;\n\tprivate _ariaAlert(newAriaAlertLabel:string): void {\n\t\tif (this._lastAriaAlertLabel === newAriaAlertLabel) {\n\t\t\treturn;\n\t\t}\n\t\tthis._lastAriaAlertLabel = newAriaAlertLabel;\n\t\tif (this._lastAriaAlertLabel) {\n\t\t\talert(this._lastAriaAlertLabel);\n\t\t}\n\t}\n\n\tprivate onListFocus(e: IFocusChangeEvent<CompletionItem>): void {\n\t\tif (this.currentSuggestionDetails) {\n\t\t\tthis.currentSuggestionDetails.cancel();\n\t\t\tthis.currentSuggestionDetails = null;\n\t\t}\n\n\t\tif (!e.elements.length) {\n\t\t\tthis._ariaAlert(null);\n\n\t\t\t// TODO@Alex: Chromium bug\n\t\t\t// this.editor.setAriaActiveDescendant(null);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst item = e.elements[0];\n\t\tthis._ariaAlert(this._getSuggestionAriaAlertLabel(item));\n\n\t\t// TODO@Alex: Chromium bug\n\t\t// // TODO@Alex: the list is not done rendering...\n\t\t// setTimeout(() => {\n\t\t// \tthis.editor.setAriaActiveDescendant(this.list.getElementId(e.indexes[0]));\n\t\t// }, 100);\n\n\t\tif (item === this.focusedItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst index = e.indexes[0];\n\n\t\tthis.suggestionSupportsAutoAccept.set(!item.suggestion.noAutoAccept);\n\t\tthis.focusedItem = item;\n\t\tthis.list.setFocus(index);\n\t\tthis.updateWidgetHeight();\n\t\tthis.list.reveal(index);\n\n\t\tconst resource = this.editor.getModel().getAssociatedResource();\n\t\tconst position = this.model.getRequestPosition() || this.editor.getPosition();\n\n\t\tthis.currentSuggestionDetails = item.resolveDetails(resource, position)\n\t\t\t.then(details => {\n\t\t\t\titem.updateDetails(details);\n\t\t\t\tthis.list.setFocus(index);\n\t\t\t\tthis.updateWidgetHeight();\n\t\t\t\tthis.list.reveal(index);\n\n\t\t\t\tthis._ariaAlert(this._getSuggestionAriaAlertLabel(item));\n\t\t\t})\n\t\t\t.then(null, err => !isPromiseCanceledError(err) && onUnexpectedError(err))\n\t\t\t.then(() => this.currentSuggestionDetails = null);\n\t}\n\n\tprivate onModelModeChanged(): void {\n\t\tconst model = this.editor.getModel();\n\t\tconst supports = SuggestRegistry.all(model);\n\t\tthis.shouldShowEmptySuggestionList = supports.some(s => s.shouldShowEmptySuggestionList());\n\t}\n\n\tprivate setState(state: State): void {\n\t\tconst stateChanged = this.state !== state;\n\t\tthis.state = state;\n\n\t\ttoggleClass(this.element, 'frozen', state === State.Frozen);\n\n\t\tswitch (state) {\n\t\t\tcase State.Hidden:\n\t\t\t\thide(this.messageElement, this.details.element);\n\t\t\t\tshow(this.listElement);\n\t\t\t\tthis.hide();\n\t\t\t\tif (stateChanged) {\n\t\t\t\t\tthis.list.splice(0, this.list.length);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase State.Loading:\n\t\t\t\tthis.messageElement.innerText = SuggestWidget.LOADING_MESSAGE;\n\t\t\t\thide(this.listElement, this.details.element);\n\t\t\t\tshow(this.messageElement);\n\t\t\t\tthis.show();\n\t\t\t\tbreak;\n\t\t\tcase State.Empty:\n\t\t\t\tthis.messageElement.innerText = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n\t\t\t\thide(this.listElement, this.details.element);\n\t\t\t\tshow(this.messageElement);\n\t\t\t\tthis.show();\n\t\t\t\tbreak;\n\t\t\tcase State.Open:\n\t\t\t\thide(this.messageElement, this.details.element);\n\t\t\t\tshow(this.listElement);\n\t\t\t\tthis.show();\n\t\t\t\tbreak;\n\t\t\tcase State.Frozen:\n\t\t\t\thide(this.messageElement, this.details.element);\n\t\t\t\tshow(this.listElement);\n\t\t\t\tthis.show();\n\t\t\t\tbreak;\n\t\t\tcase State.Details:\n\t\t\t\thide(this.messageElement, this.listElement);\n\t\t\t\tshow(this.details.element);\n\t\t\t\tthis.show();\n\t\t\t\tthis._ariaAlert(this.details.getAriaLabel());\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (stateChanged) {\n\t\t\tthis.editor.layoutContentWidget(this);\n\t\t}\n\t}\n\n\tprivate onDidTrigger(e: ITriggerEvent) {\n\t\tif (this.state !== State.Hidden) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.telemetryTimer = this.telemetryService.timedPublicLog('suggestWidgetLoadingTime');\n\t\tthis.isAuto = !!e.auto;\n\n\t\tif (!this.isAuto) {\n\t\t\tthis.loadingTimeout = setTimeout(() => {\n\t\t\t\tthis.loadingTimeout = null;\n\t\t\t\tthis.setState(State.Loading);\n\t\t\t}, 50);\n\t\t}\n\n\t\tif (!e.retrigger) {\n\t\t\tthis.telemetryData = {\n\t\t\t\twasAutomaticallyTriggered: e.characterTriggered\n\t\t\t};\n\t\t}\n\t}\n\n\tprivate onDidSuggest(e: ISuggestEvent): void {\n\t\tif (this.loadingTimeout) {\n\t\t\tclearTimeout(this.loadingTimeout);\n\t\t\tthis.loadingTimeout = null;\n\t\t}\n\n\t\tthis.completionModel = e.completionModel;\n\n\t\tif (e.isFrozen && this.state !== State.Empty) {\n\t\t\tthis.setState(State.Frozen);\n\t\t\treturn;\n\t\t}\n\n\t\tlet visibleCount = this.completionModel.items.length;\n\n\t\tconst isEmpty = visibleCount === 0;\n\n\t\tif (isEmpty) {\n\t\t\tif (e.auto) {\n\t\t\t\tthis.setState(State.Hidden);\n\t\t\t} else {\n\t\t\t\tif (this.shouldShowEmptySuggestionList) {\n\t\t\t\t\tthis.setState(State.Empty);\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState(State.Hidden);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.completionModel = null;\n\n\t\t} else {\n\t\t\tconst currentWord = e.currentWord;\n\t\t\tconst currentWordLowerCase = currentWord.toLowerCase();\n\t\t\tlet bestSuggestionIndex = -1;\n\t\t\tlet bestScore = -1;\n\n\t\t\tthis.completionModel.items.forEach((item, index) => {\n\t\t\t\tconst score = computeScore(item.suggestion.label, currentWord, currentWordLowerCase);\n\n\t\t\t\tif (score > bestScore) {\n\t\t\t\t\tbestScore = score;\n\t\t\t\t\tbestSuggestionIndex = index;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.telemetryData = this.telemetryData || {};\n\t\t\tthis.telemetryData.suggestionCount = this.completionModel.items.length;\n\t\t\tthis.telemetryData.suggestedIndex = bestSuggestionIndex;\n\t\t\tthis.telemetryData.hintLength = currentWord.length;\n\n\t\t\tthis.list.splice(0, this.list.length, ...this.completionModel.items);\n\t\t\tthis.list.setFocus(bestSuggestionIndex);\n\t\t\tthis.list.reveal(bestSuggestionIndex, 0);\n\n\t\t\tthis.setState(State.Open);\n\t\t}\n\n\t\tif (this.telemetryTimer) {\n\t\t\tthis.telemetryTimer.data = { reason: isEmpty ? 'empty' : 'results' };\n\t\t\tthis.telemetryTimer.stop();\n\t\t\tthis.telemetryTimer = null;\n\t\t}\n\t}\n\n\tprivate onDidCancel(e: ICancelEvent) {\n\t\tif (this.loadingTimeout) {\n\t\t\tclearTimeout(this.loadingTimeout);\n\t\t\tthis.loadingTimeout = null;\n\t\t}\n\n\t\tif (!e.retrigger) {\n\t\t\tthis.setState(State.Hidden);\n\n\t\t\tif (this.telemetryData) {\n\t\t\t\tthis.telemetryData.selectedIndex = -1;\n\t\t\t\tthis.telemetryData.wasCancelled = true;\n\t\t\t\tthis.submitTelemetryData();\n\t\t\t}\n\t\t}\n\n\t\tif (this.telemetryTimer) {\n\t\t\tthis.telemetryTimer.data = { reason: 'cancel' };\n\t\t\tthis.telemetryTimer.stop();\n\t\t\tthis.telemetryTimer = null;\n\t\t}\n\t}\n\n\tpublic selectNextPage(): boolean {\n\t\tswitch (this.state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Details:\n\t\t\t\tthis.details.pageDown();\n\t\t\t\treturn true;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this.isAuto;\n\t\t\tdefault:\n\t\t\t\tthis.list.focusNextPage();\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic selectNext(): boolean {\n\t\tswitch (this.state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Details:\n\t\t\t\tthis.details.scrollDown();\n\t\t\t\treturn true;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this.isAuto;\n\t\t\tdefault:\n\t\t\t\tthis.list.focusNext(1, true);\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic selectPreviousPage(): boolean {\n\t\tswitch (this.state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Details:\n\t\t\t\tthis.details.pageUp();\n\t\t\t\treturn true;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this.isAuto;\n\t\t\tdefault:\n\t\t\t\tthis.list.focusPreviousPage();\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic selectPrevious(): boolean {\n\t\tswitch (this.state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Details:\n\t\t\t\tthis.details.scrollUp();\n\t\t\t\treturn true;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this.isAuto;\n\t\t\tdefault:\n\t\t\t\tthis.list.focusPrevious(1, true);\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic acceptSelectedSuggestion(): boolean {\n\t\tswitch (this.state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this.isAuto;\n\t\t\tdefault:\n\t\t\t\tconst focus = this.list.getFocus()[0];\n\t\t\t\tif (focus) {\n\t\t\t\t\tthis.list.setSelection(this.completionModel.items.indexOf(focus));\n\t\t\t\t} else {\n\t\t\t\t\tthis.model.cancel();\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic toggleDetails(): void {\n\t\tif (this.state === State.Details) {\n\t\t\tthis.setState(State.Open);\n\t\t\tthis.editor.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.state !== State.Open) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst item = this.list.getFocus()[0];\n\n\t\tif (!item || !item.suggestion.documentationLabel) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState(State.Details);\n\t\tthis.editor.focus();\n\t}\n\n\tprivate show(): void {\n\t\tthis.updateWidgetHeight();\n\t\tthis._onDidVisibilityChange.fire(true);\n\t\tthis.renderDetails();\n\t\tthis.showTimeout = TPromise.timeout(100).then(() => {\n\t\t\taddClass(this.element, 'visible');\n\t\t});\n\t}\n\n\tprivate hide(): void {\n\t\tthis._onDidVisibilityChange.fire(false);\n\t\tremoveClass(this.element, 'visible');\n\t}\n\n\tpublic cancel(): void {\n\t\tif (this.state === State.Details) {\n\t\t\tthis.toggleDetails();\n\t\t} else {\n\t\t\tthis.model.cancel();\n\t\t}\n\t}\n\n\tpublic getPosition(): IContentWidgetPosition {\n\t\tif (this.state === State.Hidden) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tposition: this.editor.getPosition(),\n\t\t\tpreference: [ContentWidgetPositionPreference.BELOW, ContentWidgetPositionPreference.ABOVE]\n\t\t};\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this.element;\n\t}\n\n\tpublic getId(): string {\n\t\treturn SuggestWidget.ID;\n\t}\n\n\tprivate submitTelemetryData(): void {\n\t\tthis.telemetryService.publicLog('suggestWidget', this.telemetryData);\n\t\tthis.telemetryData = null;\n\t}\n\n\tprivate updateWidgetHeight(): number {\n\t\tlet height = 0;\n\n\t\tif (this.state === State.Empty || this.state === State.Loading) {\n\t\t\theight = UnfocusedHeight;\n\t\t} else if (this.state === State.Details) {\n\t\t\theight = 12 * UnfocusedHeight;\n\t\t} else {\n\t\t\tconst focus = this.list.getFocus()[0];\n\t\t\tconst focusHeight = focus ? this.delegate.getHeight(focus) : UnfocusedHeight;\n\t\t\theight = focusHeight;\n\n\t\t\tconst suggestionCount = (this.list.contentHeight - focusHeight) / UnfocusedHeight;\n\t\t\theight += Math.min(suggestionCount, 11) * UnfocusedHeight;\n\t\t}\n\n\t\tthis.element.style.height = height + 'px';\n\t\tthis.list.layout(height);\n\t\tthis.editor.layoutContentWidget(this);\n\n\t\treturn height;\n\t}\n\n\tprivate renderDetails(): void {\n\t\tif (this.state !== State.Details) {\n\t\t\tthis.details.render(null);\n\t\t} else {\n\t\t\tthis.details.render(this.list.getFocus()[0]);\n\t\t}\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.state = null;\n\t\tthis.suggestionSupportsAutoAccept = null;\n\t\tthis.currentSuggestionDetails = null;\n\t\tthis.focusedItem = null;\n\t\tthis.telemetryData = null;\n\t\tthis.telemetryService = null;\n\t\tthis.telemetryTimer = null;\n\t\tthis.element = null;\n\t\tthis.messageElement = null;\n\t\tthis.listElement = null;\n\t\tthis.details.dispose();\n\t\tthis.details = null;\n\t\tthis.list.dispose();\n\t\tthis.list = null;\n\t\tthis.toDispose = dispose(this.toDispose);\n\t\tthis._onDidVisibilityChange.dispose();\n\t\tthis._onDidVisibilityChange = null;\n\t\tif (this.loadingTimeout) {\n\t\t\tclearTimeout(this.loadingTimeout);\n\t\t\tthis.loadingTimeout = null;\n\t\t}\n\n\t\tif (this.editorBlurTimeout) {\n\t\t\tthis.editorBlurTimeout.cancel();\n\t\t\tthis.editorBlurTimeout = null;\n\t\t}\n\n\t\tif (this.showTimeout) {\n\t\t\tthis.showTimeout.cancel();\n\t\t\tthis.showTimeout = null;\n\t\t}\n\t}\n}\n"]}