{"version":3,"file":"vs/editor/contrib/find/common/findState.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/contrib/find/common/findState.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport {EventEmitter} from 'vs/base/common/eventEmitter';\nimport {IDisposable} from 'vs/base/common/lifecycle';\nimport {Range} from 'vs/editor/common/core/range';\nimport {IEditorRange} from 'vs/editor/common/editorCommon';\n\nexport interface FindReplaceStateChangedEvent {\n\tmoveCursor: boolean;\n\n\tsearchString: boolean;\n\treplaceString: boolean;\n\tisRevealed: boolean;\n\tisReplaceRevealed: boolean;\n\tisRegex: boolean;\n\twholeWord: boolean;\n\tmatchCase: boolean;\n\tsearchScope: boolean;\n\tmatchesPosition: boolean;\n\tmatchesCount: boolean;\n}\n\nexport interface INewFindReplaceState {\n\tsearchString?: string;\n\treplaceString?: string;\n\tisRevealed?: boolean;\n\tisReplaceRevealed?: boolean;\n\tisRegex?: boolean;\n\twholeWord?: boolean;\n\tmatchCase?: boolean;\n\tsearchScope?: IEditorRange;\n\t// matchesPosition?: number;\n\t// matchesCount?: number;\n}\n\nexport class FindReplaceState implements IDisposable {\n\n\tprivate static _CHANGED_EVENT = 'changed';\n\n\tprivate _searchString: string;\n\tprivate _replaceString: string;\n\tprivate _isRevealed: boolean;\n\tprivate _isReplaceRevealed: boolean;\n\tprivate _isRegex: boolean;\n\tprivate _wholeWord: boolean;\n\tprivate _matchCase: boolean;\n\tprivate _searchScope: IEditorRange;\n\tprivate _matchesPosition: number;\n\tprivate _matchesCount: number;\n\tprivate _eventEmitter: EventEmitter;\n\n\tpublic get searchString(): string { return this._searchString; }\n\tpublic get replaceString(): string { return this._replaceString; }\n\tpublic get isRevealed(): boolean { return this._isRevealed; }\n\tpublic get isReplaceRevealed(): boolean { return this._isReplaceRevealed; }\n\tpublic get isRegex(): boolean { return this._isRegex; }\n\tpublic get wholeWord(): boolean { return this._wholeWord; }\n\tpublic get matchCase(): boolean { return this._matchCase; }\n\tpublic get searchScope(): IEditorRange { return this._searchScope; }\n\tpublic get matchesPosition(): number { return this._matchesPosition; }\n\tpublic get matchesCount(): number { return this._matchesCount; }\n\n\tconstructor() {\n\t\tthis._searchString = '';\n\t\tthis._replaceString = '';\n\t\tthis._isRevealed = false;\n\t\tthis._isReplaceRevealed = false;\n\t\tthis._isRegex = false;\n\t\tthis._wholeWord = false;\n\t\tthis._matchCase = false;\n\t\tthis._searchScope = null;\n\t\tthis._matchesPosition = 0;\n\t\tthis._matchesCount = 0;\n\t\tthis._eventEmitter = new EventEmitter();\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._eventEmitter.dispose();\n\t}\n\n\tpublic addChangeListener(listener:(e:FindReplaceStateChangedEvent)=>void): IDisposable {\n\t\treturn this._eventEmitter.addListener2(FindReplaceState._CHANGED_EVENT, listener);\n\t}\n\n\tpublic changeMatchInfo(matchesPosition:number, matchesCount:number): void {\n\t\tlet changeEvent:FindReplaceStateChangedEvent = {\n\t\t\tmoveCursor: false,\n\t\t\tsearchString: false,\n\t\t\treplaceString: false,\n\t\t\tisRevealed: false,\n\t\t\tisReplaceRevealed: false,\n\t\t\tisRegex: false,\n\t\t\twholeWord: false,\n\t\t\tmatchCase: false,\n\t\t\tsearchScope: false,\n\t\t\tmatchesPosition: false,\n\t\t\tmatchesCount: false\n\t\t};\n\t\tlet somethingChanged = false;\n\n\t\tif (matchesCount === 0) {\n\t\t\tmatchesPosition = 0;\n\t\t}\n\t\tif (matchesPosition > matchesCount) {\n\t\t\tmatchesPosition = matchesCount;\n\t\t}\n\n\t\tif (this._matchesPosition !== matchesPosition) {\n\t\t\tthis._matchesPosition = matchesPosition;\n\t\t\tchangeEvent.matchesPosition = true;\n\t\t\tsomethingChanged = true;\n\t\t}\n\t\tif (this._matchesCount !== matchesCount) {\n\t\t\tthis._matchesCount = matchesCount;\n\t\t\tchangeEvent.matchesCount = true;\n\t\t\tsomethingChanged = true;\n\t\t}\n\n\t\tif (somethingChanged) {\n\t\t\tthis._eventEmitter.emit(FindReplaceState._CHANGED_EVENT, changeEvent);\n\t\t}\n\t}\n\n\tpublic change(newState:INewFindReplaceState, moveCursor:boolean): void {\n\t\tlet changeEvent:FindReplaceStateChangedEvent = {\n\t\t\tmoveCursor: moveCursor,\n\t\t\tsearchString: false,\n\t\t\treplaceString: false,\n\t\t\tisRevealed: false,\n\t\t\tisReplaceRevealed: false,\n\t\t\tisRegex: false,\n\t\t\twholeWord: false,\n\t\t\tmatchCase: false,\n\t\t\tsearchScope: false,\n\t\t\tmatchesPosition: false,\n\t\t\tmatchesCount: false\n\t\t};\n\t\tlet somethingChanged = false;\n\n\t\tif (typeof newState.searchString !== 'undefined') {\n\t\t\tif (this._searchString !== newState.searchString) {\n\t\t\t\tthis._searchString = newState.searchString;\n\t\t\t\tchangeEvent.searchString = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.replaceString !== 'undefined') {\n\t\t\tif (this._replaceString !== newState.replaceString) {\n\t\t\t\tthis._replaceString = newState.replaceString;\n\t\t\t\tchangeEvent.replaceString = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.isRevealed !== 'undefined') {\n\t\t\tif (this._isRevealed !== newState.isRevealed) {\n\t\t\t\tthis._isRevealed = newState.isRevealed;\n\t\t\t\tchangeEvent.isRevealed = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.isReplaceRevealed !== 'undefined') {\n\t\t\tif (this._isReplaceRevealed !== newState.isReplaceRevealed) {\n\t\t\t\tthis._isReplaceRevealed = newState.isReplaceRevealed;\n\t\t\t\tchangeEvent.isReplaceRevealed = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.isRegex !== 'undefined') {\n\t\t\tif (this._isRegex !== newState.isRegex) {\n\t\t\t\tthis._isRegex = newState.isRegex;\n\t\t\t\tchangeEvent.isRegex = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.wholeWord !== 'undefined') {\n\t\t\tif (this._wholeWord !== newState.wholeWord) {\n\t\t\t\tthis._wholeWord = newState.wholeWord;\n\t\t\t\tchangeEvent.wholeWord = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.matchCase !== 'undefined') {\n\t\t\tif (this._matchCase !== newState.matchCase) {\n\t\t\t\tthis._matchCase = newState.matchCase;\n\t\t\t\tchangeEvent.matchCase = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.searchScope !== 'undefined') {\n\t\t\tif (!Range.equalsRange(this._searchScope, newState.searchScope)) {\n\t\t\t\tthis._searchScope = newState.searchScope;\n\t\t\t\tchangeEvent.searchScope = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif (somethingChanged) {\n\t\t\tthis._eventEmitter.emit(FindReplaceState._CHANGED_EVENT, changeEvent);\n\t\t}\n\t}\n}\n"]}