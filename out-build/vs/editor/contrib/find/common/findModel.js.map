{"version":3,"file":"vs/editor/contrib/find/common/findModel.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/contrib/find/common/findModel.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport {RunOnceScheduler} from 'vs/base/common/async';\nimport {IDisposable, dispose} from 'vs/base/common/lifecycle';\nimport * as strings from 'vs/base/common/strings';\nimport {ReplaceCommand} from 'vs/editor/common/commands/replaceCommand';\nimport {Position} from 'vs/editor/common/core/position';\nimport {Range} from 'vs/editor/common/core/range';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {FindDecorations} from './findDecorations';\nimport {FindReplaceState, FindReplaceStateChangedEvent} from './findState';\nimport {ReplaceAllCommand} from './replaceAllCommand';\n\nexport const FIND_IDS = {\n\tStartFindAction: 'actions.find',\n\tNextMatchFindAction: 'editor.action.nextMatchFindAction',\n\tPreviousMatchFindAction: 'editor.action.previousMatchFindAction',\n\tNextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\n\tPreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\n\tAddSelectionToNextFindMatchAction: 'editor.action.addSelectionToNextFindMatch',\n\tMoveSelectionToNextFindMatchAction: 'editor.action.moveSelectionToNextFindMatch',\n\tStartFindReplaceAction: 'editor.action.startFindReplaceAction',\n\tCloseFindWidgetCommand: 'closeFindWidget',\n\tToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\n\tToggleWholeWordCommand: 'toggleFindWholeWord',\n\tToggleRegexCommand: 'toggleFindRegex',\n\tReplaceOneAction: 'editor.action.replaceOne',\n\tReplaceAllAction: 'editor.action.replaceAll'\n};\n\nexport const MATCHES_LIMIT = 999;\n\nexport class FindModelBoundToEditorModel {\n\n\tprivate _editor:editorCommon.ICommonCodeEditor;\n\tprivate _state:FindReplaceState;\n\tprivate _toDispose:IDisposable[];\n\tprivate _decorations: FindDecorations;\n\tprivate _ignoreModelContentChanged:boolean;\n\n\tprivate _updateDecorationsScheduler:RunOnceScheduler;\n\n\tconstructor(editor:editorCommon.ICommonCodeEditor, state:FindReplaceState) {\n\t\tthis._editor = editor;\n\t\tthis._state = state;\n\t\tthis._toDispose = [];\n\n\t\tthis._decorations = new FindDecorations(editor);\n\t\tthis._toDispose.push(this._decorations);\n\n\t\tthis._updateDecorationsScheduler = new RunOnceScheduler(() => this.research(false), 100);\n\t\tthis._toDispose.push(this._updateDecorationsScheduler);\n\n\t\tthis._toDispose.push(this._editor.addListener2(editorCommon.EventType.CursorPositionChanged, (e:editorCommon.ICursorPositionChangedEvent) => {\n\t\t\tif (e.reason === 'explicit' || e.reason === 'undo' || e.reason === 'redo') {\n\t\t\t\tthis._decorations.setStartPosition(this._editor.getPosition());\n\t\t\t}\n\t\t}));\n\n\t\tthis._ignoreModelContentChanged = false;\n\t\tthis._toDispose.push(this._editor.addListener2(editorCommon.EventType.ModelContentChanged, (e:editorCommon.IModelContentChangedEvent) => {\n\t\t\tif (this._ignoreModelContentChanged) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.changeType === editorCommon.EventType.ModelContentChangedFlush) {\n\t\t\t\t// a model.setValue() was called\n\t\t\t\tthis._decorations.reset();\n\t\t\t}\n\t\t\tthis._decorations.setStartPosition(this._editor.getPosition());\n\t\t\tthis._updateDecorationsScheduler.schedule();\n\t\t}));\n\n\t\tthis._toDispose.push(this._state.addChangeListener((e) => this._onStateChanged(e)));\n\n\t\tthis.research(false, this._state.searchScope);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._toDispose = dispose(this._toDispose);\n\t}\n\n\tprivate _onStateChanged(e:FindReplaceStateChangedEvent): void {\n\t\tif (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\n\t\t\tif (e.searchScope) {\n\t\t\t\tthis.research(e.moveCursor, this._state.searchScope);\n\t\t\t} else {\n\t\t\t\tthis.research(e.moveCursor);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static _getSearchRange(model:editorCommon.IModel, searchOnlyEditableRange:boolean, findScope:editorCommon.IEditorRange): editorCommon.IEditorRange {\n\t\tlet searchRange:editorCommon.IEditorRange;\n\n\t\tif (searchOnlyEditableRange) {\n\t\t\tsearchRange = model.getEditableRange();\n\t\t} else {\n\t\t\tsearchRange = model.getFullModelRange();\n\t\t}\n\n\t\t// If we have set now or before a find scope, use it for computing the search range\n\t\tif (findScope) {\n\t\t\tsearchRange = searchRange.intersectRanges(findScope);\n\t\t}\n\n\t\treturn searchRange;\n\t}\n\n\tprivate research(moveCursor:boolean, newFindScope?:editorCommon.IEditorRange): void {\n\t\tlet findScope: editorCommon.IEditorRange = null;\n\t\tif (typeof newFindScope !== 'undefined') {\n\t\t\tfindScope = newFindScope;\n\t\t} else {\n\t\t\tfindScope = this._decorations.getFindScope();\n\t\t}\n\t\tif (findScope !== null) {\n\t\t\tfindScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber));\n\t\t}\n\n\t\tlet findMatches = this._findMatches(findScope, MATCHES_LIMIT);\n\t\tthis._decorations.set(findMatches, findScope);\n\n\t\tthis._state.changeMatchInfo(this._decorations.getCurrentMatchesPosition(this._editor.getSelection()), this._decorations.getCount());\n\n\t\tif (moveCursor) {\n\t\t\tthis._moveToNextMatch(this._decorations.getStartPosition());\n\t\t}\n\t}\n\n\tprivate _hasMatches(): boolean {\n\t\treturn (this._state.matchesCount > 0);\n\t}\n\n\tprivate _cannotFind(): boolean {\n\t\tif (!this._hasMatches()) {\n\t\t\tlet findScope = this._decorations.getFindScope();\n\t\t\tif (findScope) {\n\t\t\t\t// Reveal the selection so user is reminded that 'selection find' is on.\n\t\t\t\tthis._editor.revealRangeInCenterIfOutsideViewport(findScope);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _moveToPrevMatch(before:editorCommon.IEditorPosition, isRecursed:boolean = false): void {\n\t\tif (this._cannotFind()) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet findScope = this._decorations.getFindScope();\n\t\tlet searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), this._state.isReplaceRevealed, findScope);\n\n\t\t// ...(----)...|...\n\t\tif (searchRange.getEndPosition().isBefore(before)) {\n\t\t\tbefore = searchRange.getEndPosition();\n\t\t}\n\n\t\t// ...|...(----)...\n\t\tif (before.isBefore(searchRange.getStartPosition())) {\n\t\t\tbefore = searchRange.getEndPosition();\n\t\t}\n\n\t\tlet {lineNumber,column} = before;\n\t\tlet model = this._editor.getModel();\n\n\t\tif (this._state.isRegex) {\n\t\t\t// Force advancing to the previous line if searching for $\n\t\t\tif (this._state.searchString === '$') {\n\t\t\t\tif (lineNumber === 1) {\n\t\t\t\t\tlineNumber = model.getLineCount();\n\t\t\t\t} else {\n\t\t\t\t\tlineNumber--;\n\t\t\t\t}\n\t\t\t\tcolumn = model.getLineMaxColumn(lineNumber);\n\t\t\t}\n\n\t\t\t// Force advancing to the previous line if searching for ^ or ^$ and cursor is at the beginning\n\t\t\tif (this._state.searchString === '^' || this._state.searchString === '^$') {\n\t\t\t\tif (column === 1) {\n\t\t\t\t\tif (lineNumber === 1) {\n\t\t\t\t\t\tlineNumber = model.getLineCount();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineNumber--;\n\t\t\t\t\t}\n\t\t\t\t\tcolumn = model.getLineMaxColumn(lineNumber);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet position = new Position(lineNumber, column);\n\n\t\tlet prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord);\n\t\tif (!prevMatch) {\n\t\t\t// there is precisely one match and selection is on top of it\n\t\t\treturn;\n\t\t}\n\n\t\tif (!isRecursed && !searchRange.containsRange(prevMatch)) {\n\t\t\treturn this._moveToPrevMatch(prevMatch.getStartPosition(), true);\n\t\t}\n\n\t\tlet matchesPosition = this._decorations.setCurrentFindMatch(prevMatch);\n\t\tthis._state.changeMatchInfo(matchesPosition, this._decorations.getCount());\n\t\tthis._editor.setSelection(prevMatch);\n\t\tthis._editor.revealRangeInCenterIfOutsideViewport(prevMatch);\n\t}\n\n\tpublic moveToPrevMatch(): void {\n\t\tthis._moveToPrevMatch(this._editor.getSelection().getStartPosition());\n\t}\n\n\tpublic _moveToNextMatch(after:editorCommon.IEditorPosition, isRecursed:boolean = false): void {\n\t\tif (this._cannotFind()) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet findScope = this._decorations.getFindScope();\n\t\tlet searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), this._state.isReplaceRevealed, findScope);\n\n\t\t// ...(----)...|...\n\t\tif (searchRange.getEndPosition().isBefore(after)) {\n\t\t\tafter = searchRange.getStartPosition();\n\t\t}\n\n\t\t// ...|...(----)...\n\t\tif (after.isBefore(searchRange.getStartPosition())) {\n\t\t\tafter = searchRange.getStartPosition();\n\t\t}\n\n\t\tlet {lineNumber,column} = after;\n\t\tlet model = this._editor.getModel();\n\n\t\tif (this._state.isRegex) {\n\t\t\t// Force advancing to the next line if searching for ^ or ^$\n\t\t\tif (this._state.searchString === '^' || this._state.searchString === '^$') {\n\t\t\t\tif (lineNumber === model.getLineCount()) {\n\t\t\t\t\tlineNumber = 1;\n\t\t\t\t} else {\n\t\t\t\t\tlineNumber++;\n\t\t\t\t}\n\t\t\t\tcolumn = 1;\n\t\t\t}\n\n\t\t\t// Force advancing to the next line if searching for $ and at the end of the line\n\t\t\tif (this._state.searchString === '$') {\n\t\t\t\tif (column === model.getLineMaxColumn(lineNumber)) {\n\t\t\t\t\tif (lineNumber === model.getLineCount()) {\n\t\t\t\t\t\tlineNumber = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineNumber++;\n\t\t\t\t\t}\n\t\t\t\t\tcolumn = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet position = new Position(lineNumber, column);\n\n\t\tlet nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord);\n\n\t\tif (!nextMatch) {\n\t\t\t// there is precisely one match and selection is on top of it\n\t\t\treturn;\n\t\t}\n\n\t\tif (!isRecursed && !searchRange.containsRange(nextMatch)) {\n\t\t\treturn this._moveToNextMatch(nextMatch.getEndPosition(), true);\n\t\t}\n\n\t\tlet matchesPosition = this._decorations.setCurrentFindMatch(nextMatch);\n\t\tthis._state.changeMatchInfo(matchesPosition, this._decorations.getCount());\n\t\tthis._editor.setSelection(nextMatch);\n\t\tthis._editor.revealRangeInCenterIfOutsideViewport(nextMatch);\n\t}\n\n\tpublic moveToNextMatch(): void {\n\t\tthis._moveToNextMatch(this._editor.getSelection().getEndPosition());\n\t}\n\n\tprivate getReplaceString(matchedString:string): string {\n\t\tif (!this._state.isRegex) {\n\t\t\treturn this._state.replaceString;\n\t\t}\n\t\tlet regexp = strings.createRegExp(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord, true);\n\t\t// Parse the replace string to support that \\t or \\n mean the right thing\n\t\tlet parsedReplaceString = parseReplaceString(this._state.replaceString);\n\t\treturn matchedString.replace(regexp, parsedReplaceString);\n\t}\n\n\tprivate _rangeIsMatch(range:editorCommon.IEditorRange): boolean {\n\t\tlet selection = this._editor.getSelection();\n\t\tlet selectionText = this._editor.getModel().getValueInRange(selection);\n\t\tlet regexp = strings.createSafeRegExp(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord);\n\t\tlet m = selectionText.match(regexp);\n\t\treturn (m && m[0].length === selectionText.length);\n\t}\n\n\tpublic replace(): void {\n\t\tif (!this._hasMatches()) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet selection = this._editor.getSelection();\n\t\tlet selectionText = this._editor.getModel().getValueInRange(selection);\n\t\tif (this._rangeIsMatch(selection)) {\n\t\t\t// selection sits on a find match => replace it!\n\t\t\tlet replaceString = this.getReplaceString(selectionText);\n\n\t\t\tlet command = new ReplaceCommand(selection, replaceString);\n\n\t\t\tthis._executeEditorCommand('replace', command);\n\n\t\t\tthis._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\n\t\t\tthis.research(true);\n\t\t} else {\n\t\t\tthis._decorations.setStartPosition(this._editor.getPosition());\n\t\t\tthis.moveToNextMatch();\n\t\t}\n\t}\n\n\tprivate _findMatches(findScope: editorCommon.IEditorRange, limitResultCount:number): editorCommon.IEditorRange[] {\n\t\tlet searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), this._state.isReplaceRevealed, findScope);\n\t\treturn this._editor.getModel().findMatches(this._state.searchString, searchRange, this._state.isRegex, this._state.matchCase, this._state.wholeWord, limitResultCount);\n\t}\n\n\tpublic replaceAll(): void {\n\t\tif (!this._hasMatches()) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet model = this._editor.getModel();\n\t\tlet findScope = this._decorations.getFindScope();\n\n\t\t// Get all the ranges (even more than the highlighted ones)\n\t\tlet ranges = this._findMatches(findScope, Number.MAX_VALUE);\n\n\t\tlet replaceStrings:string[] = [];\n\t\tfor (let i = 0, len = ranges.length; i < len; i++) {\n\t\t\treplaceStrings.push(this.getReplaceString(model.getValueInRange(ranges[i])));\n\t\t}\n\n\t\tlet command = new ReplaceAllCommand(ranges, replaceStrings);\n\t\tthis._executeEditorCommand('replaceAll', command);\n\n\t\tthis.research(false);\n\t}\n\n\tprivate _executeEditorCommand(source:string, command:editorCommon.ICommand): void {\n\t\ttry {\n\t\t\tthis._ignoreModelContentChanged = true;\n\t\t\tthis._editor.executeCommand(source, command);\n\t\t} finally {\n\t\t\tthis._ignoreModelContentChanged = false;\n\t\t}\n\t}\n}\n\nconst BACKSLASH_CHAR_CODE = '\\\\'.charCodeAt(0);\nconst DOLLAR_CHAR_CODE = '$'.charCodeAt(0);\nconst ZERO_CHAR_CODE = '0'.charCodeAt(0);\nconst n_CHAR_CODE = 'n'.charCodeAt(0);\nconst t_CHAR_CODE = 't'.charCodeAt(0);\n\n/**\n * \\n => LF\n * \\t => TAB\n * \\\\ => \\\n * $0 => $& (see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter)\n * everything else stays untouched\n */\nexport function parseReplaceString(input:string): string {\n\tif (!input || input.length === 0) {\n\t\treturn input;\n\t}\n\n\tlet substrFrom = 0, result = '';\n\tfor (let i = 0, len = input.length; i < len; i++) {\n\t\tlet chCode = input.charCodeAt(i);\n\n\t\tif (chCode === BACKSLASH_CHAR_CODE) {\n\n\t\t\t// move to next char\n\t\t\ti++;\n\n\t\t\tif (i >= len) {\n\t\t\t\t// string ends with a \\\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlet nextChCode = input.charCodeAt(i);\n\t\t\tlet replaceWithCharacter: string = null;\n\n\t\t\tswitch (nextChCode) {\n\t\t\t\tcase BACKSLASH_CHAR_CODE:\n\t\t\t\t\t// \\\\ => \\\n\t\t\t\t\treplaceWithCharacter = '\\\\';\n\t\t\t\t\tbreak;\n\t\t\t\tcase n_CHAR_CODE:\n\t\t\t\t\t// \\n => LF\n\t\t\t\t\treplaceWithCharacter = '\\n';\n\t\t\t\t\tbreak;\n\t\t\t\tcase t_CHAR_CODE:\n\t\t\t\t\t// \\t => TAB\n\t\t\t\t\treplaceWithCharacter = '\\t';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (replaceWithCharacter) {\n\t\t\t\tresult += input.substring(substrFrom, i - 1) + replaceWithCharacter;\n\t\t\t\tsubstrFrom = i + 1;\n\t\t\t}\n\t\t}\n\n\t\tif (chCode === DOLLAR_CHAR_CODE) {\n\n\t\t\t// move to next char\n\t\t\ti++;\n\n\t\t\tif (i >= len) {\n\t\t\t\t// string ends with a $\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlet nextChCode = input.charCodeAt(i);\n\t\t\tlet replaceWithCharacter: string = null;\n\n\t\t\tswitch (nextChCode) {\n\t\t\t\tcase ZERO_CHAR_CODE:\n\t\t\t\t\t// $0 => $&\n\t\t\t\t\treplaceWithCharacter = '$&';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (replaceWithCharacter) {\n\t\t\t\tresult += input.substring(substrFrom, i - 1) + replaceWithCharacter;\n\t\t\t\tsubstrFrom = i + 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (substrFrom === 0) {\n\t\t// no replacement occured\n\t\treturn input;\n\t}\n\n\treturn result + input.substring(substrFrom);\n}\n"]}