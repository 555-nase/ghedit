{"version":3,"file":"viewImpl.js","sourceRoot":"","sources":["../../../../../src/vs/editor/browser/view/viewImpl.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport {onUnexpectedError} from 'vs/base/common/errors';\nimport {EventEmitter, IEmitterEvent, IEventEmitter, ListenerUnbind} from 'vs/base/common/eventEmitter';\nimport {IDisposable, dispose} from 'vs/base/common/lifecycle';\nimport * as timer from 'vs/base/common/timer';\nimport * as browser from 'vs/base/browser/browser';\nimport * as dom from 'vs/base/browser/dom';\nimport {StyleMutator} from 'vs/base/browser/styleMutator';\nimport {IKeybindingContextKey, IKeybindingService} from 'vs/platform/keybinding/common/keybindingService';\nimport {Range} from 'vs/editor/common/core/range';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {ViewEventHandler} from 'vs/editor/common/viewModel/viewEventHandler';\nimport {Configuration} from 'vs/editor/browser/config/configuration';\nimport {KeyboardHandler} from 'vs/editor/browser/controller/keyboardHandler';\nimport {PointerHandler} from 'vs/editor/browser/controller/pointerHandler';\nimport * as editorBrowser from 'vs/editor/browser/editorBrowser';\nimport {ViewController} from 'vs/editor/browser/view/viewController';\nimport {ViewEventDispatcher} from 'vs/editor/browser/view/viewEventDispatcher';\nimport {ContentViewOverlays, MarginViewOverlays} from 'vs/editor/browser/view/viewOverlays';\nimport {LayoutProvider} from 'vs/editor/browser/viewLayout/layoutProvider';\nimport {ViewContentWidgets} from 'vs/editor/browser/viewParts/contentWidgets/contentWidgets';\nimport {CurrentLineHighlightOverlay} from 'vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight';\nimport {DecorationsOverlay} from 'vs/editor/browser/viewParts/decorations/decorations';\nimport {GlyphMarginOverlay} from 'vs/editor/browser/viewParts/glyphMargin/glyphMargin';\nimport {LineNumbersOverlay} from 'vs/editor/browser/viewParts/lineNumbers/lineNumbers';\nimport {ViewLines} from 'vs/editor/browser/viewParts/lines/viewLines';\nimport {LinesDecorationsOverlay} from 'vs/editor/browser/viewParts/linesDecorations/linesDecorations';\nimport {ViewOverlayWidgets} from 'vs/editor/browser/viewParts/overlayWidgets/overlayWidgets';\nimport {DecorationsOverviewRuler} from 'vs/editor/browser/viewParts/overviewRuler/decorationsOverviewRuler';\nimport {OverviewRuler} from 'vs/editor/browser/viewParts/overviewRuler/overviewRuler';\nimport {Rulers} from 'vs/editor/browser/viewParts/rulers/rulers';\nimport {ScrollDecorationViewPart} from 'vs/editor/browser/viewParts/scrollDecoration/scrollDecoration';\nimport {SelectionsOverlay} from 'vs/editor/browser/viewParts/selections/selections';\nimport {ViewCursors} from 'vs/editor/browser/viewParts/viewCursors/viewCursors';\nimport {ViewZones} from 'vs/editor/browser/viewParts/viewZones/viewZones';\nimport {ViewPart} from 'vs/editor/browser/view/viewPart';\n\nexport class View extends ViewEventHandler implements editorBrowser.IView, IDisposable {\n\n\tprivate eventDispatcher:ViewEventDispatcher;\n\n\tprivate listenersToRemove:ListenerUnbind[];\n\tprivate listenersToDispose:IDisposable[];\n\n\tprivate layoutProvider: LayoutProvider;\n\tpublic context: editorBrowser.IViewContext;\n\n\t// The view lines\n\tprivate viewLines: ViewLines;\n\n\t// These are parts, but we must do some API related calls on them, so we keep a reference\n\tprivate viewZones: ViewZones;\n\tprivate contentWidgets: ViewContentWidgets;\n\tprivate overlayWidgets: ViewOverlayWidgets;\n\tprivate viewParts: ViewPart[];\n\n\tprivate keyboardHandler: KeyboardHandler;\n\tprivate pointerHandler: PointerHandler;\n\n\tprivate outgoingEventBus: EventEmitter;\n\n\t// Dom nodes\n\tprivate linesContent: HTMLElement;\n\tpublic domNode: HTMLElement;\n\tpublic textArea: HTMLTextAreaElement;\n\tprivate textAreaCover: HTMLElement;\n\tprivate linesContentContainer: HTMLElement;\n\tprivate overflowGuardContainer: HTMLElement;\n\n\t// Actual mutable state\n\tprivate hasFocus:boolean;\n\tprivate _isDisposed: boolean;\n\n\tprivate handleAccumulatedModelEventsTimeout:number;\n\tprivate accumulatedModelEvents: IEmitterEvent[];\n\tprivate _renderAnimationFrame: IDisposable;\n\n\tprivate _editorId: number;\n\tprivate _keybindingService: IKeybindingService;\n\tprivate _editorTextFocusContextKey: IKeybindingContextKey<boolean>;\n\n\tconstructor(editorId:number, configuration:Configuration, model:editorCommon.IViewModel, keybindingService: IKeybindingService) {\n\t\tsuper();\n\t\tthis._isDisposed = false;\n\t\tthis._editorId = editorId;\n\t\tthis._renderAnimationFrame = null;\n\t\tthis.outgoingEventBus = new EventEmitter();\n\n\t\tvar viewController = new ViewController(model, configuration, this.outgoingEventBus, keybindingService);\n\n\t\tthis.listenersToRemove = [];\n\t\tthis.listenersToDispose = [];\n\n\t\t// The event dispatcher will always go through _renderOnce before dispatching any events\n\t\tthis.eventDispatcher = new ViewEventDispatcher((callback:()=>void) => this._renderOnce(callback));\n\n\t\t// These two dom nodes must be constructed up front, since references are needed in the layout provider (scrolling & co.)\n\t\tthis.linesContent = document.createElement('div');\n\t\tthis.linesContent.className = editorBrowser.ClassNames.LINES_CONTENT + ' monaco-editor-background';\n\t\tthis.domNode = document.createElement('div');\n\t\tConfiguration.applyEditorStyling(this.domNode, configuration.editor.stylingInfo);\n\n\t\tthis.overflowGuardContainer = document.createElement('div');\n\t\tthis.overflowGuardContainer.className = editorBrowser.ClassNames.OVERFLOW_GUARD;\n\n\t\t// The layout provider has such responsibilities as:\n\t\t// - scrolling (i.e. viewport / full size) & co.\n\t\t// - whitespaces (a.k.a. view zones) management & co.\n\t\t// - line heights updating & co.\n\t\tthis.layoutProvider = new LayoutProvider(configuration, model, this.eventDispatcher, this.linesContent, this.domNode, this.overflowGuardContainer);\n\t\tthis.eventDispatcher.addEventHandler(this.layoutProvider);\n\n\t\t// The view context is passed on to most classes (basically to reduce param. counts in ctors)\n\t\tthis.context = new ViewContext(\n\t\t\t\teditorId, configuration, model, this.eventDispatcher,\n\t\t\t\t(eventHandler:editorBrowser.IViewEventHandler) => this.eventDispatcher.addEventHandler(eventHandler),\n\t\t\t\t(eventHandler:editorBrowser.IViewEventHandler) => this.eventDispatcher.removeEventHandler(eventHandler)\n\t\t);\n\n\t\tthis.createTextArea(keybindingService);\n\t\tthis.createViewParts();\n\n\t\t// Keyboard handler\n\t\tthis.keyboardHandler = new KeyboardHandler(this.context, viewController, this.createKeyboardHandlerHelper());\n\n\t\t// Pointer handler\n\t\tthis.pointerHandler = new PointerHandler(this.context, viewController, this.createPointerHandlerHelper());\n\n\t\tthis.hasFocus = false;\n\t\tthis.codeEditorHelper = null;\n\n\t\tthis.eventDispatcher.addEventHandler(this);\n\n\t\t// The view lines rendering calls model.getLineTokens() that might emit events that its tokens have changed.\n\t\t// This delayed processing of incoming model events acts as a guard against undesired/unexpected recursion.\n\t\tthis.handleAccumulatedModelEventsTimeout = -1;\n\t\tthis.accumulatedModelEvents = [];\n\t\tthis.listenersToRemove.push(model.addBulkListener((events:IEmitterEvent[]) => {\n\t\t\tthis.accumulatedModelEvents = this.accumulatedModelEvents.concat(events);\n\t\t\tif (this.handleAccumulatedModelEventsTimeout === -1) {\n\t\t\t\tthis.handleAccumulatedModelEventsTimeout = setTimeout(() => {\n\t\t\t\t\tthis.handleAccumulatedModelEventsTimeout = -1;\n\t\t\t\t\tthis._flushAnyAccumulatedEvents();\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _flushAnyAccumulatedEvents(): void {\n\t\tvar toEmit = this.accumulatedModelEvents;\n\t\tthis.accumulatedModelEvents = [];\n\t\tif (toEmit.length > 0) {\n\t\t\tthis.eventDispatcher.emitMany(toEmit);\n\t\t}\n\t}\n\n\tprivate createTextArea(keybindingService: IKeybindingService): void {\n\t\t// Text Area (The focus will always be in the textarea when the cursor is blinking)\n\t\tthis.textArea = <HTMLTextAreaElement>document.createElement('textarea');\n\t\tthis._keybindingService = keybindingService.createScoped(this.textArea);\n\t\tthis._editorTextFocusContextKey = this._keybindingService.createKey(editorCommon.KEYBINDING_CONTEXT_EDITOR_TEXT_FOCUS, undefined);\n\t\tthis.textArea.className = editorBrowser.ClassNames.TEXTAREA;\n\t\tthis.textArea.setAttribute('wrap', 'off');\n\t\tthis.textArea.setAttribute('autocorrect', 'off');\n\t\tthis.textArea.setAttribute('autocapitalize', 'off');\n\t\tthis.textArea.setAttribute('spellcheck', 'false');\n\t\tthis.textArea.setAttribute('aria-label', this.context.configuration.editor.ariaLabel);\n\t\tthis.textArea.setAttribute('role', 'textbox');\n\t\tthis.textArea.setAttribute('aria-multiline', 'true');\n\t\tthis.textArea.setAttribute('aria-haspopup', 'false');\n\t\tthis.textArea.setAttribute('aria-autocomplete', 'both');\n\n\t\tStyleMutator.setTop(this.textArea, 0);\n\t\tStyleMutator.setLeft(this.textArea, 0);\n\t\t// Give textarea same font size & line height as editor, for the IME case (when the textarea is visible)\n\t\tStyleMutator.setFontSize(this.textArea, this.context.configuration.editor.fontSize);\n\t\tStyleMutator.setLineHeight(this.textArea, this.context.configuration.editor.lineHeight);\n\n\t\tthis.listenersToDispose.push(dom.addDisposableListener(this.textArea, 'focus', () => this._setHasFocus(true)));\n\t\tthis.listenersToDispose.push(dom.addDisposableListener(this.textArea, 'blur', () => this._setHasFocus(false)));\n\n\t\t// On top of the text area, we position a dom node to cover it up\n\t\t// (there have been reports of tiny blinking cursors)\n\t\t// (in WebKit the textarea is 1px by 1px because it cannot handle input to a 0x0 textarea)\n\t\tthis.textAreaCover = document.createElement('div');\n\t\tif (this.context.configuration.editor.glyphMargin) {\n\t\t\tthis.textAreaCover.className = 'monaco-editor-background ' + editorBrowser.ClassNames.GLYPH_MARGIN + ' ' + editorBrowser.ClassNames.TEXTAREA_COVER;\n\t\t} else {\n\t\t\tif (this.context.configuration.editor.lineNumbers) {\n\t\t\t\tthis.textAreaCover.className = 'monaco-editor-background ' + editorBrowser.ClassNames.LINE_NUMBERS + ' ' + editorBrowser.ClassNames.TEXTAREA_COVER;\n\t\t\t} else {\n\t\t\t\tthis.textAreaCover.className = 'monaco-editor-background ' + editorBrowser.ClassNames.TEXTAREA_COVER;\n\t\t\t}\n\t\t}\n\t\tthis.textAreaCover.style.position = 'absolute';\n\t\tStyleMutator.setWidth(this.textAreaCover, 1);\n\t\tStyleMutator.setHeight(this.textAreaCover, 1);\n\t\tStyleMutator.setTop(this.textAreaCover, 0);\n\t\tStyleMutator.setLeft(this.textAreaCover, 0);\n\t}\n\n\tprivate createViewParts(): void {\n\t\tthis.viewParts = [];\n\n\t\t// View Lines\n\t\tthis.viewLines = new ViewLines(this.context, this.layoutProvider);\n\n\t\t// View Zones\n\t\tthis.viewZones = new ViewZones(this.context, this.layoutProvider);\n\t\tthis.viewParts.push(this.viewZones);\n\n\t\t// Decorations overview ruler\n\t\tvar decorationsOverviewRuler = new DecorationsOverviewRuler(\n\t\t\t\tthis.context, this.layoutProvider.getScrollHeight(),\n\t\t\t\t(lineNumber:number) => this.layoutProvider.getVerticalOffsetForLineNumber(lineNumber)\n\t\t);\n\t\tthis.viewParts.push(decorationsOverviewRuler);\n\n\n\t\tvar scrollDecoration = new ScrollDecorationViewPart(this.context);\n\t\tthis.viewParts.push(scrollDecoration);\n\n\t\tvar contentViewOverlays = new ContentViewOverlays(this.context, this.layoutProvider);\n\t\tthis.viewParts.push(contentViewOverlays);\n\t\tcontentViewOverlays.addDynamicOverlay(new CurrentLineHighlightOverlay(this.context, this.layoutProvider));\n\t\tcontentViewOverlays.addDynamicOverlay(new SelectionsOverlay(this.context));\n\t\tcontentViewOverlays.addDynamicOverlay(new DecorationsOverlay(this.context));\n\n\t\tvar marginViewOverlays = new MarginViewOverlays(this.context, this.layoutProvider);\n\t\tthis.viewParts.push(marginViewOverlays);\n\t\tmarginViewOverlays.addDynamicOverlay(new GlyphMarginOverlay(this.context));\n\t\tmarginViewOverlays.addDynamicOverlay(new LinesDecorationsOverlay(this.context));\n\t\tmarginViewOverlays.addDynamicOverlay(new LineNumbersOverlay(this.context));\n\n\n\t\t// Content widgets\n\t\tthis.contentWidgets = new ViewContentWidgets(this.context, this.domNode);\n\t\tthis.viewParts.push(this.contentWidgets);\n\n\t\tvar viewCursors = new ViewCursors(this.context);\n\t\tthis.viewParts.push(viewCursors);\n\n\t\t// Overlay widgets\n\t\tthis.overlayWidgets = new ViewOverlayWidgets(this.context);\n\t\tthis.viewParts.push(this.overlayWidgets);\n\n\t\tvar rulers = new Rulers(this.context, this.layoutProvider);\n\t\tthis.viewParts.push(rulers);\n\n\t\t// -------------- Wire dom nodes up\n\n\t\tthis.linesContentContainer = this.layoutProvider.getScrollbarContainerDomNode();\n\t\tthis.linesContentContainer.style.position = 'absolute';\n\n\t\tif (decorationsOverviewRuler) {\n\t\t\tvar overviewRulerData = this.layoutProvider.getOverviewRulerInsertData();\n\t\t\toverviewRulerData.parent.insertBefore(decorationsOverviewRuler.getDomNode(), overviewRulerData.insertBefore);\n\t\t}\n\n\t\tthis.linesContent.appendChild(contentViewOverlays.getDomNode());\n\t\tthis.linesContent.appendChild(rulers.domNode);\n\t\tthis.linesContent.appendChild(this.viewZones.domNode);\n\t\tthis.linesContent.appendChild(this.viewLines.getDomNode());\n\t\tthis.linesContent.appendChild(this.contentWidgets.domNode);\n\t\tthis.linesContent.appendChild(viewCursors.getDomNode());\n\t\tthis.overflowGuardContainer.appendChild(marginViewOverlays.getDomNode());\n\t\tthis.overflowGuardContainer.appendChild(this.linesContentContainer);\n\t\tthis.overflowGuardContainer.appendChild(scrollDecoration.getDomNode());\n\t\tthis.overflowGuardContainer.appendChild(this.overlayWidgets.domNode);\n\t\tthis.overflowGuardContainer.appendChild(this.textArea);\n\t\tthis.overflowGuardContainer.appendChild(this.textAreaCover);\n\t\tthis.domNode.appendChild(this.overflowGuardContainer);\n\t\tthis.domNode.appendChild(this.contentWidgets.overflowingContentWidgetsDomNode);\n\t}\n\n\tprivate _flushAccumulatedAndRenderNow(): void {\n\t\tthis._flushAnyAccumulatedEvents();\n\t\tthis._renderNow();\n\t}\n\n\tprivate createPointerHandlerHelper(): editorBrowser.IPointerHandlerHelper {\n\t\treturn {\n\t\t\tviewDomNode: this.domNode,\n\t\t\tlinesContentDomNode: this.linesContent,\n\n\t\t\tfocusTextArea: () => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.focusTextArea: View is disposed');\n\t\t\t\t}\n\t\t\t\tthis.focus();\n\t\t\t},\n\n\t\t\tisDirty: (): boolean => {\n\t\t\t\treturn (this.accumulatedModelEvents.length > 0);\n\t\t\t},\n\n\t\t\tgetScrollTop: () => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.getScrollTop: View is disposed');\n\t\t\t\t}\n\t\t\t\treturn this.layoutProvider.getScrollTop();\n\t\t\t},\n\t\t\tsetScrollTop: (scrollTop: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.setScrollTop: View is disposed');\n\t\t\t\t}\n\t\t\t\tthis.layoutProvider.setScrollTop(scrollTop);\n\t\t\t},\n\t\t\tgetScrollLeft: () => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.getScrollLeft: View is disposed');\n\t\t\t\t}\n\t\t\t\treturn this.layoutProvider.getScrollLeft();\n\t\t\t},\n\t\t\tsetScrollLeft: (scrollLeft: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.setScrollLeft: View is disposed');\n\t\t\t\t}\n\t\t\t\tthis.layoutProvider.setScrollLeft(scrollLeft);\n\t\t\t},\n\n\t\t\tisAfterLines: (verticalOffset: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.isAfterLines: View is disposed');\n\t\t\t\t}\n\t\t\t\treturn this.layoutProvider.isAfterLines(verticalOffset);\n\t\t\t},\n\t\t\tgetLineNumberAtVerticalOffset: (verticalOffset: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.getLineNumberAtVerticalOffset: View is disposed');\n\t\t\t\t}\n\t\t\t\treturn this.layoutProvider.getLineNumberAtVerticalOffset(verticalOffset);\n\t\t\t},\n\t\t\tgetVerticalOffsetForLineNumber: (lineNumber: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.getVerticalOffsetForLineNumber: View is disposed');\n\t\t\t\t}\n\t\t\t\treturn this.layoutProvider.getVerticalOffsetForLineNumber(lineNumber);\n\t\t\t},\n\t\t\tgetWhitespaceAtVerticalOffset: (verticalOffset: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.getWhitespaceAtVerticalOffset: View is disposed');\n\t\t\t\t}\n\t\t\t\treturn this.layoutProvider.getWhitespaceAtVerticalOffset(verticalOffset);\n\t\t\t},\n\t\t\tshouldSuppressMouseDownOnViewZone: (viewZoneId: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.shouldSuppressMouseDownOnViewZone: View is disposed');\n\t\t\t\t}\n\t\t\t\treturn this.viewZones.shouldSuppressMouseDownOnViewZone(viewZoneId);\n\t\t\t},\n\n\t\t\tgetPositionFromDOMInfo: (spanNode: HTMLElement, offset: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.getPositionFromDOMInfo: View is disposed');\n\t\t\t\t}\n\t\t\t\tthis._flushAccumulatedAndRenderNow();\n\t\t\t\treturn this.viewLines.getPositionFromDOMInfo(spanNode, offset);\n\t\t\t},\n\n\t\t\tvisibleRangeForPosition2: (lineNumber: number, column: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.visibleRangeForPosition2: View is disposed');\n\t\t\t\t}\n\t\t\t\tthis._flushAccumulatedAndRenderNow();\n\t\t\t\tvar visibleRanges = this.viewLines.visibleRangesForRange2(new Range(lineNumber, column, lineNumber, column), 0);\n\t\t\t\tif (!visibleRanges) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn visibleRanges[0];\n\t\t\t},\n\n\t\t\tgetLineWidth: (lineNumber: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.pointerHandler.getLineWidth: View is disposed');\n\t\t\t\t}\n\t\t\t\tthis._flushAccumulatedAndRenderNow();\n\t\t\t\treturn this.viewLines.getLineWidth(lineNumber);\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate createKeyboardHandlerHelper(): editorBrowser.IKeyboardHandlerHelper {\n\t\treturn {\n\t\t\tviewDomNode: this.domNode,\n\t\t\ttextArea: this.textArea,\n\t\t\tvisibleRangeForPositionRelativeToEditor: (lineNumber: number, column: number) => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\tthrow new Error('ViewImpl.keyboardHandler.visibleRangeForPositionRelativeToEditor: View is disposed');\n\t\t\t\t}\n\t\t\t\tthis._flushAccumulatedAndRenderNow();\n\t\t\t\tvar linesViewPortData = this.layoutProvider.getLinesViewportData();\n\t\t\t\tvar visibleRanges = this.viewLines.visibleRangesForRange2(new Range(lineNumber, column, lineNumber, column), linesViewPortData.visibleRangesDeltaTop);\n\t\t\t\tif (!visibleRanges) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn visibleRanges[0];\n\t\t\t},\n\t\t\tflushAnyAccumulatedEvents: () => {\n\t\t\t\tthis._flushAnyAccumulatedEvents();\n\t\t\t}\n\t\t};\n\t}\n\n\tpublic setAriaActiveDescendant(id:string): void {\n\t\tif (id) {\n\t\t\tthis.textArea.setAttribute('role', 'combobox');\n\t\t\tif (this.textArea.getAttribute('aria-activedescendant') !== id) {\n\t\t\t\tthis.textArea.setAttribute('aria-haspopup', 'true');\n\t\t\t\tthis.textArea.setAttribute('aria-activedescendant', id);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.textArea.setAttribute('role', 'textbox');\n\t\t\tthis.textArea.removeAttribute('aria-activedescendant');\n\t\t\tthis.textArea.removeAttribute('aria-haspopup');\n\t\t}\n\t}\n\n\t// --- begin event handlers\n\n\tpublic onLayoutChanged(layoutInfo:editorCommon.IEditorLayoutInfo): boolean {\n\t\tif (browser.isChrome) {\n\t\t\t/* tslint:disable:no-unused-variable */\n\t\t\t// Access overflowGuardContainer.clientWidth to prevent relayouting bug in Chrome\n\t\t\t// See Bug 19676: Editor misses a layout event\n\t\t\tvar clientWidth = this.overflowGuardContainer.clientWidth + 'px';\n\t\t\t/* tslint:enable:no-unused-variable */\n\t\t}\n\t\tStyleMutator.setWidth(this.domNode, layoutInfo.width);\n\t\tStyleMutator.setHeight(this.domNode, layoutInfo.height);\n\n\t\tStyleMutator.setWidth(this.overflowGuardContainer, layoutInfo.width);\n\t\tStyleMutator.setHeight(this.overflowGuardContainer, layoutInfo.height);\n\n\t\tStyleMutator.setWidth(this.linesContent, 1000000);\n\t\tStyleMutator.setHeight(this.linesContent, 1000000);\n\n\t\tStyleMutator.setLeft(this.linesContentContainer, layoutInfo.contentLeft);\n\t\tStyleMutator.setWidth(this.linesContentContainer, layoutInfo.contentWidth);\n\t\tStyleMutator.setHeight(this.linesContentContainer, layoutInfo.contentHeight);\n\n\t\tthis.outgoingEventBus.emit(editorCommon.EventType.ViewLayoutChanged, layoutInfo);\n\t\treturn false;\n\t}\n\tpublic onConfigurationChanged(e: editorCommon.IConfigurationChangedEvent): boolean {\n\t\tif (e.stylingInfo) {\n\t\t\tConfiguration.applyEditorStyling(this.domNode, this.context.configuration.editor.stylingInfo);\n\t\t}\n\t\tif (e.ariaLabel) {\n\t\t\tthis.textArea.setAttribute('aria-label', this.context.configuration.editor.ariaLabel);\n\t\t}\n\t\treturn false;\n\t}\n\tpublic onScrollChanged(e:editorCommon.IScrollEvent): boolean {\n\t\tthis.outgoingEventBus.emit('scroll', {\n\t\t\tscrollTop: this.layoutProvider.getScrollTop(),\n\t\t\tscrollLeft: this.layoutProvider.getScrollLeft()\n\t\t});\n\t\treturn false;\n\t}\n\tpublic onScrollHeightChanged(scrollHeight:number): boolean {\n\t\tthis.outgoingEventBus.emit('scrollSize', {\n\t\t\tscrollWidth: this.layoutProvider.getScrollWidth(),\n\t\t\tscrollHeight: this.layoutProvider.getScrollHeight()\n\t\t});\n\t\treturn super.onScrollHeightChanged(scrollHeight);\n\t}\n\tpublic onViewFocusChanged(isFocused:boolean): boolean {\n\t\tdom.toggleClass(this.domNode, 'focused', isFocused);\n\t\tif (isFocused) {\n\t\t\tthis._editorTextFocusContextKey.set(true);\n\t\t\tthis.outgoingEventBus.emit(editorCommon.EventType.ViewFocusGained, {});\n\t\t} else {\n\t\t\tthis._editorTextFocusContextKey.reset();\n\t\t\tthis.outgoingEventBus.emit(editorCommon.EventType.ViewFocusLost, {});\n\t\t}\n\t\treturn false;\n\t}\n\t// --- end event handlers\n\n\tpublic dispose(): void {\n\t\tthis._isDisposed = true;\n\t\tif (this.handleAccumulatedModelEventsTimeout !== -1) {\n\t\t\tclearTimeout(this.handleAccumulatedModelEventsTimeout);\n\t\t\tthis.handleAccumulatedModelEventsTimeout = -1;\n\t\t}\n\t\tif (this._renderAnimationFrame !== null) {\n\t\t\tthis._renderAnimationFrame.dispose();\n\t\t\tthis._renderAnimationFrame = null;\n\t\t}\n\t\tthis.accumulatedModelEvents = [];\n\n\t\tthis.eventDispatcher.removeEventHandler(this);\n\t\tthis.outgoingEventBus.dispose();\n\t\tthis.listenersToRemove.forEach((element) => {\n\t\t\telement();\n\t\t});\n\t\tthis.listenersToRemove = [];\n\n\t\tthis.listenersToDispose = dispose(this.listenersToDispose);\n\n\t\tthis.keyboardHandler.dispose();\n\t\tthis.pointerHandler.dispose();\n\n\t\tthis.viewLines.dispose();\n\n\t\t// Destroy IViewPart second\n\t\tfor (var i = 0, len = this.viewParts.length; i < len; i++) {\n\t\t\tthis.viewParts[i].dispose();\n\t\t}\n\t\tthis.viewParts = [];\n\n\t\tthis.layoutProvider.dispose();\n\t\tthis._keybindingService.dispose();\n\t}\n\n\t// --- begin Code Editor APIs\n\n\tprivate codeEditorHelper:editorBrowser.ICodeEditorHelper;\n\tpublic getCodeEditorHelper(): editorBrowser.ICodeEditorHelper {\n\t\tif (!this.codeEditorHelper) {\n\t\t\tthis.codeEditorHelper = {\n\t\t\t\tgetScrollTop: () => {\n\t\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\t\tthrow new Error('ViewImpl.codeEditorHelper.getScrollTop: View is disposed');\n\t\t\t\t\t}\n\t\t\t\t\treturn this.layoutProvider.getScrollTop();\n\t\t\t\t},\n\t\t\t\tsetScrollTop: (scrollTop: number) => {\n\t\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\t\tthrow new Error('ViewImpl.codeEditorHelper.setScrollTop: View is disposed');\n\t\t\t\t\t}\n\t\t\t\t\tthis.layoutProvider.setScrollTop(scrollTop);\n\t\t\t\t},\n\t\t\t\tgetScrollLeft: () => {\n\t\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\t\tthrow new Error('ViewImpl.codeEditorHelper.getScrollLeft: View is disposed');\n\t\t\t\t\t}\n\t\t\t\t\treturn this.layoutProvider.getScrollLeft();\n\t\t\t\t},\n\t\t\t\tsetScrollLeft: (scrollLeft: number) => {\n\t\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\t\tthrow new Error('ViewImpl.codeEditorHelper.setScrollLeft: View is disposed');\n\t\t\t\t\t}\n\t\t\t\t\tthis.layoutProvider.setScrollLeft(scrollLeft);\n\t\t\t\t},\n\t\t\t\tgetScrollHeight: () => {\n\t\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\t\tthrow new Error('ViewImpl.codeEditorHelper.getScrollHeight: View is disposed');\n\t\t\t\t\t}\n\t\t\t\t\treturn this.layoutProvider.getScrollHeight();\n\t\t\t\t},\n\t\t\t\tgetScrollWidth: () => {\n\t\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\t\tthrow new Error('ViewImpl.codeEditorHelper.getScrollWidth: View is disposed');\n\t\t\t\t\t}\n\t\t\t\t\treturn this.layoutProvider.getScrollWidth();\n\t\t\t\t},\n\t\t\t\tgetVerticalOffsetForPosition: (modelLineNumber:number, modelColumn:number) => {\n\t\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\t\tthrow new Error('ViewImpl.codeEditorHelper.getVerticalOffsetForPosition: View is disposed');\n\t\t\t\t\t}\n\t\t\t\t\tvar modelPosition = this.context.model.validateModelPosition({\n\t\t\t\t\t\tlineNumber: modelLineNumber,\n\t\t\t\t\t\tcolumn: modelColumn\n\t\t\t\t\t});\n\t\t\t\t\tvar viewPosition = this.context.model.convertModelPositionToViewPosition(modelPosition.lineNumber, modelPosition.column);\n\t\t\t\t\treturn this.layoutProvider.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\n\t\t\t\t},\n\t\t\t\tdelegateVerticalScrollbarMouseDown: (browserEvent: MouseEvent) => {\n\t\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\t\tthrow new Error('ViewImpl.codeEditorHelper.delegateVerticalScrollbarMouseDown: View is disposed');\n\t\t\t\t\t}\n\t\t\t\t\tthis.layoutProvider.delegateVerticalScrollbarMouseDown(browserEvent);\n\t\t\t\t},\n\t\t\t\tgetOffsetForColumn: (modelLineNumber: number, modelColumn: number) => {\n\t\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\t\tthrow new Error('ViewImpl.codeEditorHelper.getOffsetForColumn: View is disposed');\n\t\t\t\t\t}\n\t\t\t\t\tvar modelPosition = this.context.model.validateModelPosition({\n\t\t\t\t\t\tlineNumber: modelLineNumber,\n\t\t\t\t\t\tcolumn: modelColumn\n\t\t\t\t\t});\n\t\t\t\t\tvar viewPosition = this.context.model.convertModelPositionToViewPosition(modelPosition.lineNumber, modelPosition.column);\n\t\t\t\t\tthis._flushAccumulatedAndRenderNow();\n\t\t\t\t\tvar visibleRanges = this.viewLines.visibleRangesForRange2(new Range(viewPosition.lineNumber, viewPosition.column, viewPosition.lineNumber, viewPosition.column), 0);\n\t\t\t\t\tif (!visibleRanges) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\treturn visibleRanges[0].left;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn this.codeEditorHelper;\n\t}\n\n\tpublic getCenteredRangeInViewport(): editorCommon.IEditorRange {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.getCenteredRangeInViewport: View is disposed');\n\t\t}\n\t\tvar viewLineNumber = this.layoutProvider.getCenteredViewLineNumberInViewport();\n\t\tvar viewModel = this.context.model;\n\t\tvar currentCenteredViewRange = new Range(viewLineNumber, 1, viewLineNumber, viewModel.getLineMaxColumn(viewLineNumber));\n\t\treturn viewModel.convertViewRangeToModelRange(currentCenteredViewRange);\n\t}\n\n//\tpublic getLineInfoProvider():view.ILineInfoProvider {\n//\t\treturn this.viewLines;\n//\t}\n\n\tpublic getInternalEventBus(): IEventEmitter {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.getInternalEventBus: View is disposed');\n\t\t}\n\t\treturn this.outgoingEventBus;\n\t}\n\n\tpublic saveState(): editorCommon.IViewState {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.saveState: View is disposed');\n\t\t}\n\t\treturn this.layoutProvider.saveState();\n\t}\n\n\tpublic restoreState(state: editorCommon.IViewState): void {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.restoreState: View is disposed');\n\t\t}\n\t\tthis._flushAnyAccumulatedEvents();\n\t\treturn this.layoutProvider.restoreState(state);\n\t}\n\n\tpublic focus(): void {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.focus: View is disposed');\n\t\t}\n\t\tthis.keyboardHandler.focusTextArea();\n\n\t\t// IE does not trigger the focus event immediately, so we must help it a little bit\n\t\tthis._setHasFocus(true);\n\t}\n\n\tpublic isFocused(): boolean {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.isFocused: View is disposed');\n\t\t}\n\t\treturn this.hasFocus;\n\t}\n\n\tpublic createOverviewRuler(cssClassName: string, minimumHeight: number, maximumHeight: number): OverviewRuler {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.createOverviewRuler: View is disposed');\n\t\t}\n\t\treturn new OverviewRuler(\n\t\t\t\tthis.context, cssClassName, this.layoutProvider.getScrollHeight(), minimumHeight, maximumHeight,\n\t\t\t\t(lineNumber:number) => this.layoutProvider.getVerticalOffsetForLineNumber(lineNumber)\n\t\t);\n\t}\n\n\tpublic change(callback: (changeAccessor: editorBrowser.IViewZoneChangeAccessor) => any): boolean {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.change: View is disposed');\n\t\t}\n\t\tvar zonesHaveChanged = false;\n\t\tthis._renderOnce(() => {\n\t\t\t// Handle events to avoid \"adjusting\" newly inserted view zones\n\t\t\tthis._flushAnyAccumulatedEvents();\n\t\t\tvar changeAccessor:editorBrowser.IViewZoneChangeAccessor = {\n\t\t\t\taddZone: (zone:editorBrowser.IViewZone): number => {\n\t\t\t\t\tzonesHaveChanged = true;\n\t\t\t\t\treturn this.viewZones.addZone(zone);\n\t\t\t\t},\n\t\t\t\tremoveZone: (id:number): void => {\n\t\t\t\t\tzonesHaveChanged = this.viewZones.removeZone(id) || zonesHaveChanged;\n\t\t\t\t},\n\t\t\t\tlayoutZone: (id: number): void => {\n\t\t\t\t\tzonesHaveChanged = this.viewZones.layoutZone(id) || zonesHaveChanged;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar r: any = safeInvoke1Arg(callback, changeAccessor);\n\n\t\t\t// Invalidate changeAccessor\n\t\t\tchangeAccessor.addZone = null;\n\t\t\tchangeAccessor.removeZone = null;\n\n\t\t\tif (zonesHaveChanged) {\n\t\t\t\tthis.context.privateViewEventBus.emit(editorCommon.EventType.ViewZonesChanged, null);\n\t\t\t}\n\n\t\t\treturn r;\n\t\t});\n\t\treturn zonesHaveChanged;\n\t}\n\n\tpublic getWhitespaces(): editorCommon.IEditorWhitespace[]{\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.getWhitespaces: View is disposed');\n\t\t}\n\t\treturn this.layoutProvider.getWhitespaces();\n\t}\n\n\tpublic addContentWidget(widgetData: editorBrowser.IContentWidgetData): void {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.addContentWidget: View is disposed');\n\t\t}\n\t\tthis._renderOnce(() => {\n\t\t\tthis.contentWidgets.addWidget(widgetData.widget);\n\t\t\tthis.layoutContentWidget(widgetData);\n\t\t});\n\t}\n\n\tpublic layoutContentWidget(widgetData: editorBrowser.IContentWidgetData): void {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.layoutContentWidget: View is disposed');\n\t\t}\n\n\t\tthis._renderOnce(() => {\n\t\t\tlet newPosition = widgetData.position ? widgetData.position.position : null;\n\t\t\tlet newPreference = widgetData.position ? widgetData.position.preference : null;\n\t\t\tthis.contentWidgets.setWidgetPosition(widgetData.widget, newPosition, newPreference);\n\t\t});\n\t}\n\n\tpublic removeContentWidget(widgetData: editorBrowser.IContentWidgetData): void {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.removeContentWidget: View is disposed');\n\t\t}\n\t\tthis._renderOnce(() => {\n\t\t\tthis.contentWidgets.removeWidget(widgetData.widget);\n\t\t});\n\t}\n\n\tpublic addOverlayWidget(widgetData: editorBrowser.IOverlayWidgetData): void {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.addOverlayWidget: View is disposed');\n\t\t}\n\t\tthis._renderOnce(() => {\n\t\t\tthis.overlayWidgets.addWidget(widgetData.widget);\n\t\t\tthis.layoutOverlayWidget(widgetData);\n\t\t});\n\t}\n\n\tpublic layoutOverlayWidget(widgetData: editorBrowser.IOverlayWidgetData): void {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.layoutOverlayWidget: View is disposed');\n\t\t}\n\n\t\tlet newPreference = widgetData.position ? widgetData.position.preference : null;\n\t\tlet shouldRender = this.overlayWidgets.setWidgetPosition(widgetData.widget, newPreference);\n\t\tif (shouldRender) {\n\t\t\tthis._scheduleRender();\n\t\t}\n\t}\n\n\tpublic removeOverlayWidget(widgetData: editorBrowser.IOverlayWidgetData): void {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.removeOverlayWidget: View is disposed');\n\t\t}\n\t\tthis._renderOnce(() => {\n\t\t\tthis.overlayWidgets.removeWidget(widgetData.widget);\n\t\t});\n\t}\n\n\tpublic render(now:boolean, everything:boolean): void {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.render: View is disposed');\n\t\t}\n\t\tif (everything) {\n\t\t\t// Force a render with a layout event\n\t\t\tthis.layoutProvider.emitLayoutChangedEvent();\n\t\t}\n\t\tif (now) {\n\t\t\tthis._flushAccumulatedAndRenderNow();\n\t\t}\n\t}\n\n\tpublic renderOnce(callback: () => any): any {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl.renderOnce: View is disposed');\n\t\t}\n\t\treturn this._renderOnce(callback);\n\t}\n\n\t// --- end Code Editor APIs\n\n\tprivate _renderOnce(callback: () => any): any {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl._renderOnce: View is disposed');\n\t\t}\n\t\treturn this.outgoingEventBus.deferredEmit(() => {\n\t\t\tlet r = safeInvokeNoArg(callback);\n\t\t\tthis._scheduleRender();\n\t\t\treturn r;\n\t\t});\n\t}\n\n\tprivate _scheduleRender(): void {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error('ViewImpl._scheduleRender: View is disposed');\n\t\t}\n\t\tif (this._renderAnimationFrame === null) {\n\t\t\tthis._renderAnimationFrame = dom.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this), 100);\n\t\t}\n\t}\n\n\tprivate _onRenderScheduled(): void {\n\t\tthis._renderAnimationFrame = null;\n\t\tthis._flushAccumulatedAndRenderNow();\n\t}\n\n\tprivate _renderNow(): void {\n\t\tsafeInvokeNoArg(() => this._actualRender());\n\t}\n\n\tprivate createRenderingContext(linesViewportData:editorCommon.ViewLinesViewportData): editorBrowser.IRenderingContext {\n\n\t\tvar vInfo = this.layoutProvider.getCurrentViewport();\n\n\t\tvar deltaTop = linesViewportData.visibleRangesDeltaTop;\n\n\t\tvar r:editorBrowser.IRenderingContext = {\n\t\t\tlinesViewportData: linesViewportData,\n\t\t\tscrollWidth: this.layoutProvider.getScrollWidth(),\n\t\t\tscrollHeight: this.layoutProvider.getScrollHeight(),\n\n\t\t\tvisibleRange: linesViewportData.visibleRange,\n\t\t\tbigNumbersDelta: linesViewportData.bigNumbersDelta,\n\n\t\t\tviewportWidth: vInfo.width,\n\t\t\tviewportHeight: vInfo.height,\n\t\t\tviewportLeft: vInfo.left,\n\t\t\tviewportTop: vInfo.top,\n\n\t\t\tgetScrolledTopFromAbsoluteTop: (absoluteTop:number) => {\n\t\t\t\treturn this.layoutProvider.getScrolledTopFromAbsoluteTop(absoluteTop);\n\t\t\t},\n\n\t\t\tgetViewportVerticalOffsetForLineNumber: (lineNumber:number) => {\n\t\t\t\tvar verticalOffset = this.layoutProvider.getVerticalOffsetForLineNumber(lineNumber);\n\t\t\t\tvar scrolledTop = this.layoutProvider.getScrolledTopFromAbsoluteTop(verticalOffset);\n\t\t\t\treturn scrolledTop;\n\t\t\t},\n\n\t\t\tgetDecorationsInViewport: () => linesViewportData.getDecorationsInViewport(),\n\n\t\t\tlinesVisibleRangesForRange: (range:editorCommon.IRange, includeNewLines:boolean) => {\n\t\t\t\treturn this.viewLines.linesVisibleRangesForRange(range, includeNewLines);\n\t\t\t},\n\n\t\t\tvisibleRangeForPosition: (position:editorCommon.IPosition) => {\n\t\t\t\tvar visibleRanges = this.viewLines.visibleRangesForRange2(new Range(position.lineNumber, position.column, position.lineNumber, position.column), deltaTop);\n\t\t\t\tif (!visibleRanges) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn visibleRanges[0];\n\t\t\t},\n\n\t\t\tlineIsVisible: (lineNumber:number) => {\n\t\t\t\treturn linesViewportData.visibleRange.startLineNumber <= lineNumber && lineNumber <= linesViewportData.visibleRange.endLineNumber;\n\t\t\t}\n\t\t};\n\t\treturn r;\n\t}\n\n\tprivate _getViewPartsToRender(): ViewPart[] {\n\t\tlet result:ViewPart[] = [];\n\t\tfor (let i = 0, len = this.viewParts.length; i < len; i++) {\n\t\t\tlet viewPart = this.viewParts[i];\n\t\t\tif (viewPart.shouldRender()) {\n\t\t\t\tresult.push(viewPart);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _actualRender(): void {\n\t\tif (!dom.isInDOM(this.domNode)) {\n\t\t\treturn;\n\t\t}\n\t\tlet t = timer.start(timer.Topic.EDITOR, 'View.render');\n\n\t\tlet viewPartsToRender = this._getViewPartsToRender();\n\n\t\tif (!this.viewLines.shouldRender() && viewPartsToRender.length === 0) {\n\t\t\t// Nothing to render\n\t\t\tthis.keyboardHandler.writeToTextArea();\n\t\t\tt.stop();\n\t\t\treturn;\n\t\t}\n\n\t\tlet linesViewportData = this.layoutProvider.getLinesViewportData();\n\n\t\tif (this.viewLines.shouldRender()) {\n\t\t\tthis.viewLines.renderText(linesViewportData, () => {\n\t\t\t\tthis.keyboardHandler.writeToTextArea();\n\t\t\t});\n\t\t\tthis.viewLines.onDidRender();\n\n\t\t\t// Rendering of viewLines might cause scroll events to occur, so collect view parts to render again\n\t\t\tviewPartsToRender = this._getViewPartsToRender();\n\t\t} else {\n\t\t\tthis.keyboardHandler.writeToTextArea();\n\t\t}\n\n\t\tlet renderingContext = this.createRenderingContext(linesViewportData);\n\n\t\t// Render the rest of the parts\n\t\tfor (let i = 0, len = viewPartsToRender.length; i < len; i++) {\n\t\t\tlet viewPart = viewPartsToRender[i];\n\t\t\tviewPart.prepareRender(renderingContext);\n\t\t}\n\n\t\tfor (let i = 0, len = viewPartsToRender.length; i < len; i++) {\n\t\t\tlet viewPart = viewPartsToRender[i];\n\t\t\tviewPart.render(renderingContext);\n\t\t\tviewPart.onDidRender();\n\t\t}\n\n\t\t// Render the scrollbar\n\t\tthis.layoutProvider.renderScrollbar();\n\n\t\tt.stop();\n\t}\n\n\tprivate _setHasFocus(newHasFocus:boolean): void {\n\t\tif (this.hasFocus !== newHasFocus) {\n\t\t\tthis.hasFocus = newHasFocus;\n\t\t\tthis.context.privateViewEventBus.emit(editorCommon.EventType.ViewFocusChanged, this.hasFocus);\n\t\t}\n\t}\n}\n\nclass ViewContext implements editorBrowser.IViewContext {\n\n\tpublic editorId:number;\n\tpublic configuration:editorCommon.IConfiguration;\n\tpublic model: editorCommon.IViewModel;\n\tpublic privateViewEventBus:editorCommon.IViewEventBus;\n\tpublic addEventHandler:(eventHandler:editorBrowser.IViewEventHandler)=>void;\n\tpublic removeEventHandler:(eventHandler:editorBrowser.IViewEventHandler)=>void;\n\n\tconstructor(\n\t\t\t\t\teditorId:number,\n\t\t\t\t\tconfiguration:editorCommon.IConfiguration,\n\t\t\t\t\tmodel: editorCommon.IViewModel,\n\t\t\t\t\tprivateViewEventBus:editorCommon.IViewEventBus,\n\t\t\t\t\taddEventHandler:(eventHandler:editorBrowser.IViewEventHandler)=>void,\n\t\t\t\t\tremoveEventHandler:(eventHandler:editorBrowser.IViewEventHandler)=>void\n\t\t\t\t)\n\t{\n\t\tthis.editorId = editorId;\n\t\tthis.configuration = configuration;\n\t\tthis.model = model;\n\t\tthis.privateViewEventBus = privateViewEventBus;\n\t\tthis.addEventHandler = addEventHandler;\n\t\tthis.removeEventHandler = removeEventHandler;\n\t}\n}\n\nfunction safeInvokeNoArg(func:Function): any {\n\ttry {\n\t\treturn func();\n\t} catch(e) {\n\t\tonUnexpectedError(e);\n\t}\n}\n\nfunction safeInvoke1Arg(func:Function, arg1:any): any {\n\ttry {\n\t\treturn func(arg1);\n\t} catch(e) {\n\t\tonUnexpectedError(e);\n\t}\n}\n"]}