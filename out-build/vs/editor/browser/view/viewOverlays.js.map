{"version":3,"file":"viewOverlays.js","sourceRoot":"","sources":["../../../../../src/vs/editor/browser/view/viewOverlays.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as browser from 'vs/base/browser/browser';\nimport {StyleMutator, FastDomNode, createFastDomNode} from 'vs/base/browser/styleMutator';\nimport {IConfigurationChangedEvent, IEditorLayoutInfo, IModelDecoration} from 'vs/editor/common/editorCommon';\nimport * as editorBrowser from 'vs/editor/browser/editorBrowser';\nimport {IVisibleLineData, ViewLayer} from 'vs/editor/browser/view/viewLayer';\nimport {DynamicViewOverlay} from 'vs/editor/browser/view/dynamicViewOverlay';\n\nexport class ViewOverlays extends ViewLayer {\n\n\tprivate _dynamicOverlays:DynamicViewOverlay[];\n\tprivate _isFocused:boolean;\n\t_layoutProvider:editorBrowser.ILayoutProvider;\n\n\tconstructor(context:editorBrowser.IViewContext, layoutProvider:editorBrowser.ILayoutProvider) {\n\t\tsuper(context);\n\n\t\tthis._dynamicOverlays = [];\n\t\tthis._isFocused = false;\n\t\tthis._layoutProvider = layoutProvider;\n\n\t\tthis.domNode.setClassName('view-overlays');\n\t}\n\n\tpublic shouldRender(): boolean {\n\t\tif (super.shouldRender()) {\n\t\t\treturn true;\n\t\t}\n\n\t\tfor (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n\t\t\tlet dynamicOverlay = this._dynamicOverlays[i];\n\t\t\tif (dynamicOverlay.shouldRender()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._layoutProvider = null;\n\n\t\tfor (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n\t\t\tlet dynamicOverlay = this._dynamicOverlays[i];\n\t\t\tdynamicOverlay.dispose();\n\t\t}\n\t\tthis._dynamicOverlays = null;\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this.domNode.domNode;\n\t}\n\n\tpublic addDynamicOverlay(overlay:DynamicViewOverlay): void {\n\t\tthis._dynamicOverlays.push(overlay);\n\t}\n\n\t// ----- event handlers\n\n\tpublic onViewFocusChanged(isFocused:boolean): boolean {\n\t\tthis._isFocused = isFocused;\n\t\treturn true;\n\t}\n\n\t// ----- end event handlers\n\n\t_createLine(): IVisibleLineData {\n\t\tvar r = new ViewOverlayLine(this._context, this._dynamicOverlays);\n\t\treturn r;\n\t}\n\n\n\tpublic prepareRender(ctx:editorBrowser.IRenderingContext): void {\n\t\tlet toRender = this._dynamicOverlays.filter(overlay => overlay.shouldRender());\n\n\t\tfor (let i = 0, len = toRender.length; i < len; i++) {\n\t\t\tlet dynamicOverlay = toRender[i];\n\t\t\tdynamicOverlay.prepareRender(ctx);\n\t\t\tdynamicOverlay.onDidRender();\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic render(ctx:editorBrowser.IRestrictedRenderingContext): void {\n\t\t// Overwriting to bypass `shouldRender` flag\n\t\tthis._viewOverlaysRender(ctx);\n\n\t\tthis.domNode.toggleClassName('focused', this._isFocused);\n\t}\n\n\t_viewOverlaysRender(ctx:editorBrowser.IRestrictedRenderingContext): void {\n\t\tsuper._renderLines(ctx.linesViewportData);\n\t}\n}\n\nclass ViewOverlayLine implements IVisibleLineData {\n\n\tprivate _context:editorBrowser.IViewContext;\n\tprivate _dynamicOverlays:DynamicViewOverlay[];\n\tprivate _domNode: FastDomNode;\n\tprivate _renderPieces: string;\n\tprivate _lineHeight: number;\n\n\tconstructor(context:editorBrowser.IViewContext, dynamicOverlays:DynamicViewOverlay[]) {\n\t\tthis._context = context;\n\t\tthis._lineHeight = this._context.configuration.editor.lineHeight;\n\t\tthis._dynamicOverlays = dynamicOverlays;\n\n\t\tthis._domNode = null;\n\t\tthis._renderPieces = null;\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\tif (!this._domNode) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._domNode.domNode;\n\t}\n\tpublic setDomNode(domNode:HTMLElement): void {\n\t\tthis._domNode = createFastDomNode(domNode);\n\t}\n\n\tonContentChanged(): void {\n\t\t// Nothing\n\t}\n\tonLinesInsertedAbove(): void {\n\t\t// Nothing\n\t}\n\tonLinesDeletedAbove(): void {\n\t\t// Nothing\n\t}\n\tonLineChangedAbove(): void {\n\t\t// Nothing\n\t}\n\tonTokensChanged(): void {\n\t\t// Nothing\n\t}\n\tonConfigurationChanged(e:IConfigurationChangedEvent): void {\n\t\tif (e.lineHeight) {\n\t\t\tthis._lineHeight = this._context.configuration.editor.lineHeight;\n\t\t}\n\t}\n\n\tshouldUpdateHTML(startLineNumber:number, lineNumber:number, inlineDecorations:IModelDecoration[]): boolean {\n\t\tlet newPieces = '';\n\t\tfor (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n\t\t\tlet dynamicOverlay = this._dynamicOverlays[i];\n\t\t\tnewPieces += dynamicOverlay.render(startLineNumber, lineNumber);\n\t\t}\n\n\t\tlet piecesEqual = (this._renderPieces === newPieces);\n\n\t\tif (!piecesEqual) {\n\t\t\tthis._renderPieces = newPieces;\n\t\t}\n\n\t\treturn !piecesEqual;\n\t}\n\n\tgetLineOuterHTML(out:string[], lineNumber:number, deltaTop:number): void {\n\t\tout.push('<div lineNumber=\"');\n\t\tout.push(lineNumber.toString());\n\t\tout.push('\" style=\"top:');\n\t\tout.push(deltaTop.toString());\n\t\tout.push('px;height:');\n\t\tout.push(this._lineHeight.toString());\n\t\tout.push('px;\" class=\"');\n\t\tout.push(editorBrowser.ClassNames.VIEW_LINE);\n\t\tout.push('\">');\n\t\tout.push(this.getLineInnerHTML(lineNumber));\n\t\tout.push('</div>');\n\t}\n\n\tgetLineInnerHTML(lineNumber: number): string {\n\t\treturn this._renderPieces;\n\t}\n\n\tlayoutLine(lineNumber: number, deltaTop:number): void {\n\t\tthis._domNode.setLineNumber(String(lineNumber));\n\t\tthis._domNode.setTop(deltaTop);\n\t\tthis._domNode.setHeight(this._lineHeight);\n\t}\n}\n\nexport class ContentViewOverlays extends ViewOverlays {\n\n\tprivate _scrollWidth: number;\n\n\tconstructor(context:editorBrowser.IViewContext, layoutProvider:editorBrowser.ILayoutProvider) {\n\t\tsuper(context, layoutProvider);\n\n\t\tthis._scrollWidth = this._layoutProvider.getScrollWidth();\n\n\t\tthis.domNode.setWidth(this._scrollWidth);\n\t\tthis.domNode.setHeight(0);\n\t}\n\n\tpublic onScrollWidthChanged(scrollWidth:number): boolean {\n\t\tthis._scrollWidth = this._layoutProvider.getScrollWidth();\n\t\treturn true;\n\t}\n\n\t_viewOverlaysRender(ctx:editorBrowser.IRestrictedRenderingContext): void {\n\t\tsuper._viewOverlaysRender(ctx);\n\n\t\tthis.domNode.setWidth(this._scrollWidth);\n\t}\n}\n\nexport class MarginViewOverlays extends ViewOverlays {\n\n\tprivate _glyphMarginLeft:number;\n\tprivate _glyphMarginWidth:number;\n\tprivate _scrollHeight:number;\n\tprivate _contentLeft: number;\n\n\tconstructor(context:editorBrowser.IViewContext, layoutProvider:editorBrowser.ILayoutProvider) {\n\t\tsuper(context, layoutProvider);\n\n\t\tthis._glyphMarginLeft = context.configuration.editor.layoutInfo.glyphMarginLeft;\n\t\tthis._glyphMarginWidth = context.configuration.editor.layoutInfo.glyphMarginWidth;\n\t\tthis._scrollHeight = layoutProvider.getScrollHeight();\n\t\tthis._contentLeft = context.configuration.editor.layoutInfo.contentLeft;\n\n\t\tthis.domNode.setClassName(editorBrowser.ClassNames.MARGIN_VIEW_OVERLAYS + ' monaco-editor-background');\n\t\tthis.domNode.setWidth(1);\n\t}\n\n\tprotected _extraDomNodeHTML(): string {\n\t\treturn [\n\t\t\t'<div class=\"',\n\t\t\teditorBrowser.ClassNames.GLYPH_MARGIN,\n\t\t\t'\" style=\"left:',\n\t\t\tString(this._glyphMarginLeft),\n\t\t\t'px;width:',\n\t\t\tString(this._glyphMarginWidth),\n\t\t\t'px;height:',\n\t\t\tString(this._scrollHeight),\n\t\t\t'px;\"></div>'\n\t\t].join('');\n\t}\n\n\tprivate _getGlyphMarginDomNode(): HTMLElement {\n\t\treturn <HTMLElement>this.domNode.domNode.children[0];\n\t}\n\n\tpublic onScrollHeightChanged(scrollHeight:number): boolean {\n\t\tthis._scrollHeight = scrollHeight;\n\t\treturn super.onScrollHeightChanged(scrollHeight) || true;\n\t}\n\n\tpublic onLayoutChanged(layoutInfo:IEditorLayoutInfo): boolean {\n\t\tthis._glyphMarginLeft = layoutInfo.glyphMarginLeft;\n\t\tthis._glyphMarginWidth = layoutInfo.glyphMarginWidth;\n\t\tthis._scrollHeight = this._layoutProvider.getScrollHeight();\n\t\tthis._contentLeft = layoutInfo.contentLeft;\n\t\treturn super.onLayoutChanged(layoutInfo) || true;\n\t}\n\n\t_viewOverlaysRender(ctx:editorBrowser.IRestrictedRenderingContext): void {\n\t\tsuper._viewOverlaysRender(ctx);\n\t\tif (browser.canUseTranslate3d) {\n\t\t\tvar transform = 'translate3d(0px, ' + ctx.linesViewportData.visibleRangesDeltaTop + 'px, 0px)';\n\t\t\tthis.domNode.setTransform(transform);\n\t\t} else {\n\t\t\tthis.domNode.setTop(ctx.linesViewportData.visibleRangesDeltaTop);\n\t\t}\n\t\tvar height = Math.min(this._layoutProvider.getTotalHeight(), 1000000);\n\t\tthis.domNode.setHeight(height);\n\t\tthis.domNode.setWidth(this._contentLeft);\n\n\t\tvar glyphMargin = this._getGlyphMarginDomNode();\n\t\tif (glyphMargin) {\n\t\t\tStyleMutator.setHeight(glyphMargin, this._scrollHeight);\n\t\t\tStyleMutator.setLeft(glyphMargin, this._glyphMarginLeft);\n\t\t\tStyleMutator.setWidth(glyphMargin, this._glyphMarginWidth);\n\t\t}\n\t}\n}"]}