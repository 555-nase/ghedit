{"version":3,"file":"codeEditorWidget.js","sourceRoot":"","sources":["../../../../../src/vs/editor/browser/widget/codeEditorWidget.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport 'vs/css!./media/default-theme';\nimport 'vs/css!./media/editor';\nimport 'vs/css!./media/tokens';\nimport {onUnexpectedError} from 'vs/base/common/errors';\nimport {IEventEmitter} from 'vs/base/common/eventEmitter';\nimport * as browser from 'vs/base/browser/browser';\nimport * as dom from 'vs/base/browser/dom';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {IKeybindingService} from 'vs/platform/keybinding/common/keybindingService';\nimport {ITelemetryService} from 'vs/platform/telemetry/common/telemetry';\nimport {CommonCodeEditor} from 'vs/editor/common/commonCodeEditor';\nimport {CommonEditorConfiguration} from 'vs/editor/common/config/commonEditorConfig';\nimport {Range} from 'vs/editor/common/core/range';\nimport {Selection} from 'vs/editor/common/core/selection';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {CommonEditorRegistry} from 'vs/editor/common/editorCommonExtensions';\nimport {ICodeEditorService} from 'vs/editor/common/services/codeEditorService';\nimport {Configuration} from 'vs/editor/browser/config/configuration';\nimport * as editorBrowser from 'vs/editor/browser/editorBrowser';\nimport {EditorBrowserRegistry} from 'vs/editor/browser/editorBrowserExtensions';\nimport {Colorizer} from 'vs/editor/browser/standalone/colorizer';\nimport {View} from 'vs/editor/browser/view/viewImpl';\nimport * as TokensBinaryEncoding from 'vs/editor/common/model/tokensBinaryEncoding';\n\nexport class CodeEditorWidget extends CommonCodeEditor implements editorBrowser.ICodeEditor {\n\n\tprotected domElement:HTMLElement;\n\tprivate focusTracker:dom.IFocusTracker;\n\n\t_configuration:Configuration;\n\n\tprivate contentWidgets:{ [key:string]:editorBrowser.IContentWidgetData; };\n\tprivate overlayWidgets:{ [key:string]:editorBrowser.IOverlayWidgetData; };\n\n\t_view:editorBrowser.IView;\n\n\tconstructor(\n\t\tdomElement:HTMLElement,\n\t\toptions:editorCommon.IEditorOptions,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@ITelemetryService telemetryService: ITelemetryService\n\t) {\n\t\tsuper(domElement, options, instantiationService, codeEditorService, keybindingService, telemetryService);\n\n\t\t// track focus of the domElement and all its anchestors\n\t\tthis.focusTracker = dom.trackFocus(this.domElement);\n\t\tthis.focusTracker.addFocusListener(() => {\n\t\t\tif (this.forcedWidgetFocusCount === 0) {\n\t\t\t\tthis._editorFocusContextKey.set(true);\n\t\t\t\tthis.emit(editorCommon.EventType.EditorFocus, {});\n\t\t\t}\n\t\t});\n\t\tthis.focusTracker.addBlurListener(() => {\n\t\t\tif (this.forcedWidgetFocusCount === 0) {\n\t\t\t\tthis._editorFocusContextKey.reset();\n\t\t\t\tthis.emit(editorCommon.EventType.EditorBlur, {});\n\t\t\t}\n\t\t});\n\n\t\tthis.contentWidgets = {};\n\t\tthis.overlayWidgets = {};\n\n\t\tvar contributionDescriptors = [].concat(EditorBrowserRegistry.getEditorContributions()).concat(CommonEditorRegistry.getEditorContributions());\n\t\tfor (var i = 0, len = contributionDescriptors.length; i < len; i++) {\n\t\t\ttry {\n\t\t\t\tvar contribution = contributionDescriptors[i].createInstance(this._instantiationService, this);\n\t\t\t\tthis.contributions[contribution.getId()] = contribution;\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Could not instantiate contribution ' + contribution.getId());\n\t\t\t\tonUnexpectedError(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _createConfiguration(options:editorCommon.ICodeEditorWidgetCreationOptions): CommonEditorConfiguration {\n\t\treturn new Configuration(options, this.domElement);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.contentWidgets = {};\n\t\tthis.overlayWidgets = {};\n\n\t\tthis.focusTracker.dispose();\n\t\tsuper.dispose();\n\t}\n\n\tpublic updateOptions(newOptions:editorCommon.IEditorOptions): void {\n\t\tlet oldTheme = this._configuration.editor.theme;\n\t\tsuper.updateOptions(newOptions);\n\t\tlet newTheme = this._configuration.editor.theme;\n\n\t\tif (oldTheme !== newTheme) {\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\tpublic colorizeModelLine(lineNumber:number, model:editorCommon.IModel = this.model): string {\n\t\tif (!model) {\n\t\t\treturn '';\n\t\t}\n\t\tvar content = model.getLineContent(lineNumber);\n\t\tvar tokens = model.getLineTokens(lineNumber, false);\n\t\tvar inflatedTokens = TokensBinaryEncoding.inflateArr(tokens.getBinaryEncodedTokensMap(), tokens.getBinaryEncodedTokens());\n\t\tvar tabSize = model.getOptions().tabSize;\n\t\treturn Colorizer.colorizeLine(content, inflatedTokens, tabSize);\n\t}\n\tpublic getView(): editorBrowser.IView {\n\t\treturn this._view;\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\tif (!this.hasView) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._view.domNode;\n\t}\n\n\tpublic getCenteredRangeInViewport(): editorCommon.IEditorRange {\n\t\tif (!this.hasView) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._view.getCenteredRangeInViewport();\n\t}\n\n\tpublic setScrollTop(newScrollTop:number): void {\n\t\tif (!this.hasView) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof newScrollTop !== 'number') {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\t\tthis._view.getCodeEditorHelper().setScrollTop(newScrollTop);\n\t}\n\n\tpublic getScrollTop(): number {\n\t\tif (!this.hasView) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._view.getCodeEditorHelper().getScrollTop();\n\t}\n\n\tpublic delegateVerticalScrollbarMouseDown(browserEvent:MouseEvent): void {\n\t\tif (!this.hasView) {\n\t\t\treturn;\n\t\t}\n\t\tthis._view.getCodeEditorHelper().delegateVerticalScrollbarMouseDown(browserEvent);\n\t}\n\n\tpublic setScrollLeft(newScrollLeft:number): void {\n\t\tif (!this.hasView) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof newScrollLeft !== 'number') {\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\t\tthis._view.getCodeEditorHelper().setScrollLeft(newScrollLeft);\n\t}\n\n\tpublic getScrollLeft(): number {\n\t\tif (!this.hasView) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._view.getCodeEditorHelper().getScrollLeft();\n\t}\n\n\tpublic getScrollWidth(): number {\n\t\tif (!this.hasView) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._view.getCodeEditorHelper().getScrollWidth();\n\t}\n\n\tpublic getScrollHeight(): number {\n\t\tif (!this.hasView) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._view.getCodeEditorHelper().getScrollHeight();\n\t}\n\n\tpublic saveViewState(): editorCommon.ICodeEditorViewState {\n\t\tif (!this.cursor || !this.hasView) {\n\t\t\treturn null;\n\t\t}\n\t\tlet contributionsState: {[key:string]:any} = {};\n\t\tfor (let id in this.contributions) {\n\t\t\tlet contribution = this.contributions[id];\n\t\t\tif (typeof contribution.saveViewState === 'function') {\n\t\t\t\tcontributionsState[id] = contribution.saveViewState();\n\t\t\t}\n\t\t}\n\n\t\tvar cursorState = this.cursor.saveState();\n\t\tvar viewState = this._view.saveState();\n\t\treturn {\n\t\t\tcursorState: cursorState,\n\t\t\tviewState: viewState,\n\t\t\tcontributionsState: contributionsState\n\t\t};\n\t}\n\n\tpublic restoreViewState(state:editorCommon.IEditorViewState): void {\n\t\tif (!this.cursor || !this.hasView) {\n\t\t\treturn;\n\t\t}\n\t\tvar s = <any>state;\n\t\tif (s && s.cursorState && s.viewState) {\n\t\t\tvar codeEditorState = <editorCommon.ICodeEditorViewState>s;\n\t\t\tvar cursorState = <any>codeEditorState.cursorState;\n\t\t\tif (Array.isArray(cursorState)) {\n\t\t\t\tthis.cursor.restoreState(<editorCommon.ICursorState[]>cursorState);\n\t\t\t} else {\n\t\t\t\t// Backwards compatibility\n\t\t\t\tthis.cursor.restoreState([<editorCommon.ICursorState>cursorState]);\n\t\t\t}\n\t\t\tthis._view.restoreState(codeEditorState.viewState);\n\n\t\t\tlet contributionsState = s.contributionsState || {};\n\t\t\tfor (let id in this.contributions) {\n\t\t\t\tlet contribution = this.contributions[id];\n\t\t\t\tif (typeof contribution.restoreViewState === 'function') {\n\t\t\t\t\tcontribution.restoreViewState(contributionsState[id]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic layout(dimension?:editorCommon.IDimension): void {\n\t\tthis._configuration.observeReferenceElement(dimension);\n\t\tthis.render();\n\t}\n\n\tpublic focus(): void {\n\t\tif (!this.hasView) {\n\t\t\treturn;\n\t\t}\n\t\tthis._view.focus();\n\t}\n\n\tpublic isFocused(): boolean {\n\t\treturn this.hasView && this._view.isFocused();\n\t}\n\n\tpublic addContentWidget(widget: editorBrowser.IContentWidget): void {\n\t\tvar widgetData: editorBrowser.IContentWidgetData = {\n\t\t\twidget: widget,\n\t\t\tposition: widget.getPosition()\n\t\t};\n\n\t\tif (this.contentWidgets.hasOwnProperty(widget.getId())) {\n\t\t\tconsole.warn('Overwriting a content widget with the same id.');\n\t\t}\n\n\t\tthis.contentWidgets[widget.getId()] = widgetData;\n\n\t\tif (this.hasView) {\n\t\t\tthis._view.addContentWidget(widgetData);\n\t\t}\n\t}\n\n\tpublic layoutContentWidget(widget: editorBrowser.IContentWidget): void {\n\t\tvar widgetId = widget.getId();\n\t\tif (this.contentWidgets.hasOwnProperty(widgetId)) {\n\t\t\tvar widgetData = this.contentWidgets[widgetId];\n\t\t\twidgetData.position = widget.getPosition();\n\t\t\tif (this.hasView) {\n\t\t\t\tthis._view.layoutContentWidget(widgetData);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic removeContentWidget(widget: editorBrowser.IContentWidget): void {\n\t\tvar widgetId = widget.getId();\n\t\tif (this.contentWidgets.hasOwnProperty(widgetId)) {\n\t\t\tvar widgetData = this.contentWidgets[widgetId];\n\t\t\tdelete this.contentWidgets[widgetId];\n\t\t\tif (this.hasView) {\n\t\t\t\tthis._view.removeContentWidget(widgetData);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic addOverlayWidget(widget: editorBrowser.IOverlayWidget): void {\n\t\tvar widgetData: editorBrowser.IOverlayWidgetData = {\n\t\t\twidget: widget,\n\t\t\tposition: widget.getPosition()\n\t\t};\n\n\t\tif (this.overlayWidgets.hasOwnProperty(widget.getId())) {\n\t\t\tconsole.warn('Overwriting an overlay widget with the same id.');\n\t\t}\n\n\t\tthis.overlayWidgets[widget.getId()] = widgetData;\n\n\t\tif (this.hasView) {\n\t\t\tthis._view.addOverlayWidget(widgetData);\n\t\t}\n\t}\n\n\tpublic layoutOverlayWidget(widget: editorBrowser.IOverlayWidget): void {\n\t\tvar widgetId = widget.getId();\n\t\tif (this.overlayWidgets.hasOwnProperty(widgetId)) {\n\t\t\tvar widgetData = this.overlayWidgets[widgetId];\n\t\t\twidgetData.position = widget.getPosition();\n\t\t\tif (this.hasView) {\n\t\t\t\tthis._view.layoutOverlayWidget(widgetData);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic removeOverlayWidget(widget: editorBrowser.IOverlayWidget): void {\n\t\tvar widgetId = widget.getId();\n\t\tif (this.overlayWidgets.hasOwnProperty(widgetId)) {\n\t\t\tvar widgetData = this.overlayWidgets[widgetId];\n\t\t\tdelete this.overlayWidgets[widgetId];\n\t\t\tif (this.hasView) {\n\t\t\t\tthis._view.removeOverlayWidget(widgetData);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic changeViewZones(callback:(accessor:editorBrowser.IViewZoneChangeAccessor)=>void): void {\n\t\tif (!this.hasView) {\n//\t\t\tconsole.warn('Cannot change view zones on editor that is not attached to a model, since there is no view.');\n\t\t\treturn;\n\t\t}\n\t\tvar hasChanges = this._view.change(callback);\n\t\tif (hasChanges) {\n\t\t\tthis.emit(editorCommon.EventType.ViewZonesChanged);\n\t\t}\n\t}\n\n\tpublic getWhitespaces(): editorCommon.IEditorWhitespace[] {\n\t\tif (!this.hasView) {\n\t\t\treturn [];\n\t\t}\n\t\treturn this._view.getWhitespaces();\n\t}\n\n\tpublic getTopForLineNumber(lineNumber: number): number {\n\t\tif (!this.hasView) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._view.getCodeEditorHelper().getVerticalOffsetForPosition(lineNumber, 1);\n\t}\n\n\tpublic getTopForPosition(lineNumber: number, column: number): number {\n\t\tif (!this.hasView) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._view.getCodeEditorHelper().getVerticalOffsetForPosition(lineNumber, column);\n\t}\n\n\tpublic getScrolledVisiblePosition(rawPosition:editorCommon.IPosition): { top:number; left:number; height:number; } {\n\t\tif (!this.hasView) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar position = this.model.validatePosition(rawPosition);\n\t\tvar helper = this._view.getCodeEditorHelper();\n\t\tvar layoutInfo = this._configuration.editor.layoutInfo;\n\n\t\tvar top = helper.getVerticalOffsetForPosition(position.lineNumber, position.column) - helper.getScrollTop();\n\t\tvar left = helper.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - helper.getScrollLeft();\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tleft: left,\n\t\t\theight: this._configuration.editor.lineHeight\n\t\t};\n\t}\n\n\tpublic getOffsetForColumn(lineNumber:number, column:number): number {\n\t\tif (!this.hasView) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn this._view.getCodeEditorHelper().getOffsetForColumn(lineNumber, column);\n\t}\n\n\tpublic render(): void {\n\t\tif (!this.hasView) {\n\t\t\treturn;\n\t\t}\n\t\tthis._view.render(true, false);\n\t}\n\n\tpublic setHiddenAreas(ranges:editorCommon.IRange[]): void {\n\t\tif (this.viewModel) {\n\t\t\tthis.viewModel.setHiddenAreas(ranges);\n\t\t}\n\t}\n\n\tpublic setAriaActiveDescendant(id:string): void {\n\t\tif (!this.hasView) {\n\t\t\treturn;\n\t\t}\n\t\tthis._view.setAriaActiveDescendant(id);\n\t}\n\n\t_attachModel(model:editorCommon.IModel): void {\n\t\tthis._view = null;\n\n\t\tsuper._attachModel(model);\n\n\t\tif (this._view) {\n\t\t\tthis.domElement.appendChild(this._view.domNode);\n\n\t\t\tthis._view.renderOnce(() => {\n\n\t\t\t\tlet keys = Object.keys(this.contentWidgets);\n\t\t\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\t\t\tlet widgetId = keys[i];\n\t\t\t\t\tthis._view.addContentWidget(this.contentWidgets[widgetId]);\n\t\t\t\t}\n\n\t\t\t\tkeys = Object.keys(this.overlayWidgets);\n\t\t\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\t\t\tlet widgetId = keys[i];\n\t\t\t\t\tthis._view.addOverlayWidget(this.overlayWidgets[widgetId]);\n\t\t\t\t}\n\n\t\t\t\tthis._view.render(false, true);\n\t\t\t\tthis.hasView = true;\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _enableEmptySelectionClipboard(): boolean {\n\t\treturn browser.enableEmptySelectionClipboard;\n\t}\n\n\tprotected _createView(): void {\n\t\tthis._view = new View(\n\t\t\tthis.id,\n\t\t\tthis._configuration,\n\t\t\tthis.viewModel,\n\t\t\tthis._keybindingService\n\t\t);\n\t}\n\n\tprotected _getViewInternalEventBus(): IEventEmitter {\n\t\treturn this._view.getInternalEventBus();\n\t}\n\n\tprotected _detachModel(): editorCommon.IModel {\n\t\tvar removeDomNode:HTMLElement = null;\n\n\t\tif (this._view) {\n\t\t\tthis._view.dispose();\n\t\t\tremoveDomNode = this._view.domNode;\n\t\t\tthis._view = null;\n\t\t}\n\n\t\tlet result = super._detachModel();\n\n\t\tif (removeDomNode) {\n\t\t\tthis.domElement.removeChild(removeDomNode);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nclass OverlayWidget2 implements editorBrowser.IOverlayWidget {\n\n\tprivate _id: string;\n\tprivate _position: editorBrowser.IOverlayWidgetPosition;\n\tprivate _domNode: HTMLElement;\n\n\tconstructor(id:string, position:editorBrowser.IOverlayWidgetPosition) {\n\t\tthis._id = id;\n\t\tthis._position = position;\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.className = this._id.replace(/\\./g, '-').replace(/[^a-z0-9\\-]/,'');\n\t}\n\n\tpublic getId(): string {\n\t\treturn this._id;\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tpublic getPosition(): editorBrowser.IOverlayWidgetPosition {\n\t\treturn this._position;\n\t}\n}\n\nexport enum EditCursorState {\n\tEndOfLastEditOperation = 0\n}\n\nclass SingleEditOperation {\n\n\trange: editorCommon.IEditorRange;\n\ttext: string;\n\tforceMoveMarkers: boolean;\n\n\tconstructor(source:editorCommon.ISingleEditOperation) {\n\t\tthis.range = new Range(source.range.startLineNumber, source.range.startColumn, source.range.endLineNumber, source.range.endColumn);\n\t\tthis.text = source.text;\n\t\tthis.forceMoveMarkers = source.forceMoveMarkers || false;\n\t}\n\n}\n\nexport class CommandRunner implements editorCommon.ICommand {\n\n\tprivate _ops: SingleEditOperation[];\n\tprivate _editCursorState: EditCursorState;\n\n\tconstructor(ops: editorCommon.ISingleEditOperation[], editCursorState: EditCursorState) {\n\t\tthis._ops = ops.map(op => new SingleEditOperation(op));\n\t\tthis._editCursorState = editCursorState;\n\t}\n\n\tpublic getEditOperations(model: editorCommon.ITokenizedModel, builder: editorCommon.IEditOperationBuilder): void {\n\t\tif (this._ops.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Sort them in ascending order by range starts\n\t\tthis._ops.sort((o1, o2) => {\n\t\t\treturn Range.compareRangesUsingStarts(o1.range, o2.range);\n\t\t});\n\n\t\t// Merge operations that touch each other\n\t\tvar resultOps:editorCommon.ISingleEditOperation[] = [];\n\t\tvar previousOp = this._ops[0];\n\t\tfor (var i = 1; i < this._ops.length; i++) {\n\t\t\tif (previousOp.range.endLineNumber === this._ops[i].range.startLineNumber && previousOp.range.endColumn === this._ops[i].range.startColumn) {\n\t\t\t\t// These operations are one after another and can be merged\n\t\t\t\tpreviousOp.range = Range.plusRange(previousOp.range, this._ops[i].range);\n\t\t\t\tpreviousOp.text = previousOp.text + this._ops[i].text;\n\t\t\t} else {\n\t\t\t\tresultOps.push(previousOp);\n\t\t\t\tpreviousOp = this._ops[i];\n\t\t\t}\n\t\t}\n\t\tresultOps.push(previousOp);\n\n\t\tfor (var i = 0; i < resultOps.length; i++) {\n\t\t\tbuilder.addEditOperation(Range.lift(resultOps[i].range), resultOps[i].text);\n\t\t}\n\t}\n\n\tpublic computeCursorState(model: editorCommon.ITokenizedModel, helper: editorCommon.ICursorStateComputerData): editorCommon.IEditorSelection {\n\t\tvar inverseEditOperations = helper.getInverseEditOperations();\n\t\tvar srcRange = inverseEditOperations[inverseEditOperations.length - 1].range;\n\t\treturn Selection.createSelection(\n\t\t\tsrcRange.endLineNumber,\n\t\t\tsrcRange.endColumn,\n\t\t\tsrcRange.endLineNumber,\n\t\t\tsrcRange.endColumn\n\t\t);\n\t}\n}\n"]}