{"version":3,"file":"vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./currentLineHighlight';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {ILayoutProvider, IRenderingContext, IViewContext} from 'vs/editor/browser/editorBrowser';\nimport {DynamicViewOverlay} from 'vs/editor/browser/view/dynamicViewOverlay';\n\nexport class CurrentLineHighlightOverlay extends DynamicViewOverlay {\n\tprivate _context:IViewContext;\n\tprivate _lineHeight:number;\n\tprivate _readOnly:boolean;\n\tprivate _layoutProvider:ILayoutProvider;\n\tprivate _selectionIsEmpty:boolean;\n\tprivate _primaryCursorIsInEditableRange:boolean;\n\tprivate _primaryCursorLineNumber:number;\n\tprivate _scrollWidth:number;\n\n\tconstructor(context:IViewContext, layoutProvider:ILayoutProvider) {\n\t\tsuper();\n\t\tthis._context = context;\n\t\tthis._lineHeight = this._context.configuration.editor.lineHeight;\n\t\tthis._readOnly = this._context.configuration.editor.readOnly;\n\n\t\tthis._layoutProvider = layoutProvider;\n\n\t\tthis._selectionIsEmpty = true;\n\t\tthis._primaryCursorIsInEditableRange = true;\n\t\tthis._primaryCursorLineNumber = 1;\n\t\tthis._scrollWidth = this._layoutProvider.getScrollWidth();\n\n\t\tthis._context.addEventHandler(this);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._context.removeEventHandler(this);\n\t\tthis._context = null;\n\t}\n\n\t// --- begin event handlers\n\n\tpublic onModelFlushed(): boolean {\n\t\tthis._primaryCursorIsInEditableRange = true;\n\t\tthis._selectionIsEmpty = true;\n\t\tthis._primaryCursorLineNumber = 1;\n\t\tthis._scrollWidth = this._layoutProvider.getScrollWidth();\n\t\treturn true;\n\t}\n\tpublic onModelLinesDeleted(e:editorCommon.IViewLinesDeletedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onModelLinesInserted(e:editorCommon.IViewLinesInsertedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onCursorPositionChanged(e:editorCommon.IViewCursorPositionChangedEvent): boolean {\n\t\tvar hasChanged = false;\n\t\tif (this._primaryCursorIsInEditableRange !== e.isInEditableRange) {\n\t\t\tthis._primaryCursorIsInEditableRange = e.isInEditableRange;\n\t\t\thasChanged = true;\n\t\t}\n\t\tif (this._primaryCursorLineNumber !== e.position.lineNumber) {\n\t\t\tthis._primaryCursorLineNumber = e.position.lineNumber;\n\t\t\thasChanged = true;\n\t\t}\n\t\treturn hasChanged;\n\t}\n\tpublic onCursorSelectionChanged(e:editorCommon.IViewCursorSelectionChangedEvent): boolean {\n\t\tvar isEmpty = e.selection.isEmpty();\n\t\tif (this._selectionIsEmpty !== isEmpty) {\n\t\t\tthis._selectionIsEmpty = isEmpty;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tpublic onConfigurationChanged(e:editorCommon.IConfigurationChangedEvent): boolean {\n\t\tif (e.lineHeight) {\n\t\t\tthis._lineHeight = this._context.configuration.editor.lineHeight;\n\t\t}\n\t\tif (e.readOnly) {\n\t\t\tthis._readOnly = this._context.configuration.editor.readOnly;\n\t\t}\n\t\treturn true;\n\t}\n\tpublic onLayoutChanged(layoutInfo:editorCommon.IEditorLayoutInfo): boolean {\n\t\treturn true;\n\t}\n\tpublic onScrollChanged(e:editorCommon.IScrollEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onZonesChanged(): boolean {\n\t\treturn true;\n\t}\n\tpublic onScrollWidthChanged(scrollWidth:number): boolean {\n\t\tif (this._scrollWidth !== scrollWidth) {\n\t\t\tthis._scrollWidth = scrollWidth;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t// --- end event handlers\n\n\tpublic prepareRender(ctx:IRenderingContext): void {\n\t\tif (!this.shouldRender()) {\n\t\t\tthrow new Error('I did not ask to render!');\n\t\t}\n\t\tthis._scrollWidth = ctx.scrollWidth;\n\t}\n\n\tpublic render(startLineNumber:number, lineNumber:number): string {\n\t\tif (lineNumber === this._primaryCursorLineNumber) {\n\t\t\tif (this._shouldShowCurrentLine()) {\n\t\t\t\treturn (\n\t\t\t\t\t'<div class=\"current-line\" style=\"width:'\n\t\t\t\t\t+ String(this._scrollWidth)\n\t\t\t\t\t+ 'px; height:'\n\t\t\t\t\t+ String(this._lineHeight)\n\t\t\t\t\t+ 'px;\"></div>'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t}\n\n\tprivate _shouldShowCurrentLine(): boolean {\n\t\treturn this._selectionIsEmpty && this._primaryCursorIsInEditableRange && !this._readOnly;\n\t}\n}\n"]}