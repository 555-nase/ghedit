{"version":3,"file":"vs/editor/browser/viewParts/contentWidgets/contentWidgets.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/browser/viewParts/contentWidgets/contentWidgets.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./contentWidgets';\nimport * as dom from 'vs/base/browser/dom';\nimport {StyleMutator} from 'vs/base/browser/styleMutator';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {ClassNames, ContentWidgetPositionPreference, IContentWidget, IRenderingContext, IRestrictedRenderingContext, IViewContext} from 'vs/editor/browser/editorBrowser';\nimport {ViewPart} from 'vs/editor/browser/view/viewPart';\n\ninterface IWidgetData {\n\tallowEditorOverflow: boolean;\n\twidget: IContentWidget;\n\tposition: editorCommon.IPosition;\n\tpreference: ContentWidgetPositionPreference[];\n\tisVisible: boolean;\n}\n\ninterface IWidgetMap {\n\t[key:string]: IWidgetData;\n}\n\ninterface IBoxLayoutResult {\n\taboveTop:number;\n\tfitsAbove:boolean;\n\tbelowTop:number;\n\tfitsBelow:boolean;\n\tleft:number;\n}\n\ninterface IMyWidgetRenderData {\n\ttop:number;\n\tleft:number;\n}\n\ninterface IMyRenderData {\n\t[id:string]:IMyWidgetRenderData;\n}\n\nexport class ViewContentWidgets extends ViewPart {\n\n\tprivate _widgets:IWidgetMap;\n\tprivate _contentWidth:number;\n\tprivate _contentLeft: number;\n\tprivate _lineHeight: number;\n\tprivate _renderData:IMyRenderData;\n\n\tpublic domNode:HTMLElement;\n\tpublic overflowingContentWidgetsDomNode:HTMLElement;\n\tprivate _viewDomNode: HTMLElement;\n\n\tconstructor(context:IViewContext, viewDomNode:HTMLElement) {\n\t\tsuper(context);\n\t\tthis._viewDomNode = viewDomNode;\n\n\t\tthis._widgets = {};\n\t\tthis._contentWidth = 0;\n\t\tthis._contentLeft = 0;\n\t\tthis._lineHeight = this._context.configuration.editor.lineHeight;\n\t\tthis._renderData = {};\n\n\t\tthis.domNode = document.createElement('div');\n\t\tthis.domNode.className = ClassNames.CONTENT_WIDGETS;\n\n\t\tthis.overflowingContentWidgetsDomNode = document.createElement('div');\n\t\tthis.overflowingContentWidgetsDomNode.className = ClassNames.OVERFLOWING_CONTENT_WIDGETS;\n\t}\n\n\tpublic dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._widgets = null;\n\t\tthis.domNode = null;\n\t}\n\n\t// --- begin event handlers\n\n\tpublic onModelFlushed(): boolean {\n\t\treturn true;\n\t}\n\tpublic onModelDecorationsChanged(e:editorCommon.IViewDecorationsChangedEvent): boolean {\n\t\t// true for inline decorations that can end up relayouting text\n\t\treturn e.inlineDecorationsChanged;\n\t}\n\tpublic onModelLinesDeleted(e:editorCommon.IViewLinesDeletedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onModelLineChanged(e:editorCommon.IViewLineChangedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onModelLinesInserted(e:editorCommon.IViewLinesInsertedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onCursorPositionChanged(e:editorCommon.IViewCursorPositionChangedEvent): boolean {\n\t\treturn false;\n\t}\n\tpublic onCursorSelectionChanged(e:editorCommon.IViewCursorSelectionChangedEvent): boolean {\n\t\treturn false;\n\t}\n\tpublic onCursorRevealRange(e:editorCommon.IViewRevealRangeEvent): boolean {\n\t\treturn false;\n\t}\n\tpublic onConfigurationChanged(e:editorCommon.IConfigurationChangedEvent): boolean {\n\t\tif (e.lineHeight) {\n\t\t\tthis._lineHeight = this._context.configuration.editor.lineHeight;\n\t\t}\n\t\treturn true;\n\t}\n\tpublic onLayoutChanged(layoutInfo:editorCommon.IEditorLayoutInfo): boolean {\n\t\tthis._contentLeft = layoutInfo.contentLeft;\n\n\t\tif (this._contentWidth !== layoutInfo.contentWidth) {\n\t\t\tthis._contentWidth = layoutInfo.contentWidth;\n\t\t\t// update the maxWidth on widgets nodes, such that `onReadAfterForcedLayout`\n\t\t\t// below can read out the adjusted width/height of widgets\n\t\t\tlet keys = Object.keys(this._widgets);\n\t\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\t\tlet widgetId = keys[i];\n\t\t\t\tStyleMutator.setMaxWidth(this._widgets[widgetId].widget.getDomNode(), this._contentWidth);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\tpublic onScrollChanged(e:editorCommon.IScrollEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onZonesChanged(): boolean {\n\t\treturn true;\n\t}\n\tpublic onScrollWidthChanged(scrollWidth:number): boolean {\n\t\treturn false;\n\t}\n\tpublic onScrollHeightChanged(scrollHeight:number): boolean {\n\t\treturn false;\n\t}\n\n\t// ---- end view event handlers\n\n\tpublic addWidget(widget: IContentWidget): void {\n\t\tlet widgetData: IWidgetData = {\n\t\t\tallowEditorOverflow: widget.allowEditorOverflow || false,\n\t\t\twidget: widget,\n\t\t\tposition: null,\n\t\t\tpreference: null,\n\t\t\tisVisible: false\n\t\t};\n\t\tthis._widgets[widget.getId()] = widgetData;\n\n\t\tlet domNode = widget.getDomNode();\n\t\tdomNode.style.position = 'absolute';\n\t\tStyleMutator.setMaxWidth(domNode, this._contentWidth);\n\t\tStyleMutator.setVisibility(domNode, 'hidden');\n\t\tdomNode.setAttribute('widgetId', widget.getId());\n\n\t\tif (widgetData.allowEditorOverflow) {\n\t\t\tthis.overflowingContentWidgetsDomNode.appendChild(domNode);\n\t\t} else {\n\t\t\tthis.domNode.appendChild(domNode);\n\t\t}\n\n\t\tthis.setShouldRender();\n\t}\n\n\tpublic setWidgetPosition(widget: IContentWidget, position: editorCommon.IPosition, preference:ContentWidgetPositionPreference[]): void {\n\t\tlet widgetData = this._widgets[widget.getId()];\n\n\t\twidgetData.position = position;\n\t\twidgetData.preference = preference;\n\n\t\tthis.setShouldRender();\n\t}\n\n\tpublic removeWidget(widget: IContentWidget): void {\n\t\tlet widgetId = widget.getId();\n\t\tif (this._widgets.hasOwnProperty(widgetId)) {\n\t\t\tlet widgetData = this._widgets[widgetId];\n\t\t\tdelete this._widgets[widgetId];\n\n\t\t\tlet domNode = widgetData.widget.getDomNode();\n\t\t\tdomNode.parentNode.removeChild(domNode);\n\t\t\tdomNode.removeAttribute('monaco-visible-content-widget');\n\n\t\t\tthis.setShouldRender();\n\t\t}\n\t}\n\n\tprivate _layoutBoxInViewport(position:editorCommon.IEditorPosition, domNode:HTMLElement, ctx:IRenderingContext): IBoxLayoutResult {\n\n\t\tlet visibleRange = ctx.visibleRangeForPosition(position);\n\n\t\tif (!visibleRange) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet width = domNode.clientWidth;\n\t\tlet height = domNode.clientHeight;\n\n\t\t// Our visible box is split horizontally by the current line => 2 boxes\n\n\t\t// a) the box above the line\n\t\tlet aboveLineTop = visibleRange.top;\n\t\tlet heightAboveLine = aboveLineTop;\n\n\t\t// b) the box under the line\n\t\tlet underLineTop = visibleRange.top + this._lineHeight;\n\t\tlet heightUnderLine = ctx.viewportHeight - underLineTop;\n\n\t\tlet aboveTop = aboveLineTop - height;\n\t\tlet fitsAbove = (heightAboveLine >= height);\n\t\tlet belowTop = underLineTop;\n\t\tlet fitsBelow = (heightUnderLine >= height);\n\n\t\t// And its left\n\t\tlet actualLeft = visibleRange.left;\n\t\tif (actualLeft + width > ctx.viewportLeft + ctx.viewportWidth) {\n\t\t\tactualLeft = ctx.viewportLeft + ctx.viewportWidth - width;\n\t\t}\n\t\tif (actualLeft < ctx.viewportLeft) {\n\t\t\tactualLeft = ctx.viewportLeft;\n\t\t}\n\n\t\treturn {\n\t\t\taboveTop: aboveTop,\n\t\t\tfitsAbove: fitsAbove,\n\t\t\tbelowTop: belowTop,\n\t\t\tfitsBelow: fitsBelow,\n\t\t\tleft: actualLeft\n\t\t};\n\t}\n\n\tprivate _layoutBoxInPage(position: editorCommon.IEditorPosition, domNode: HTMLElement, ctx: IRenderingContext): IBoxLayoutResult {\n\t\tlet visibleRange = ctx.visibleRangeForPosition(position);\n\n\t\tif (!visibleRange) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet left0 = visibleRange.left - ctx.viewportLeft;\n\n\t\tlet width = domNode.clientWidth,\n\t\t\theight = domNode.clientHeight;\n\n\t\tif (left0 + width < 0 || left0 > this._contentWidth) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet aboveTop = visibleRange.top - height,\n\t\t\tbelowTop = visibleRange.top + this._lineHeight,\n\t\t\tleft = left0 + this._contentLeft;\n\n\t\tlet domNodePosition = dom.getDomNodePosition(this._viewDomNode);\n\t\tlet absoluteAboveTop = domNodePosition.top + aboveTop - document.body.scrollTop - document.documentElement.scrollTop,\n\t\t\tabsoluteBelowTop = domNodePosition.top + belowTop - document.body.scrollTop - document.documentElement.scrollTop,\n\t\t\tabsoluteLeft = domNodePosition.left + left - document.body.scrollLeft - document.documentElement.scrollLeft;\n\n\t\tlet INNER_WIDTH = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\n\t\t\tINNER_HEIGHT = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\n\t\t// Leave some clearance to the bottom\n\t\tlet BOTTOM_PADDING = 22;\n\n\t\tlet fitsAbove = (absoluteAboveTop >= 0),\n\t\t\tfitsBelow = (absoluteBelowTop + height <= INNER_HEIGHT - BOTTOM_PADDING);\n\n\t\tif (absoluteLeft + width + 20 > INNER_WIDTH) {\n\t\t\tlet delta = absoluteLeft - (INNER_WIDTH - width - 20);\n\t\t\tabsoluteLeft -= delta;\n\t\t\tleft -= delta;\n\t\t}\n\t\tif (absoluteLeft < 0) {\n\t\t\tlet delta = absoluteLeft;\n\t\t\tabsoluteLeft -= delta;\n\t\t\tleft -= delta;\n\t\t}\n\n\t\treturn {\n\t\t\taboveTop: aboveTop,\n\t\t\tfitsAbove: fitsAbove,\n\t\t\tbelowTop: belowTop,\n\t\t\tfitsBelow: fitsBelow,\n\t\t\tleft: left\n\t\t};\n\t}\n\n\tprivate _prepareRenderWidgetAtExactPosition(position:editorCommon.IEditorPosition, ctx:IRenderingContext): IMyWidgetRenderData {\n\t\tlet visibleRange = ctx.visibleRangeForPosition(position);\n\n\t\tif (!visibleRange) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\ttop: visibleRange.top,\n\t\t\tleft: visibleRange.left\n\t\t};\n\t}\n\n\tprivate _prepareRenderWidget(widgetData:IWidgetData, ctx:IRenderingContext): IMyWidgetRenderData {\n\t\tif (!widgetData.position || !widgetData.preference) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Do not trust that widgets have a valid position\n\t\tlet validModelPosition = this._context.model.validateModelPosition(widgetData.position);\n\n\t\tif (!this._context.model.modelPositionIsVisible(validModelPosition)) {\n\t\t\t// this position is hidden by the view model\n\t\t\treturn null;\n\t\t}\n\n\t\tlet\tposition = this._context.model.convertModelPositionToViewPosition(validModelPosition.lineNumber, validModelPosition.column);\n\n\t\tlet placement: IBoxLayoutResult = null;\n\t\tlet fetchPlacement = () => {\n\t\t\tif (placement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet domNode = widgetData.widget.getDomNode();\n\t\t\tif (widgetData.allowEditorOverflow) {\n\t\t\t\tplacement = this._layoutBoxInPage(position, domNode, ctx);\n\t\t\t} else {\n\t\t\t\tplacement = this._layoutBoxInViewport(position, domNode, ctx);\n\t\t\t}\n\t\t};\n\n\t\t// Do two passes, first for perfect fit, second picks first option\n\t\tfor (let pass = 1; pass <= 2; pass++) {\n\t\t\tfor (let i = 0; i < widgetData.preference.length; i++) {\n\t\t\t\tlet pref = widgetData.preference[i];\n\t\t\t\tif (pref === ContentWidgetPositionPreference.ABOVE) {\n\t\t\t\t\tfetchPlacement();\n\t\t\t\t\tif (!placement) {\n\t\t\t\t\t\t// Widget outside of viewport\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tif (pass === 2 || placement.fitsAbove) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttop: placement.aboveTop,\n\t\t\t\t\t\t\tleft: placement.left\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} else if (pref === ContentWidgetPositionPreference.BELOW) {\n\t\t\t\t\tfetchPlacement();\n\t\t\t\t\tif (!placement) {\n\t\t\t\t\t\t// Widget outside of viewport\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tif (pass === 2 || placement.fitsBelow) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttop: placement.belowTop,\n\t\t\t\t\t\t\tleft: placement.left\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn this._prepareRenderWidgetAtExactPosition(position, ctx);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic prepareRender(ctx:IRenderingContext): void {\n\t\tif (!this.shouldRender()) {\n\t\t\tthrow new Error('I did not ask to render!');\n\t\t}\n\n\t\tlet data:IMyRenderData = {};\n\n\t\tlet keys = Object.keys(this._widgets);\n\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\tlet widgetId = keys[i];\n\t\t\tlet renderData = this._prepareRenderWidget(this._widgets[widgetId], ctx);\n\t\t\tif (renderData) {\n\t\t\t\tdata[widgetId] = renderData;\n\t\t\t}\n\t\t}\n\n\t\tthis._renderData = data;\n\t}\n\n\tpublic render(ctx:IRestrictedRenderingContext): void {\n\t\tlet data = this._renderData;\n\n\t\tlet keys = Object.keys(this._widgets);\n\t\tfor (let i = 0, len = keys.length; i < len; i++) {\n\t\t\tlet widgetId = keys[i];\n\t\t\tlet widget = this._widgets[widgetId];\n\t\t\tlet domNode = this._widgets[widgetId].widget.getDomNode();\n\n\t\t\tif (data.hasOwnProperty(widgetId)) {\n\t\t\t\tif (widget.allowEditorOverflow) {\n\t\t\t\t\tStyleMutator.setTop(domNode, data[widgetId].top);\n\t\t\t\t\tStyleMutator.setLeft(domNode, data[widgetId].left);\n\t\t\t\t} else {\n\t\t\t\t\tStyleMutator.setTop(domNode, data[widgetId].top + ctx.viewportTop - ctx.bigNumbersDelta);\n\t\t\t\t\tStyleMutator.setLeft(domNode, data[widgetId].left);\n\t\t\t\t}\n\t\t\t\tif (!widget.isVisible) {\n\t\t\t\t\tStyleMutator.setVisibility(domNode, 'inherit');\n\t\t\t\t\tdomNode.setAttribute('monaco-visible-content-widget', 'true');\n\t\t\t\t\twidget.isVisible = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (widget.isVisible) {\n\t\t\t\t\tdomNode.removeAttribute('monaco-visible-content-widget');\n\t\t\t\t\twidget.isVisible = false;\n\t\t\t\t\tStyleMutator.setVisibility(domNode, 'hidden');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n"]}