{"version":3,"file":"rulers.js","sourceRoot":"","sources":["../../../../../../src/vs/editor/browser/viewParts/rulers/rulers.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;IAEhG,YAAY,CAAC;IAQb;QAA4B,0BAAQ;QAQnC,gBAAY,OAAoB,EAAE,cAA8B;YAC/D,kBAAM,OAAO,CAAC,CAAC;YACf,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC;YACtC,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC7C,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,aAAa,CAAC;YACvC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC;YACzD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC,aAAa,CAAC;YAC3E,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,8BAA8B,CAAC;QAC1G,CAAC;QAEM,wBAAO,GAAd;YACC,gBAAK,CAAC,OAAO,WAAE,CAAC;QACjB,CAAC;QAED,2BAA2B;QAEpB,uCAAsB,GAA7B,UAA8B,CAA0C;YACvE,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,8BAA8B,CAAC,CAAC,CAAC;gBAClE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC;gBACzD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC,aAAa,CAAC;gBAC3E,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,8BAA8B,CAAC;gBACzG,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QACM,sCAAqB,GAA5B,UAA6B,YAAmB;YAC/C,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QAED,yBAAyB;QAElB,8BAAa,GAApB,UAAqB,GAAqB;YACzC,kBAAkB;YAClB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;gBAC1B,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;YAC7C,CAAC;QACF,CAAC;QAEM,uBAAM,GAAb,UAAc,GAA+B;YAC5C,IAAI,oBAAoB,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;YACxD,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAE9D,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBAE9B,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC9B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;oBACjD,QAAQ,CAAC;gBACV,CAAC;gBAED,IAAI,IAAI,SAAa,CAAC;gBACtB,EAAE,CAAC,CAAC,CAAC,GAAG,oBAAoB,CAAC,CAAC,CAAC;oBAC9B,IAAI,GAAgB,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC9C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACP,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;oBACrC,IAAI,CAAC,SAAS,GAAG,YAAY,CAAC;oBAC9B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAChC,CAAC;gBAED,2BAAY,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;gBACvF,2BAAY,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,+BAA+B,CAAC,CAAC;YACpF,CAAC;QACF,CAAC;QACF,aAAC;IAAD,CAAC,AAtED,CAA4B,mBAAQ,GAsEnC;IAtEY,cAAM,SAsElB,CAAA","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./rulers';\nimport {StyleMutator} from 'vs/base/browser/styleMutator';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {ILayoutProvider, IRenderingContext, IRestrictedRenderingContext, IViewContext} from 'vs/editor/browser/editorBrowser';\nimport {ViewPart} from 'vs/editor/browser/view/viewPart';\n\nexport class Rulers extends ViewPart {\n\n\tpublic domNode: HTMLElement;\n\tprivate _layoutProvider:ILayoutProvider;\n\tprivate _rulers: number[];\n\tprivate _height: number;\n\tprivate _typicalHalfwidthCharacterWidth: number;\n\n\tconstructor(context:IViewContext, layoutProvider:ILayoutProvider) {\n\t\tsuper(context);\n\t\tthis._layoutProvider = layoutProvider;\n\t\tthis.domNode = document.createElement('div');\n\t\tthis.domNode.className = 'view-rulers';\n\t\tthis._rulers = this._context.configuration.editor.rulers;\n\t\tthis._height = this._context.configuration.editor.layoutInfo.contentHeight;\n\t\tthis._typicalHalfwidthCharacterWidth = this._context.configuration.editor.typicalHalfwidthCharacterWidth;\n\t}\n\n\tpublic dispose(): void {\n\t\tsuper.dispose();\n\t}\n\n\t// --- begin event handlers\n\n\tpublic onConfigurationChanged(e: editorCommon.IConfigurationChangedEvent): boolean {\n\t\tif (e.rulers || e.layoutInfo || e.typicalHalfwidthCharacterWidth) {\n\t\t\tthis._rulers = this._context.configuration.editor.rulers;\n\t\t\tthis._height = this._context.configuration.editor.layoutInfo.contentHeight;\n\t\t\tthis._typicalHalfwidthCharacterWidth = this._context.configuration.editor.typicalHalfwidthCharacterWidth;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tpublic onScrollHeightChanged(scrollHeight:number): boolean {\n\t\treturn true;\n\t}\n\n\t// --- end event handlers\n\n\tpublic prepareRender(ctx:IRenderingContext): void {\n\t\t// Nothing to read\n\t\tif (!this.shouldRender()) {\n\t\t\tthrow new Error('I did not ask to render!');\n\t\t}\n\t}\n\n\tpublic render(ctx:IRestrictedRenderingContext): void {\n\t\tlet existingRulersLength = this.domNode.children.length;\n\t\tlet max = Math.max(existingRulersLength, this._rulers.length);\n\n\t\tfor (let i = 0; i < max; i++) {\n\n\t\t\tif (i >= this._rulers.length) {\n\t\t\t\tthis.domNode.removeChild(this.domNode.lastChild);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet node: HTMLElement;\n\t\t\tif (i < existingRulersLength) {\n\t\t\t\tnode = <HTMLElement>this.domNode.children[i];\n\t\t\t} else {\n\t\t\t\tnode = document.createElement('div');\n\t\t\t\tnode.className = 'view-ruler';\n\t\t\t\tthis.domNode.appendChild(node);\n\t\t\t}\n\n\t\t\tStyleMutator.setHeight(node, Math.min(this._layoutProvider.getTotalHeight(), 1000000));\n\t\t\tStyleMutator.setLeft(node, this._rulers[i] * this._typicalHalfwidthCharacterWidth);\n\t\t}\n\t}\n}\n"]}