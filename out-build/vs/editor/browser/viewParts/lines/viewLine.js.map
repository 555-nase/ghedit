{"version":3,"file":"vs/editor/browser/viewParts/lines/viewLine.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/browser/viewParts/lines/viewLine.ts"],"names":[],"mappings":";;;;;;IAAA;;;oGAGgG;IAChG,YAAY,CAAC;IAWb;QAqBC,kBAAY,OAAoB;YAC/B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,gBAAgB,CAAC;YAC7E,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,YAAY,CAAC;YACrE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC;YACjE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC;YACjE,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,sBAAsB,CAAC;YACzF,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,aAAa,CAAC;YAEvE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;YAC5B,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC;QACjC,CAAC;QAED,6BAA6B;QAEtB,6BAAU,GAAjB;YACC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACpB,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;QAC9B,CAAC;QACM,6BAAU,GAAjB,UAAkB,OAAmB;YACpC,IAAI,CAAC,QAAQ,GAAG,gCAAiB,CAAC,OAAO,CAAC,CAAC;QAC5C,CAAC;QAEM,mCAAgB,GAAvB;YACC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACxB,CAAC;QACM,uCAAoB,GAA3B;YACC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC7B,CAAC;QACM,sCAAmB,GAA1B;YACC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC7B,CAAC;QACM,qCAAkB,GAAzB;YACC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC7B,CAAC;QACM,kCAAe,GAAtB;YACC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC7B,CAAC;QACM,4CAAyB,GAAhC;YACC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC7B,CAAC;QACM,yCAAsB,GAA7B,UAA8B,CAA4B;YACzD,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACxB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,gBAAgB,CAAC;YAC9E,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACpB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,YAAY,CAAC;YACtE,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC;YAClE,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC;YAClE,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,sBAAsB,CAAC;YAC1F,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,aAAa,CAAC;YACxE,CAAC;YACD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,mCAAgB,GAAvB,UAAwB,eAAsB,EAAE,UAAiB,EAAE,iBAAoC;YACtG,IAAI,YAAY,GAAa,IAAI,CAAC;YAElC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBAC7C,0FAA0F;gBAC1F,YAAY,GAAG,+BAAe,CAC7B,UAAU,EACV,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,gBAAgB,CAAC,UAAU,CAAC,EAChD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,UAAU,CAAC,EAC9C,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,EAAE,EAChC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,EAC7C,iBAAiB,EACjB,IAAI,CAAC,iBAAiB,EACtB,IAAI,CAAC,aAAa,CAClB,CAAC;YACH,CAAC;YAED,mDAAmD;YACnD,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBAC1B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;oBACtB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;wBAC/D,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;oBACxB,CAAC;gBACF,CAAC;gBACD,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC9B,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC;YAChC,CAAC;YAED,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACxB,CAAC;QAEM,mCAAgB,GAAvB,UAAwB,GAAY,EAAE,UAAiB,EAAE,QAAe;YACvE,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;YAC9B,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,CAAC;YAChC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAC1B,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC;YAC9B,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACvB,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,CAAC;YACtC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YACzB,GAAG,CAAC,IAAI,CAAC,0BAAU,CAAC,SAAS,CAAC,CAAC;YAC/B,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACf,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,CAAC;YAC5C,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACpB,CAAC;QAEM,mCAAgB,GAAvB,UAAwB,UAAkB;YACzC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAClD,CAAC;QAEM,6BAAU,GAAjB,UAAkB,UAAiB,EAAE,QAAe;YACnD,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;YAChD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YAC/B,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC3C,CAAC;QAED,2BAA2B;QAEnB,0BAAO,GAAf,UAAgB,UAAiB,EAAE,SAAmB;YAErD,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;YAEvB,IAAI,CAAC,GAAG,6BAAU,CAAC,IAAI,kCAAe,CACrC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,UAAU,CAAC,EAC9C,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,EAAE,EAChC,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,uBAAuB,EAC5B,IAAI,CAAC,iBAAiB,EACtB,SAAS,CAAC,QAAQ,EAAE,CACpB,CAAC,CAAC;YAEH,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,gBAAgB,CAAC;YAC5C,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC,qBAAqB,CAAC;YAEtD,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC;QACjB,CAAC;QAED,mCAAmC;QAEzB,oCAAiB,GAA3B;YACC,MAAM,CAAkB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC;QAC1D,CAAC;QAED;;WAEG;QACI,2BAAQ,GAAf;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC,WAAW,CAAC;YAC1D,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;QAC1B,CAAC;QAED;;WAEG;QACI,2CAAwB,GAA/B,UAAgC,WAAkB,EAAE,SAAgB,EAAE,mBAA0B,EAAE,OAAmB;YACpH,WAAW,GAAG,WAAW,GAAC,CAAC,CAAC,CAAC,QAAQ;YACrC,SAAS,GAAG,SAAS,GAAC,CAAC,CAAC,CAAC,QAAQ;YACjC,mBAAmB,GAAG,mBAAmB,GAAC,CAAC,CAAC,CAAC,QAAQ;YACrD,IAAM,sBAAsB,GAAG,IAAI,CAAC,uBAAuB,GAAC,CAAC,CAAC,CAAC,QAAQ;YAEvE,EAAE,CAAC,CAAC,sBAAsB,KAAK,CAAC,CAAC,IAAI,WAAW,GAAG,sBAAsB,IAAI,SAAS,GAAG,sBAAsB,CAAC,CAAC,CAAC;gBACjH,sCAAsC;gBACtC,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YAED,EAAE,CAAC,CAAC,sBAAsB,KAAK,CAAC,CAAC,IAAI,WAAW,GAAG,sBAAsB,CAAC,CAAC,CAAC;gBAC3E,WAAW,GAAG,sBAAsB,CAAC;YACtC,CAAC;YAED,EAAE,CAAC,CAAC,sBAAsB,KAAK,CAAC,CAAC,IAAI,SAAS,GAAG,sBAAsB,CAAC,CAAC,CAAC;gBACzE,SAAS,GAAG,sBAAsB,CAAC;YACpC,CAAC;YAED,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,WAAW,EAAE,SAAS,EAAE,mBAAmB,EAAE,OAAO,CAAC,CAAC;QAC9F,CAAC;QAES,6CAA0B,GAApC,UAAqC,WAAkB,EAAE,SAAgB,EAAE,mBAA0B,EAAE,OAAmB;YACzH,EAAE,CAAC,CAAC,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC/B,MAAM,CAAC,IAAI,CAAC,gCAAgC,CAAC,WAAW,EAAE,mBAAmB,EAAE,OAAO,CAAC,CAAC;YACzF,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,MAAM,CAAC,IAAI,CAAC,6BAA6B,CAAC,WAAW,EAAE,SAAS,EAAE,mBAAmB,EAAE,OAAO,CAAC,CAAC;YACjG,CAAC;QACF,CAAC;QAES,mDAAgC,GAA1C,UAA2C,MAAa,EAAE,mBAA0B,EAAE,OAAmB;YAExG,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBACzC,qBAAqB;gBACrB,MAAM,CAAC,CAAC,IAAI,8BAAe,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACpC,CAAC;YAED,IAAI,SAAS,GAAG,uBAAuB,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;YAClG,IAAI,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAE1D,MAAM,CAAC,qBAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,EAAE,SAAS,EAAE,gBAAgB,EAAE,SAAS,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,OAAO,CAAC,CAAC;QAChL,CAAC;QAEO,gDAA6B,GAArC,UAAsC,WAAkB,EAAE,SAAgB,EAAE,mBAA0B,EAAE,OAAmB;YAE1H,EAAE,CAAC,CAAC,WAAW,KAAK,CAAC,IAAI,SAAS,KAAK,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC;gBACtE,mIAAmI;gBAEnI,MAAM,CAAC,CAAC,IAAI,8BAAe,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;YAClD,CAAC;YAED,IAAI,cAAc,GAAG,uBAAuB,CAAC,IAAI,CAAC,UAAU,EAAE,WAAW,GAAG,CAAC,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;YAC5G,IAAI,qBAAqB,GAAG,IAAI,CAAC,iBAAiB,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;YACpE,IAAI,YAAY,GAAG,uBAAuB,CAAC,IAAI,CAAC,UAAU,EAAE,SAAS,GAAG,CAAC,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACxG,IAAI,mBAAmB,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;YAEhE,MAAM,CAAC,qBAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,EAAE,cAAc,EAAE,qBAAqB,EAAE,YAAY,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,OAAO,CAAC,CAAC;QAChM,CAAC;QAES,iCAAc,GAAxB;YACC,MAAM,CAAC,CAAC,CAAC;QACV,CAAC;QAED;;WAEG;QACI,wCAAqB,GAA5B,UAA6B,UAAiB,EAAE,QAAoB,EAAE,MAAa;YAClF,IAAI,yBAAyB,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC;YAE5D,IAAI,SAAS,GAAG,CAAC,CAAC,CAAC;YACnB,OAAO,QAAQ,EAAE,CAAC;gBACjB,QAAQ,GAAgB,QAAQ,CAAC,eAAe,CAAC;gBACjD,SAAS,EAAE,CAAC;YACb,CAAC;YACD,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;YAE3C,MAAM,CAAC,yCAAyB,CAC/B,IAAI,CAAC,uBAAuB,EAC5B,SAAS,EACT,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,gBAAgB,CAAC,UAAU,CAAC,EAChD,IAAI,CAAC,iBAAiB,EACtB,SAAS,EACT,yBAAyB,EACzB,MAAM,CACN,CAAC;QACH,CAAC;QACF,eAAC;IAAD,CAAC,AAnRD,IAmRC;IAnRY,gBAAQ,WAmRpB,CAAA;IAED;QAAyB,8BAAQ;QAEhC,oBAAY,OAAoB;YAC/B,kBAAM,OAAO,CAAC,CAAC;QAChB,CAAC;QAES,mCAAc,GAAxB;YACC,MAAM,CAAC,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC;QAC/C,CAAC;QACF,iBAAC;IAAD,CAAC,AATD,CAAyB,QAAQ,GAShC;IAED;QAA6B,kCAAQ;QAEpC,wBAAY,OAAoB;YAC/B,kBAAM,OAAO,CAAC,CAAC;QAChB,CAAC;QAES,mDAA0B,GAApC,UAAqC,WAAkB,EAAE,SAAgB,EAAE,mBAA0B,EAAE,OAAmB;YACzH,IAAI,MAAM,GAAG,gBAAK,CAAC,0BAA0B,YAAC,WAAW,EAAE,SAAS,EAAE,mBAAmB,EAAE,OAAO,CAAC,CAAC;YAEpG,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,IAAI,SAAS,GAAG,CAAC,IAAI,SAAS,KAAK,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC;gBAChH,IAAI,0BAA0B,GAAiB,IAAI,CAAC,iBAAiB,EAAE,CAAC,SAAU,CAAC,qBAAqB,EAAE,CAAC;gBAC3G,IAAI,+BAA+B,GAAG,0BAA0B,CAAC,KAAK,GAAG,mBAAmB,CAAC;gBAC7F,EAAE,CAAC,CAAC,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC/B,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,+BAA+B,CAAC;oBACjD,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;gBACrB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACP,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,+BAA+B,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACpE,CAAC;gBACD,MAAM,CAAC,MAAM,CAAC;YACf,CAAC;YAED,EAAE,CAAC,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,IAAI,WAAW,KAAK,SAAS,IAAI,CAAC,WAAW,KAAK,CAAC,IAAI,SAAS,KAAK,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBACvI,MAAM,CAAC,MAAM,CAAC;YACf,CAAC;YAED,iFAAiF;YACjF,6CAA6C;YAE7C,wCAAwC;YACxC,mCAAmC;YACnC,IAAI,sBAAsB,GAAG,IAAI,CAAC,gCAAgC,CAAC,SAAS,GAAG,CAAC,EAAE,mBAAmB,EAAE,OAAO,CAAC,CAAC;YAChH,+BAA+B;YAC/B,IAAI,gBAAgB,GAAG,IAAI,CAAC,gCAAgC,CAAC,SAAS,EAAE,mBAAmB,EAAE,OAAO,CAAC,CAAC;YAEtG,EAAE,CAAC,CAAC,sBAAsB,IAAI,sBAAsB,CAAC,MAAM,GAAG,CAAC,IAAI,gBAAgB,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpH,IAAI,qBAAqB,GAAG,sBAAsB,CAAC,CAAC,CAAC,CAAC;gBACtD,IAAI,eAAe,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC;gBAC1C,IAAI,KAAK,GAAG,CAAC,qBAAqB,CAAC,IAAI,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;gBACjE,IAAI,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBAE1C,EAAE,CAAC,CAAC,KAAK,IAAI,SAAS,CAAC,IAAI,GAAG,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC;oBACpD,2FAA2F;oBAC3F,SAAS,CAAC,KAAK,GAAG,eAAe,CAAC,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC;gBACzD,CAAC;YACF,CAAC;YAED,MAAM,CAAC,MAAM,CAAC;QACf,CAAC;QACF,qBAAC;IAAD,CAAC,AAhDD,CAA6B,QAAQ,GAgDpC;IAGD,iCAAiC,SAAmB,EAAE,YAAoB,EAAE,SAAgB;QAC3F,IAAI,CAAC,GAAG,SAAS,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;QAClD,MAAM,CAAC,CAAC,IAAI,SAAS,GAAG,CAAC,GAAG,SAAS,CAAC;IACvC,CAAC;IAEU,kBAAU,GAAwC,CAAC;QAC7D,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,UAAU,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACvJ,oFAAoF;YACpF,yCAAyC;YACzC,MAAM,CAAC,YAAY,CAAC;QACrB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC7B,MAAM,CAAC,gBAAgB,CAAC;QACzB,CAAC;QACD,MAAM,CAAC,gBAAgB,CAAC;IACzB,CAAC,CAAC,EAAE,CAAC;IAEL,sBAAsB,OAAqB;QAC1C,MAAM,CAAC,IAAI,UAAU,CAAC,OAAO,CAAC,CAAC;IAChC,CAAC;IAED,0BAA0B,OAAqB;QAC9C,MAAM,CAAC,IAAI,cAAc,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;IAED,0BAA0B,OAAqB;QAC9C,MAAM,CAAC,IAAI,QAAQ,CAAC,OAAO,CAAC,CAAC;IAC9B,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as browser from 'vs/base/browser/browser';\nimport {FastDomNode, createFastDomNode} from 'vs/base/browser/styleMutator';\nimport {HorizontalRange, IConfigurationChangedEvent, IModelDecoration} from 'vs/editor/common/editorCommon';\nimport {LineParts, createLineParts, getColumnOfLinePartOffset} from 'vs/editor/common/viewLayout/viewLineParts';\nimport {renderLine, RenderLineInput} from 'vs/editor/common/viewLayout/viewLineRenderer';\nimport {ClassNames, IViewContext} from 'vs/editor/browser/editorBrowser';\nimport {IVisibleLineData} from 'vs/editor/browser/view/viewLayer';\nimport {RangeUtil} from 'vs/editor/browser/viewParts/lines/rangeUtil';\n\nexport class ViewLine implements IVisibleLineData {\n\n\tprotected _context:IViewContext;\n\tprivate _renderWhitespace: boolean;\n\tprivate _indentGuides: boolean;\n\tprivate _spaceWidth: number;\n\tprivate _lineHeight: number;\n\tprivate _stopRenderingLineAfter: number;\n\tprotected _fontLigatures: boolean;\n\n\tprivate _domNode: FastDomNode;\n\n\tprivate _lineParts: LineParts;\n\n\tprivate _isInvalid: boolean;\n\tprivate _isMaybeInvalid: boolean;\n\n\tprotected _charOffsetInPart:number[];\n\tprivate _lastRenderedPartIndex:number;\n\tprivate _cachedWidth: number;\n\n\tconstructor(context:IViewContext) {\n\t\tthis._context = context;\n\t\tthis._renderWhitespace = this._context.configuration.editor.renderWhitespace;\n\t\tthis._indentGuides = this._context.configuration.editor.indentGuides;\n\t\tthis._spaceWidth = this._context.configuration.editor.spaceWidth;\n\t\tthis._lineHeight = this._context.configuration.editor.lineHeight;\n\t\tthis._stopRenderingLineAfter = this._context.configuration.editor.stopRenderingLineAfter;\n\t\tthis._fontLigatures = this._context.configuration.editor.fontLigatures;\n\n\t\tthis._domNode = null;\n\t\tthis._isInvalid = true;\n\t\tthis._isMaybeInvalid = false;\n\t\tthis._lineParts = null;\n\t\tthis._charOffsetInPart = [];\n\t\tthis._lastRenderedPartIndex = 0;\n\t}\n\n\t// --- begin IVisibleLineData\n\n\tpublic getDomNode(): HTMLElement {\n\t\tif (!this._domNode) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._domNode.domNode;\n\t}\n\tpublic setDomNode(domNode:HTMLElement): void {\n\t\tthis._domNode = createFastDomNode(domNode);\n\t}\n\n\tpublic onContentChanged(): void {\n\t\tthis._isInvalid = true;\n\t}\n\tpublic onLinesInsertedAbove(): void {\n\t\tthis._isMaybeInvalid = true;\n\t}\n\tpublic onLinesDeletedAbove(): void {\n\t\tthis._isMaybeInvalid = true;\n\t}\n\tpublic onLineChangedAbove(): void {\n\t\tthis._isMaybeInvalid = true;\n\t}\n\tpublic onTokensChanged(): void {\n\t\tthis._isMaybeInvalid = true;\n\t}\n\tpublic onModelDecorationsChanged(): void {\n\t\tthis._isMaybeInvalid = true;\n\t}\n\tpublic onConfigurationChanged(e:IConfigurationChangedEvent): void {\n\t\tif (e.renderWhitespace) {\n\t\t\tthis._renderWhitespace = this._context.configuration.editor.renderWhitespace;\n\t\t}\n\t\tif (e.indentGuides) {\n\t\t\tthis._indentGuides = this._context.configuration.editor.indentGuides;\n\t\t}\n\t\tif (e.spaceWidth) {\n\t\t\tthis._spaceWidth = this._context.configuration.editor.spaceWidth;\n\t\t}\n\t\tif (e.lineHeight) {\n\t\t\tthis._lineHeight = this._context.configuration.editor.lineHeight;\n\t\t}\n\t\tif (e.stopRenderingLineAfter) {\n\t\t\tthis._stopRenderingLineAfter = this._context.configuration.editor.stopRenderingLineAfter;\n\t\t}\n\t\tif (e.fontLigatures) {\n\t\t\tthis._fontLigatures = this._context.configuration.editor.fontLigatures;\n\t\t}\n\t\tthis._isInvalid = true;\n\t}\n\n\tpublic shouldUpdateHTML(startLineNumber:number, lineNumber:number, inlineDecorations:IModelDecoration[]): boolean {\n\t\tlet newLineParts:LineParts = null;\n\n\t\tif (this._isMaybeInvalid || this._isInvalid) {\n\t\t\t// Compute new line parts only if there is some evidence that something might have changed\n\t\t\tnewLineParts = createLineParts(\n\t\t\t\tlineNumber,\n\t\t\t\tthis._context.model.getLineMinColumn(lineNumber),\n\t\t\t\tthis._context.model.getLineContent(lineNumber),\n\t\t\t\tthis._context.model.getTabSize(),\n\t\t\t\tthis._context.model.getLineTokens(lineNumber),\n\t\t\t\tinlineDecorations,\n\t\t\t\tthis._renderWhitespace,\n\t\t\t\tthis._indentGuides\n\t\t\t);\n\t\t}\n\n\t\t// Decide if isMaybeInvalid flips isInvalid to true\n\t\tif (this._isMaybeInvalid) {\n\t\t\tif (!this._isInvalid) {\n\t\t\t\tif (!this._lineParts || !this._lineParts.equals(newLineParts)) {\n\t\t\t\t\tthis._isInvalid = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._isMaybeInvalid = false;\n\t\t}\n\n\t\tif (this._isInvalid) {\n\t\t\tthis._lineParts = newLineParts;\n\t\t}\n\n\t\treturn this._isInvalid;\n\t}\n\n\tpublic getLineOuterHTML(out:string[], lineNumber:number, deltaTop:number): void {\n\t\tout.push('<div lineNumber=\"');\n\t\tout.push(lineNumber.toString());\n\t\tout.push('\" style=\"top:');\n\t\tout.push(deltaTop.toString());\n\t\tout.push('px;height:');\n\t\tout.push(this._lineHeight.toString());\n\t\tout.push('px;\" class=\"');\n\t\tout.push(ClassNames.VIEW_LINE);\n\t\tout.push('\">');\n\t\tout.push(this.getLineInnerHTML(lineNumber));\n\t\tout.push('</div>');\n\t}\n\n\tpublic getLineInnerHTML(lineNumber: number): string {\n\t\tthis._isInvalid = false;\n\t\treturn this._render(lineNumber, this._lineParts);\n\t}\n\n\tpublic layoutLine(lineNumber:number, deltaTop:number): void {\n\t\tthis._domNode.setLineNumber(String(lineNumber));\n\t\tthis._domNode.setTop(deltaTop);\n\t\tthis._domNode.setHeight(this._lineHeight);\n\t}\n\n\t// --- end IVisibleLineData\n\n\tprivate _render(lineNumber:number, lineParts:LineParts): string {\n\n\t\tthis._cachedWidth = -1;\n\n\t\tlet r = renderLine(new RenderLineInput(\n\t\t\tthis._context.model.getLineContent(lineNumber),\n\t\t\tthis._context.model.getTabSize(),\n\t\t\tthis._spaceWidth,\n\t\t\tthis._stopRenderingLineAfter,\n\t\t\tthis._renderWhitespace,\n\t\t\tlineParts.getParts()\n\t\t));\n\n\t\tthis._charOffsetInPart = r.charOffsetInPart;\n\t\tthis._lastRenderedPartIndex = r.lastRenderedPartIndex;\n\n\t\treturn r.output;\n\t}\n\n\t// --- Reading from the DOM methods\n\n\tprotected _getReadingTarget(): HTMLElement {\n\t\treturn <HTMLSpanElement>this._domNode.domNode.firstChild;\n\t}\n\n\t/**\n\t * Width of the line in pixels\n\t */\n\tpublic getWidth(): number {\n\t\tif (this._cachedWidth === -1) {\n\t\t\tthis._cachedWidth = this._getReadingTarget().offsetWidth;\n\t\t}\n\t\treturn this._cachedWidth;\n\t}\n\n\t/**\n\t * Visible ranges for a model range\n\t */\n\tpublic getVisibleRangesForRange(startColumn:number, endColumn:number, clientRectDeltaLeft:number, endNode:HTMLElement): HorizontalRange[] {\n\t\tstartColumn = startColumn|0; // @perf\n\t\tendColumn = endColumn|0; // @perf\n\t\tclientRectDeltaLeft = clientRectDeltaLeft|0; // @perf\n\t\tconst stopRenderingLineAfter = this._stopRenderingLineAfter|0; // @perf\n\n\t\tif (stopRenderingLineAfter !== -1 && startColumn > stopRenderingLineAfter && endColumn > stopRenderingLineAfter) {\n\t\t\t// This range is obviously not visible\n\t\t\treturn null;\n\t\t}\n\n\t\tif (stopRenderingLineAfter !== -1 && startColumn > stopRenderingLineAfter) {\n\t\t\tstartColumn = stopRenderingLineAfter;\n\t\t}\n\n\t\tif (stopRenderingLineAfter !== -1 && endColumn > stopRenderingLineAfter) {\n\t\t\tendColumn = stopRenderingLineAfter;\n\t\t}\n\n\t\treturn this._readVisibleRangesForRange(startColumn, endColumn, clientRectDeltaLeft, endNode);\n\t}\n\n\tprotected _readVisibleRangesForRange(startColumn:number, endColumn:number, clientRectDeltaLeft:number, endNode:HTMLElement): HorizontalRange[] {\n\t\tif (startColumn === endColumn) {\n\t\t\treturn this._readRawVisibleRangesForPosition(startColumn, clientRectDeltaLeft, endNode);\n\t\t} else {\n\t\t\treturn this._readRawVisibleRangesForRange(startColumn, endColumn, clientRectDeltaLeft, endNode);\n\t\t}\n\t}\n\n\tprotected _readRawVisibleRangesForPosition(column:number, clientRectDeltaLeft:number, endNode:HTMLElement): HorizontalRange[] {\n\n\t\tif (this._charOffsetInPart.length === 0) {\n\t\t\t// This line is empty\n\t\t\treturn [new HorizontalRange(0, 0)];\n\t\t}\n\n\t\tlet partIndex = findIndexInArrayWithMax(this._lineParts, column - 1, this._lastRenderedPartIndex);\n\t\tlet charOffsetInPart = this._charOffsetInPart[column - 1];\n\n\t\treturn RangeUtil.readHorizontalRanges(this._getReadingTarget(), partIndex, charOffsetInPart, partIndex, charOffsetInPart, clientRectDeltaLeft, this._getScaleRatio(), endNode);\n\t}\n\n\tprivate _readRawVisibleRangesForRange(startColumn:number, endColumn:number, clientRectDeltaLeft:number, endNode:HTMLElement): HorizontalRange[] {\n\n\t\tif (startColumn === 1 && endColumn === this._charOffsetInPart.length) {\n\t\t\t// This branch helps IE with bidi text & gives a performance boost to other browsers when reading visible ranges for an entire line\n\n\t\t\treturn [new HorizontalRange(0, this.getWidth())];\n\t\t}\n\n\t\tlet startPartIndex = findIndexInArrayWithMax(this._lineParts, startColumn - 1, this._lastRenderedPartIndex);\n\t\tlet startCharOffsetInPart = this._charOffsetInPart[startColumn - 1];\n\t\tlet endPartIndex = findIndexInArrayWithMax(this._lineParts, endColumn - 1, this._lastRenderedPartIndex);\n\t\tlet endCharOffsetInPart = this._charOffsetInPart[endColumn - 1];\n\n\t\treturn RangeUtil.readHorizontalRanges(this._getReadingTarget(), startPartIndex, startCharOffsetInPart, endPartIndex, endCharOffsetInPart, clientRectDeltaLeft, this._getScaleRatio(), endNode);\n\t}\n\n\tprotected _getScaleRatio(): number {\n\t\treturn 1;\n\t}\n\n\t/**\n\t * Returns the column for the text found at a specific offset inside a rendered dom node\n\t */\n\tpublic getColumnOfNodeOffset(lineNumber:number, spanNode:HTMLElement, offset:number): number {\n\t\tlet spanNodeTextContentLength = spanNode.textContent.length;\n\n\t\tlet spanIndex = -1;\n\t\twhile (spanNode) {\n\t\t\tspanNode = <HTMLElement>spanNode.previousSibling;\n\t\t\tspanIndex++;\n\t\t}\n\t\tlet lineParts = this._lineParts.getParts();\n\n\t\treturn getColumnOfLinePartOffset(\n\t\t\tthis._stopRenderingLineAfter,\n\t\t\tlineParts,\n\t\t\tthis._context.model.getLineMaxColumn(lineNumber),\n\t\t\tthis._charOffsetInPart,\n\t\t\tspanIndex,\n\t\t\tspanNodeTextContentLength,\n\t\t\toffset\n\t\t);\n\t}\n}\n\nclass IEViewLine extends ViewLine {\n\n\tconstructor(context:IViewContext) {\n\t\tsuper(context);\n\t}\n\n\tprotected _getScaleRatio(): number {\n\t\treturn screen.logicalXDPI / screen.deviceXDPI;\n\t}\n}\n\nclass WebKitViewLine extends ViewLine {\n\n\tconstructor(context:IViewContext) {\n\t\tsuper(context);\n\t}\n\n\tprotected _readVisibleRangesForRange(startColumn:number, endColumn:number, clientRectDeltaLeft:number, endNode:HTMLElement): HorizontalRange[] {\n\t\tlet output = super._readVisibleRangesForRange(startColumn, endColumn, clientRectDeltaLeft, endNode);\n\n\t\tif (this._fontLigatures && output.length === 1 && endColumn > 1 && endColumn === this._charOffsetInPart.length) {\n\t\t\tlet lastSpanBoundingClientRect = (<HTMLElement>this._getReadingTarget().lastChild).getBoundingClientRect();\n\t\t\tlet lastSpanBoundingClientRectRight = lastSpanBoundingClientRect.right - clientRectDeltaLeft;\n\t\t\tif (startColumn === endColumn) {\n\t\t\t\toutput[0].left = lastSpanBoundingClientRectRight;\n\t\t\t\toutput[0].width = 0;\n\t\t\t} else {\n\t\t\t\toutput[0].width = lastSpanBoundingClientRectRight - output[0].left;\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\tif (!output || output.length === 0 || startColumn === endColumn || (startColumn === 1 && endColumn === this._charOffsetInPart.length)) {\n\t\t\treturn output;\n\t\t}\n\n\t\t// WebKit is buggy and returns an expanded range (to contain words in some cases)\n\t\t// The last client rect is enlarged (I think)\n\n\t\t// This is an attempt to patch things up\n\t\t// Find position of previous column\n\t\tlet beforeEndVisibleRanges = this._readRawVisibleRangesForPosition(endColumn - 1, clientRectDeltaLeft, endNode);\n\t\t// Find position of last column\n\t\tlet endVisibleRanges = this._readRawVisibleRangesForPosition(endColumn, clientRectDeltaLeft, endNode);\n\n\t\tif (beforeEndVisibleRanges && beforeEndVisibleRanges.length > 0 && endVisibleRanges && endVisibleRanges.length > 0) {\n\t\t\tlet beforeEndVisibleRange = beforeEndVisibleRanges[0];\n\t\t\tlet endVisibleRange = endVisibleRanges[0];\n\t\t\tlet isLTR = (beforeEndVisibleRange.left <= endVisibleRange.left);\n\t\t\tlet lastRange = output[output.length - 1];\n\n\t\t\tif (isLTR && lastRange.left < endVisibleRange.left) {\n\t\t\t\t// Trim down the width of the last visible range to not go after the last column's position\n\t\t\t\tlastRange.width = endVisibleRange.left - lastRange.left;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n}\n\n\nfunction findIndexInArrayWithMax(lineParts:LineParts, desiredIndex: number, maxResult:number): number {\n\tlet r = lineParts.findIndexOfOffset(desiredIndex);\n\treturn r <= maxResult ? r : maxResult;\n}\n\nexport let createLine: (context: IViewContext) => ViewLine = (function() {\n\tif (window.screen && window.screen.deviceXDPI && (navigator.userAgent.indexOf('Trident/6.0') >= 0 || navigator.userAgent.indexOf('Trident/5.0') >= 0)) {\n\t\t// IE11 doesn't need the screen.logicalXDPI / screen.deviceXDPI ratio multiplication\n\t\t// for TextRange.getClientRects() anymore\n\t\treturn createIELine;\n\t} else if (browser.isWebKit) {\n\t\treturn createWebKitLine;\n\t}\n\treturn createNormalLine;\n})();\n\nfunction createIELine(context: IViewContext): ViewLine {\n\treturn new IEViewLine(context);\n}\n\nfunction createWebKitLine(context: IViewContext): ViewLine {\n\treturn new WebKitViewLine(context);\n}\n\nfunction createNormalLine(context: IViewContext): ViewLine {\n\treturn new ViewLine(context);\n}\n\n"]}