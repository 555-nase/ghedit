{"version":3,"file":"keyboardHandler.js","sourceRoot":"","sources":["../../../../../src/vs/editor/browser/controller/keyboardHandler.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport Event, {Emitter} from 'vs/base/common/event';\nimport {Disposable, IDisposable, dispose} from 'vs/base/common/lifecycle';\nimport * as browser from 'vs/base/browser/browser';\nimport * as dom from 'vs/base/browser/dom';\nimport {IKeyboardEvent} from 'vs/base/browser/keyboardEvent';\nimport {StyleMutator} from 'vs/base/browser/styleMutator';\nimport {GlobalScreenReaderNVDA} from 'vs/editor/common/config/commonEditorConfig';\nimport {TextAreaHandler} from 'vs/editor/common/controller/textAreaHandler';\nimport {IClipboardEvent, IKeyboardEventWrapper, ITextAreaWrapper, TextAreaStrategy} from 'vs/editor/common/controller/textAreaState';\nimport {Range} from 'vs/editor/common/core/range';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {ViewEventHandler} from 'vs/editor/common/viewModel/viewEventHandler';\nimport {IKeyboardHandlerHelper, IViewContext, IViewController} from 'vs/editor/browser/editorBrowser';\n\nclass ClipboardEventWrapper implements IClipboardEvent {\n\n\tprivate _event:ClipboardEvent;\n\n\tconstructor(event:ClipboardEvent) {\n\t\tthis._event = event;\n\t}\n\n\tpublic canUseTextData(): boolean {\n\t\tif (this._event.clipboardData) {\n\t\t\treturn true;\n\t\t}\n\t\tif ((<any>window).clipboardData) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic setTextData(text:string): void {\n\t\tif (this._event.clipboardData) {\n\t\t\tthis._event.clipboardData.setData('text/plain', text);\n\t\t\tthis._event.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif ((<any>window).clipboardData) {\n\t\t\t(<any>window).clipboardData.setData('Text', text);\n\t\t\tthis._event.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tthrow new Error('ClipboardEventWrapper.setTextData: Cannot use text data!');\n\t}\n\n\tpublic getTextData(): string {\n\t\tif (this._event.clipboardData) {\n\t\t\tthis._event.preventDefault();\n\t\t\treturn this._event.clipboardData.getData('text/plain');\n\t\t}\n\n\t\tif ((<any>window).clipboardData) {\n\t\t\tthis._event.preventDefault();\n\t\t\treturn (<any>window).clipboardData.getData('Text');\n\t\t}\n\n\t\tthrow new Error('ClipboardEventWrapper.getTextData: Cannot use text data!');\n\t}\n}\n\nclass KeyboardEventWrapper implements IKeyboardEventWrapper {\n\n\tpublic _actual: IKeyboardEvent;\n\n\tconstructor(actual:IKeyboardEvent) {\n\t\tthis._actual = actual;\n\t}\n\n\tpublic equals(keybinding:number): boolean {\n\t\treturn this._actual.equals(keybinding);\n\t}\n\n\tpublic preventDefault(): void {\n\t\tthis._actual.preventDefault();\n\t}\n\n\tpublic isDefaultPrevented(): boolean {\n\t\tif (this._actual.browserEvent) {\n\t\t\treturn this._actual.browserEvent.defaultPrevented;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nclass TextAreaWrapper extends Disposable implements ITextAreaWrapper {\n\n\tprivate _textArea: HTMLTextAreaElement;\n\n\tprivate _onKeyDown = this._register(new Emitter<IKeyboardEventWrapper>());\n\tpublic onKeyDown: Event<IKeyboardEventWrapper> = this._onKeyDown.event;\n\n\tprivate _onKeyUp = this._register(new Emitter<IKeyboardEventWrapper>());\n\tpublic onKeyUp: Event<IKeyboardEventWrapper> = this._onKeyUp.event;\n\n\tprivate _onKeyPress = this._register(new Emitter<IKeyboardEventWrapper>());\n\tpublic onKeyPress: Event<IKeyboardEventWrapper> = this._onKeyPress.event;\n\n\tprivate _onCompositionStart = this._register(new Emitter<void>());\n\tpublic onCompositionStart: Event<void> = this._onCompositionStart.event;\n\n\tprivate _onCompositionEnd = this._register(new Emitter<void>());\n\tpublic onCompositionEnd: Event<void> = this._onCompositionEnd.event;\n\n\tprivate _onInput = this._register(new Emitter<void>());\n\tpublic onInput: Event<void> = this._onInput.event;\n\n\tprivate _onCut = this._register(new Emitter<IClipboardEvent>());\n\tpublic onCut: Event<IClipboardEvent> = this._onCut.event;\n\n\tprivate _onCopy = this._register(new Emitter<IClipboardEvent>());\n\tpublic onCopy: Event<IClipboardEvent> = this._onCopy.event;\n\n\tprivate _onPaste = this._register(new Emitter<IClipboardEvent>());\n\tpublic onPaste: Event<IClipboardEvent> = this._onPaste.event;\n\n\tconstructor(textArea: HTMLTextAreaElement) {\n\t\tsuper();\n\t\tthis._textArea = textArea;\n\n\t\tthis._register(dom.addStandardDisposableListener(this._textArea, 'keydown', (e) => this._onKeyDown.fire(new KeyboardEventWrapper(e))));\n\t\tthis._register(dom.addStandardDisposableListener(this._textArea, 'keyup', (e) => this._onKeyUp.fire(new KeyboardEventWrapper(e))));\n\t\tthis._register(dom.addStandardDisposableListener(this._textArea, 'keypress', (e) => this._onKeyPress.fire(new KeyboardEventWrapper(e))));\n\t\tthis._register(dom.addDisposableListener(this._textArea, 'compositionstart', (e) => this._onCompositionStart.fire()));\n\t\tthis._register(dom.addDisposableListener(this._textArea, 'compositionend', (e) => this._onCompositionEnd.fire()));\n\t\tthis._register(dom.addDisposableListener(this._textArea, 'input', (e) => this._onInput.fire()));\n\t\tthis._register(dom.addDisposableListener(this._textArea, 'cut', (e:ClipboardEvent) => this._onCut.fire(new ClipboardEventWrapper(e))));\n\t\tthis._register(dom.addDisposableListener(this._textArea, 'copy', (e:ClipboardEvent) => this._onCopy.fire(new ClipboardEventWrapper(e))));\n\t\tthis._register(dom.addDisposableListener(this._textArea, 'paste', (e:ClipboardEvent) => this._onPaste.fire(new ClipboardEventWrapper(e))));\n\t}\n\n\tpublic get actual(): HTMLTextAreaElement {\n\t\treturn this._textArea;\n\t}\n\n\tpublic getValue(): string {\n\t\t// console.log('current value: ' + this._textArea.value);\n\t\treturn this._textArea.value;\n\t}\n\n\tpublic setValue(reason:string, value:string): void {\n\t\t// console.log('reason: ' + reason + ', current value: ' + this._textArea.value + ' => new value: ' + value);\n\t\tthis._textArea.value = value;\n\t}\n\n\tpublic getSelectionStart(): number {\n\t\treturn this._textArea.selectionStart;\n\t}\n\n\tpublic getSelectionEnd(): number {\n\t\treturn this._textArea.selectionEnd;\n\t}\n\n\tpublic setSelectionRange(selectionStart:number, selectionEnd:number): void {\n\t\tlet activeElement = document.activeElement;\n\t\tif (activeElement === this._textArea) {\n\t\t\tthis._textArea.setSelectionRange(selectionStart, selectionEnd);\n\t\t} else {\n\t\t\tthis._setSelectionRangeJumpy(selectionStart, selectionEnd);\n\t\t}\n\t}\n\n\tprivate _setSelectionRangeJumpy(selectionStart:number, selectionEnd:number): void {\n\t\ttry {\n\t\t\tlet scrollState = dom.saveParentsScrollTop(this._textArea);\n\t\t\tthis._textArea.focus();\n\t\t\tthis._textArea.setSelectionRange(selectionStart, selectionEnd);\n\t\t\tdom.restoreParentsScrollTop(this._textArea, scrollState);\n\t\t} catch(e) {\n\t\t\t// Sometimes IE throws when setting selection (e.g. textarea is off-DOM)\n\t\t\tconsole.log('an error has been thrown!');\n\t\t}\n\t}\n\n\tpublic isInOverwriteMode(): boolean {\n\t\t// In IE, pressing Insert will bring the typing into overwrite mode\n\t\tif (browser.isIE11orEarlier && document.queryCommandValue('OverWrite')) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\n\nexport class KeyboardHandler extends ViewEventHandler implements IDisposable {\n\n\tprivate context:IViewContext;\n\tprivate viewController:IViewController;\n\tprivate viewHelper:IKeyboardHandlerHelper;\n\tprivate textArea:TextAreaWrapper;\n\tprivate textAreaHandler:TextAreaHandler;\n\tprivate _toDispose:IDisposable[];\n\n\tprivate contentLeft:number;\n\tprivate contentWidth:number;\n\tprivate scrollLeft:number;\n\n\tconstructor(context:IViewContext, viewController:IViewController, viewHelper:IKeyboardHandlerHelper) {\n\t\tsuper();\n\n\t\tthis.context = context;\n\t\tthis.viewController = viewController;\n\t\tthis.textArea = new TextAreaWrapper(viewHelper.textArea);\n\t\tthis.viewHelper = viewHelper;\n\n\t\tthis.contentLeft = 0;\n\t\tthis.contentWidth = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.textAreaHandler = new TextAreaHandler(browser, this._getStrategy(), this.textArea, this.context.model, () => this.viewHelper.flushAnyAccumulatedEvents());\n\n\t\tthis._toDispose = [];\n\t\tthis._toDispose.push(this.textAreaHandler.onKeyDown((e) => this.viewController.emitKeyDown(<IKeyboardEvent>e._actual)));\n\t\tthis._toDispose.push(this.textAreaHandler.onKeyUp((e) => this.viewController.emitKeyUp(<IKeyboardEvent>e._actual)));\n\t\tthis._toDispose.push(this.textAreaHandler.onPaste((e) => this.viewController.paste('keyboard', e.text, e.pasteOnNewLine)));\n\t\tthis._toDispose.push(this.textAreaHandler.onCut((e) => this.viewController.cut('keyboard')));\n\t\tthis._toDispose.push(this.textAreaHandler.onType((e) => {\n\t\t\tif (e.replaceCharCnt) {\n\t\t\t\tthis.viewController.replacePreviousChar('keyboard', e.text, e.replaceCharCnt);\n\t\t\t} else {\n\t\t\t\tthis.viewController.type('keyboard', e.text);\n\t\t\t}\n\t\t}));\n\t\tthis._toDispose.push(this.textAreaHandler.onCompositionStart((e) => {\n\t\t\tlet lineNumber = e.showAtLineNumber;\n\t\t\tlet column = e.showAtColumn;\n\n\t\t\tlet revealPositionEvent:editorCommon.IViewRevealRangeEvent = {\n\t\t\t\trange: new Range(lineNumber, column, lineNumber, column),\n\t\t\t\tverticalType: editorCommon.VerticalRevealType.Simple,\n\t\t\t\trevealHorizontal: true\n\t\t\t};\n\t\t\tthis.context.privateViewEventBus.emit(editorCommon.ViewEventNames.RevealRangeEvent, revealPositionEvent);\n\n\t\t\t// Find range pixel position\n\t\t\tlet visibleRange = this.viewHelper.visibleRangeForPositionRelativeToEditor(lineNumber, column);\n\n\t\t\tif (visibleRange) {\n\t\t\t\tStyleMutator.setTop(this.textArea.actual, visibleRange.top);\n\t\t\t\tStyleMutator.setLeft(this.textArea.actual, this.contentLeft + visibleRange.left - this.scrollLeft);\n\t\t\t}\n\n\t\t\tif (browser.isIE11orEarlier) {\n\t\t\t\tStyleMutator.setWidth(this.textArea.actual, this.contentWidth);\n\t\t\t}\n\n\t\t\t// Show the textarea\n\t\t\tStyleMutator.setHeight(this.textArea.actual, this.context.configuration.editor.lineHeight);\n\t\t\tdom.addClass(this.viewHelper.viewDomNode, 'ime-input');\n\t\t}));\n\t\tthis._toDispose.push(this.textAreaHandler.onCompositionEnd((e) => {\n\t\t\tthis.textArea.actual.style.height = '';\n\t\t\tthis.textArea.actual.style.width = '';\n\t\t\tStyleMutator.setLeft(this.textArea.actual, 0);\n\t\t\tStyleMutator.setTop(this.textArea.actual, 0);\n\t\t\tdom.removeClass(this.viewHelper.viewDomNode, 'ime-input');\n\t\t}));\n\t\tthis._toDispose.push(GlobalScreenReaderNVDA.onChange((value) => {\n\t\t\tthis.textAreaHandler.setStrategy(this._getStrategy());\n\t\t}));\n\n\n\t\tthis.context.addEventHandler(this);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.context.removeEventHandler(this);\n\t\tthis.textAreaHandler.dispose();\n\t\tthis.textArea.dispose();\n\t\tthis._toDispose = dispose(this._toDispose);\n\t}\n\n\tprivate _getStrategy(): TextAreaStrategy {\n\t\tif (GlobalScreenReaderNVDA.getValue()) {\n\t\t\treturn TextAreaStrategy.NVDA;\n\t\t}\n\t\tif (this.context.configuration.editor.experimentalScreenReader) {\n\t\t\treturn TextAreaStrategy.NVDA;\n\t\t}\n\t\treturn TextAreaStrategy.IENarrator;\n\t}\n\n\tpublic focusTextArea(): void {\n\t\tthis.textAreaHandler.writePlaceholderAndSelectTextAreaSync();\n\t}\n\n\tpublic onConfigurationChanged(e: editorCommon.IConfigurationChangedEvent): boolean {\n\t\t// Give textarea same font size & line height as editor, for the IME case (when the textarea is visible)\n\t\tStyleMutator.setFontSize(this.textArea.actual, this.context.configuration.editor.fontSize);\n\t\tStyleMutator.setLineHeight(this.textArea.actual, this.context.configuration.editor.lineHeight);\n\t\tif (e.experimentalScreenReader) {\n\t\t\tthis.textAreaHandler.setStrategy(this._getStrategy());\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic onScrollChanged(e:editorCommon.IScrollEvent): boolean {\n\t\tthis.scrollLeft = e.scrollLeft;\n\t\treturn false;\n\t}\n\n\tpublic onViewFocusChanged(isFocused:boolean): boolean {\n\t\tthis.textAreaHandler.setHasFocus(isFocused);\n\t\treturn false;\n\t}\n\n\tprivate _lastCursorSelectionChanged:editorCommon.IViewCursorSelectionChangedEvent = null;\n\tpublic onCursorSelectionChanged(e:editorCommon.IViewCursorSelectionChangedEvent): boolean {\n\t\tthis._lastCursorSelectionChanged = e;\n\t\treturn false;\n\t}\n\n\tpublic onCursorPositionChanged(e:editorCommon.IViewCursorPositionChangedEvent): boolean {\n\t\tthis.textAreaHandler.setCursorPosition(e.position);\n\t\treturn false;\n\t}\n\n\tpublic onLayoutChanged(layoutInfo:editorCommon.IEditorLayoutInfo): boolean {\n\t\tthis.contentLeft = layoutInfo.contentLeft;\n\t\tthis.contentWidth = layoutInfo.contentWidth;\n\t\treturn false;\n\t}\n\n\tpublic writeToTextArea(): void {\n\t\tif (this._lastCursorSelectionChanged) {\n\t\t\tlet e = this._lastCursorSelectionChanged;\n\t\t\tthis._lastCursorSelectionChanged = null;\n\t\t\tthis.textAreaHandler.setCursorSelections(e.selection, e.secondarySelections);\n\t\t}\n\t}\n\n}"]}