{"version":3,"file":"vs/platform/actions/common/actions.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/platform/actions/common/actions.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport Actions = require('vs/base/common/actions');\nimport WinJS = require('vs/base/common/winjs.base');\nimport Assert = require('vs/base/common/assert');\nimport EventEmitter = require('vs/base/common/eventEmitter');\n\nimport Descriptors = require('vs/platform/instantiation/common/descriptors');\nimport Instantiation = require('vs/platform/instantiation/common/instantiation');\nimport {KbExpr, IKeybindings} from 'vs/platform/keybinding/common/keybindingService';\nimport {createDecorator, ServiceIdentifier} from 'vs/platform/instantiation/common/instantiation';\n\nexport let IActionsService = createDecorator<IActionsService>('actionsService');\n\nexport interface IActionsService {\n\tserviceId: ServiceIdentifier<any>;\n\tgetActions(): Actions.IAction[];\n}\n\nexport class SyncActionDescriptor {\n\n\tprivate _descriptor: Descriptors.SyncDescriptor0<Actions.Action>;\n\n\tprivate _id: string;\n\tprivate _label: string;\n\tprivate _keybindings: IKeybindings;\n\tprivate _keybindingContext: KbExpr;\n\tprivate _keybindingWeight: number;\n\n\tconstructor(ctor: Instantiation.IConstructorSignature2<string, string, Actions.Action>,\n\t\tid: string, label: string, keybindings?: IKeybindings, keybindingContext?: KbExpr, keybindingWeight?: number\n\t) {\n\t\tthis._id = id;\n\t\tthis._label = label;\n\t\tthis._keybindings = keybindings;\n\t\tthis._keybindingContext = keybindingContext;\n\t\tthis._keybindingWeight = keybindingWeight;\n\t\tthis._descriptor = Descriptors.createSyncDescriptor(ctor, this._id, this._label);\n\t}\n\n\tpublic get syncDescriptor(): Descriptors.SyncDescriptor0<Actions.Action> {\n\t\treturn this._descriptor;\n\t}\n\n\tpublic get id(): string {\n\t\treturn this._id;\n\t}\n\n\tpublic get label(): string {\n\t\treturn this._label;\n\t}\n\n\tpublic get keybindings(): IKeybindings {\n\t\treturn this._keybindings;\n\t}\n\n\tpublic get keybindingContext(): KbExpr {\n\t\treturn this._keybindingContext;\n\t}\n\n\tpublic get keybindingWeight(): number {\n\t\treturn this._keybindingWeight;\n\t}\n}\n\n/**\n * A proxy for an action that needs to load code in order to confunction. Can be used from contributions to defer\n * module loading up to the point until the run method is being executed.\n */\nexport class DeferredAction extends Actions.Action {\n\tprivate _cachedAction: Actions.IAction;\n\tprivate _emitterUnbind: EventEmitter.ListenerUnbind;\n\n\tconstructor(private _instantiationService: Instantiation.IInstantiationService, private _descriptor: Descriptors.AsyncDescriptor<Actions.Action>,\n\t\tid: string, label = '', cssClass = '', enabled = true) {\n\n\t\tsuper(id, label, cssClass, enabled);\n\t}\n\n\tpublic get cachedAction(): Actions.IAction {\n\t\treturn this._cachedAction;\n\t}\n\n\tpublic set cachedAction(action: Actions.IAction) {\n\t\tthis._cachedAction = action;\n\t}\n\n\tpublic get id(): string {\n\t\tif (this._cachedAction instanceof Actions.Action) {\n\t\t\treturn this._cachedAction.id;\n\t\t}\n\n\t\treturn this._id;\n\t}\n\n\tpublic get label(): string {\n\t\tif (this._cachedAction instanceof Actions.Action) {\n\t\t\treturn this._cachedAction.label;\n\t\t}\n\n\t\treturn this._label;\n\t}\n\n\tpublic set label(value: string) {\n\t\tif (this._cachedAction instanceof Actions.Action) {\n\t\t\tthis._cachedAction.label = value;\n\t\t} else {\n\t\t\tthis._setLabel(value);\n\t\t}\n\t}\n\n\tpublic get class(): string {\n\t\tif (this._cachedAction instanceof Actions.Action) {\n\t\t\treturn this._cachedAction.class;\n\t\t}\n\n\t\treturn this._cssClass;\n\t}\n\n\tpublic set class(value: string) {\n\t\tif (this._cachedAction instanceof Actions.Action) {\n\t\t\tthis._cachedAction.class = value;\n\t\t} else {\n\t\t\tthis._setClass(value);\n\t\t}\n\t}\n\n\tpublic get enabled(): boolean {\n\t\tif (this._cachedAction instanceof Actions.Action) {\n\t\t\treturn this._cachedAction.enabled;\n\t\t}\n\t\treturn this._enabled;\n\t}\n\n\tpublic set enabled(value: boolean) {\n\t\tif (this._cachedAction instanceof Actions.Action) {\n\t\t\tthis._cachedAction.enabled = value;\n\t\t} else {\n\t\t\tthis._setEnabled(value);\n\t\t}\n\t}\n\n\tpublic get order(): number {\n\t\tif (this._cachedAction instanceof Actions.Action) {\n\t\t\treturn (<Actions.Action>this._cachedAction).order;\n\t\t}\n\t\treturn this._order;\n\t}\n\n\tpublic set order(order: number) {\n\t\tif (this._cachedAction instanceof Actions.Action) {\n\t\t\t(<Actions.Action>this._cachedAction).order = order;\n\t\t} else {\n\t\t\tthis._order = order;\n\t\t}\n\t}\n\n\tpublic run(event?: any): WinJS.Promise {\n\t\tif (this._cachedAction) {\n\t\t\treturn this._cachedAction.run(event);\n\t\t}\n\t\treturn this._createAction().then((action: Actions.IAction) => {\n\t\t\treturn action.run(event);\n\t\t});\n\t}\n\n\tprivate _createAction(): WinJS.TPromise<Actions.IAction> {\n\t\tlet promise = WinJS.TPromise.as(undefined);\n\t\treturn promise.then(() => {\n\t\t\treturn this._instantiationService.createInstance(this._descriptor);\n\n\t\t}).then((action) => {\n\t\t\tAssert.ok(action instanceof Actions.Action, 'Action must be an instanceof Base Action');\n\t\t\tthis._cachedAction = action;\n\n\t\t\t// Pipe events from the instantated action through this deferred action\n\t\t\tthis._emitterUnbind = this.addEmitter(<Actions.Action>this._cachedAction);\n\n\t\t\treturn action;\n\t\t});\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this._emitterUnbind) {\n\t\t\tthis._emitterUnbind();\n\t\t}\n\t\tif (this._cachedAction) {\n\t\t\tthis._cachedAction.dispose();\n\t\t}\n\t\tsuper.dispose();\n\t}\n}"]}