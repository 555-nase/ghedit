{"version":3,"file":"workbench.js","sourceRoot":"","sources":["../../../../src/vs/workbench/browser/workbench.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./media/workbench';\n\nimport {TPromise, ValueCallback} from 'vs/base/common/winjs.base';\nimport types = require('vs/base/common/types');\nimport {IDisposable, dispose} from 'vs/base/common/lifecycle';\nimport strings = require('vs/base/common/strings');\nimport DOM = require('vs/base/browser/dom');\nimport {Box, Builder, withElementById, $} from 'vs/base/browser/builder';\nimport {Delayer} from 'vs/base/common/async';\nimport assert = require('vs/base/common/assert');\nimport timer = require('vs/base/common/timer');\nimport errors = require('vs/base/common/errors');\nimport {Registry} from 'vs/platform/platform';\nimport {Identifiers} from 'vs/workbench/common/constants';\nimport {EventType} from 'vs/workbench/common/events';\nimport {IOptions} from 'vs/workbench/common/options';\nimport {IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions} from 'vs/workbench/common/contributions';\nimport {IEditorRegistry, Extensions as EditorExtensions} from 'vs/workbench/browser/parts/editor/baseEditor';\nimport {TextEditorOptions, EditorInput, EditorOptions} from 'vs/workbench/common/editor';\nimport {Part} from 'vs/workbench/browser/part';\nimport {HistoryService} from 'vs/workbench/services/history/browser/history';\nimport {ActivitybarPart} from 'vs/workbench/browser/parts/activitybar/activitybarPart';\nimport {EditorPart} from 'vs/workbench/browser/parts/editor/editorPart';\nimport {SidebarPart} from 'vs/workbench/browser/parts/sidebar/sidebarPart';\nimport {PanelPart} from 'vs/workbench/browser/parts/panel/panelPart';\nimport {StatusbarPart} from 'vs/workbench/browser/parts/statusbar/statusbarPart';\nimport {WorkbenchLayout, LayoutOptions} from 'vs/workbench/browser/layout';\nimport {IActionBarRegistry, Extensions as ActionBarExtensions} from 'vs/workbench/browser/actionBarRegistry';\nimport {ViewletRegistry, Extensions as ViewletExtensions} from 'vs/workbench/browser/viewlet';\nimport {PanelRegistry, Extensions as PanelExtensions} from 'vs/workbench/browser/panel';\nimport {QuickOpenController} from 'vs/workbench/browser/parts/quickopen/quickOpenController';\nimport {DiffEditorInput, toDiffLabel} from 'vs/workbench/common/editor/diffEditorInput';\nimport {getServices} from 'vs/platform/instantiation/common/extensions';\nimport {AbstractKeybindingService} from 'vs/platform/keybinding/browser/keybindingServiceImpl';\nimport {IUntitledEditorService, UntitledEditorService} from 'vs/workbench/services/untitled/common/untitledEditorService';\nimport {WorkbenchEditorService} from 'vs/workbench/services/editor/browser/editorService';\nimport {Position, Parts, IPartService} from 'vs/workbench/services/part/common/partService';\nimport {IWorkspaceContextService as IWorkbenchWorkspaceContextService} from 'vs/workbench/services/workspace/common/contextService';\nimport {IStorageService, StorageScope} from 'vs/platform/storage/common/storage';\nimport {IWorkspace, IConfiguration} from 'vs/platform/workspace/common/workspace';\nimport {IKeybindingService} from 'vs/platform/keybinding/common/keybindingService';\nimport {IContextMenuService} from 'vs/platform/contextview/browser/contextView';\nimport {IActivityService} from 'vs/workbench/services/activity/common/activityService';\nimport {IViewletService} from 'vs/workbench/services/viewlet/common/viewletService';\nimport {IPanelService} from 'vs/workbench/services/panel/common/panelService';\nimport {WorkbenchMessageService} from 'vs/workbench/services/message/browser/messageService';\nimport {IWorkbenchEditorService} from 'vs/workbench/services/editor/common/editorService';\nimport {IQuickOpenService} from 'vs/workbench/services/quickopen/common/quickOpenService';\nimport {IHistoryService} from 'vs/workbench/services/history/common/history';\nimport {IEventService} from 'vs/platform/event/common/event';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {ILifecycleService} from 'vs/platform/lifecycle/common/lifecycle';\nimport {IMessageService} from 'vs/platform/message/common/message';\nimport {ITelemetryService, Extenstions as TelemetryExtensions} from 'vs/platform/telemetry/common/telemetry';\nimport {IThreadService} from 'vs/platform/thread/common/thread';\nimport {IExtensionService} from 'vs/platform/extensions/common/extensions';\nimport {AbstractThreadService} from 'vs/platform/thread/common/abstractThreadService';\nimport {IStatusbarService} from 'vs/workbench/services/statusbar/common/statusbarService';\n\ninterface WorkbenchParams {\n\tworkspace?: IWorkspace;\n\tconfiguration: IConfiguration;\n\toptions: IOptions;\n\tinstantiationService: IInstantiationService;\n}\n\nexport interface IWorkbenchCallbacks {\n\tonServicesCreated?: () => void;\n\tonWorkbenchStarted?: () => void;\n}\n\n/**\n * The workbench creates and lays out all parts that make up the Monaco Workbench.\n */\nexport class Workbench implements IPartService {\n\n\tprivate static sidebarPositionSettingKey = 'workbench.sidebar.position';\n\tprivate static sidebarHiddenSettingKey = 'workbench.sidebar.hidden';\n\tprivate static panelHiddenSettingKey = 'workbench.panel.hidden';\n\n\tpublic serviceId = IPartService;\n\n\tprivate container: HTMLElement;\n\tprivate workbenchParams: WorkbenchParams;\n\tprivate workbenchContainer: Builder;\n\tprivate workbench: Builder;\n\tprivate workbenchStarted: boolean;\n\tprivate workbenchCreated: boolean;\n\tprivate workbenchShutdown: boolean;\n\tprivate activitybarPart: ActivitybarPart;\n\tprivate sidebarPart: SidebarPart;\n\tprivate panelPart: PanelPart;\n\tprivate editorPart: EditorPart;\n\tprivate statusbarPart: StatusbarPart;\n\tprivate quickOpen: QuickOpenController;\n\tprivate untitledEditorService: IUntitledEditorService;\n\tprivate instantiationService: IInstantiationService;\n\tprivate eventService: IEventService;\n\tprivate contextService: IWorkbenchWorkspaceContextService;\n\tprivate editorService: WorkbenchEditorService;\n\tprivate storageService: IStorageService;\n\tprivate telemetryService: ITelemetryService;\n\tprivate keybindingService: IKeybindingService;\n\tprivate lifecycleService: ILifecycleService;\n\tprivate workbenchLayout: WorkbenchLayout;\n\tprivate toDispose: IDisposable[];\n\tprivate toShutdown: { shutdown: () => void; }[];\n\tprivate callbacks: IWorkbenchCallbacks;\n\tprivate creationPromise: TPromise<boolean>;\n\tprivate creationPromiseComplete: ValueCallback;\n\tprivate sideBarHidden: boolean;\n\tprivate sideBarPosition: Position;\n\tprivate panelHidden: boolean;\n\tprivate editorBackgroundDelayer: Delayer<void>;\n\n\tconstructor(container: HTMLElement, workspace: IWorkspace, configuration: IConfiguration, options: IOptions, instantiationService: IInstantiationService) {\n\n\t\t// Validate params\n\t\tthis.validateParams(container, configuration, options);\n\n\t\t// If String passed in as container, try to find it in DOM\n\t\tif (types.isString(container)) {\n\t\t\tlet element = withElementById(container.toString());\n\t\t\tthis.container = element.getHTMLElement();\n\t\t}\n\n\t\t// Otherwise use as HTMLElement\n\t\telse {\n\t\t\tthis.container = container;\n\t\t}\n\n\t\tthis.workbenchParams = {\n\t\t\tworkspace: workspace,\n\t\t\tconfiguration: configuration,\n\t\t\toptions: options || {},\n\t\t\tinstantiationService\n\t\t};\n\n\t\tthis.toDispose = [];\n\t\tthis.toShutdown = [];\n\t\tthis.editorBackgroundDelayer = new Delayer<void>(50);\n\n\t\tthis.creationPromise = new TPromise<boolean>((c, e, p) => {\n\t\t\tthis.creationPromiseComplete = c;\n\t\t});\n\t}\n\n\tprivate validateParams(container: HTMLElement, configuration: IConfiguration, options: IOptions): void {\n\n\t\t// Container\n\t\tassert.ok(container, 'Workbench requires a container to be created with');\n\t\tif (types.isString(container)) {\n\t\t\tlet element = withElementById(container.toString());\n\t\t\tassert.ok(element, strings.format('Can not find HTMLElement with id \\'{0}\\'.', container));\n\t\t}\n\t}\n\n\t/**\n\t * Starts the workbench and creates the HTML elements on the container. A workbench can only be started\n\t * once. Use the shutdown function to free up resources created by the workbench on startup.\n\t */\n\tpublic startup(callbacks?: IWorkbenchCallbacks): void {\n\t\tassert.ok(!this.workbenchStarted, 'Can not start a workbench that was already started');\n\t\tassert.ok(!this.workbenchShutdown, 'Can not start a workbench that was shutdown');\n\n\t\ttry {\n\t\t\tthis.workbenchStarted = true;\n\t\t\tthis.callbacks = callbacks;\n\n\t\t\t// Create Workbench\n\t\t\tthis.createWorkbench();\n\n\t\t\t// Services\n\t\t\tthis.initServices();\n\t\t\tif (this.callbacks && this.callbacks.onServicesCreated) {\n\t\t\t\tthis.callbacks.onServicesCreated();\n\t\t\t}\n\n\t\t\t// Register Listeners\n\t\t\tthis.registerListeners();\n\n\t\t\t// Settings\n\t\t\tthis.initSettings();\n\n\t\t\t// Create Workbench and Parts\n\t\t\tthis.renderWorkbench();\n\n\t\t\t// Workbench Layout\n\t\t\tthis.createWorkbenchLayout();\n\n\t\t\t// Register Emitters\n\t\t\tthis.registerEmitters();\n\n\t\t\t// Load composits and editors in parallel\n\t\t\tlet compositeAndEditorPromises: TPromise<any>[] = [];\n\n\t\t\t// Show default viewlet unless sidebar is hidden or we dont have a default viewlet\n\t\t\tlet viewletRegistry = (<ViewletRegistry>Registry.as(ViewletExtensions.Viewlets));\n\t\t\tlet viewletId = viewletRegistry.getDefaultViewletId();\n\t\t\tif (!this.workbenchParams.configuration.env.isBuilt) {\n\t\t\t\tviewletId = this.storageService.get(SidebarPart.activeViewletSettingsKey, StorageScope.WORKSPACE, viewletRegistry.getDefaultViewletId()); // help developers and restore last view\n\t\t\t}\n\n\t\t\tif (!this.sideBarHidden && !!viewletId) {\n\t\t\t\tlet viewletTimerEvent = timer.start(timer.Topic.STARTUP, strings.format('Opening Viewlet: {0}', viewletId));\n\t\t\t\tcompositeAndEditorPromises.push(this.sidebarPart.openViewlet(viewletId, false).then(() => viewletTimerEvent.stop()));\n\t\t\t}\n\n\t\t\tlet panelRegistry = (<PanelRegistry>Registry.as(PanelExtensions.Panels));\n\t\t\tconst panelId = this.storageService.get(PanelPart.activePanelSettingsKey, StorageScope.WORKSPACE, panelRegistry.getDefaultPanelId());\n\t\t\tif (!this.panelHidden && !!panelId) {\n\t\t\t\tcompositeAndEditorPromises.push(this.panelPart.openPanel(panelId, false));\n\t\t\t}\n\n\t\t\t// Check for configured options to open files on startup and resolve if any or open untitled for empty workbench\n\t\t\tlet editorTimerEvent = timer.start(timer.Topic.STARTUP, strings.format('Restoring Editor(s)'));\n\t\t\tlet resolveEditorInputsPromise: TPromise<EditorInput[]> = TPromise.as(null);\n\t\t\tlet options: EditorOptions[] = [];\n\n\t\t\t// Files to open, diff or create\n\t\t\tconst wbopt = this.workbenchParams.options;\n\t\t\tif ((wbopt.filesToCreate && wbopt.filesToCreate.length) || (wbopt.filesToOpen && wbopt.filesToOpen.length) || (wbopt.filesToDiff && wbopt.filesToDiff.length)) {\n\t\t\t\tlet filesToCreate = wbopt.filesToCreate || [];\n\t\t\t\tlet filesToOpen = wbopt.filesToOpen || [];\n\t\t\t\tlet filesToDiff = wbopt.filesToDiff;\n\n\t\t\t\t// Files to diff is exclusive\n\t\t\t\tif (filesToDiff && filesToDiff.length) {\n\t\t\t\t\tresolveEditorInputsPromise = TPromise.join<EditorInput>(filesToDiff.map((resourceInput) => this.editorService.inputToType(resourceInput))).then((inputsToDiff) => {\n\t\t\t\t\t\treturn [new DiffEditorInput(toDiffLabel(filesToDiff[0].resource, filesToDiff[1].resource, this.contextService), null, inputsToDiff[0], inputsToDiff[1])];\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Otherwise: Open/Create files\n\t\t\t\telse {\n\t\t\t\t\tlet inputs: EditorInput[] = [];\n\n\t\t\t\t\t// Files to create\n\t\t\t\t\tinputs.push(...filesToCreate.map((resourceInput) => this.untitledEditorService.createOrGet(resourceInput.resource)));\n\t\t\t\t\toptions.push(...filesToCreate.map(r => null)); // fill empty options for files to create because we dont have options there\n\n\t\t\t\t\t// Files to open\n\t\t\t\t\tresolveEditorInputsPromise = TPromise.join<EditorInput>(filesToOpen.map((resourceInput) => this.editorService.inputToType(resourceInput))).then((inputsToOpen) => {\n\t\t\t\t\t\tinputs.push(...inputsToOpen);\n\t\t\t\t\t\toptions.push(...filesToOpen.map(resourceInput => TextEditorOptions.from(resourceInput)));\n\n\t\t\t\t\t\treturn inputs;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Empty workbench\n\t\t\telse if (!this.workbenchParams.workspace) {\n\t\t\t\tresolveEditorInputsPromise = TPromise.as([this.untitledEditorService.createOrGet()]);\n\t\t\t}\n\n\t\t\t// Restore editor state (either from last session or with given inputs)\n\t\t\tcompositeAndEditorPromises.push(resolveEditorInputsPromise.then((inputs) => {\n\t\t\t\treturn this.editorPart.restoreEditorState(inputs, options).then(() => {\n\t\t\t\t\tthis.onEditorOpenedOrClosed(); // make sure we show the proper background in the editor area\n\t\t\t\t\teditorTimerEvent.stop();\n\t\t\t\t});\n\t\t\t}));\n\n\t\t\t// Flag workbench as created once done\n\t\t\tconst workbenchDone = (error?: Error) => {\n\t\t\t\tthis.workbenchCreated = true;\n\t\t\t\tthis.eventService.emit(EventType.WORKBENCH_CREATED);\n\t\t\t\tthis.creationPromiseComplete(true);\n\n\t\t\t\tif (this.callbacks && this.callbacks.onWorkbenchStarted) {\n\t\t\t\t\tthis.callbacks.onWorkbenchStarted();\n\t\t\t\t}\n\n\t\t\t\tif (error) {\n\t\t\t\t\terrors.onUnexpectedError(error);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tTPromise.join(compositeAndEditorPromises).then(() => workbenchDone(), (error) => workbenchDone(error));\n\t\t} catch (error) {\n\n\t\t\t// Print out error\n\t\t\tconsole.error(errors.toErrorMessage(error, true));\n\n\t\t\t// Rethrow\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tprivate initServices(): void {\n\t\tthis.instantiationService = this.workbenchParams.instantiationService;\n\n\t\t// Services we expect\n\t\tthis.eventService = this.instantiationService.getInstance(IEventService);\n\t\tthis.storageService = this.instantiationService.getInstance(IStorageService);\n\t\tthis.keybindingService = this.instantiationService.getInstance(IKeybindingService);\n\t\tthis.contextService = this.instantiationService.getInstance(IWorkbenchWorkspaceContextService);\n\t\tthis.telemetryService = this.instantiationService.getInstance(ITelemetryService);\n\t\tlet messageService = this.instantiationService.getInstance(IMessageService);\n\t\tif (this.keybindingService instanceof AbstractKeybindingService) {\n\t\t\t(<AbstractKeybindingService><any>this.keybindingService).setMessageService(messageService);\n\t\t}\n\t\tlet threadService = this.instantiationService.getInstance(IThreadService);\n\t\tthis.instantiationService.getInstance(IExtensionService);\n\t\tthis.lifecycleService = this.instantiationService.getInstance(ILifecycleService);\n\t\tthis.toDispose.push(this.lifecycleService.onShutdown(this.shutdownComponents, this));\n\t\tlet contextMenuService = this.instantiationService.getInstance(IContextMenuService);\n\t\tthis.untitledEditorService = this.instantiationService.getInstance(IUntitledEditorService);\n\n\t\t// Services we contribute\n\t\tthis.instantiationService.addSingleton(IPartService, this);\n\n\t\t// Viewlet service (sidebar part)\n\t\tthis.sidebarPart = new SidebarPart(\n\t\t\tmessageService,\n\t\t\tthis.storageService,\n\t\t\tthis.eventService,\n\t\t\tthis.telemetryService,\n\t\t\tcontextMenuService,\n\t\t\tthis,\n\t\t\tthis.keybindingService,\n\t\t\tIdentifiers.SIDEBAR_PART\n\t\t);\n\t\tthis.toDispose.push(this.sidebarPart);\n\t\tthis.toShutdown.push(this.sidebarPart);\n\t\tthis.instantiationService.addSingleton(IViewletService, this.sidebarPart);\n\n\t\t// Panel service (panel part)\n\t\tthis.panelPart = new PanelPart(\n\t\t\tmessageService,\n\t\t\tthis.storageService,\n\t\t\tthis.eventService,\n\t\t\tthis.telemetryService,\n\t\t\tcontextMenuService,\n\t\t\tthis,\n\t\t\tthis.keybindingService,\n\t\t\tIdentifiers.PANEL_PART\n\t\t);\n\t\tthis.toDispose.push(this.panelPart);\n\t\tthis.toShutdown.push(this.panelPart);\n\t\tthis.instantiationService.addSingleton(IPanelService, this.panelPart);\n\n\t\t// Activity service (activitybar part)\n\t\tthis.activitybarPart = new ActivitybarPart(\n\t\t\tthis.sidebarPart,\n\t\t\tmessageService,\n\t\t\tthis.telemetryService,\n\t\t\tthis.eventService,\n\t\t\tcontextMenuService,\n\t\t\tthis.keybindingService,\n\t\t\tIdentifiers.ACTIVITYBAR_PART\n\t\t);\n\t\tthis.toDispose.push(this.activitybarPart);\n\t\tthis.toShutdown.push(this.activitybarPart);\n\t\tthis.instantiationService.addSingleton(IActivityService, this.activitybarPart);\n\n\t\t// Editor service (editor part)\n\t\tthis.editorPart = new EditorPart(\n\t\t\tmessageService,\n\t\t\tthis.eventService,\n\t\t\tthis.telemetryService,\n\t\t\tthis.storageService,\n\t\t\tthis,\n\t\t\tIdentifiers.EDITOR_PART\n\t\t);\n\t\tthis.toDispose.push(this.editorPart);\n\t\tthis.toShutdown.push(this.editorPart);\n\t\tthis.editorService = new WorkbenchEditorService(\n\t\t\tthis.editorPart,\n\t\t\tthis.untitledEditorService\n\t\t);\n\t\tthis.instantiationService.addSingleton(IWorkbenchEditorService, this.editorService);\n\n\t\t// Quick open service (quick open controller)\n\t\tthis.quickOpen = new QuickOpenController(\n\t\t\tthis.eventService,\n\t\t\tthis.storageService,\n\t\t\tthis.editorService,\n\t\t\tthis.sidebarPart,\n\t\t\tmessageService,\n\t\t\tthis.telemetryService,\n\t\t\tthis.contextService,\n\t\t\tthis.keybindingService\n\t\t);\n\t\tthis.toDispose.push(this.quickOpen);\n\t\tthis.toShutdown.push(this.quickOpen);\n\t\tthis.instantiationService.addSingleton(IQuickOpenService, this.quickOpen);\n\n\t\t// Status bar\n\t\tthis.statusbarPart = new StatusbarPart(Identifiers.STATUSBAR_PART);\n\t\tthis.toDispose.push(this.statusbarPart);\n\t\tthis.toShutdown.push(this.statusbarPart);\n\t\tthis.instantiationService.addSingleton(IStatusbarService, this.statusbarPart);\n\n\t\t// History\n\t\tthis.instantiationService.addSingleton(IHistoryService, new HistoryService(this.eventService, this.editorService, this.contextService, this.quickOpen));\n\n\t\t// a new way to contribute services...\n\t\tlet contributedServices = getServices();\n\t\tfor (let contributedService of contributedServices) {\n\t\t\tthis.instantiationService.addSingleton(contributedService.id, contributedService.descriptor);\n\t\t}\n\n\t\t// Some services need to be set explicitly after all services are created\n\t\t(<AbstractThreadService><any>threadService).setInstantiationService(this.instantiationService);\n\t\t(<WorkbenchMessageService>messageService).setWorkbenchServices(this.quickOpen, this.statusbarPart);\n\t\tthis.quickOpen.setInstantiationService(this.instantiationService);\n\t\tthis.statusbarPart.setInstantiationService(this.instantiationService);\n\t\tthis.activitybarPart.setInstantiationService(this.instantiationService);\n\t\tthis.sidebarPart.setInstantiationService(this.instantiationService);\n\t\tthis.panelPart.setInstantiationService(this.instantiationService);\n\t\tthis.editorPart.setInstantiationService(this.instantiationService);\n\t\t(<UntitledEditorService>this.untitledEditorService).setInstantiationService(this.instantiationService);\n\t\tthis.editorService.setInstantiationService(this.instantiationService);\n\n\t\t// Set the some services to registries that have been created eagerly\n\t\t(<AbstractKeybindingService><any>this.keybindingService).setInstantiationService(this.instantiationService);\n\t\t<IActionBarRegistry>Registry.as(ActionBarExtensions.Actionbar).setInstantiationService(this.instantiationService);\n\t\t<IWorkbenchContributionsRegistry>Registry.as(WorkbenchExtensions.Workbench).setInstantiationService(this.instantiationService);\n\t\t<IEditorRegistry>Registry.as(EditorExtensions.Editors).setInstantiationService(this.instantiationService);\n\n\t\tRegistry.as<{activate(s:IInstantiationService):void}>(TelemetryExtensions.TelemetryAppenders).activate(this.instantiationService);\n\t}\n\n\tprivate initSettings(): void {\n\n\t\t// Sidebar visibility\n\t\tthis.sideBarHidden = this.storageService.getBoolean(Workbench.sidebarHiddenSettingKey, StorageScope.WORKSPACE, false);\n\t\tif (!!this.workbenchParams.options.singleFileMode) {\n\t\t\tthis.sideBarHidden = true; // we hide sidebar in single-file-mode\n\t\t}\n\n\t\tlet viewletRegistry = (<ViewletRegistry>Registry.as(ViewletExtensions.Viewlets));\n\t\tif (!viewletRegistry.getDefaultViewletId()) {\n\t\t\tthis.sideBarHidden = true; // can only hide sidebar if we dont have a default viewlet id\n\t\t}\n\n\t\t// Panel part visibility\n\t\tlet panelRegistry = (<PanelRegistry>Registry.as(PanelExtensions.Panels));\n\t\tthis.panelHidden = this.storageService.getBoolean(Workbench.panelHiddenSettingKey, StorageScope.WORKSPACE, true);\n\t\tif (!!this.workbenchParams.options.singleFileMode || !panelRegistry.getDefaultPanelId()) {\n\t\t\t// we hide panel part in single-file-mode or if there is no default panel\n\t\t\tthis.panelHidden = true;\n\t\t}\n\n\t\t// Sidebar position\n\t\tlet rawPosition = this.storageService.get(Workbench.sidebarPositionSettingKey, StorageScope.GLOBAL, 'left');\n\t\tthis.sideBarPosition = (rawPosition === 'left') ? Position.LEFT : Position.RIGHT;\n\t}\n\n\t/**\n\t * Returns whether the workbench has been started.\n\t */\n\tpublic isStarted(): boolean {\n\t\treturn this.workbenchStarted && !this.workbenchShutdown;\n\t}\n\n\t/**\n\t * Returns whether the workbench has been fully created.\n\t */\n\tpublic isCreated(): boolean {\n\t\treturn this.workbenchCreated && this.workbenchStarted;\n\t}\n\n\tpublic joinCreation(): TPromise<boolean> {\n\t\treturn this.creationPromise;\n\t}\n\n\tpublic hasFocus(part: Parts): boolean {\n\t\tlet activeElement = document.activeElement;\n\t\tif (!activeElement) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet container: Builder = null;\n\t\tswitch (part) {\n\t\t\tcase Parts.ACTIVITYBAR_PART:\n\t\t\t\tcontainer = this.activitybarPart.getContainer();\n\t\t\t\tbreak;\n\t\t\tcase Parts.SIDEBAR_PART:\n\t\t\t\tcontainer = this.sidebarPart.getContainer();\n\t\t\t\tbreak;\n\t\t\tcase Parts.PANEL_PART:\n\t\t\t\tcontainer = this.panelPart.getContainer();\n\t\t\t\tbreak;\n\t\t\tcase Parts.EDITOR_PART:\n\t\t\t\tcontainer = this.editorPart.getContainer();\n\t\t\t\tbreak;\n\t\t\tcase Parts.STATUSBAR_PART:\n\t\t\t\tif (!this.statusbarPart) {\n\t\t\t\t\treturn false; // could be disabled by options\n\t\t\t\t}\n\n\t\t\t\tcontainer = this.statusbarPart.getContainer();\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn DOM.isAncestor(activeElement, container.getHTMLElement());\n\t}\n\n\tpublic isVisible(part: Parts): boolean {\n\t\tif (part === Parts.SIDEBAR_PART) {\n\t\t\treturn !this.sideBarHidden;\n\t\t}\n\t\tif (part === Parts.PANEL_PART) {\n\t\t\treturn !this.panelHidden;\n\t\t}\n\n\t\treturn true; // any other part cannot be hidden\n\t}\n\n\tpublic isSideBarHidden(): boolean {\n\t\treturn this.sideBarHidden;\n\t}\n\n\tpublic setSideBarHidden(hidden: boolean, skipLayout?: boolean): void {\n\t\tthis.sideBarHidden = hidden;\n\n\t\t// Adjust CSS\n\t\tif (hidden) {\n\t\t\tthis.workbench.addClass('nosidebar');\n\t\t} else {\n\t\t\tthis.workbench.removeClass('nosidebar');\n\t\t}\n\n\t\t// Layout\n\t\tif (!skipLayout) {\n\t\t\tthis.workbenchLayout.layout(true);\n\t\t}\n\n\t\t// If sidebar becomes hidden, also hide the current active viewlet if any\n\t\tif (hidden && this.sidebarPart.getActiveViewlet()) {\n\t\t\tthis.sidebarPart.hideActiveViewlet();\n\n\t\t\t// Pass Focus to Editor if Sidebar is now hidden\n\t\t\tlet editor = this.editorPart.getActiveEditor();\n\t\t\tif (editor) {\n\t\t\t\teditor.focus();\n\t\t\t}\n\t\t}\n\n\t\t// If sidebar becomes visible, show last active viewlet or default viewlet\n\t\telse if (!hidden && !this.sidebarPart.getActiveViewlet()) {\n\t\t\tlet registry = (<ViewletRegistry>Registry.as(ViewletExtensions.Viewlets));\n\t\t\tlet viewletToOpen = this.sidebarPart.getLastActiveViewletId() || registry.getDefaultViewletId();\n\t\t\tif (viewletToOpen) {\n\t\t\t\tthis.sidebarPart.openViewlet(viewletToOpen, true).done(null, errors.onUnexpectedError);\n\t\t\t}\n\t\t}\n\n\t\t// Remember in settings\n\t\tthis.storageService.store(Workbench.sidebarHiddenSettingKey, hidden ? 'true' : 'false', StorageScope.WORKSPACE);\n\t}\n\n\tpublic isPanelHidden(): boolean {\n\t\treturn this.panelHidden;\n\t}\n\n\tpublic setPanelHidden(hidden: boolean, skipLayout?: boolean): void {\n\t\tthis.panelHidden = hidden;\n\n\t\t// Layout\n\t\tif (!skipLayout) {\n\t\t\tthis.workbenchLayout.layout(true);\n\t\t}\n\n\t\t// If panel part becomes hidden, also hide the current active panel if any\n\t\tif (hidden && this.panelPart.getActivePanel()) {\n\t\t\tthis.panelPart.hideActivePanel();\n\n\t\t\t// Pass Focus to Editor if Panel part is now hidden\n\t\t\tlet editor = this.editorPart.getActiveEditor();\n\t\t\tif (editor) {\n\t\t\t\teditor.focus();\n\t\t\t}\n\t\t}\n\n\t\t// If panel part becomes visible, show last active panel or default panel\n\t\telse if (!hidden && !this.panelPart.getActivePanel()) {\n\t\t\tlet registry = (<PanelRegistry>Registry.as(PanelExtensions.Panels));\n\t\t\tlet panelToOpen = this.panelPart.getLastActivePanelId() || registry.getDefaultPanelId();\n\t\t\tif (panelToOpen) {\n\t\t\t\tthis.panelPart.openPanel(panelToOpen, true).done(null, errors.onUnexpectedError);\n\t\t\t}\n\t\t}\n\n\t\t// Remember in settings\n\t\tthis.storageService.store(Workbench.panelHiddenSettingKey, hidden ? 'true' : 'false', StorageScope.WORKSPACE);\n\t}\n\n\tpublic getSideBarPosition(): Position {\n\t\treturn this.sideBarPosition;\n\t}\n\n\tpublic setSideBarPosition(position: Position): void {\n\t\tif (this.sideBarHidden) {\n\t\t\tthis.setSideBarHidden(false, true /* Skip Layout */);\n\t\t}\n\n\t\tlet newPositionValue = (position === Position.LEFT) ? 'left' : 'right';\n\t\tlet oldPositionValue = (this.sideBarPosition === Position.LEFT) ? 'left' : 'right';\n\t\tthis.sideBarPosition = position;\n\n\t\t// Adjust CSS\n\t\tthis.activitybarPart.getContainer().removeClass(oldPositionValue);\n\t\tthis.sidebarPart.getContainer().removeClass(oldPositionValue);\n\t\tthis.activitybarPart.getContainer().addClass(newPositionValue);\n\t\tthis.sidebarPart.getContainer().addClass(newPositionValue);\n\n\t\t// Layout\n\t\tthis.workbenchLayout.layout(true);\n\n\t\t// Remember in settings\n\t\tthis.storageService.store(Workbench.sidebarPositionSettingKey, position === Position.LEFT ? 'left' : 'right', StorageScope.GLOBAL);\n\t}\n\n\t/**\n\t * Frees up resources of the workbench. Can only be called once and only on a workbench that was started. With the\n\t * optional parameter \"force\", the workbench can be shutdown ignoring any workbench components that might prevent\n\t * shutdown for user interaction (e.g. a dirty editor waiting for save to occur).\n\t */\n\tpublic shutdown(force?: boolean): boolean | string {\n\t\tif (this.isStarted()) {\n\t\t\tif (!force) {\n\t\t\t\tthis.shutdownComponents();\n\t\t\t}\n\n\t\t\t// Event\n\t\t\tthis.eventService.emit(EventType.WORKBENCH_DISPOSING);\n\n\t\t\tthis.workbenchShutdown = true;\n\n\t\t\t// Dispose\n\t\t\tthis.dispose();\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic dispose(): void {\n\n\t\t// Dispose all\n\t\tthis.toDispose = dispose(this.toDispose);\n\n\t\t// Event\n\t\tthis.eventService.emit(EventType.WORKBENCH_DISPOSED);\n\t}\n\n\t/**\n\t * Asks the workbench and all its UI components inside to lay out according to\n\t * the containers dimension the workbench is living in.\n\t */\n\tpublic layout(): void {\n\t\tif (this.isStarted()) {\n\t\t\tthis.workbenchLayout.layout();\n\t\t}\n\t}\n\n\tprivate shutdownComponents(): void {\n\n\t\t// Pass shutdown on to each participant\n\t\tthis.toShutdown.forEach(s => s.shutdown());\n\t}\n\n\tprivate registerEmitters(): void {\n\n\t\t// Part Emitters\n\t\tthis.hookPartListeners(this.activitybarPart);\n\t\tthis.hookPartListeners(this.editorPart);\n\t\tthis.hookPartListeners(this.sidebarPart);\n\t\tthis.hookPartListeners(this.panelPart);\n\n\t\t// Storage Emitter\n\t\tthis.toDispose.push(this.toDisposable(this.eventService.addEmitter(this.storageService)));\n\t}\n\n\tprivate hookPartListeners(part: Part): void {\n\t\tthis.toDispose.push(this.toDisposable(this.eventService.addEmitter(part, part.getId())));\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Listen to editor changes\n\t\tthis.toDispose.push(this.toDisposable(this.eventService.addListener(EventType.EDITOR_CLOSED, () => this.onEditorOpenedOrClosed())));\n\t\tthis.toDispose.push(this.toDisposable(this.eventService.addListener(EventType.EDITOR_OPENED, () => this.onEditorOpenedOrClosed())));\n\t}\n\n\tprivate onEditorOpenedOrClosed(): void {\n\t\tlet visibleEditors = this.editorService.getVisibleEditors().length;\n\n\t\t// We update the editorpart class to indicate if an editor is opened or not\n\t\t// through a delay to accomodate for fast editor switching\n\n\t\tif (visibleEditors === 0) {\n\t\t\tthis.editorBackgroundDelayer.trigger(() => this.editorPart.getContainer().addClass('empty'));\n\t\t} else {\n\t\t\tthis.editorBackgroundDelayer.trigger(() => this.editorPart.getContainer().removeClass('empty'));\n\t\t}\n\t}\n\n\tprivate toDisposable(fn: () => void): IDisposable {\n\t\treturn {\n\t\t\tdispose: function() {\n\t\t\t\tfn();\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate createWorkbenchLayout(): void {\n\t\tlet options = new LayoutOptions();\n\t\toptions.setMargin(new Box(0, 0, 0, 0));\n\n\t\tthis.workbenchLayout = this.instantiationService.createInstance(WorkbenchLayout,\n\t\t\t$(this.container),\t\t\t\t\t\t\t// Parent\n\t\t\tthis.workbench,\t\t\t\t\t\t\t\t// Workbench Container\n\t\t\t{\n\t\t\t\tactivitybar: this.activitybarPart,\t\t// Activity Bar\n\t\t\t\teditor: this.editorPart,\t\t\t\t// Editor\n\t\t\t\tsidebar: this.sidebarPart,\t\t\t\t// Sidebar\n\t\t\t\tpanel: this.panelPart,\t\t\t\t\t// Panel Part\n\t\t\t\tstatusbar: this.statusbarPart,\t\t\t// Statusbar\n\t\t\t},\n\t\t\tthis.quickOpen,\t\t\t\t\t\t\t\t// Quickopen\n\t\t\toptions\t\t\t\t\t\t\t\t\t\t// Layout Options\n\t\t);\n\n\t\tthis.toDispose.push(this.workbenchLayout);\n\t}\n\n\tprivate createWorkbench(): void {\n\n\t\t// Create Workbench DIV Off-DOM\n\t\tthis.workbenchContainer = $('.monaco-workbench-container');\n\t\tthis.workbench = $().div({ 'class': 'monaco-workbench', id: Identifiers.WORKBENCH_CONTAINER }).appendTo(this.workbenchContainer);\n\t}\n\n\tprivate renderWorkbench(): void {\n\n\t\t// Apply sidebar state as CSS class\n\t\tif (this.sideBarHidden) {\n\t\t\tthis.workbench.addClass('nosidebar');\n\t\t}\n\n\t\t// Apply readonly state as CSS class\n\t\tif (this.workbenchParams.options.readOnly) {\n\t\t\tthis.workbench.addClass('readonly');\n\t\t}\n\n\t\t// Apply no-workspace state as CSS class\n\t\tif (!this.workbenchParams.workspace) {\n\t\t\tthis.workbench.addClass('no-workspace');\n\t\t}\n\n\t\t// Create Parts\n\t\tthis.createActivityBarPart();\n\t\tthis.createSidebarPart();\n\t\tthis.createEditorPart();\n\t\tthis.createPanelPart();\n\t\tthis.createStatusbarPart();\n\n\t\t// Create QuickOpen\n\t\tthis.createQuickOpen();\n\n\t\t// Add Workbench to DOM\n\t\tthis.workbenchContainer.build(this.container);\n\t}\n\n\tprivate createActivityBarPart(): void {\n\t\tlet activitybarPartContainer = $(this.workbench)\n\t\t\t.div({\n\t\t\t\t'class': ['part', 'activitybar', this.sideBarPosition === Position.LEFT ? 'left' : 'right'],\n\t\t\t\tid: Identifiers.ACTIVITYBAR_PART,\n\t\t\t\trole: 'navigation'\n\t\t\t});\n\n\t\tthis.activitybarPart.create(activitybarPartContainer);\n\t}\n\n\tprivate createSidebarPart(): void {\n\t\tlet sidebarPartContainer = $(this.workbench)\n\t\t\t.div({\n\t\t\t\t'class': ['part', 'sidebar', this.sideBarPosition === Position.LEFT ? 'left' : 'right'],\n\t\t\t\tid: Identifiers.SIDEBAR_PART,\n\t\t\t\trole: 'complementary'\n\t\t\t});\n\n\t\tthis.sidebarPart.create(sidebarPartContainer);\n\t}\n\n\tprivate createPanelPart(): void {\n\t\tlet panelPartContainer = $(this.workbench)\n\t\t\t.div({\n\t\t\t\t'class': ['part', 'panel', 'monaco-editor-background'],\n\t\t\t\tid: Identifiers.PANEL_PART,\n\t\t\t\trole: 'complementary'\n\t\t\t});\n\n\t\tthis.panelPart.create(panelPartContainer);\n\t}\n\n\tprivate createEditorPart(): void {\n\t\tlet editorContainer = $(this.workbench)\n\t\t\t.div({\n\t\t\t\t'class': ['part', 'editor', 'monaco-editor-background'],\n\t\t\t\tid: Identifiers.EDITOR_PART,\n\t\t\t\trole: 'main'\n\t\t\t});\n\n\t\tthis.editorPart.create(editorContainer);\n\t}\n\n\tprivate createStatusbarPart(): void {\n\t\tlet statusbarContainer = $(this.workbench).div({\n\t\t\t'class': ['part', 'statusbar'],\n\t\t\tid: Identifiers.STATUSBAR_PART,\n\t\t\trole: 'contentinfo'\n\t\t});\n\n\t\tthis.statusbarPart.create(statusbarContainer);\n\t}\n\n\tprivate createQuickOpen(): void {\n\t\tthis.quickOpen.create();\n\t}\n\n\tpublic getEditorPart(): EditorPart {\n\t\tassert.ok(this.workbenchStarted, 'Workbench is not started. Call startup() first.');\n\n\t\treturn this.editorPart;\n\t}\n\n\tpublic getSidebarPart(): SidebarPart {\n\t\tassert.ok(this.workbenchStarted, 'Workbench is not started. Call startup() first.');\n\n\t\treturn this.sidebarPart;\n\t}\n\n\tpublic getPanelPart(): PanelPart {\n\t\tassert.ok(this.workbenchStarted, 'Workbench is not started. Call startup() first.');\n\n\t\treturn this.panelPart;\n\t}\n\n\tpublic getInstantiationService(): IInstantiationService {\n\t\tassert.ok(this.workbenchStarted, 'Workbench is not started. Call startup() first.');\n\n\t\treturn this.instantiationService;\n\t}\n\n\tpublic addClass(clazz: string): void {\n\t\tif (this.workbench) {\n\t\t\tthis.workbench.addClass(clazz);\n\t\t}\n\t}\n\n\tpublic removeClass(clazz: string): void {\n\t\tif (this.workbench) {\n\t\t\tthis.workbench.removeClass(clazz);\n\t\t}\n\t}\n}"]}