{"version":3,"sources":["vs/workbench/browser/parts/compositePart.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;IAmChG;QAAiE,iCAAI;QAmBpE,uBACS,cAA+B,EAC/B,cAA+B,EAC/B,YAA2B,EAC3B,gBAAmC,EACnC,kBAAuC,EACrC,WAAyB,EAC3B,iBAAqC,EACrC,QAA8B,EAC9B,0BAAkC,EAClC,gBAAwB,EACxB,iBAAyB,EACzB,uBAA+B,EACvC,EAAU;YAEV,kBAAM,EAAE,CAAC,CAAC;YAdF,mBAAc,GAAd,cAAc,CAAiB;YAC/B,mBAAc,GAAd,cAAc,CAAiB;YAC/B,iBAAY,GAAZ,YAAY,CAAe;YAC3B,qBAAgB,GAAhB,gBAAgB,CAAmB;YACnC,uBAAkB,GAAlB,kBAAkB,CAAqB;YACrC,gBAAW,GAAX,WAAW,CAAc;YAC3B,sBAAiB,GAAjB,iBAAiB,CAAoB;YACrC,aAAQ,GAAR,QAAQ,CAAsB;YAC9B,+BAA0B,GAA1B,0BAA0B,CAAQ;YAClC,qBAAgB,GAAhB,gBAAgB,CAAQ;YACxB,sBAAiB,GAAjB,iBAAiB,CAAQ;YACzB,4BAAuB,GAAvB,uBAAuB,CAAQ;YAKvC,IAAI,CAAC,wBAAwB,GAAG,EAAE,CAAC;YACnC,IAAI,CAAC,8BAA8B,GAAG,EAAE,CAAC;YACzC,IAAI,CAAC,gCAAgC,GAAG,EAAE,CAAC;YAC3C,IAAI,CAAC,4BAA4B,GAAG,EAAE,CAAC;YACvC,IAAI,CAAC,6BAA6B,GAAG,EAAE,CAAC;YACxC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;YAChC,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;QACnC,CAAC;QAEM,+CAAuB,GAA9B,UAA+B,OAA8B;YAC5D,IAAI,CAAC,oBAAoB,GAAG,OAAO,CAAC;QACrC,CAAC;QAES,qCAAa,GAAvB,UAAwB,EAAU,EAAE,KAAe;YAClD,iEAAiE;YACjE,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;gBACjE,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;oBACX,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;gBAC9B,CAAC;gBAED,uDAAuD;gBACvD,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAC1C,CAAC;YAED,OAAO;YACP,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;QACxC,CAAC;QAEO,uCAAe,GAAvB,UAAwB,EAAU,EAAE,KAAe;YAAnD,iBA0DC;YAzDA,IAAI,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,EAAE,OAAO,CAAC,MAAM,CAAC,oBAAoB,EAAE,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAE9H,4EAA4E;YAC5E,IAAI,yBAAyB,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;YACpD,IAAI,CAAC,yBAAyB,GAAG,yBAAyB,CAAC;YAE3D,+BAA+B;YAC/B,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,EAAE,IAAI,uBAAc,CAAC,EAAE,CAAC,CAAC,CAAC;YAExE,eAAe;YACf,IAAI,WAA2B,CAAC;YAChC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBAC1B,WAAW,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC1C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,WAAW,GAAG,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;YACjC,CAAC;YAED,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC;gBAEvB,eAAe;gBACf,KAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;gBAErB,mBAAmB;gBACnB,MAAM,CAAC,KAAI,CAAC,eAAe,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,SAAoB;oBAE/D,sEAAsE;oBACtE,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,yBAAyB,KAAK,yBAAyB,CAAC,IAAI,CAAC,KAAI,CAAC,eAAe,IAAI,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE,KAAK,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;wBACpJ,UAAU,CAAC,IAAI,EAAE,CAAC;wBAElB,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;oBAC1B,CAAC;oBAED,iEAAiE;oBACjE,EAAE,CAAC,CAAC,KAAI,CAAC,eAAe,IAAI,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE,KAAK,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;wBAChF,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;4BACX,SAAS,CAAC,KAAK,EAAE,CAAC;wBACnB,CAAC;wBAED,UAAU,CAAC,IAAI,EAAE,CAAC;wBAElB,uDAAuD;wBACvD,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;oBAC/B,CAAC;oBAED,2BAA2B;oBAC3B,MAAM,CAAC,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;wBACzC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;4BACX,SAAS,CAAC,KAAK,EAAE,CAAC;wBACnB,CAAC;wBAED,UAAU,CAAC,IAAI,EAAE,CAAC;wBAElB,uDAAuD;wBACvD,MAAM,CAAC,SAAS,CAAC;oBAClB,CAAC,CAAC,CAAC;gBACJ,CAAC,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;QACJ,CAAC;QAES,uCAAe,GAAzB,UAA0B,EAAU,EAAE,QAAkB;YAAxD,iBA8CC;YA5CA,wCAAwC;YACxC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC5D,EAAE,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;oBAClD,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnD,CAAC;YACF,CAAC;YAED,gDAAgD;YAChD,IAAI,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;YACzD,EAAE,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBACzB,IAAI,aAAa,GAAG,IAAI,CAAC,uBAAuB,CAAC,EAAE,CAAC,CAAC;gBACrD,EAAE,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;oBACpB,IAAI,iBAAe,GAAG,IAAI,0CAAwB,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,EAAE,mBAAmB,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;oBAC1H,IAAI,QAAQ,GAAG;wBACd,eAAe,EAAE,iBAAe;qBAChC,CAAC;oBACF,IAAI,6BAA6B,GAAG,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;oBAEpF,aAAa,GAAG,6BAA6B,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,UAAC,SAAoB;wBAC3G,KAAI,CAAC,6BAA6B,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,GAAG,iBAAe,CAAC;wBAExE,2BAA2B;wBAC3B,KAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;wBAE3C,0DAA0D;wBAC1D,KAAI,CAAC,8BAA8B,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,qBAAkB,CAAC,oCAAoC,EAAE,UAAC,CAAC,IAAO,KAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAEhK,0CAA0C;wBAC1C,OAAO,KAAI,CAAC,uBAAuB,CAAC,EAAE,CAAC,CAAC;wBAExC,MAAM,CAAC,SAAS,CAAC;oBAClB,CAAC,CAAC,CAAC;oBAEH,6CAA6C;oBAC7C,iBAAe,CAAC,SAAS,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,+BAA+B,CAAC,CAAC;oBAEpH,oCAAoC;oBACpC,IAAI,CAAC,uBAAuB,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC;gBAClD,CAAC;gBAED,MAAM,CAAC,aAAa,CAAC;YACtB,CAAC;YAED,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,sCAAsC,EAAE,EAAE,CAAC,CAAC,CAAC;QAC7E,CAAC;QAES,qCAAa,GAAvB,UAAwB,SAAoB;YAA5C,iBA4GC;YA1GA,qBAAqB;YACrB,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC;YAEjC,uBAAuB;YACvB,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,CAAC,0BAA0B,EAAE,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,EAAE,sBAAY,CAAC,SAAS,CAAC,CAAC;YAEjH,WAAW;YACX,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;YAE1D,uCAAuC;YACvC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAErH,IAAI,sBAAsC,CAAC;YAE3C,uCAAuC;YACvC,IAAI,kBAAkB,GAAG,IAAI,CAAC,gCAAgC,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC;YAClF,EAAE,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBAEzB,0BAA0B;gBAC1B,kBAAkB,GAAG,WAAC,EAAE,CAAC,GAAG,CAAC;oBAC5B,OAAO,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,CAAC;oBAC9C,EAAE,EAAE,SAAS,CAAC,KAAK,EAAE;iBACrB,EAAE,UAAC,GAAY;oBACf,sBAAsB,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBAChD,CAAC,CAAC,CAAC;gBAEH,+BAA+B;gBAC/B,IAAI,CAAC,gCAAgC,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,GAAG,kBAAkB,CAAC;YAC/E,CAAC;YAGD,IAAI,CAAC,CAAC;gBACL,sBAAsB,GAAG,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;YAC5C,CAAC;YAED,0GAA0G;YAC1G,IAAI,eAAe,GAAG,IAAI,CAAC,6BAA6B,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC;YAC5E,EAAE,CAAC,CAAC,eAAe,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBAC5C,IAAI,CAAC,6BAA6B,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,SAAS,CAAC,sBAAsB,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,+BAA+B,CAAC,CAAC;YACpK,CAAC;YAED,2BAA2B;YAC3B,MAAM,CAAC,sBAAsB,CAAC,IAAI,CAAC;gBAElC,+GAA+G;gBAC/G,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,eAAe,IAAI,SAAS,CAAC,KAAK,EAAE,KAAK,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;oBACjF,MAAM,CAAC;gBACR,CAAC;gBAED,iCAAiC;gBACjC,kBAAkB,CAAC,KAAK,CAAC,KAAI,CAAC,cAAc,EAAE,CAAC,CAAC;gBAChD,kBAAkB,CAAC,IAAI,EAAE,CAAC;gBAE1B,sBAAsB;gBACtB,KAAI,CAAC,OAAO,CAAC,YAAY,GAAG,SAAS,CAAC,eAAe,EAAE,CAAC;gBAExD,kEAAkE;gBAClE,IAAI,UAAU,GAAG,KAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC;gBAC/D,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,IAAI,KAAK,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;oBAC5D,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,EAAE,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC;gBAC3D,CAAC;gBAED,2BAA2B;gBAC3B,IAAI,cAAc,GAAG,KAAI,CAAC,4BAA4B,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC;gBAC1E,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;oBACrB,cAAc,GAAG,KAAI,CAAC,uBAAuB,CAAC,SAAS,CAAC,CAAC;oBACzD,KAAI,CAAC,4BAA4B,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,GAAG,cAAc,CAAC;gBACvE,CAAC;gBACD,cAAc,EAAE,CAAC;gBAEjB,EAAE,CAAC,CAAC,KAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC;oBACnC,KAAI,CAAC,wBAAwB,CAAC,OAAO,EAAE,CAAC;oBACxC,KAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;gBACtC,CAAC;gBAED,sBAAsB;gBACtB,KAAI,CAAC,wBAAwB,GAAG,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,UAAC,CAAM;oBAEnG,kBAAkB;oBAClB,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;wBACxD,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC;oBACnD,CAAC;oBAED,mBAAmB;oBACnB,EAAE,CAAC,CAAC,KAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;wBAC3B,KAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,yBAAyB,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,EAAE,KAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;oBAC9G,CAAC;gBACF,CAAC,CAAC,CAAC;gBAEH,+CAA+C;gBAC/C,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;oBAEtC,+GAA+G;oBAC/G,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,eAAe,IAAI,SAAS,CAAC,KAAK,EAAE,KAAK,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;wBACjF,MAAM,CAAC;oBACR,CAAC;oBAED,uCAAuC;oBACvC,EAAE,CAAC,CAAC,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC;wBAC1B,SAAS,CAAC,MAAM,CAAC,KAAI,CAAC,eAAe,CAAC,CAAC;oBACxC,CAAC;oBAED,8BAA8B;oBAC9B,KAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,EAAE,IAAI,uBAAc,CAAC,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBAClG,CAAC,CAAC,CAAC;YACJ,CAAC,EAAE,UAAC,KAAU,IAAK,OAAA,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAnB,CAAmB,CAAC,CAAC;QACzC,CAAC;QAES,yCAAiB,GAA3B,UAA4B,CAAiB;YAE5C,mBAAmB;YACnB,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;gBAE5E,QAAQ;gBACR,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC;gBAEhF,UAAU;gBACV,IAAI,cAAc,GAAG,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;gBACxE,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC,GAAG,cAAc,CAAC;gBACjF,cAAc,EAAE,CAAC;YAClB,CAAC;YAGD,IAAI,CAAC,CAAC;gBACL,OAAO,IAAI,CAAC,4BAA4B,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;YACzD,CAAC;QACF,CAAC;QAES,mCAAW,GAArB,UAAsB,WAAmB,EAAE,cAAuB;YAAlE,iBAoBC;YAnBA,IAAI,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;YAClE,EAAE,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBAC1B,MAAM,CAAC;YACR,CAAC;YAED,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;gBACrB,cAAc,GAAG,mBAAmB,CAAC,IAAI,CAAC;YAC3C,CAAC;YAED,IAAI,UAAU,GAAW,IAAI,CAAC;YAC9B,IAAI,IAAI,GAAG,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,CAAC,EAArC,CAAqC,CAAC,CAAC;YACjH,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACzB,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YACtB,CAAC;YAED,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;YAC9C,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAuB,EAAE,IAAW,EAAE,cAAc,EAAE,UAAU,CAAC,GAAG,cAAc,CAAC,CAAC;YAEpI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAA2B,EAAE,IAAa,EAAE,cAAc,CAAC,CAAC,CAAC;QACrG,CAAC;QAEO,+CAAuB,GAA/B,UAAgC,SAAoB;YAEnD,iBAAiB;YACjB,IAAI,cAAc,GAAc,SAAS,CAAC,UAAU,EAAE,CAAC;YACvD,IAAI,gBAAgB,GAAc,SAAS,CAAC,mBAAmB,EAAE,CAAC;YAElE,YAAY;YACZ,cAAc,CAAC,IAAI,OAAnB,cAAc,EAAS,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;YAC1C,gBAAgB,CAAC,IAAI,OAArB,gBAAgB,EAAS,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC;YAErD,qBAAqB;YACrB,IAAI,iBAAiB,GAAuB,mBAAQ,CAAC,EAAE,CAAC,8BAAU,CAAC,SAAS,CAAC,CAAC;YAC9E,cAAc,CAAC,IAAI,OAAnB,cAAc,EAAS,iBAAiB,CAAC,6BAA6B,CAAC,IAAI,CAAC,uBAAuB,EAAE,SAAS,CAAC,CAAC,CAAC;YACjH,gBAAgB,CAAC,IAAI,OAArB,gBAAgB,EAAS,iBAAiB,CAAC,sCAAsC,CAAC,IAAI,CAAC,uBAAuB,EAAE,SAAS,CAAC,CAAC,CAAC;YAE5H,gCAAgC;YAChC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,kCAAc,CAAC,cAAc,CAAC,EAAE,kCAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAClG,CAAC;QAES,0CAAkB,GAA5B;YACC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC;QAC7B,CAAC;QAES,iDAAyB,GAAnC;YACC,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC;QACnC,CAAC;QAES,2CAAmB,GAA7B;YAAA,iBA+BC;YA9BA,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBAC3B,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,gBAAgB;YAC3C,CAAC;YAED,IAAI,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC;YACrC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAE5B,IAAI,kBAAkB,GAAG,IAAI,CAAC,gCAAgC,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC;YAElF,wBAAwB;YACxB,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC;gBAEvC,kCAAkC;gBAClC,kBAAkB,CAAC,MAAM,EAAE,CAAC;gBAC5B,kBAAkB,CAAC,IAAI,EAAE,CAAC;gBAE1B,6BAA6B;gBAC7B,KAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,YAAY,EAAE,CAAC,IAAI,EAAE,CAAC;gBAE9C,gBAAgB;gBAChB,KAAI,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE,CAAC;gBAE9B,kBAAkB;gBAClB,OAAO,KAAI,CAAC,wBAAwB,CAAC,MAAM,EAAE,CAAC;oBAC7C,KAAI,CAAC,wBAAwB,CAAC,GAAG,EAAE,EAAE,CAAC;gBACvC,CAAC;gBAED,8BAA8B;gBAC9B,KAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,EAAE,IAAI,uBAAc,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvF,CAAC,CAAC,CAAC;QACJ,CAAC;QAEM,uCAAe,GAAtB,UAAuB,MAAe;YAAtC,iBA2BC;YAzBA,uBAAuB;YACvB,IAAI,SAAS,GAAG,WAAC,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC;gBAC7B,OAAO,EAAE,CAAC,WAAW,EAAE,OAAO,CAAC;aAC/B,CAAC,CAAC;YAEH,mBAAmB;YACnB,WAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC;gBAChB,OAAO,EAAE,aAAa;aACtB,EAAE,UAAC,GAAG;gBACN,KAAI,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;YAC9B,CAAC,CAAC,CAAC;YAEH,0BAA0B;YAC1B,WAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC;gBAChB,OAAO,EAAE,eAAe;aACxB,EAAE,UAAC,GAAG;gBAEN,UAAU;gBACV,KAAI,CAAC,OAAO,GAAG,IAAI,iBAAO,CAAC,GAAG,CAAC,cAAc,EAAE,EAAE,KAAI,CAAC,kBAAkB,EAAE;oBACzE,kBAAkB,EAAE,UAAC,MAAc,IAAK,OAAA,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAA/B,CAA+B;oBACvE,WAAW,EAAE,8BAAkB,CAAC,UAAU;iBAC1C,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;YAEH,MAAM,CAAC,SAAS,CAAC;QAClB,CAAC;QAEO,0CAAkB,GAA1B,UAA2B,MAAc;YACxC,IAAI,UAAuB,CAAC;YAE5B,yBAAyB;YACzB,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBAC1B,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YACzD,CAAC;YAED,iBAAiB;YACjB,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBACjB,IAAI,iBAAiB,GAAuB,mBAAQ,CAAC,EAAE,CAAC,8BAAU,CAAC,SAAS,CAAC,CAAC;gBAC9E,UAAU,GAAG,iBAAiB,CAAC,uBAAuB,CAAC,IAAI,CAAC,uBAAuB,EAAE,iBAAc,EAAE,MAAM,CAAC,CAAC;YAC9G,CAAC;YAED,MAAM,CAAC,UAAU,CAAC;QACnB,CAAC;QAEM,yCAAiB,GAAxB,UAAyB,MAAe;YAAxC,iBAOC;YANA,MAAM,CAAC,WAAC,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC;gBACpB,OAAO,EAAE,SAAS;aAClB,EAAE,UAAC,GAAY;gBACf,KAAI,CAAC,WAAW,GAAG,IAAI,yBAAW,CAAC,GAAG,CAAC,CAAC;gBACxC,KAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC,IAAI,EAAE,CAAC;YACxC,CAAC,CAAC,CAAC;QACJ,CAAC;QAEO,+BAAO,GAAf,UAAgB,KAAU;YACzB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;QAC5F,CAAC;QAES,kCAAU,GAApB;YACC,MAAM,CAAC,EAAE,CAAC;QACX,CAAC;QAES,2CAAmB,GAA7B;YACC,MAAM,CAAC,EAAE,CAAC;QACX,CAAC;QAEM,8BAAM,GAAb,UAAc,SAAoB;YAEjC,gBAAgB;YAChB,IAAI,KAAK,GAAG,gBAAK,CAAC,MAAM,YAAC,SAAS,CAAC,CAAC;YAEpC,gCAAgC;YAChC,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YAChC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBAC1B,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YACnD,CAAC;YAED,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEM,gCAAQ,GAAf;YACC,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,EAAE,EAAZ,CAAY,CAAC,CAAC;YAEtD,gBAAK,CAAC,QAAQ,WAAE,CAAC;QAClB,CAAC;QAEM,+BAAO,GAAd;YACC,IAAI,CAAC,gCAAgC,GAAG,IAAI,CAAC;YAC7C,IAAI,CAAC,6BAA6B,GAAG,IAAI,CAAC;YAC1C,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC;YAEzC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC5D,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;YACzC,CAAC;YAED,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;YAEhC,OAAO,IAAI,CAAC,wBAAwB,CAAC,MAAM,EAAE,CAAC;gBAC7C,IAAI,CAAC,wBAAwB,CAAC,GAAG,EAAE,EAAE,CAAC;YACvC,CAAC;YAED,OAAO,IAAI,CAAC,8BAA8B,CAAC,MAAM,EAAE,CAAC;gBACnD,IAAI,CAAC,8BAA8B,CAAC,GAAG,EAAE,EAAE,CAAC;YAC7C,CAAC;YAED,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YAC3B,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YAEvB,gBAAgB;YAChB,gBAAK,CAAC,OAAO,WAAE,CAAC;QACjB,CAAC;QACF,oBAAC;IAAD,CAjfA,AAifC,CAjfgE,WAAI,GAifpE;IAjfqB,qBAAa,gBAiflC,CAAA","file":"vs/workbench/browser/parts/compositePart.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/compositePart';\nimport nls = require('vs/nls');\nimport timer = require('vs/base/common/timer');\nimport uuid = require('vs/base/common/uuid');\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport {Registry} from 'vs/platform/platform';\nimport {IDisposable} from 'vs/base/common/lifecycle';\nimport {Dimension, Builder, $} from 'vs/base/browser/builder';\nimport events = require('vs/base/common/events');\nimport strings = require('vs/base/common/strings');\nimport types = require('vs/base/common/types');\nimport errors = require('vs/base/common/errors');\nimport {CONTEXT as ToolBarContext, ToolBar} from 'vs/base/browser/ui/toolbar/toolbar';\nimport {IActionItem, ActionsOrientation} from 'vs/base/browser/ui/actionbar/actionbar';\nimport {ProgressBar} from 'vs/base/browser/ui/progressbar/progressbar';\nimport {IActionBarRegistry, Extensions, prepareActions} from 'vs/workbench/browser/actionBarRegistry';\nimport {Action, IAction} from 'vs/base/common/actions';\nimport {Part} from 'vs/workbench/browser/part';\nimport {Composite, CompositeRegistry} from 'vs/workbench/browser/composite';\nimport {IComposite} from 'vs/workbench/common/composite';\nimport {EventType as WorkbenchEventType, CompositeEvent} from 'vs/workbench/common/events';\nimport {EventType as CompositeEventType} from 'vs/workbench/browser/composite';\nimport {WorkbenchProgressService} from 'vs/workbench/services/progress/browser/progressService';\nimport {IPartService} from 'vs/workbench/services/part/common/partService';\nimport {IStorageService, StorageScope} from 'vs/platform/storage/common/storage';\nimport {IContextMenuService} from 'vs/platform/contextview/browser/contextView';\nimport {IEventService} from 'vs/platform/event/common/event';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {IMessageService, Severity} from 'vs/platform/message/common/message';\nimport {IProgressService} from 'vs/platform/progress/common/progress';\nimport {ITelemetryService} from 'vs/platform/telemetry/common/telemetry';\nimport {IKeybindingService} from 'vs/platform/keybinding/common/keybindingService';\n\nexport abstract class CompositePart<T extends Composite> extends Part {\n\n\tprotected instantiationService: IInstantiationService;\n\tprivate activeCompositeListeners: { (): void; }[];\n\tprivate instantiatedCompositeListeners: { (): void; }[];\n\tprivate mapCompositeToCompositeContainer: { [compositeId: string]: Builder; };\n\tprivate mapActionsBindingToComposite: { [compositeId: string]: () => void; };\n\tprivate mapProgressServiceToComposite: { [compositeId: string]: IProgressService; };\n\tprivate activeComposite: Composite;\n\tprivate lastActiveCompositeId: string;\n\tprivate instantiatedComposits: Composite[];\n\tprivate titleLabel: Builder;\n\tprivate toolBar: ToolBar;\n\tprivate compositeLoaderPromises: { [compositeId: string]: TPromise<Composite>; };\n\tprivate progressBar: ProgressBar;\n\tprivate contentAreaSize: Dimension;\n\tprivate telemetryActionsListener: IDisposable;\n\tprivate currentCompositeOpenToken: string;\n\n\tconstructor(\n\t\tprivate messageService: IMessageService,\n\t\tprivate storageService: IStorageService,\n\t\tprivate eventService: IEventService,\n\t\tprivate telemetryService: ITelemetryService,\n\t\tprivate contextMenuService: IContextMenuService,\n\t\tprotected partService: IPartService,\n\t\tprivate keybindingService: IKeybindingService,\n\t\tprivate registry: CompositeRegistry<T>,\n\t\tprivate activeCompositeSettingsKey: string,\n\t\tprivate nameForTelemetry: string,\n\t\tprivate compositeCssClass: string,\n\t\tprivate actionContributionScope: string,\n\t\tid: string\n\t) {\n\t\tsuper(id);\n\n\t\tthis.activeCompositeListeners = [];\n\t\tthis.instantiatedCompositeListeners = [];\n\t\tthis.mapCompositeToCompositeContainer = {};\n\t\tthis.mapActionsBindingToComposite = {};\n\t\tthis.mapProgressServiceToComposite = {};\n\t\tthis.activeComposite = null;\n\t\tthis.instantiatedComposits = [];\n\t\tthis.compositeLoaderPromises = {};\n\t}\n\n\tpublic setInstantiationService(service: IInstantiationService): void {\n\t\tthis.instantiationService = service;\n\t}\n\n\tprotected openComposite(id: string, focus?: boolean): TPromise<Composite> {\n\t\t// Check if composite already visible and just focus in that case\n\t\tif (this.activeComposite && this.activeComposite.getId() === id) {\n\t\t\tif (focus) {\n\t\t\t\tthis.activeComposite.focus();\n\t\t\t}\n\n\t\t\t// Fullfill promise with composite that is being opened\n\t\t\treturn TPromise.as(this.activeComposite);\n\t\t}\n\n\t\t// Open\n\t\treturn this.doOpenComposite(id, focus);\n\t}\n\n\tprivate doOpenComposite(id: string, focus?: boolean): TPromise<Composite> {\n\t\tlet timerEvent = timer.start(timer.Topic.WORKBENCH, strings.format('Open Composite {0}', id.substr(id.lastIndexOf('.') + 1)));\n\n\t\t// Use a generated token to avoid race conditions from long running promises\n\t\tlet currentCompositeOpenToken = uuid.generateUuid();\n\t\tthis.currentCompositeOpenToken = currentCompositeOpenToken;\n\n\t\t// Emit Composite Opening Event\n\t\tthis.emit(WorkbenchEventType.COMPOSITE_OPENING, new CompositeEvent(id));\n\n\t\t// Hide current\n\t\tlet hidePromise: TPromise<void>;\n\t\tif (this.activeComposite) {\n\t\t\thidePromise = this.hideActiveComposite();\n\t\t} else {\n\t\t\thidePromise = TPromise.as(null);\n\t\t}\n\n\t\treturn hidePromise.then(() => {\n\n\t\t\t// Update Title\n\t\t\tthis.updateTitle(id);\n\n\t\t\t// Create composite\n\t\t\treturn this.createComposite(id, true).then((composite: Composite) => {\n\n\t\t\t\t// Check if another composite opened meanwhile and return in that case\n\t\t\t\tif ((this.currentCompositeOpenToken !== currentCompositeOpenToken) || (this.activeComposite && this.activeComposite.getId() !== composite.getId())) {\n\t\t\t\t\ttimerEvent.stop();\n\n\t\t\t\t\treturn TPromise.as(null);\n\t\t\t\t}\n\n\t\t\t\t// Check if composite already visible and just focus in that case\n\t\t\t\tif (this.activeComposite && this.activeComposite.getId() === composite.getId()) {\n\t\t\t\t\tif (focus) {\n\t\t\t\t\t\tcomposite.focus();\n\t\t\t\t\t}\n\n\t\t\t\t\ttimerEvent.stop();\n\n\t\t\t\t\t// Fullfill promise with composite that is being opened\n\t\t\t\t\treturn TPromise.as(composite);\n\t\t\t\t}\n\n\t\t\t\t// Show Composite and Focus\n\t\t\t\treturn this.showComposite(composite).then(() => {\n\t\t\t\t\tif (focus) {\n\t\t\t\t\t\tcomposite.focus();\n\t\t\t\t\t}\n\n\t\t\t\t\ttimerEvent.stop();\n\n\t\t\t\t\t// Fullfill promise with composite that is being opened\n\t\t\t\t\treturn composite;\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tprotected createComposite(id: string, isActive?: boolean): TPromise<Composite> {\n\n\t\t// Check if composite is already created\n\t\tfor (let i = 0; i < this.instantiatedComposits.length; i++) {\n\t\t\tif (this.instantiatedComposits[i].getId() === id) {\n\t\t\t\treturn TPromise.as(this.instantiatedComposits[i]);\n\t\t\t}\n\t\t}\n\n\t\t// Instantiate composite from registry otherwise\n\t\tlet compositeDescriptor = this.registry.getComposite(id);\n\t\tif (compositeDescriptor) {\n\t\t\tlet loaderPromise = this.compositeLoaderPromises[id];\n\t\t\tif (!loaderPromise) {\n\t\t\t\tlet progressService = new WorkbenchProgressService(this.eventService, this.progressBar, compositeDescriptor.id, isActive);\n\t\t\t\tlet services = {\n\t\t\t\t\tprogressService: progressService\n\t\t\t\t};\n\t\t\t\tlet compositeInstantiationService = this.instantiationService.createChild(services);\n\n\t\t\t\tloaderPromise = compositeInstantiationService.createInstance(compositeDescriptor).then((composite: Composite) => {\n\t\t\t\t\tthis.mapProgressServiceToComposite[composite.getId()] = progressService;\n\n\t\t\t\t\t// Remember as Instantiated\n\t\t\t\t\tthis.instantiatedComposits.push(composite);\n\n\t\t\t\t\t// Register to title area update events from the composite\n\t\t\t\t\tthis.instantiatedCompositeListeners.push(composite.addListener(CompositeEventType.INTERNAL_COMPOSITE_TITLE_AREA_UPDATE, (e) => { this.onTitleAreaUpdate(e); }));\n\n\t\t\t\t\t// Remove from Promises Cache since Loaded\n\t\t\t\t\tdelete this.compositeLoaderPromises[id];\n\n\t\t\t\t\treturn composite;\n\t\t\t\t});\n\n\t\t\t\t// Report progress for slow loading composits\n\t\t\t\tprogressService.showWhile(loaderPromise, this.partService.isCreated() ? 800 : 3200 /* less ugly initial startup */);\n\n\t\t\t\t// Add to Promise Cache until Loaded\n\t\t\t\tthis.compositeLoaderPromises[id] = loaderPromise;\n\t\t\t}\n\n\t\t\treturn loaderPromise;\n\t\t}\n\n\t\tthrow new Error(strings.format('Unable to find composite with id {0}', id));\n\t}\n\n\tprotected showComposite(composite: Composite): TPromise<void> {\n\n\t\t// Remember Composite\n\t\tthis.activeComposite = composite;\n\n\t\t// Store in preferences\n\t\tthis.storageService.store(this.activeCompositeSettingsKey, this.activeComposite.getId(), StorageScope.WORKSPACE);\n\n\t\t// Remember\n\t\tthis.lastActiveCompositeId = this.activeComposite.getId();\n\n\t\t// Register as Emitter to Workbench Bus\n\t\tthis.activeCompositeListeners.push(this.eventService.addEmitter(this.activeComposite, this.activeComposite.getId()));\n\n\t\tlet createCompositePromise: TPromise<void>;\n\n\t\t// Composits created for the first time\n\t\tlet compositeContainer = this.mapCompositeToCompositeContainer[composite.getId()];\n\t\tif (!compositeContainer) {\n\n\t\t\t// Build Container off-DOM\n\t\t\tcompositeContainer = $().div({\n\t\t\t\t'class': ['composite', this.compositeCssClass],\n\t\t\t\tid: composite.getId()\n\t\t\t}, (div: Builder) => {\n\t\t\t\tcreateCompositePromise = composite.create(div);\n\t\t\t});\n\n\t\t\t// Remember composite container\n\t\t\tthis.mapCompositeToCompositeContainer[composite.getId()] = compositeContainer;\n\t\t}\n\n\t\t// Composite already exists but is hidden\n\t\telse {\n\t\t\tcreateCompositePromise = TPromise.as(null);\n\t\t}\n\n\t\t// Report progress for slow loading composits (but only if we did not create the composits before already)\n\t\tlet progressService = this.mapProgressServiceToComposite[composite.getId()];\n\t\tif (progressService && !compositeContainer) {\n\t\t\tthis.mapProgressServiceToComposite[composite.getId()].showWhile(createCompositePromise, this.partService.isCreated() ? 800 : 3200 /* less ugly initial startup */);\n\t\t}\n\n\t\t// Fill Content and Actions\n\t\treturn createCompositePromise.then(() => {\n\n\t\t\t// Make sure that the user meanwhile did not open another composite or closed the part containing the composite\n\t\t\tif (!this.activeComposite || composite.getId() !== this.activeComposite.getId()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Take Composite on-DOM and show\n\t\t\tcompositeContainer.build(this.getContentArea());\n\t\t\tcompositeContainer.show();\n\n\t\t\t// Setup action runner\n\t\t\tthis.toolBar.actionRunner = composite.getActionRunner();\n\n\t\t\t// Update title with composite title if it differs from descriptor\n\t\t\tlet descriptor = this.registry.getComposite(composite.getId());\n\t\t\tif (descriptor && descriptor.name !== composite.getTitle()) {\n\t\t\t\tthis.updateTitle(composite.getId(), composite.getTitle());\n\t\t\t}\n\n\t\t\t// Handle Composite Actions\n\t\t\tlet actionsBinding = this.mapActionsBindingToComposite[composite.getId()];\n\t\t\tif (!actionsBinding) {\n\t\t\t\tactionsBinding = this.collectCompositeActions(composite);\n\t\t\t\tthis.mapActionsBindingToComposite[composite.getId()] = actionsBinding;\n\t\t\t}\n\t\t\tactionsBinding();\n\n\t\t\tif (this.telemetryActionsListener) {\n\t\t\t\tthis.telemetryActionsListener.dispose();\n\t\t\t\tthis.telemetryActionsListener = null;\n\t\t\t}\n\n\t\t\t// Action Run Handling\n\t\t\tthis.telemetryActionsListener = this.toolBar.actionRunner.addListener2(events.EventType.RUN, (e: any) => {\n\n\t\t\t\t// Check for Error\n\t\t\t\tif (e.error && !errors.isPromiseCanceledError(e.error)) {\n\t\t\t\t\tthis.messageService.show(Severity.Error, e.error);\n\t\t\t\t}\n\n\t\t\t\t// Log in telemetry\n\t\t\t\tif (this.telemetryService) {\n\t\t\t\t\tthis.telemetryService.publicLog('workbenchActionExecuted', { id: e.action.id, from: this.nameForTelemetry });\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Indicate to composite that it is now visible\n\t\t\treturn composite.setVisible(true).then(() => {\n\n\t\t\t\t// Make sure that the user meanwhile did not open another composite or closed the part containing the composite\n\t\t\t\tif (!this.activeComposite || composite.getId() !== this.activeComposite.getId()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Make sure the composite is layed out\n\t\t\t\tif (this.contentAreaSize) {\n\t\t\t\t\tcomposite.layout(this.contentAreaSize);\n\t\t\t\t}\n\n\t\t\t\t// Emit Composite Opened Event\n\t\t\t\tthis.emit(WorkbenchEventType.COMPOSITE_OPENED, new CompositeEvent(this.activeComposite.getId()));\n\t\t\t});\n\t\t}, (error: any) => this.onError(error));\n\t}\n\n\tprotected onTitleAreaUpdate(e: CompositeEvent): void {\n\n\t\t// Active Composite\n\t\tif (this.activeComposite && this.activeComposite.getId() === e.compositeId) {\n\n\t\t\t// Title\n\t\t\tthis.updateTitle(this.activeComposite.getId(), this.activeComposite.getTitle());\n\n\t\t\t// Actions\n\t\t\tlet actionsBinding = this.collectCompositeActions(this.activeComposite);\n\t\t\tthis.mapActionsBindingToComposite[this.activeComposite.getId()] = actionsBinding;\n\t\t\tactionsBinding();\n\t\t}\n\n\t\t// Otherwise invalidate actions binding for next time when the composite becomes visible\n\t\telse {\n\t\t\tdelete this.mapActionsBindingToComposite[e.compositeId];\n\t\t}\n\t}\n\n\tprotected updateTitle(compositeId: string, compositeTitle?: string): void {\n\t\tlet compositeDescriptor = this.registry.getComposite(compositeId);\n\t\tif (!compositeDescriptor) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!compositeTitle) {\n\t\t\tcompositeTitle = compositeDescriptor.name;\n\t\t}\n\n\t\tlet keybinding: string = null;\n\t\tlet keys = this.keybindingService.lookupKeybindings(compositeId).map(k => this.keybindingService.getLabelFor(k));\n\t\tif (keys && keys.length) {\n\t\t\tkeybinding = keys[0];\n\t\t}\n\n\t\tthis.titleLabel.safeInnerHtml(compositeTitle);\n\t\tthis.titleLabel.title(keybinding ? nls.localize('compositeTitleTooltip', \"{0} ({1})\", compositeTitle, keybinding) : compositeTitle);\n\n\t\tthis.toolBar.setAriaLabel(nls.localize('ariaCompositeToolbarLabel', \"{0} actions\", compositeTitle));\n\t}\n\n\tprivate collectCompositeActions(composite: Composite): () => void {\n\n\t\t// From Composite\n\t\tlet primaryActions: IAction[] = composite.getActions();\n\t\tlet secondaryActions: IAction[] = composite.getSecondaryActions();\n\n\t\t// From Part\n\t\tprimaryActions.push(...this.getActions());\n\t\tsecondaryActions.push(...this.getSecondaryActions());\n\n\t\t// From Contributions\n\t\tlet actionBarRegistry = <IActionBarRegistry>Registry.as(Extensions.Actionbar);\n\t\tprimaryActions.push(...actionBarRegistry.getActionBarActionsForContext(this.actionContributionScope, composite));\n\t\tsecondaryActions.push(...actionBarRegistry.getSecondaryActionBarActionsForContext(this.actionContributionScope, composite));\n\n\t\t// Return fn to set into toolbar\n\t\treturn this.toolBar.setActions(prepareActions(primaryActions), prepareActions(secondaryActions));\n\t}\n\n\tprotected getActiveComposite(): IComposite {\n\t\treturn this.activeComposite;\n\t}\n\n\tprotected getLastActiveCompositetId(): string {\n\t\treturn this.lastActiveCompositeId;\n\t}\n\n\tprotected hideActiveComposite(): TPromise<void> {\n\t\tif (!this.activeComposite) {\n\t\t\treturn TPromise.as(null); // Nothing to do\n\t\t}\n\n\t\tlet composite = this.activeComposite;\n\t\tthis.activeComposite = null;\n\n\t\tlet compositeContainer = this.mapCompositeToCompositeContainer[composite.getId()];\n\n\t\t// Indicate to Composite\n\t\treturn composite.setVisible(false).then(() => {\n\n\t\t\t// Take Container Off-DOM and hide\n\t\t\tcompositeContainer.offDOM();\n\t\t\tcompositeContainer.hide();\n\n\t\t\t// Clear any running Progress\n\t\t\tthis.progressBar.stop().getContainer().hide();\n\n\t\t\t// Empty Actions\n\t\t\tthis.toolBar.setActions([])();\n\n\t\t\t// Clear Listeners\n\t\t\twhile (this.activeCompositeListeners.length) {\n\t\t\t\tthis.activeCompositeListeners.pop()();\n\t\t\t}\n\n\t\t\t// Emit Composite Closed Event\n\t\t\tthis.emit(WorkbenchEventType.COMPOSITE_CLOSED, new CompositeEvent(composite.getId()));\n\t\t});\n\t}\n\n\tpublic createTitleArea(parent: Builder): Builder {\n\n\t\t// Title Area Container\n\t\tlet titleArea = $(parent).div({\n\t\t\t'class': ['composite', 'title']\n\t\t});\n\n\t\t// Left Title Label\n\t\t$(titleArea).div({\n\t\t\t'class': 'title-label'\n\t\t}, (div) => {\n\t\t\tthis.titleLabel = div.span();\n\t\t});\n\n\t\t// Right Actions Container\n\t\t$(titleArea).div({\n\t\t\t'class': 'title-actions'\n\t\t}, (div) => {\n\n\t\t\t// Toolbar\n\t\t\tthis.toolBar = new ToolBar(div.getHTMLElement(), this.contextMenuService, {\n\t\t\t\tactionItemProvider: (action: Action) => this.actionItemProvider(action),\n\t\t\t\torientation: ActionsOrientation.HORIZONTAL\n\t\t\t});\n\t\t});\n\n\t\treturn titleArea;\n\t}\n\n\tprivate actionItemProvider(action: Action): IActionItem {\n\t\tlet actionItem: IActionItem;\n\n\t\t// Check Active Composite\n\t\tif (this.activeComposite) {\n\t\t\tactionItem = this.activeComposite.getActionItem(action);\n\t\t}\n\n\t\t// Check Registry\n\t\tif (!actionItem) {\n\t\t\tlet actionBarRegistry = <IActionBarRegistry>Registry.as(Extensions.Actionbar);\n\t\t\tactionItem = actionBarRegistry.getActionItemForContext(this.actionContributionScope, ToolBarContext, action);\n\t\t}\n\n\t\treturn actionItem;\n\t}\n\n\tpublic createContentArea(parent: Builder): Builder {\n\t\treturn $(parent).div({\n\t\t\t'class': 'content'\n\t\t}, (div: Builder) => {\n\t\t\tthis.progressBar = new ProgressBar(div);\n\t\t\tthis.progressBar.getContainer().hide();\n\t\t});\n\t}\n\n\tprivate onError(error: any): void {\n\t\tthis.messageService.show(Severity.Error, types.isString(error) ? new Error(error) : error);\n\t}\n\n\tprotected getActions(): IAction[] {\n\t\treturn [];\n\t}\n\n\tprotected getSecondaryActions(): IAction[] {\n\t\treturn [];\n\t}\n\n\tpublic layout(dimension: Dimension): Dimension[] {\n\n\t\t// Pass to super\n\t\tlet sizes = super.layout(dimension);\n\n\t\t// Pass Contentsize to composite\n\t\tthis.contentAreaSize = sizes[1];\n\t\tif (this.activeComposite) {\n\t\t\tthis.activeComposite.layout(this.contentAreaSize);\n\t\t}\n\n\t\treturn sizes;\n\t}\n\n\tpublic shutdown(): void {\n\t\tthis.instantiatedComposits.forEach(i => i.shutdown());\n\n\t\tsuper.shutdown();\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.mapCompositeToCompositeContainer = null;\n\t\tthis.mapProgressServiceToComposite = null;\n\t\tthis.mapActionsBindingToComposite = null;\n\n\t\tfor (let i = 0; i < this.instantiatedComposits.length; i++) {\n\t\t\tthis.instantiatedComposits[i].dispose();\n\t\t}\n\n\t\tthis.instantiatedComposits = [];\n\n\t\twhile (this.activeCompositeListeners.length) {\n\t\t\tthis.activeCompositeListeners.pop()();\n\t\t}\n\n\t\twhile (this.instantiatedCompositeListeners.length) {\n\t\t\tthis.instantiatedCompositeListeners.pop()();\n\t\t}\n\n\t\tthis.progressBar.dispose();\n\t\tthis.toolBar.dispose();\n\n\t\t// Super Dispose\n\t\tsuper.dispose();\n\t}\n}\n"]}