{"version":3,"sources":["vs/workbench/browser/parts/activitybar/activityAction.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;IAEhG,YAAY,CAAC;IAWb;QAAoC,kCAAM;QAMzC,wBAAY,EAAU,EAAE,IAAY,EAAE,KAAa;YAClD,kBAAM,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;YAEvB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QACnB,CAAC;QAEM,iCAAQ,GAAf;YACC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;YACxC,CAAC;QACF,CAAC;QAEM,mCAAU,GAAjB;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;YACxC,CAAC;QACF,CAAC;QAEM,iCAAQ,GAAf;YACC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACnB,CAAC;QAEM,iCAAQ,GAAf,UAAgB,KAAa;YAC5B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACnD,CAAC;QA/BM,oBAAK,GAAG,OAAO,CAAC;QAgCxB,qBAAC;IAAD,CAlCA,AAkCC,CAlCmC,gBAAM,GAkCzC;IAlCY,sBAAc,iBAkC1B,CAAA;IAED;QAAwC,sCAAc;QASrD,4BAAY,MAAc,EAAE,YAAmC,EAAE,UAAyB;YAA9D,4BAAmC,GAAnC,eAAuB,MAAM,CAAC,KAAK;YAAE,0BAAyB,GAAzB,iBAAyB;YACzF,kBAAM,IAAI,EAAE,MAAM,CAAC,CAAC;YAEpB,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC;YAC7B,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC;YACzB,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC/B,CAAC;QAEM,mCAAM,GAAb,UAAc,SAAsB;YAApC,iBA0BC;YAzBA,gBAAK,CAAC,MAAM,YAAC,SAAS,CAAC,CAAC;YAExB,IAAI,CAAC,EAAE,GAAG,WAAC,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC;gBAClC,QAAQ,EAAE,GAAG;gBACb,IAAI,EAAE,QAAQ;aACd,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAE1B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnB,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACjC,CAAC;YAED,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE,UAAC,KAAc;gBACnE,KAAI,CAAC,aAAa,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC,CAAC;YAC9D,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YAEnB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,eAAe;YAEnD,0CAA0C;YAC1C,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,wBAAkB,CAAC,CAAC,CAAC,cAAc,EAAE,EAAE;gBAC9E,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;oBAC/B,KAAI,CAAC,SAAS,EAAE,CAAC,GAAG,EAAE,CAAC;gBACxB,CAAC;YACF,CAAC,CAAC,EAJkC,CAIlC,CAAC,CAAC;QACL,CAAC;QAEM,kCAAK,GAAZ;YACC,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;QACpB,CAAC;QAEM,qCAAQ,GAAf,UAAgB,KAAa;YAC5B,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QACzB,CAAC;QAED,sBAAW,0CAAU;iBAArB,UAAsB,UAAkB;gBACvC,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;gBAE9B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;oBACd,MAAM,CAAC;gBACR,CAAC;gBAED,IAAI,KAAa,CAAC;gBAElB,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;oBAChB,KAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAiB,EAAE,IAAW,EAAE,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;gBAC7E,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACP,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC;gBACnB,CAAC;gBAED,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACrB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC1B,CAAC;;;WAAA;QAEO,wCAAW,GAAnB,UAAoB,KAAa;YAChC,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YAEnB,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBAEX,SAAS;gBACT,EAAE,CAAC,CAAC,KAAK,YAAY,6BAAW,CAAC,CAAC,CAAC;oBAClC,IAAI,CAAC,GAAiB,KAAM,CAAC,MAAM,CAAC;oBAEpC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACP,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;wBACvD,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;oBACpB,CAAC;gBACF,CAAC;gBAGD,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,YAAY,2BAAS,CAAC,CAAC,CAAC;oBACrC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAa,KAAM,CAAC,IAAI,CAAC,CAAC;oBACjD,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;gBACpB,CAAC;gBAGD,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,YAAY,2BAAS,CAAC,CAAC,CAAC;oBACrC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;gBACpB,CAAC;gBAGD,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,YAAY,+BAAa,CAAC,CAAC,CAAC;oBACzC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;gBACpB,CAAC;gBAED,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,GAAG,KAAK,GAAG,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC;YACxE,CAAC;QACF,CAAC;QAEM,yCAAY,GAAnB;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACxC,CAAC;YAED,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,KAAK,CAAC;YACvC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrC,CAAC;QAEM,2CAAc,GAArB;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAC5B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAC/B,CAAC;QACF,CAAC;QAEM,2CAAc,GAArB,UAAsB,KAAoB;YACzC,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;gBAC9C,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;gBAC9B,EAAE,CAAC,CAAC,MAAM,YAAY,cAAc,CAAC,CAAC,CAAC;oBACtC,IAAI,CAAC,WAAW,CAAmB,MAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;gBACxD,CAAC;YACF,CAAC;QACF,CAAC;QAEM,2CAAc,GAArB;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;YACtC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YACnC,CAAC;QACF,CAAC;QAEM,oCAAO,GAAd;YACC,gBAAK,CAAC,OAAO,WAAE,CAAC;YAEhB,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YACtB,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC;QACF,yBAAC;IAAD,CApJA,AAoJC,CApJuC,0BAAc,GAoJrD;IApJY,0BAAkB,qBAoJ9B,CAAA","file":"vs/workbench/browser/parts/activitybar/activityAction.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./media/activityaction';\nimport nls = require('vs/nls');\nimport {Builder, $} from 'vs/base/browser/builder';\nimport {DelayedDragHandler} from 'vs/base/browser/dnd';\nimport {Action} from 'vs/base/common/actions';\nimport {BaseActionItem} from 'vs/base/browser/ui/actionbar/actionbar';\nimport {IEmitterEvent} from 'vs/base/common/eventEmitter';\nimport {ProgressBadge, TextBadge, NumberBadge, IconBadge, IBadge} from 'vs/workbench/services/activity/common/activityService';\n\nexport class ActivityAction extends Action {\n\n\tstatic BADGE = 'badge';\n\n\tprivate badge: IBadge;\n\n\tconstructor(id: string, name: string, clazz: string) {\n\t\tsuper(id, name, clazz);\n\n\t\tthis.badge = null;\n\t}\n\n\tpublic activate(): void {\n\t\tif (!this.checked) {\n\t\t\tthis.checked = true;\n\t\t\tthis.emit('checked', { source: this });\n\t\t}\n\t}\n\n\tpublic deactivate(): void {\n\t\tif (this.checked) {\n\t\t\tthis.checked = false;\n\t\t\tthis.emit('checked', { source: this });\n\t\t}\n\t}\n\n\tpublic getBadge(): IBadge {\n\t\treturn this.badge;\n\t}\n\n\tpublic setBadge(badge: IBadge): void {\n\t\tthis.badge = badge;\n\t\tthis.emit(ActivityAction.BADGE, { source: this });\n\t}\n}\n\nexport class ActivityActionItem extends BaseActionItem {\n\n\tprivate $e: Builder;\n\tprivate name: string;\n\tprivate _keybinding: string;\n\tprivate cssClass: string;\n\tprivate $badge: Builder;\n\tprivate $badgeContent: Builder;\n\n\tconstructor(action: Action, activityName: string = action.label, keybinding: string = null) {\n\t\tsuper(null, action);\n\n\t\tthis.cssClass = action.class;\n\t\tthis.name = activityName;\n\t\tthis._keybinding = keybinding;\n\t}\n\n\tpublic render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\n\t\tthis.$e = $('a.action-label').attr({\n\t\t\ttabIndex: '0',\n\t\t\trole: 'button'\n\t\t}).appendTo(this.builder);\n\n\t\tif (this.cssClass) {\n\t\t\tthis.$e.addClass(this.cssClass);\n\t\t}\n\n\t\tthis.$badge = this.builder.div({ 'class': 'badge' }, (badge: Builder) => {\n\t\t\tthis.$badgeContent = badge.div({ 'class': 'badge-content' });\n\t\t});\n\n\t\tthis.$badge.hide();\n\n\t\tthis.keybinding = this._keybinding; // force update\n\n\t\t// Activate on drag over to reveal targets\n\t\t[this.$badge, this.$e].forEach(b => new DelayedDragHandler(b.getHTMLElement(), () => {\n\t\t\tif (!this.getAction().checked) {\n\t\t\t\tthis.getAction().run();\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic focus(): void {\n\t\tthis.$e.domFocus();\n\t}\n\n\tpublic setBadge(badge: IBadge): void {\n\t\tthis.updateBadge(badge);\n\t}\n\n\tpublic set keybinding(keybinding: string) {\n\t\tthis._keybinding = keybinding;\n\n\t\tif (!this.$e) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet title: string;\n\n\t\tif (keybinding) {\n\t\t\ttitle = nls.localize('titleKeybinding', \"{0} ({1})\", this.name, keybinding);\n\t\t} else {\n\t\t\ttitle = this.name;\n\t\t}\n\n\t\tthis.$e.title(title);\n\t\tthis.$badge.title(title);\n\t}\n\n\tprivate updateBadge(badge: IBadge): void {\n\t\tthis.$badgeContent.empty();\n\t\tthis.$badge.hide();\n\n\t\tif (badge) {\n\n\t\t\t// Number\n\t\t\tif (badge instanceof NumberBadge) {\n\t\t\t\tlet n = (<NumberBadge>badge).number;\n\n\t\t\t\tif (n) {\n\t\t\t\t\tthis.$badgeContent.text(n > 99 ? '99+' : n.toString());\n\t\t\t\t\tthis.$badge.show();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Text\n\t\t\telse if (badge instanceof TextBadge) {\n\t\t\t\tthis.$badgeContent.text((<TextBadge>badge).text);\n\t\t\t\tthis.$badge.show();\n\t\t\t}\n\n\t\t\t// Text\n\t\t\telse if (badge instanceof IconBadge) {\n\t\t\t\tthis.$badge.show();\n\t\t\t}\n\n\t\t\t// Progress\n\t\t\telse if (badge instanceof ProgressBadge) {\n\t\t\t\tthis.$badge.show();\n\t\t\t}\n\n\t\t\tthis.$e.attr('aria-label', this.name + ' - ' + badge.getDescription());\n\t\t}\n\t}\n\n\tpublic _updateClass(): void {\n\t\tif (this.cssClass) {\n\t\t\tthis.$badge.removeClass(this.cssClass);\n\t\t}\n\n\t\tthis.cssClass = this.getAction().class;\n\t\tthis.$badge.addClass(this.cssClass);\n\t}\n\n\tpublic _updateChecked(): void {\n\t\tif (this.getAction().checked) {\n\t\t\tthis.$e.addClass('active');\n\t\t} else {\n\t\t\tthis.$e.removeClass('active');\n\t\t}\n\t}\n\n\tpublic _updateUnknown(event: IEmitterEvent): void {\n\t\tif (event.getType() === ActivityAction.BADGE) {\n\t\t\tlet action = this.getAction();\n\t\t\tif (action instanceof ActivityAction) {\n\t\t\t\tthis.updateBadge((<ActivityAction> action).getBadge());\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _updateEnabled(): void {\n\t\tif (this.getAction().enabled) {\n\t\t\tthis.builder.removeClass('disabled');\n\t\t} else {\n\t\t\tthis.builder.addClass('disabled');\n\t\t}\n\t}\n\n\tpublic dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.$badge.destroy();\n\t\tthis.$e.destroy();\n\t}\n}"]}