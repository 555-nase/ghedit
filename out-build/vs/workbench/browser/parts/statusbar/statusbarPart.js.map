{"version":3,"file":"statusbarPart.js","sourceRoot":"","sources":["../../../../../../src/vs/workbench/browser/parts/statusbar/statusbarPart.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./media/statusbarPart';\nimport dom = require('vs/base/browser/dom');\nimport types = require('vs/base/common/types');\nimport nls = require('vs/nls');\nimport {toErrorMessage} from 'vs/base/common/errors';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport {dispose, IDisposable} from 'vs/base/common/lifecycle';\nimport {Builder, $} from 'vs/base/browser/builder';\nimport {OcticonLabel} from 'vs/base/browser/ui/octiconLabel/octiconLabel';\nimport {Registry} from 'vs/platform/platform';\nimport {IKeybindingService} from 'vs/platform/keybinding/common/keybindingService';\nimport {IAction} from 'vs/base/common/actions';\nimport {IWorkbenchEditorService} from 'vs/workbench/services/editor/common/editorService';\nimport {Part} from 'vs/workbench/browser/part';\nimport {IWorkbenchActionRegistry, Extensions as ActionExtensions} from 'vs/workbench/common/actionRegistry';\nimport {StatusbarAlignment, IStatusbarRegistry, Extensions, IStatusbarItem} from 'vs/workbench/browser/parts/statusbar/statusbar';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {ITelemetryService} from 'vs/platform/telemetry/common/telemetry';\nimport {IMessageService, Severity} from 'vs/platform/message/common/message';\nimport {IStatusbarService, IStatusbarEntry} from 'vs/workbench/services/statusbar/common/statusbarService';\n\nexport class StatusbarPart extends Part implements IStatusbarService {\n\n\tpublic serviceId = IStatusbarService;\n\n\tprivate static PRIORITY_PROP = 'priority';\n\tprivate static ALIGNMENT_PROP = 'alignment';\n\n\tprivate toDispose: IDisposable[];\n\tprivate statusItemsContainer: Builder;\n\n\tprivate instantiationService: IInstantiationService;\n\n\tconstructor(\n\t\tid: string\n\t) {\n\t\tsuper(id);\n\n\t\tthis.toDispose = [];\n\t}\n\n\tpublic setInstantiationService(service: IInstantiationService): void {\n\t\tthis.instantiationService = service;\n\t}\n\n\tpublic addEntry(entry: IStatusbarEntry, alignment: StatusbarAlignment, priority: number = 0): IDisposable {\n\n\t\t// Render entry in status bar\n\t\tlet el = this.doCreateStatusItem(alignment, priority);\n\t\tlet item = this.instantiationService.createInstance(StatusBarEntryItem, entry);\n\t\tlet toDispose = item.render(el);\n\n\t\t// Insert according to priority\n\t\tlet container = this.statusItemsContainer.getHTMLElement();\n\t\tlet neighbours = this.getEntries(alignment);\n\t\tlet inserted = false;\n\t\tfor (let i = 0; i < neighbours.length; i++) {\n\t\t\tlet neighbour = neighbours[i];\n\t\t\tlet nPriority = $(neighbour).getProperty(StatusbarPart.PRIORITY_PROP);\n\t\t\tif (\n\t\t\t\talignment === StatusbarAlignment.LEFT && nPriority < priority ||\n\t\t\t\talignment === StatusbarAlignment.RIGHT && nPriority > priority\n\t\t\t) {\n\t\t\t\tcontainer.insertBefore(el, neighbour);\n\t\t\t\tinserted = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!inserted) {\n\t\t\tcontainer.appendChild(el);\n\t\t}\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\t$(el).destroy();\n\n\t\t\t\tif (toDispose) {\n\t\t\t\t\ttoDispose.dispose();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate getEntries(alignment: StatusbarAlignment): HTMLElement[] {\n\t\tlet entries: HTMLElement[] = [];\n\n\t\tlet container = this.statusItemsContainer.getHTMLElement();\n\t\tlet children = container.children;\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tlet childElement = <HTMLElement>children.item(i);\n\t\t\tif ($(childElement).getProperty(StatusbarPart.ALIGNMENT_PROP) === alignment) {\n\t\t\t\tentries.push(childElement);\n\t\t\t}\n\t\t}\n\n\t\treturn entries;\n\t}\n\n\tpublic createContentArea(parent: Builder): Builder {\n\t\tthis.statusItemsContainer = $(parent);\n\n\t\t// Fill in initial items that were contributed from the registry\n\t\tlet registry = (<IStatusbarRegistry>Registry.as(Extensions.Statusbar));\n\n\t\tlet leftDescriptors = registry.items.filter(d => d.alignment === StatusbarAlignment.LEFT).sort((a, b) => b.priority - a.priority);\n\t\tlet rightDescriptors = registry.items.filter(d => d.alignment === StatusbarAlignment.RIGHT).sort((a, b) => a.priority - b.priority);\n\n\t\tlet descriptors = rightDescriptors.concat(leftDescriptors); // right first because they float\n\n\t\tthis.toDispose.push(...descriptors.map(descriptor => {\n\t\t\tlet item = this.instantiationService.createInstance(descriptor.syncDescriptor);\n\t\t\tlet el = this.doCreateStatusItem(descriptor.alignment, descriptor.priority);\n\n\t\t\tlet dispose = item.render(el);\n\t\t\tthis.statusItemsContainer.append(el);\n\n\t\t\treturn dispose;\n\t\t}));\n\n\t\treturn this.statusItemsContainer;\n\t}\n\n\tprivate doCreateStatusItem(alignment: StatusbarAlignment, priority: number = 0): HTMLElement {\n\t\tlet el = document.createElement('div');\n\t\tdom.addClass(el, 'statusbar-item');\n\n\t\tif (alignment === StatusbarAlignment.RIGHT) {\n\t\t\tdom.addClass(el, 'right');\n\t\t} else {\n\t\t\tdom.addClass(el, 'left');\n\t\t}\n\n\t\t$(el).setProperty(StatusbarPart.PRIORITY_PROP, priority);\n\t\t$(el).setProperty(StatusbarPart.ALIGNMENT_PROP, alignment);\n\n\t\treturn el;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.toDispose = dispose(this.toDispose);\n\n\t\tsuper.dispose();\n\t}\n}\n\nclass StatusBarEntryItem implements IStatusbarItem {\n\tprivate entry: IStatusbarEntry;\n\n\tconstructor(\n\t\tentry: IStatusbarEntry,\n\t\t@IKeybindingService private keybindingService: IKeybindingService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@ITelemetryService private telemetryService: ITelemetryService,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService\n\t) {\n\t\tthis.entry = entry;\n\t}\n\n\tpublic render(el: HTMLElement): IDisposable {\n\t\tlet toDispose: IDisposable[] = [];\n\t\tdom.addClass(el, 'statusbar-entry');\n\n\t\t// Text Container\n\t\tlet textContainer: HTMLElement;\n\t\tif (this.entry.command) {\n\t\t\ttextContainer = document.createElement('a');\n\n\t\t\t$(textContainer).on('click', () => this.executeCommand(this.entry.command), toDispose);\n\t\t} else {\n\t\t\ttextContainer = document.createElement('span');\n\t\t}\n\n\t\t// Label\n\t\tnew OcticonLabel(textContainer).text = this.entry.text;\n\n\t\t// Tooltip\n\t\tif (this.entry.tooltip) {\n\t\t\t$(textContainer).title(this.entry.tooltip);\n\t\t}\n\n\t\t// Color\n\t\tif (this.entry.color) {\n\t\t\t$(textContainer).color(this.entry.color);\n\t\t}\n\n\t\tel.appendChild(textContainer);\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\ttoDispose = dispose(toDispose);\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate executeCommand(id: string) {\n\t\tlet action: IAction;\n\t\tlet activeEditor = this.editorService.getActiveEditor();\n\n\t\t// Lookup built in commands\n\t\tlet builtInActionDescriptor = (<IWorkbenchActionRegistry>Registry.as(ActionExtensions.WorkbenchActions)).getWorkbenchAction(id);\n\t\tif (builtInActionDescriptor) {\n\t\t\taction = this.instantiationService.createInstance(builtInActionDescriptor.syncDescriptor);\n\t\t}\n\n\t\t// Lookup editor commands\n\t\tif (!action) {\n\t\t\tlet activeEditorControl = <any>(activeEditor ? activeEditor.getControl() : null);\n\t\t\tif (activeEditorControl && types.isFunction(activeEditorControl.getAction)) {\n\t\t\t\taction = activeEditorControl.getAction(id);\n\t\t\t}\n\t\t}\n\n\t\t// Some actions or commands might only be enabled for an active editor, so focus it first\n\t\tif (activeEditor) {\n\t\t\tactiveEditor.focus();\n\t\t}\n\n\t\t// Run it if enabled\n\t\tif (action) {\n\t\t\tif (action.enabled) {\n\t\t\t\tthis.telemetryService.publicLog('workbenchActionExecuted', { id: action.id, from: 'status bar' });\n\t\t\t\t(action.run() || TPromise.as(null)).done(() => {\n\t\t\t\t\taction.dispose();\n\t\t\t\t}, (err) => this.messageService.show(Severity.Error, toErrorMessage(err)));\n\t\t\t} else {\n\t\t\t\tthis.messageService.show(Severity.Warning, nls.localize('canNotRun', \"Command '{0}' can not be run from here.\", action.label || id));\n\t\t\t}\n\t\t}\n\n\t\t// Fallback to the keybinding service for any other case\n\t\telse {\n\t\t\tthis.keybindingService.executeCommand(id).done(undefined, err => this.messageService.show(Severity.Error, toErrorMessage(err)));\n\t\t}\n\t}\n}"]}