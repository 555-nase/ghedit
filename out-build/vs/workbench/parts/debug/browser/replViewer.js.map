{"version":3,"sources":["vs/workbench/parts/debug/browser/replViewer.ts"],"names":[],"mappings":"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","file":"vs/workbench/parts/debug/browser/replViewer.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport nls = require('vs/nls');\nimport { TPromise } from 'vs/base/common/winjs.base';\nimport actions = require('vs/base/common/actions');\nimport strings = require('vs/base/common/strings');\nimport URI from 'vs/base/common/uri';\nimport { isMacintosh } from 'vs/base/common/platform';\nimport keyboard = require('vs/base/browser/keyboardEvent');\nimport actionbar = require('vs/base/browser/ui/actionbar/actionbar');\nimport dom = require('vs/base/browser/dom');\nimport errors = require('vs/base/common/errors');\nimport severity from 'vs/base/common/severity';\nimport mouse = require('vs/base/browser/mouseEvent');\nimport tree = require('vs/base/parts/tree/browser/tree');\nimport renderer = require('vs/base/parts/tree/browser/actionsRenderer');\nimport treedefaults = require('vs/base/parts/tree/browser/treeDefaults');\nimport debug = require('vs/workbench/parts/debug/common/debug');\nimport model = require('vs/workbench/parts/debug/common/debugModel');\nimport debugviewer = require('vs/workbench/parts/debug/browser/debugViewer');\nimport debugactions = require('vs/workbench/parts/debug/electron-browser/debugActions');\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IWorkbenchEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\n\nconst $ = dom.emmet;\n\nfunction getExpressionClassName(): string {\n\treturn isMacintosh ? '.expression.mac' : '.expression.win-linux';\n}\n\nexport class ReplExpressionsDataSource implements tree.IDataSource {\n\n\tconstructor(private debugService: debug.IDebugService) {\n\t\t// noop\n\t}\n\n\tpublic getId(tree: tree.ITree, element: any): string {\n\t\treturn element.getId();\n\t}\n\n\tpublic hasChildren(tree: tree.ITree, element: any): boolean {\n\t\treturn element instanceof model.Model || element.reference > 0  || (element instanceof model.KeyValueOutputElement && element.getChildren().length > 0);\n\t}\n\n\tpublic getChildren(tree: tree.ITree, element: any): TPromise<any> {\n\t\tif (element instanceof model.Model) {\n\t\t\treturn TPromise.as(element.getReplElements());\n\t\t}\n\t\tif (element instanceof model.KeyValueOutputElement) {\n\t\t\treturn TPromise.as(element.getChildren());\n\t\t}\n\t\tif (element instanceof model.ValueOutputElement) {\n\t\t\treturn TPromise.as(null);\n\t\t}\n\n\t\treturn (<debug.IExpression> element).getChildren(this.debugService);\n\t}\n\n\tpublic getParent(tree: tree.ITree, element: any): TPromise<any> {\n\t\treturn TPromise.as(null);\n\t}\n}\n\ninterface IInputOutputPairTemplateData {\n\tinput: HTMLElement;\n\toutput: HTMLElement;\n\tvalue: HTMLElement;\n\tannotation: HTMLElement;\n}\n\ninterface IValueOutputTemplateData {\n\tcontainer: HTMLElement;\n\tcounter: HTMLElement;\n\tvalue: HTMLElement;\n}\n\ninterface IKeyValueOutputTemplateData {\n\tcontainer: HTMLElement;\n\texpression: HTMLElement;\n\tkey: HTMLElement;\n\tvalue: HTMLElement;\n\tannotation: HTMLElement;\n}\n\nexport class ReplExpressionsRenderer implements tree.IRenderer {\n\n\tprivate static VARIABLE_TEMPLATE_ID = 'variable';\n\tprivate static INPUT_OUTPUT_PAIR_TEMPLATE_ID = 'inputOutputPair';\n\tprivate static VALUE_OUTPUT_TEMPLATE_ID = 'outputValue';\n\tprivate static KEY_VALUE_OUTPUT_TEMPLATE_ID = 'outputKeyValue';\n\n\tprivate static FILE_LOCATION_PATTERNS: RegExp[] = [\n\t\t// group 0: the full thing :)\n\t\t// group 1: absolute path\n\t\t// group 2: drive letter on windows with trailing backslash or leading slash on mac/linux\n\t\t// group 3: line number\n\t\t// group 4: column number\n\t\t// eg: at Context.<anonymous> (c:\\Users\\someone\\Desktop\\mocha-runner\\test\\test.js:26:11)\n\t\t/((\\/|[a-zA-Z]:\\\\)[^\\(\\)<>\\'\\\"\\[\\]]+):(\\d+):(\\d+)/\n\t];\n\n\tprivate width: number;\n\tprivate characterWidth: number;\n\n\tconstructor(\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService\n\t) {\n\t\t// noop\n\t}\n\n\tpublic getHeight(tree: tree.ITree, element: any): number {\n\t\treturn this.getHeightForString(element.value) + (element instanceof model.Expression ? this.getHeightForString(element.name) : 0);\n\t}\n\n\tprivate getHeightForString(s: string): number {\n\t\tif (!s || !s.length || !this.width || this.width <= 0 || !this.characterWidth || this.characterWidth <= 0) {\n\t\t\treturn 18;\n\t\t}\n\t\tlet realLength = 0;\n\t\tfor (let i = 0; i < s.length; i++) {\n\t\t\trealLength += strings.isFullWidthCharacter(s.charCodeAt(i)) ? 2 : 1;\n\t\t}\n\n\t\treturn 18 * Math.ceil(realLength * this.characterWidth / this.width);\n\t}\n\n\tpublic setWidth(fullWidth: number, characterWidth: number): void {\n\t\tthis.width = fullWidth;\n\t\tthis.characterWidth = characterWidth;\n\t}\n\n\tpublic getTemplateId(tree: tree.ITree, element: any): string {\n\t\tif (element instanceof model.Variable) {\n\t\t\treturn ReplExpressionsRenderer.VARIABLE_TEMPLATE_ID;\n\t\t}\n\t\tif (element instanceof model.Expression) {\n\t\t\treturn ReplExpressionsRenderer.INPUT_OUTPUT_PAIR_TEMPLATE_ID;\n\t\t}\n\t\tif (element instanceof model.ValueOutputElement) {\n\t\t\treturn ReplExpressionsRenderer.VALUE_OUTPUT_TEMPLATE_ID;\n\t\t}\n\t\tif (element instanceof model.KeyValueOutputElement) {\n\t\t\treturn ReplExpressionsRenderer.KEY_VALUE_OUTPUT_TEMPLATE_ID;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic renderTemplate(tree: tree.ITree, templateId: string, container: HTMLElement): any {\n\t\tif (templateId === ReplExpressionsRenderer.VARIABLE_TEMPLATE_ID) {\n\t\t\tlet data: debugviewer.IVariableTemplateData = Object.create(null);\n\t\t\tdata.expression = dom.append(container, $(getExpressionClassName()));\n\t\t\tdata.name = dom.append(data.expression, $('span.name'));\n\t\t\tdata.value = dom.append(data.expression, $('span.value'));\n\n\t\t\treturn data;\n\t\t}\n\n\t\tif (templateId === ReplExpressionsRenderer.INPUT_OUTPUT_PAIR_TEMPLATE_ID) {\n\t\t\tlet data: IInputOutputPairTemplateData = Object.create(null);\n\t\t\tdom.addClass(container, 'input-output-pair');\n\t\t\tdata.input = dom.append(container, $('.input' + getExpressionClassName()));\n\t\t\tdata.output = dom.append(container, $('.output' + getExpressionClassName()));\n\t\t\tdata.value = dom.append(data.output, $('span.value'));\n\t\t\tdata.annotation = dom.append(data.output, $('span'));\n\n\t\t\treturn data;\n\t\t}\n\n\t\tif (templateId === ReplExpressionsRenderer.VALUE_OUTPUT_TEMPLATE_ID) {\n\t\t\tlet data: IValueOutputTemplateData = Object.create(null);\n\t\t\tdom.addClass(container, 'output');\n\t\t\tlet expression = dom.append(container, $('.output' + getExpressionClassName()));\n\n\t\t\tdata.container = container;\n\t\t\tdata.counter = dom.append(expression, $('div.counter'));\n\t\t\tdata.value = dom.append(expression, $('span.value'));\n\n\t\t\treturn data;\n\t\t}\n\n\t\tif (templateId === ReplExpressionsRenderer.KEY_VALUE_OUTPUT_TEMPLATE_ID) {\n\t\t\tlet data: IKeyValueOutputTemplateData = Object.create(null);\n\t\t\tdom.addClass(container, 'output');\n\n\t\t\tdata.container = container;\n\t\t\tdata.expression = dom.append(container, $('.output' + getExpressionClassName()));\n\t\t\tdata.key = dom.append(data.expression, $('span.name'));\n\t\t\tdata.value = dom.append(data.expression, $('span.value'));\n\t\t\tdata.annotation = dom.append(data.expression, $('span'));\n\n\t\t\treturn data;\n\t\t}\n\t}\n\n\tpublic renderElement(tree: tree.ITree, element: any, templateId: string, templateData: any): void {\n\t\tif (templateId === ReplExpressionsRenderer.VARIABLE_TEMPLATE_ID) {\n\t\t\tdebugviewer.renderVariable(tree, element, templateData, false);\n\t\t} else if (templateId === ReplExpressionsRenderer.INPUT_OUTPUT_PAIR_TEMPLATE_ID) {\n\t\t\tthis.renderInputOutputPair(tree, element, templateData);\n\t\t} else if (templateId === ReplExpressionsRenderer.VALUE_OUTPUT_TEMPLATE_ID) {\n\t\t\tthis.renderOutputValue(element, templateData);\n\t\t} else if (templateId === ReplExpressionsRenderer.KEY_VALUE_OUTPUT_TEMPLATE_ID) {\n\t\t\tthis.renderOutputKeyValue(tree, element, templateData);\n\t\t}\n\t}\n\n\tprivate renderInputOutputPair(tree: tree.ITree, expression: debug.IExpression, templateData: IInputOutputPairTemplateData): void {\n\t\ttemplateData.input.textContent = expression.name;\n\t\tdebugviewer.renderExpressionValue(expression, templateData.value, false);\n\t\tif (expression.reference > 0) {\n\t\t\ttemplateData.annotation.className = 'annotation octicon octicon-info';\n\t\t\ttemplateData.annotation.title = nls.localize('stateCapture', \"Object state is captured from first evaluation\");\n\t\t}\n\t}\n\n\tprivate renderOutputValue(output: model.ValueOutputElement, templateData: IValueOutputTemplateData): void {\n\n\t\t// counter\n\t\tif (output.counter > 1) {\n\t\t\ttemplateData.counter.textContent = String(output.counter);\n\t\t\ttemplateData.counter.className = (output.severity === severity.Warning) ? 'counter warn' : (output.severity === severity.Error) ? 'counter error' : 'counter info';\n\t\t} else {\n\t\t\ttemplateData.counter.textContent = '';\n\t\t\ttemplateData.counter.className = 'counter';\n\t\t}\n\n\t\t// value\n\t\tdom.clearNode(templateData.value);\n\t\tlet result = this.handleANSIOutput(output.value);\n\t\tif (typeof result === 'string') {\n\t\t\ttemplateData.value.textContent = result;\n\t\t} else {\n\t\t\ttemplateData.value.appendChild(result);\n\t\t}\n\n\t\ttemplateData.value.className = (output.severity === severity.Warning) ? 'warn' : (output.severity === severity.Error) ? 'error' : 'info';\n\t}\n\n\tprivate handleANSIOutput(text: string): HTMLElement | string {\n\t\tlet tokensContainer: HTMLSpanElement;\n\t\tlet currentToken: HTMLSpanElement;\n\t\tlet buffer: string = '';\n\n\t\tfor (let i = 0, len = text.length; i < len; i++) {\n\n\t\t\t// start of ANSI escape sequence (see http://ascii-table.com/ansi-escape-sequences.php)\n\t\t\tif (text.charCodeAt(i) === 27) {\n\t\t\t\tlet index = i;\n\t\t\t\tlet chr = (++index < len ? text.charAt(index) : null);\n\t\t\t\tif (chr && chr === '[') {\n\t\t\t\t\tlet code: string = null;\n\t\t\t\t\tchr = (++index < len ? text.charAt(index) : null);\n\n\t\t\t\t\tif (chr && chr >= '0' && chr <= '9') {\n\t\t\t\t\t\tcode = chr;\n\t\t\t\t\t\tchr = (++index < len ? text.charAt(index) : null);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (chr && chr >= '0' && chr <= '9') {\n\t\t\t\t\t\tcode += chr;\n\t\t\t\t\t\tchr = (++index < len ? text.charAt(index) : null);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (code === null) {\n\t\t\t\t\t\tcode = '0';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (chr === 'm') { // set text color/mode.\n\n\t\t\t\t\t\t// only respect text-foreground ranges and ignore the values for \"black\" & \"white\" because those\n\t\t\t\t\t\t// only make sense in combination with text-background ranges which we currently not support\n\t\t\t\t\t\tlet parsedMode = parseInt(code, 10);\n\t\t\t\t\t\tlet token = document.createElement('span');\n\t\t\t\t\t\tif ((parsedMode >= 30 && parsedMode <= 37) || (parsedMode >= 90 && parsedMode <= 97)) {\n\t\t\t\t\t\t\ttoken.className = 'code' + parsedMode;\n\t\t\t\t\t\t} else if (parsedMode === 1) {\n\t\t\t\t\t\t\ttoken.className = 'code-bold';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// we need a tokens container now\n\t\t\t\t\t\tif (!tokensContainer) {\n\t\t\t\t\t\t\ttokensContainer = document.createElement('span');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// flush text buffer if we have any\n\t\t\t\t\t\tif (buffer) {\n\t\t\t\t\t\t\tthis.insert(this.handleLinks(buffer), currentToken || tokensContainer);\n\t\t\t\t\t\t\tbuffer = '';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcurrentToken = token;\n\t\t\t\t\t\ttokensContainer.appendChild(token);\n\n\t\t\t\t\t\ti = index;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// normal text\n\t\t\telse {\n\t\t\t\tbuffer += text[i];\n\t\t\t}\n\t\t}\n\n\t\t// flush remaining text buffer if we have any\n\t\tif (buffer) {\n\t\t\tlet res = this.handleLinks(buffer);\n\t\t\tif (typeof res !== 'string' || currentToken) {\n\t\t\t\tif (!tokensContainer) {\n\t\t\t\t\ttokensContainer = document.createElement('span');\n\t\t\t\t}\n\n\t\t\t\tthis.insert(res, currentToken || tokensContainer);\n\t\t\t}\n\t\t}\n\n\t\treturn tokensContainer || buffer;\n\t}\n\n\tprivate insert(arg: HTMLElement | string, target: HTMLElement): void {\n\t\tif (typeof arg === 'string') {\n\t\t\ttarget.textContent = arg;\n\t\t} else {\n\t\t\ttarget.appendChild(arg);\n\t\t}\n\t}\n\n\tprivate handleLinks(text: string): HTMLElement | string {\n\t\tlet linkContainer: HTMLElement;\n\n\t\tfor (let pattern of ReplExpressionsRenderer.FILE_LOCATION_PATTERNS) {\n\t\t\tpattern.lastIndex = 0; // the holy grail of software development\n\n\t\t\tvar match = pattern.exec(text);\n\t\t\tvar resource = match && URI.file(match[1]);\n\t\t\tif (resource) {\n\t\t\t\tlinkContainer = document.createElement('span');\n\n\t\t\t\tlet textBeforeLink = text.substr(0, match.index);\n\t\t\t\tif (textBeforeLink) {\n\t\t\t\t\tlet span = document.createElement('span');\n\t\t\t\t\tspan.textContent = textBeforeLink;\n\t\t\t\t\tlinkContainer.appendChild(span);\n\t\t\t\t}\n\n\t\t\t\tconst link = document.createElement('a');\n\t\t\t\tlink.textContent = text.substr(match.index, match[0].length);\n\t\t\t\tlink.title = isMacintosh ? nls.localize('fileLinkMac', \"Click to follow (Cmd + click opens to the side)\") : nls.localize('fileLink', \"Click to follow (Ctrl + click opens to the side)\");\n\t\t\t\tlinkContainer.appendChild(link);\n\t\t\t\tlink.onclick = (e) => this.onLinkClick(new mouse.StandardMouseEvent(e), resource, Number(match[3]), Number(match[4]));\n\n\t\t\t\tlet textAfterLink = text.substr(match.index + match[0].length);\n\t\t\t\tif (textAfterLink) {\n\t\t\t\t\tlet span = document.createElement('span');\n\t\t\t\t\tspan.textContent = textAfterLink;\n\t\t\t\t\tlinkContainer.appendChild(span);\n\t\t\t\t}\n\n\t\t\t\tbreak; // support one link per line for now\n\t\t\t}\n\t\t}\n\n\t\treturn linkContainer || text;\n\t}\n\n\tprivate onLinkClick(event: mouse.IMouseEvent, resource: URI, line: number, column: number): void {\n\t\tconst selection = window.getSelection();\n\t\tif (selection.type === 'Range') {\n\t\t\treturn; // do not navigate when user is selecting\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tthis.editorService.openEditor({\n\t\t\tresource: resource,\n\t\t\toptions: {\n\t\t\t\tselection: {\n\t\t\t\t\tstartLineNumber: line,\n\t\t\t\t\tstartColumn: column\n\t\t\t\t}\n\t\t\t}\n\t\t}, event.ctrlKey || event.metaKey).done(null, errors.onUnexpectedError);\n\t}\n\n\tprivate renderOutputKeyValue(tree: tree.ITree, output: model.KeyValueOutputElement, templateData: IKeyValueOutputTemplateData): void {\n\n\t\t// key\n\t\tif (output.key) {\n\t\t\ttemplateData.key.textContent = `${output.key}:`;\n\t\t} else {\n\t\t\ttemplateData.key.textContent = '';\n\t\t}\n\n\t\t// value\n\t\tdebugviewer.renderExpressionValue(output.value, templateData.value, false);\n\n\t\t// annotation if any\n\t\tif (output.annotation) {\n\t\t\ttemplateData.annotation.className = 'annotation octicon octicon-info';\n\t\t\ttemplateData.annotation.title = output.annotation;\n\t\t} else {\n\t\t\ttemplateData.annotation.className = '';\n\t\t\ttemplateData.annotation.title = '';\n\t\t}\n\t}\n\n\tpublic disposeTemplate(tree: tree.ITree, templateId: string, templateData: any): void {\n\t\t// noop\n\t}\n}\n\nexport class ReplExpressionsAccessibilityProvider implements tree.IAccessibilityProvider {\n\n\tpublic getAriaLabel(tree: tree.ITree, element: any): string {\n\t\tif (element instanceof model.Variable) {\n\t\t\treturn nls.localize('replVariableAriaLabel', \"Variable {0} has value {1}, read eval print loop, debug\", (<model.Variable>element).name, (<model.Variable>element).value);\n\t\t}\n\t\tif (element instanceof model.Expression) {\n\t\t\treturn nls.localize('replExpressionAriaLabel', \"Expression {0} has value {1}, read eval print loop, debug\", (<model.Expression>element).name, (<model.Expression>element).value);\n\t\t}\n\t\tif (element instanceof model.ValueOutputElement) {\n\t\t\treturn nls.localize('replValueOutputAriaLabel', \"{0}, read eval print loop, debug\", (<model.ValueOutputElement>element).value);\n\t\t}\n\t\tif (element instanceof model.KeyValueOutputElement) {\n\t\t\treturn nls.localize('replKeyValueOutputAriaLabel', \"Output variable {0} has value {1}, read eval print loop, debug\", (<model.KeyValueOutputElement>element).key, (<model.KeyValueOutputElement>element).value);\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nexport class ReplExpressionsActionProvider implements renderer.IActionProvider {\n\n\tconstructor(private instantiationService: IInstantiationService) {\n\t\t// noop\n\t}\n\n\tpublic hasActions(tree: tree.ITree, element: any): boolean {\n\t\treturn false;\n\t}\n\n\tpublic getActions(tree: tree.ITree, element: any): TPromise<actions.IAction[]> {\n\t\treturn TPromise.as([]);\n\t}\n\n\tpublic hasSecondaryActions(tree: tree.ITree, element: any): boolean {\n\t\treturn true;\n\t}\n\n\tpublic getSecondaryActions(tree: tree.ITree, element: any): TPromise<actions.IAction[]> {\n\t\tconst actions: actions.IAction[] = [];\n\t\tif (element instanceof model.Variable || element instanceof model.Expression) {\n\t\t\tactions.push(this.instantiationService.createInstance(debugactions.AddToWatchExpressionsAction, debugactions.AddToWatchExpressionsAction.ID, debugactions.AddToWatchExpressionsAction.LABEL, element));\n\t\t\tactions.push(new actionbar.Separator());\n\t\t}\n\t\tactions.push(new debugactions.CopyAction(debugactions.CopyAction.ID, debugactions.CopyAction.LABEL));\n\t\tactions.push(this.instantiationService.createInstance(debugactions.ClearReplAction, debugactions.ClearReplAction.ID, debugactions.ClearReplAction.LABEL));\n\n\t\treturn TPromise.as(actions);\n\t}\n\n\tpublic getActionItem(tree: tree.ITree, element: any, action: actions.IAction): actionbar.IActionItem {\n\t\treturn null;\n\t}\n}\n\nexport class ReplExpressionsController extends debugviewer.BaseDebugController {\n\n\tprivate lastSelectedString: string = null;\n\n\tconstructor(\n\t\tdebugService: debug.IDebugService,\n\t\tcontextMenuService: IContextMenuService,\n\t\tactionProvider: renderer.IActionProvider,\n\t\tprivate replInput: HTMLInputElement,\n\t\tfocusOnContextMenu = true\n\t) {\n\t\tsuper(debugService, contextMenuService, actionProvider, focusOnContextMenu);\n\t}\n\n\tprotected onLeftClick(tree: tree.ITree, element: any, eventish: treedefaults.ICancelableEvent, origin: string = 'mouse'): boolean {\n\t\tconst mouseEvent = <mouse.IMouseEvent> eventish;\n\t\t// input and output are one element in the tree => we only expand if the user clicked on the output.\n\t\tif ((element.reference > 0 || (element instanceof model.KeyValueOutputElement && element.getChildren().length > 0)) && mouseEvent.target.className.indexOf('input expression') === -1) {\n\t\t\tsuper.onLeftClick(tree, element, eventish, origin);\n\t\t\ttree.clearFocus();\n\t\t\ttree.deselect(element);\n\t\t}\n\n\t\tconst selection = window.getSelection();\n\t\tif (selection.type !== 'Range' || this.lastSelectedString === selection.toString()) {\n\t\t\t// only focus the input if the user is not currently selecting.\n\t\t\tthis.replInput.focus();\n\t\t}\n\t\tthis.lastSelectedString = selection.toString();\n\n\t\treturn true;\n\t}\n\n\tprotected onDown(tree: tree.ITree, event: keyboard.IKeyboardEvent): boolean {\n\t\tif (tree.getFocus()) {\n\t\t\treturn super.onDown(tree, event);\n\t\t}\n\n\t\tconst payload = { origin: 'keyboard', originalEvent: event };\n\t\ttree.focusLast(payload);\n\t\ttree.reveal(tree.getFocus()).done(null, errors.onUnexpectedError);\n\n\t\treturn true;\n\t}\n}\n"]}