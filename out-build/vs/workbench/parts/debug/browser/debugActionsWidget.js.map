{"version":3,"file":"vs/workbench/parts/debug/browser/debugActionsWidget.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/workbench/parts/debug/browser/debugActionsWidget.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport lifecycle = require('vs/base/common/lifecycle');\nimport errors = require('vs/base/common/errors');\nimport severity from 'vs/base/common/severity';\nimport builder = require('vs/base/browser/builder');\nimport actions = require('vs/base/common/actions');\nimport events = require('vs/base/common/events');\nimport actionbar = require('vs/base/browser/ui/actionbar/actionbar');\nimport constants = require('vs/workbench/common/constants');\nimport wbext = require('vs/workbench/common/contributions');\nimport debug = require('vs/workbench/parts/debug/common/debug');\nimport dbgactions = require('vs/workbench/parts/debug/electron-browser/debugActions');\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IMessageService } from 'vs/platform/message/common/message';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\n\nimport IDebugService = debug.IDebugService;\n\nconst $ = builder.$;\n\nexport class DebugActionsWidget implements wbext.IWorkbenchContribution {\n\tprivate static ID = 'debug.actionsWidget';\n\n\tprivate $el: builder.Builder;\n\tprivate toDispose: lifecycle.IDisposable[];\n\tprivate actionBar: actionbar.ActionBar;\n\tprivate actions: actions.IAction[];\n\tprivate pauseAction: dbgactions.PauseAction;\n\tprivate continueAction: dbgactions.ContinueAction;\n\tprivate isVisible: boolean;\n\tprivate isBuilt: boolean;\n\n\tconstructor(\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@ITelemetryService private telemetryService: ITelemetryService,\n\t\t@IDebugService private debugService: IDebugService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService\n\t) {\n\t\tthis.$el = $().div().addClass('debug-actions-widget');\n\n\t\tthis.toDispose = [];\n\t\tthis.actionBar = new actionbar.ActionBar(this.$el, {\n\t\t\torientation: actionbar.ActionsOrientation.HORIZONTAL\n\t\t});\n\n\t\tthis.toDispose.push(this.actionBar);\n\t\tthis.registerListeners();\n\n\t\tthis.hide();\n\t\tthis.isBuilt = false;\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis.toDispose.push(this.debugService.addListener2(debug.ServiceEvents.STATE_CHANGED, () => {\n\t\t\tthis.onDebugStateChange();\n\t\t}));\n\t\tthis.toDispose.push(this.actionBar.actionRunner.addListener2(events.EventType.RUN, (e: any) => {\n\t\t\t// check for error\n\t\t\tif (e.error && !errors.isPromiseCanceledError(e.error)) {\n\t\t\t\tthis.messageService.show(severity.Error, e.error);\n\t\t\t}\n\n\t\t\t// log in telemetry\n\t\t\tif (this.telemetryService) {\n\t\t\t\tthis.telemetryService.publicLog('workbenchActionExecuted', { id: e.action.id, from: 'debugActionsWidget' });\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic getId(): string {\n\t\treturn DebugActionsWidget.ID;\n\t}\n\n\tprivate onDebugStateChange(): void {\n\t\tconst state = this.debugService.getState();\n\t\tif (state === debug.State.Disabled || state === debug.State.Inactive || state === debug.State.Initializing) {\n\t\t\treturn this.hide();\n\t\t}\n\n\t\tthis.actionBar.clear();\n\t\tthis.actionBar.push(this.getActions(this.instantiationService, this.debugService.getState()), { icon: true, label: false });\n\t\tthis.show();\n\t}\n\n\tprivate show(): void {\n\t\tif (this.isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.isBuilt) {\n\t\t\tthis.isBuilt = true;\n\t\t\tthis.$el.build(builder.withElementById(constants.Identifiers.WORKBENCH_CONTAINER).getHTMLElement());\n\t\t}\n\n\t\tthis.isVisible = true;\n\t\tthis.$el.show();\n\t}\n\n\tprivate hide(): void {\n\t\tthis.isVisible = false;\n\t\tthis.$el.hide();\n\t}\n\n\tprivate getActions(instantiationService: IInstantiationService, state: debug.State): actions.IAction[] {\n\t\tif (!this.actions) {\n\t\t\tthis.continueAction = instantiationService.createInstance(dbgactions.ContinueAction, dbgactions.ContinueAction.ID, dbgactions.ContinueAction.LABEL);\n\t\t\tthis.pauseAction = instantiationService.createInstance(dbgactions.PauseAction, dbgactions.PauseAction.ID, dbgactions.PauseAction.LABEL);\n\t\t\tthis.actions = [\n\t\t\t\tthis.continueAction,\n\t\t\t\tinstantiationService.createInstance(dbgactions.StepOverDebugAction, dbgactions.StepOverDebugAction.ID, dbgactions.StepOverDebugAction.LABEL),\n\t\t\t\tinstantiationService.createInstance(dbgactions.StepIntoDebugAction, dbgactions.StepIntoDebugAction.ID, dbgactions.StepIntoDebugAction.LABEL),\n\t\t\t\tinstantiationService.createInstance(dbgactions.StepOutDebugAction, dbgactions.StepOutDebugAction.ID, dbgactions.StepOutDebugAction.LABEL),\n\t\t\t\tinstantiationService.createInstance(dbgactions.RestartDebugAction, dbgactions.RestartDebugAction.ID, dbgactions.RestartDebugAction.LABEL),\n\t\t\t\tinstantiationService.createInstance(dbgactions.StopDebugAction, dbgactions.StopDebugAction.ID, dbgactions.StopDebugAction.LABEL)\n\t\t\t];\n\n\t\t\tthis.actions.forEach(a => {\n\t\t\t\tthis.toDispose.push(a);\n\t\t\t});\n\t\t\tthis.toDispose.push(this.pauseAction);\n\t\t}\n\t\tthis.actions[0] = state === debug.State.Running ? this.pauseAction : this.continueAction;\n\n\t\treturn this.actions;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.toDispose = lifecycle.dispose(this.toDispose);\n\n\t\tif (this.$el) {\n\t\t\tthis.$el.destroy();\n\t\t\tdelete this.$el;\n\t\t}\n\t}\n}\n"]}