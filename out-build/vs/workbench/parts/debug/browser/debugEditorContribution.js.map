{"version":3,"sources":["vs/workbench/parts/debug/browser/debugEditorContribution.ts"],"names":[],"mappings":"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","file":"vs/workbench/parts/debug/browser/debugEditorContribution.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport nls = require('vs/nls');\nimport { TPromise } from 'vs/base/common/winjs.base';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport lifecycle = require('vs/base/common/lifecycle');\nimport env = require('vs/base/common/platform');\nimport uri from 'vs/base/common/uri';\nimport { IAction, Action } from 'vs/base/common/actions';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport keyboard = require('vs/base/browser/keyboardEvent');\nimport editorbrowser = require('vs/editor/browser/editorBrowser');\nimport editorcommon = require('vs/editor/common/editorCommon');\nimport { DebugHoverWidget } from 'vs/workbench/parts/debug/browser/debugHover';\nimport debugactions = require('vs/workbench/parts/debug/electron-browser/debugActions');\nimport debug = require('vs/workbench/parts/debug/common/debug');\nimport { IWorkspaceContextService } from 'vs/workbench/services/workspace/common/contextService';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\n\nconst HOVER_DELAY = 300;\n\nexport class DebugEditorContribution implements debug.IDebugEditorContribution {\n\n\tprivate toDispose: lifecycle.IDisposable[];\n\tprivate breakpointHintDecoration: string[];\n\tprivate hoverWidget: DebugHoverWidget;\n\tprivate showHoverScheduler: RunOnceScheduler;\n\tprivate hideHoverScheduler: RunOnceScheduler;\n\tprivate hoverRange: editorcommon.IEditorRange;\n\tprivate hoveringOver: string;\n\n\tstatic getDebugEditorContribution(editor: editorcommon.ICommonCodeEditor): DebugEditorContribution {\n\t\treturn <DebugEditorContribution>editor.getContribution(debug.EDITOR_CONTRIBUTION_ID);\n\t}\n\n\tconstructor(\n\t\tprivate editor: editorbrowser.ICodeEditor,\n\t\t@debug.IDebugService private debugService: debug.IDebugService,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService,\n\t\t@IContextMenuService private contextMenuService: IContextMenuService,\n\t\t@IInstantiationService private instantiationService:IInstantiationService\n\t) {\n\t\tthis.breakpointHintDecoration = [];\n\t\tthis.hoverWidget = new DebugHoverWidget(this.editor, this.debugService, this.instantiationService);\n\t\tthis.toDispose = [this.hoverWidget];\n\t\tthis.showHoverScheduler = new RunOnceScheduler(() => this.showHover(this.hoverRange, this.hoveringOver, false), HOVER_DELAY);\n\t\tthis.hideHoverScheduler = new RunOnceScheduler(() => this.hoverWidget.hide(), HOVER_DELAY);\n\t\tthis.registerListeners();\n\t}\n\n\tprivate getContextMenuActions(breakpoint: debug.IBreakpoint, uri: uri, lineNumber: number): TPromise<IAction[]> {\n\t\tconst actions = [];\n\t\tif (breakpoint) {\n\t\t\tactions.push(this.instantiationService.createInstance(debugactions.RemoveBreakpointAction, debugactions.RemoveBreakpointAction.ID, debugactions.RemoveBreakpointAction.LABEL));\n\t\t\tactions.push(this.instantiationService.createInstance(debugactions.EditConditionalBreakpointAction, debugactions.EditConditionalBreakpointAction.ID, debugactions.EditConditionalBreakpointAction.LABEL, this.editor, lineNumber));\n\t\t\tactions.push(this.instantiationService.createInstance(debugactions.ToggleEnablementAction, debugactions.ToggleEnablementAction.ID, debugactions.ToggleEnablementAction.LABEL));\n\t\t} else {\n\t\t\tactions.push(new Action(\n\t\t\t\t'addBreakpoint',\n\t\t\t\tnls.localize('addBreakpoint', \"Add Breakpoint\"),\n\t\t\t\tnull,\n\t\t\t\ttrue,\n\t\t\t\t() =>  this.debugService.toggleBreakpoint({ uri, lineNumber })\n\t\t\t));\n\t\t\tactions.push(this.instantiationService.createInstance(debugactions.AddConditionalBreakpointAction, debugactions.AddConditionalBreakpointAction.ID, debugactions.AddConditionalBreakpointAction.LABEL, this.editor, lineNumber));\n\t\t}\n\n\t\treturn TPromise.as(actions);\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis.toDispose.push(this.editor.addListener2(editorcommon.EventType.MouseDown, (e: editorbrowser.IEditorMouseEvent) => {\n\t\t\tif (e.target.type !== editorcommon.MouseTargetType.GUTTER_GLYPH_MARGIN || /* after last line */ e.target.detail) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.debugService.canSetBreakpointsIn(this.editor.getModel())) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst lineNumber = e.target.position.lineNumber;\n\t\t\tconst uri = this.editor.getModel().getAssociatedResource();\n\n\t\t\tif (e.event.rightButton || (env.isMacintosh && e.event.leftButton && e.event.ctrlKey)) {\n\t\t\t\tconst anchor = { x: e.event.posx + 1, y: e.event.posy };\n\t\t\t\tconst breakpoint = this.debugService.getModel().getBreakpoints().filter(bp => bp.lineNumber === lineNumber && bp.source.uri.toString() === uri.toString()).pop();\n\n\t\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\t\tgetAnchor: () => anchor,\n\t\t\t\t\tgetActions: () => this.getContextMenuActions(breakpoint, uri, lineNumber),\n\t\t\t\t\tgetActionsContext: () => breakpoint\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.debugService.toggleBreakpoint({ uri, lineNumber });\n\t\t\t}\n\t\t}));\n\n\t\tthis.toDispose.push(this.editor.addListener2(editorcommon.EventType.MouseMove, (e: editorbrowser.IEditorMouseEvent) => {\n\t\t\tvar showBreakpointHintAtLineNumber = -1;\n\t\t\tif (e.target.type === editorcommon.MouseTargetType.GUTTER_GLYPH_MARGIN && this.debugService.canSetBreakpointsIn(this.editor.getModel())) {\n\t\t\t\tif (!e.target.detail) {\n\t\t\t\t\t// is not after last line\n\t\t\t\t\tshowBreakpointHintAtLineNumber = e.target.position.lineNumber;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.ensureBreakpointHintDecoration(showBreakpointHintAtLineNumber);\n\t\t}));\n\t\tthis.toDispose.push(this.editor.addListener2(editorcommon.EventType.MouseLeave, (e: editorbrowser.IEditorMouseEvent) => {\n\t\t\tthis.ensureBreakpointHintDecoration(-1);\n\t\t}));\n\t\tthis.toDispose.push(this.debugService.addListener2(debug.ServiceEvents.STATE_CHANGED, () => this.onDebugStateUpdate()));\n\n\t\t// hover listeners & hover widget\n\t\tthis.toDispose.push(this.editor.addListener2(editorcommon.EventType.MouseDown, (e: editorbrowser.IEditorMouseEvent) => this.onEditorMouseDown(e)));\n\t\tthis.toDispose.push(this.editor.addListener2(editorcommon.EventType.MouseMove, (e: editorbrowser.IEditorMouseEvent) => this.onEditorMouseMove(e)));\n\t\tthis.toDispose.push(this.editor.addListener2(editorcommon.EventType.MouseLeave, (e: editorbrowser.IEditorMouseEvent) => this.hoverWidget.hide()));\n\t\tthis.toDispose.push(this.editor.addListener2(editorcommon.EventType.KeyDown, (e: keyboard.IKeyboardEvent) => this.onKeyDown(e)));\n\t\tthis.toDispose.push(this.editor.addListener2(editorcommon.EventType.ModelChanged, () => this.hideHoverWidget()));\n\t\tthis.toDispose.push(this.editor.addListener2('scroll', () => this.hideHoverWidget));\n\t}\n\n\tpublic getId(): string {\n\t\treturn debug.EDITOR_CONTRIBUTION_ID;\n\t}\n\n\tpublic showHover(range: editorcommon.IEditorRange, hoveringOver: string, focus: boolean): TPromise<void> {\n\t\treturn this.hoverWidget.showAt(range, hoveringOver, focus);\n\t}\n\n\tprivate ensureBreakpointHintDecoration(showBreakpointHintAtLineNumber: number): void {\n\t\tvar newDecoration: editorcommon.IModelDeltaDecoration[] = [];\n\t\tif (showBreakpointHintAtLineNumber !== -1) {\n\t\t\tnewDecoration.push({\n\t\t\t\toptions: DebugEditorContribution.BREAKPOINT_HELPER_DECORATION,\n\t\t\t\trange: {\n\t\t\t\t\tstartLineNumber: showBreakpointHintAtLineNumber,\n\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\tendLineNumber: showBreakpointHintAtLineNumber,\n\t\t\t\t\tendColumn: 1\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.breakpointHintDecoration = this.editor.deltaDecorations(this.breakpointHintDecoration, newDecoration);\n\t}\n\n\tprivate onDebugStateUpdate(): void {\n\t\tif (this.debugService.getState() !== debug.State.Stopped) {\n\t\t\tthis.hideHoverWidget();\n\t\t}\n\t\tthis.contextService.updateOptions('editor', {\n\t\t\thover: this.debugService.getState() !== debug.State.Stopped\n\t\t});\n\t}\n\n\tprivate hideHoverWidget(): void {\n\t\tif (!this.hideHoverScheduler.isScheduled() && this.hoverWidget.isVisible) {\n\t\t\tthis.hideHoverScheduler.schedule();\n\t\t}\n\t\tthis.showHoverScheduler.cancel();\n\t\tthis.hoveringOver = null;\n\t}\n\n\t// hover business\n\n\tprivate onEditorMouseDown(mouseEvent: editorbrowser.IEditorMouseEvent): void {\n\t\tif (mouseEvent.target.type === editorcommon.MouseTargetType.CONTENT_WIDGET && mouseEvent.target.detail === DebugHoverWidget.ID) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hideHoverWidget();\n\t}\n\n\tprivate onEditorMouseMove(mouseEvent: editorbrowser.IEditorMouseEvent): void {\n\t\tif (this.debugService.getState() !== debug.State.Stopped) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst targetType = mouseEvent.target.type;\n\t\tconst stopKey = env.isMacintosh ? 'metaKey' : 'ctrlKey';\n\n\t\tif (targetType === editorcommon.MouseTargetType.CONTENT_WIDGET && mouseEvent.target.detail === DebugHoverWidget.ID && !(<any>mouseEvent.event)[stopKey]) {\n\t\t\t// mouse moved on top of debug hover widget\n\t\t\treturn;\n\t\t}\n\t\tif (targetType === editorcommon.MouseTargetType.CONTENT_TEXT) {\n\t\t\tconst wordAtPosition = this.editor.getModel().getWordAtPosition(mouseEvent.target.range.getStartPosition());\n\t\t\tif (wordAtPosition && this.hoveringOver !== wordAtPosition.word) {\n\t\t\t\tthis.hoverRange = mouseEvent.target.range;\n\t\t\t\tthis.hoveringOver = wordAtPosition.word;\n\t\t\t\tthis.showHoverScheduler.schedule();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.hideHoverWidget();\n\t\t}\n\t}\n\n\tprivate onKeyDown(e: keyboard.IKeyboardEvent): void {\n\t\tconst stopKey = env.isMacintosh ? KeyCode.Meta : KeyCode.Ctrl;\n\t\tif (e.keyCode !== stopKey) {\n\t\t\t// do not hide hover when Ctrl/Meta is pressed\n\t\t\tthis.hideHoverWidget();\n\t\t}\n\t}\n\n\t// end hover business\n\n\tprivate static BREAKPOINT_HELPER_DECORATION: editorcommon.IModelDecorationOptions = {\n\t\tglyphMarginClassName: 'debug-breakpoint-hint-glyph',\n\t\tstickiness: editorcommon.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n\t};\n\n\tpublic dispose(): void {\n\t\tthis.toDispose = lifecycle.dispose(this.toDispose);\n\t}\n}\n"]}