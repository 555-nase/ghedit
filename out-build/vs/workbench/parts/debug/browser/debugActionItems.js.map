{"version":3,"sources":["vs/workbench/parts/debug/browser/debugActionItems.ts"],"names":[],"mappings":"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","file":"vs/workbench/parts/debug/browser/debugActionItems.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport nls = require('vs/nls');\nimport lifecycle = require('vs/base/common/lifecycle');\nimport errors = require('vs/base/common/errors');\nimport { TPromise } from 'vs/base/common/winjs.base';\nimport dom = require('vs/base/browser/dom');\nimport { IAction } from 'vs/base/common/actions';\nimport { BaseActionItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IDebugService, ServiceEvents, State } from 'vs/workbench/parts/debug/common/debug';\nimport { IConfigurationService, ConfigurationServiceEventTypes } from 'vs/platform/configuration/common/configuration';\n\nexport class SelectConfigActionItem extends BaseActionItem {\n\n\tprivate select: HTMLSelectElement;\n\tprivate toDispose: lifecycle.IDisposable[];\n\n\tconstructor(\n\t\taction: IAction,\n\t\t@IDebugService private debugService: IDebugService,\n\t\t@IConfigurationService configurationService: IConfigurationService\n\t) {\n\t\tsuper(null, action);\n\n\t\tthis.select = document.createElement('select');\n\t\tthis.select.className = 'debug-select action-bar-select';\n\n\t\tthis.toDispose = [];\n\t\tthis.registerListeners(configurationService);\n\t}\n\n\tprivate registerListeners(configurationService: IConfigurationService): void {\n\t\tthis.toDispose.push(dom.addStandardDisposableListener(this.select, 'change', (e) => {\n\t\t\tthis.actionRunner.run(this._action, e.target.value).done(null, errors.onUnexpectedError);\n\t\t}));\n\t\tthis.toDispose.push(this.debugService.addListener2(ServiceEvents.STATE_CHANGED, () => {\n\t\t\tthis.select.disabled = this.debugService.getState() !== State.Inactive;\n\t\t}));\n\t\tthis.toDispose.push(configurationService.addListener2(ConfigurationServiceEventTypes.UPDATED, e  => {\n\t\t\tthis.setOptions().done(null, errors.onUnexpectedError);\n\t\t}));\n\t}\n\n\tpublic render(container: HTMLElement): void {\n\t\tdom.addClass(container, 'select-container');\n\t\tcontainer.appendChild(this.select);\n\t\tthis.setOptions().done(null, errors.onUnexpectedError);\n\t}\n\n\tpublic focus(): void {\n\t\tif (this.select) {\n\t\t\tthis.select.focus();\n\t\t}\n\t}\n\n\tpublic blur(): void {\n\t\tif (this.select) {\n\t\t\tthis.select.blur();\n\t\t}\n\t}\n\n\tprivate setOptions(): TPromise<any> {\n\t\tlet previousSelectedIndex = this.select.selectedIndex;\n\t\tthis.select.options.length = 0;\n\n\t\treturn this.debugService.loadLaunchConfig().then(config => {\n\t\t\tif (!config || !config.configurations) {\n\t\t\t\tthis.select.add(this.createOption(`<${ nls.localize('none', \"none\") }>`));\n\t\t\t\tthis.select.disabled = true;\n\t\t\t\treturn this.actionRunner.run(this._action, null);\n\t\t\t}\n\n\t\t\tconst configurations = config.configurations;\n\t\t\tthis.select.disabled = configurations.length < 1;\n\n\t\t\tlet found = false;\n\t\t\tconst configurationName = this.debugService.getConfigurationName();\n\t\t\tfor (let i = 0; i < configurations.length; i++) {\n\t\t\t\tthis.select.add(this.createOption(configurations[i].name));\n\t\t\t\tif (configurationName === configurations[i].name) {\n\t\t\t\t\tthis.select.selectedIndex = i;\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!found && configurations.length > 0) {\n\t\t\t\tif (!previousSelectedIndex || previousSelectedIndex < 0 || previousSelectedIndex >= configurations.length) {\n\t\t\t\t\tpreviousSelectedIndex = 0;\n\t\t\t\t}\n\t\t\t\tthis.select.selectedIndex = previousSelectedIndex;\n\t\t\t\treturn this.actionRunner.run(this._action, configurations[previousSelectedIndex].name);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate createOption(value: string): HTMLOptionElement {\n\t\tconst option = document.createElement('option');\n\t\toption.value = value;\n\t\toption.text = value;\n\n\t\treturn option;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.debugService = null;\n\t\tthis.toDispose = lifecycle.dispose(this.toDispose);\n\n\t\tsuper.dispose();\n\t}\n}"]}