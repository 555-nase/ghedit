{"version":3,"sources":["vs/workbench/parts/files/browser/views/explorerViewer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;IAAA;;;oGAGgG;IAChG,YAAY,CAAC;IA6Cb;QAGC,wBAC2B,eAAiC,EAClC,cAA+B,EAClC,WAAyB,EACzB,WAAyB,EACrB,cAAwC;YAJxC,oBAAe,GAAf,eAAe,CAAkB;YAClC,mBAAc,GAAd,cAAc,CAAiB;YAClC,gBAAW,GAAX,WAAW,CAAc;YACzB,gBAAW,GAAX,WAAW,CAAc;YAG/C,IAAI,CAAC,SAAS,GAAG,cAAc,CAAC,YAAY,EAAE,CAAC;QAChD,CAAC;QAEM,8BAAK,GAAZ,UAAa,IAAW,EAAE,IAAc;YACvC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;QACrB,CAAC;QAEM,oCAAW,GAAlB,UAAmB,IAAW,EAAE,IAAc;YAC7C,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;QACzB,CAAC;QAEM,oCAAW,GAAlB,UAAmB,IAAW,EAAE,IAAc;YAA9C,iBAkCC;YAhCA,2CAA2C;YAC3C,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBAC9B,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACnC,CAAC;YAGD,IAAI,CAAC,CAAC;gBAEL,UAAU;gBACV,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,6BAA6B,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,OAAkB;oBAE1H,wBAAwB;oBACxB,IAAI,YAAY,GAAG,4BAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;oBAE5C,yBAAyB;oBACzB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBACvD,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;oBACzC,CAAC;oBAED,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;oBAEhC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;gBACtB,CAAC,EAAE,UAAC,CAAM;oBACT,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;oBAE5C,MAAM,CAAC,EAAE,CAAC,CAAC,wDAAwD;gBACpE,CAAC,CAAC,CAAC;gBAEH,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,+BAA+B,CAAC,CAAC;gBAEnH,MAAM,CAAC,OAAO,CAAC;YAChB,CAAC;QACF,CAAC;QAEM,kCAAS,GAAhB,UAAiB,IAAW,EAAE,IAAc;YAC3C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACX,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,8CAA8C;YACzE,CAAC;YAED,yBAAyB;YACzB,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;gBACvF,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;YAC1B,CAAC;YAED,oCAAoC;YACpC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjB,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,CAAC;YAED,8FAA8F;YAC9F,kGAAkG;YAClG,sGAAsG;YACtG,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QAxEA;uBAAC,2BAAgB;uBAChB,yBAAe;uBACf,oBAAY;uBACZ,0BAAY;uBACZ,yCAAwB;0BAJR;QAyEnB,qBAAC;IAAD,CA7EA,AA6EC,IAAA;IA7EY,sBAAc,iBA6E1B,CAAA;IAED;QAAwC,sCAA2B;QAGlE,4BAAY,KAAU;YACrB,iBAAO,CAAC;YAER,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACpB,CAAC;QAEM,uCAAU,GAAjB,UAAkB,IAAW,EAAE,IAAc;YAC5C,EAAE,CAAC,CAAC,IAAI,YAAY,sCAAkB,CAAC,CAAC,CAAC;gBACxC,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;YAED,MAAM,CAAC,gBAAK,CAAC,UAAU,YAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACrC,CAAC;QAEM,uCAAU,GAAjB,UAAkB,IAAW,EAAE,IAAc;YAC5C,EAAE,CAAC,CAAC,IAAI,YAAY,sCAAkB,CAAC,CAAC,CAAC;gBACxC,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YACxB,CAAC;YAED,MAAM,CAAC,gBAAK,CAAC,UAAU,YAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACrC,CAAC;QAEM,gDAAmB,GAA1B,UAA2B,IAAW,EAAE,IAAc;YACrD,EAAE,CAAC,CAAC,IAAI,YAAY,sCAAkB,CAAC,CAAC,CAAC;gBACxC,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;YAED,MAAM,CAAC,gBAAK,CAAC,mBAAmB,YAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAC9C,CAAC;QAEM,gDAAmB,GAA1B,UAA2B,IAAW,EAAE,IAAc;YACrD,EAAE,CAAC,CAAC,IAAI,YAAY,sCAAkB,CAAC,CAAC,CAAC;gBACxC,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YACxB,CAAC;YAED,MAAM,CAAC,gBAAK,CAAC,mBAAmB,YAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAC9C,CAAC;QAIM,sCAAS,GAAhB,UAAiB,IAAW,EAAE,IAAc,EAAE,GAAQ,EAAE,OAAiB;YAAzE,iBAqCC;YArCuD,uBAAiB,GAAjB,YAAiB;YACxE,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC;gBACvB,YAAY,EAAE,IAAI,CAAC,KAAK;gBACxB,IAAI,EAAE,IAAI;aACV,EAAE,OAAO,CAAC,CAAC;YAEZ,EAAE,CAAC,CAAC,CAAC,gBAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,MAAM,GAAoB,GAAG,CAAC;gBAClC,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;oBACpB,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBAC5B,CAAC;gBAED,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YAED,IAAI,EAAE,GAAW,GAAG,CAAC;YACrB,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,qBAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YAE1F,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,UAAC,OAA0B;gBAC9C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;oBACpD,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;wBAChD,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;oBAChC,CAAC;gBACF,CAAC;gBAED,OAAO,GAAG,KAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,KAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,qBAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBAExG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,UAAC,OAA0B;oBAC9C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;wBACpD,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;4BAChD,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;wBAChC,CAAC;oBACF,CAAC;oBAED,MAAM,CAAC,IAAI,CAAC;gBACb,CAAC,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;QACJ,CAAC;QACF,yBAAC;IAAD,CAjFA,AAiFC,CAjFuC,+CAA2B,GAiFlE;IAjFY,0BAAkB,qBAiF9B,CAAA;IAED;QAIC;YACC,IAAI,CAAC,eAAe,GAAG,IAAI,kBAAkB,CAAC,IAAI,CAAC,CAAC;YACpD,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC1C,CAAC;QAED,sBAAW,4CAAc;iBAAzB;gBACC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC;YAC7B,CAAC;;;WAAA;QAEM,0CAAe,GAAtB,UAAuB,IAAc;YACpC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC;QACtE,CAAC;QAEM,sCAAW,GAAlB,UAAmB,IAAc,EAAE,YAA2B;YAC7D,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,YAAY,CAAC;YAC9E,CAAC;QACF,CAAC;QAEM,wCAAa,GAApB,UAAqB,IAAc;YAClC,OAAO,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC;QACtE,CAAC;QACF,uBAAC;IAAD,CA1BA,AA0BC,IAAA;IA1BY,wBAAgB,mBA0B5B,CAAA;IAED;QAAkC,gCAAoB;QAGrD,sBAAY,KAAuB;YAClC,iBAAO,CAAC;YAER,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC3B,CAAC;QAEM,0BAAG,GAAV,UAAW,MAAuB,EAAE,OAAa;YAChD,MAAM,CAAC,gBAAK,CAAC,GAAG,YAAC,MAAM,EAAE,EAAE,YAAY,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;QAC/D,CAAC;QACF,mBAAC;IAAD,CAZA,AAYC,CAZiC,OAAO,CAAC,YAAY,GAYrD;IAZY,oBAAY,eAYxB,CAAA;IAED,oBAAoB;IACpB;QAAkC,gCAAe;QAGhD,sBACC,KAAuB,EACvB,YAAmC,EACN,kBAAuC;YAEpE,kBAAM;gBACL,cAAc,EAAE,KAAK,CAAC,cAAc;gBACpC,YAAY,EAAE,YAAY;aAC1B,CAAC,CAAC;YAL0B,uBAAkB,GAAlB,kBAAkB,CAAqB;YAOpE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACpB,CAAC;QAEM,uCAAgB,GAAvB,UAAwB,IAAW,EAAE,OAAY;YAChD,MAAM,CAAC,EAAE,CAAC;QACX,CAAC;QAEM,qCAAc,GAArB,UAAsB,IAAW,EAAE,IAAc,EAAE,UAAuB,EAAE,iBAAmC;YAA/G,iBA0DC;YAzDA,IAAI,EAAE,GAAG,WAAC,CAAC,UAAU,CAAC,CAAC,aAAa,EAAE,CAAC;YACvC,IAAI,IAAI,GAAG,WAAC,CAAC,gBAAgB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YAE3E,oBAAoB;YACpB,IAAI,YAAY,GAAkB,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YACnE,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACnB,IAAI,KAAK,GAAG,WAAC,CAAC,sBAAsB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACrD,WAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;gBAC7C,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YAED,+DAA+D;YAC/D,IAAI,QAAQ,GAAG,IAAI,mBAAQ,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE,IAAI,CAAC,kBAAkB,EAAE;gBAC3E,iBAAiB,EAAE;oBAClB,UAAU,EAAE,YAAY,CAAC,SAAS;oBAClC,WAAW,EAAE,IAAI;iBACjB;gBACD,SAAS,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAoB,EAAE,IAA6D,CAAC;aAC5G,CAAC,CAAC;YAEH,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC;YAC5B,IAAI,OAAO,GAAG,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;YAErC,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;YACvB,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,OAAO,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,OAAO,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC;YAC9F,QAAQ,CAAC,KAAK,EAAE,CAAC;YAEjB,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAgB,UAAA,MAAM;gBAC1C,IAAI,CAAC,cAAc,EAAE,CAAC;gBAEtB,EAAE,CAAC,CAAC,MAAM,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;oBAC9B,KAAI,CAAC,KAAK,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,YAAY,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;gBACjG,CAAC;gBAED,UAAU,CAAC;oBACV,IAAI,CAAC,QAAQ,EAAE,CAAC;oBAChB,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;gBAC9B,CAAC,EAAE,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;YAEH,IAAI,SAAS,GAAG;gBACf,QAAQ;gBACR,GAAG,CAAC,6BAA6B,CAAC,QAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,SAAS,CAAC,QAAQ,EAAE,UAAC,CAAiB;oBAClG,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,4BAAiB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;wBACvC,EAAE,CAAC,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;4BACzB,IAAI,CAAC,IAAI,CAAC,CAAC;wBACZ,CAAC;oBACF,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,4BAAiB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;wBAC/C,IAAI,CAAC,KAAK,CAAC,CAAC;oBACb,CAAC;gBACF,CAAC,CAAC;gBACF,GAAG,CAAC,qBAAqB,CAAC,QAAQ,CAAC,YAAY,EAAE,MAAM,EAAE;oBACxD,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,CAAC;gBAC/B,CAAC,CAAC;aACF,CAAC;YAEF,MAAM,CAAC,cAAM,OAAA,IAAI,CAAC,IAAI,CAAC,EAAV,CAAU,CAAC;QACzB,CAAC;QAEO,gCAAS,GAAjB,UAAkB,OAAiB;YAClC,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBACzB,MAAM,CAAC,aAAa,CAAC;YACtB,CAAC;YAED,MAAM,CAAC,gBAAgB,CAAC;QACzB,CAAC;QAhFA;uBAAC,iCAAmB;wBAAA;QAiFtB,mBAAC;IAAD,CAvFA,AAuFC,CAvFiC,iCAAe,GAuFhD;IAvFY,oBAAY,eAuFxB,CAAA;IAED,kCAAkC;IAClC;QAAA;QAKA,CAAC;QAHO,gDAAY,GAAnB,UAAoB,IAAW,EAAE,IAAc;YAC9C,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAA8B,EAAE,IAAqB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACvF,CAAC;QACF,gCAAC;IAAD,CALA,AAKC,IAAA;IALY,iCAAyB,4BAKrC,CAAA;IAED,sBAAsB;IACtB;QAAoC,kCAAiB;QAMpD,wBAAY,KAAuB,EACD,aAAsC,EAC7C,eAAiC,EAC9B,kBAAuC,EAC7C,YAA2B,EACnB,oBAA2C,EAC/C,gBAAmC,EAC5B,cAAwC;YAE1E,kBAAM,EAAE,aAAa,EAAE,4BAAa,CAAC,aAAa,EAAE,CAAC,CAAC;YARrB,kBAAa,GAAb,aAAa,CAAyB;YAC7C,oBAAe,GAAf,eAAe,CAAkB;YAC9B,uBAAkB,GAAlB,kBAAkB,CAAqB;YAC7C,iBAAY,GAAZ,YAAY,CAAe;YACnB,yBAAoB,GAApB,oBAAoB,CAAuB;YAC/C,qBAAgB,GAAhB,gBAAgB,CAAmB;YAC5B,mBAAc,GAAd,cAAc,CAA0B;YAI1E,IAAI,CAAC,SAAS,GAAG,cAAc,CAAC,YAAY,EAAE,CAAC;YAE/C,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAE/B,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,QAAQ,CAAC,WAAW,GAAG,4BAAiB,CAAC,kBAAkB,GAAG,4BAAiB,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACtJ,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,QAAQ,CAAC,WAAW,GAAG,4BAAiB,CAAC,kBAAkB,GAAG,4BAAiB,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAClJ,EAAE,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC1B,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,4BAAiB,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,uCAAuC;YAC7I,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,4BAAiB,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,uCAAuC;YAC7I,CAAC;YACD,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,QAAQ,CAAC,WAAW,GAAG,4BAAiB,CAAC,KAAK,GAAG,4BAAiB,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC/H,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,4BAAiB,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACvF,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,4BAAiB,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAExF,EAAE,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC1B,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,4BAAiB,CAAC,gBAAgB,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC9F,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,4BAAiB,CAAC,iBAAiB,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAClG,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,4BAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBACtF,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,4BAAiB,CAAC,YAAY,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC7F,CAAC;YAED,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACpB,CAAC;QAED,eAAe,CAAQ,oCAAW,GAAlB,UAAmB,IAAW,EAAE,IAAc,EAAE,KAAkB,EAAE,MAAwB;YAAxB,sBAAwB,GAAxB,gBAAwB;YAC3G,IAAI,OAAO,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;YACjC,IAAI,aAAa,GAAG,CAAC,MAAM,KAAK,OAAO,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;YAE/D,wBAAwB;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;gBAEzB,eAAe;gBACf,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,KAAK,CAAC,eAAe,EAAE,CAAC;gBAExB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;gBAE7B,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;YAED,cAAc;YACd,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;gBACvF,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;gBACzB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;gBAE7B,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;YAED,eAAe;YACf,IAAI,WAAW,GAAG,KAAK,IAAI,KAAK,CAAC,YAAY,IAAI,KAAK,CAAC,YAAY,CAAC,IAAI,KAAK,WAAW,CAAC;YACzF,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;gBAClB,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC,8EAA8E;YACvG,CAAC;YACD,KAAK,CAAC,eAAe,EAAE,CAAC;YAExB,gBAAgB;YAChB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAEhB,oBAAoB;YACpB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YAE3B,oBAAoB;YACpB,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,YAAY,sCAAkB,CAAC,CAAC,CAAC,CAAC;gBAC7D,IAAI,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpC,EAAE,CAAC,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;oBAChE,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;gBAC9B,CAAC;YACF,CAAC;YAGD,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,YAAY,sCAAkB,CAAC,CAAC,CAAC,CAAC;gBAChD,IAAI,aAAa,GAAG,CAAC,aAAa,CAAC;gBACnC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;gBAE7B,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;oBACnB,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC,oDAAoD;gBAC7E,CAAC;gBAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACvB,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,CAAC,CAAC;oBAEnC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,aAAa,EAAE,KAAK,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;oBAEhF,wCAAwC;oBACxC,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;wBACnB,IAAI,CAAC,eAAe,CAAC,oBAAoB,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;oBAC5D,CAAC;gBACF,CAAC;YACF,CAAC;YAED,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QAEM,sCAAa,GAApB,UAAqB,IAAW,EAAE,IAAc,EAAE,KAAuB;YAAzE,iBAkCC;YAjCA,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,OAAO,IAAI,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,KAAK,OAAO,CAAC,CAAC,CAAC;gBAC5F,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;YAED,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;YAExB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAEpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;gBAChE,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YAED,IAAI,MAAM,GAAG,EAAE,CAAC,EAAE,KAAK,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,IAAI,EAAE,CAAC;YAClD,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC;gBACvC,SAAS,EAAE,cAAM,OAAA,MAAM,EAAN,CAAM;gBACvB,UAAU,EAAE,cAAM,OAAA,KAAI,CAAC,KAAK,CAAC,cAAc,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,EAAzD,CAAyD;gBAC3E,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC;gBAClG,aAAa,EAAE,UAAC,CAAC,IAAiB,OAAA,iCAAmB,CAAC,CAAC,CAAC,EAAE,CAAC,EAAzB,CAAyB;gBAC3D,iBAAiB,EAAE;oBAClB,MAAM,CAAC;wBACN,YAAY,EAAE,KAAI,CAAC,KAAK;wBACxB,IAAI,EAAE,IAAI;qBACV,CAAC;gBACH,CAAC;gBACD,MAAM,EAAE,UAAC,YAAsB;oBAC9B,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;wBAClB,IAAI,CAAC,QAAQ,EAAE,CAAC;oBACjB,CAAC;gBACF,CAAC;aACD,CAAC,CAAC;YAEH,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QAEO,oCAAW,GAAnB,UAAoB,IAAW,EAAE,KAAqB;YACrD,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;gBACzB,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;YAED,IAAI,OAAO,GAAG,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC;YAErC,IAAI,IAAI,GAAa,IAAI,CAAC,QAAQ,EAAE,CAAC;YACrC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBAEV,8BAA8B;gBAC9B,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;gBAC5B,CAAC;gBAGD,IAAI,CAAC,CAAC;oBACL,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;oBAC7B,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;gBACrC,CAAC;YACF,CAAC;YAED,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAE9B,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QAEO,kCAAS,GAAjB,UAAkB,IAAW,EAAE,KAAqB;YACnD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;gBACpD,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;YAED,IAAI,IAAI,GAAa,IAAI,CAAC,QAAQ,EAAE,CAAC;YACrC,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC/B,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;YACrC,CAAC;YAED,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAE/B,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QAEO,0CAAiB,GAAzB,UAA0B,IAAW,EAAE,KAAqB;YAC3D,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;gBACzB,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;YAED,IAAI,IAAI,GAAa,IAAI,CAAC,QAAQ,EAAE,CAAC;YACrC,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC/B,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;YACpC,CAAC;YAED,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAE/B,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QAEO,+BAAM,GAAd,UAAe,IAAW,EAAE,KAAqB;YAChD,IAAI,IAAI,GAAa,IAAI,CAAC,QAAQ,EAAE,CAAC;YACrC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACV,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,iCAAiC,CAAC,CAAC,IAAI,EAAE,CAAC;gBAErE,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YAED,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEO,gCAAO,GAAf,UAAgB,IAAW,EAAE,KAAqB;YACjD,IAAI,IAAI,GAAa,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAY;YACnE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACV,IAAI,WAAW,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,6BAAe,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;gBACxF,EAAE,CAAC,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;oBAC9B,WAAW,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;oBAEvD,MAAM,CAAC,IAAI,CAAC;gBACb,CAAC;YACF,CAAC;YAED,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEO,mCAAU,GAAlB,UAAmB,IAAc,EAAE,aAAsB,EAAE,UAAmB;YAC7E,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC/B,IAAI,WAAW,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,iCAAe,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;gBAC9G,IAAI,aAAa,GAAG,IAAI,sBAAa,EAAE,CAAC;gBACxC,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;oBACnB,aAAa,CAAC,aAAa,GAAG,IAAI,CAAC;gBACpC,CAAC;gBAED,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,yBAAyB,EAAE,EAAE,EAAE,EAAE,0BAA0B,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,CAAC;gBAEjH,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,WAAW,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;YAC5G,CAAC;QACF,CAAC;QAEO,6BAAI,GAAZ,UAAa,IAAW,EAAE,KAAqB;YAC9C,IAAI,IAAI,GAAa,IAAI,CAAC,QAAQ,EAAE,CAAC;YAErC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACV,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,sCAAsC,CAAC,CAAC,IAAI,EAAE,CAAC;gBAE1E,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YAED,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEO,iCAAQ,GAAhB,UAAiB,IAAW,EAAE,KAAqB;YAClD,IAAI,QAAQ,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC;YAC/B,IAAI,IAAI,GAAa,IAAI,CAAC,QAAQ,EAAE,CAAC;YACrC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACV,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,GAAG,wCAAwC,GAAG,mCAAmC,CAAC,CAAC,IAAI,EAAE,CAAC;gBAE7H,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YAED,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEO,kCAAS,GAAjB,UAAkB,IAAW,EAAE,IAAc,EAAE,EAAU;YACxD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QAC5D,CAAC;QAvQA;uBAAC,uCAAuB;uBACvB,wBAAgB;uBAChB,iCAAmB;uBACnB,qBAAa;uBACb,qCAAqB;uBACrB,6BAAiB;uBACjB,yCAAwB;0BAND;QAwQ1B,qBAAC;IAAD,CA/QA,AA+QC,CA/QmC,gCAAiB,GA+QpD;IA/QY,sBAAc,iBA+Q1B,CAAA;IAED,kBAAkB;IAClB;QAAA;QAyBA,CAAC;QAvBO,4BAAO,GAAd,UAAe,IAAW,EAAE,KAAe,EAAE,KAAe;YAC3D,EAAE,CAAC,CAAC,KAAK,CAAC,WAAW,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC7C,MAAM,CAAC,CAAC,CAAC,CAAC;YACX,CAAC;YAED,EAAE,CAAC,CAAC,KAAK,CAAC,WAAW,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC7C,MAAM,CAAC,CAAC,CAAC;YACV,CAAC;YAED,EAAE,CAAC,CAAC,KAAK,CAAC,WAAW,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC5C,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;YACzE,CAAC;YAED,EAAE,CAAC,CAAC,KAAK,YAAY,sCAAkB,CAAC,CAAC,CAAC;gBACzC,MAAM,CAAC,CAAC,CAAC,CAAC;YACX,CAAC;YAED,EAAE,CAAC,CAAC,KAAK,YAAY,sCAAkB,CAAC,CAAC,CAAC;gBACzC,MAAM,CAAC,CAAC,CAAC;YACV,CAAC;YAED,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;QAC3D,CAAC;QACF,iBAAC;IAAD,CAzBA,AAyBC,IAAA;IAzBY,kBAAU,aAyBtB,CAAA;IAED,kBAAkB;IAClB;QAGC,oBAA+C,cAAwC;YAAxC,mBAAc,GAAd,cAAc,CAA0B;YACtF,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC7C,CAAC;QAEM,wCAAmB,GAA1B,UAA2B,aAAkC;YAC5D,IAAI,cAAc,GAAG,CAAC,aAAa,IAAI,aAAa,CAAC,KAAK,IAAI,aAAa,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAClH,IAAI,YAAY,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,cAAc,CAAC,CAAC;YAE1E,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,6DAA6D;YAEpH,MAAM,CAAC,YAAY,CAAC;QACrB,CAAC;QAEM,8BAAS,GAAhB,UAAiB,IAAW,EAAE,IAAc;YAC3C,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;QAEO,gCAAW,GAAnB,UAAoB,IAAc;YACjC,EAAE,CAAC,CAAC,IAAI,YAAY,sCAAkB,CAAC,CAAC,CAAC;gBACxC,MAAM,CAAC,IAAI,CAAC,CAAC,iBAAiB;YAC/B,CAAC;YAED,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,IAAI,EAAN,CAAM,CAAC,CAAC;YAE5F,wCAAwC;YACxC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC7G,MAAM,CAAC,KAAK,CAAC,CAAC,yBAAyB;YACxC,CAAC;YAED,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QA9BY;uBAAC,yCAAwB;sBAAA;QA+BvC,iBAAC;IAAD,CAlCA,AAkCC,IAAA;IAlCY,kBAAU,aAkCtB,CAAA;IAED,oCAAoC;IACpC;QAEC,yBAC0B,cAA+B,EACtB,cAAwC,EACnD,YAA2B,EACxB,eAAiC,EACrC,WAAyB,EAChB,oBAA2C,EAChD,eAAiC;YANlC,mBAAc,GAAd,cAAc,CAAiB;YACtB,mBAAc,GAAd,cAAc,CAA0B;YACnD,iBAAY,GAAZ,YAAY,CAAe;YACxB,oBAAe,GAAf,eAAe,CAAkB;YACrC,gBAAW,GAAX,WAAW,CAAc;YAChB,yBAAoB,GAApB,oBAAoB,CAAuB;YAChD,oBAAe,GAAf,eAAe,CAAkB;QAE5D,CAAC;QAEM,oCAAU,GAAjB,UAAkB,IAAW,EAAE,IAAc;YAC5C,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;QAClD,CAAC;QAEM,qCAAW,GAAlB,UAAmB,IAAW,EAAE,IAAsB,EAAE,aAA6B;YACpF,IAAI,OAAO,GAAe,IAAI,CAAC,OAAO,EAAE,CAAC;YACzC,IAAI,MAAM,GAAa,IAAI,CAAC;YAC5B,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxB,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YACrB,CAAC;YAED,0EAA0E;YAC1E,EAAE,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,WAAW,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC7D,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAC9B,CAAC;YAED,8FAA8F;YAC9F,4EAA4E;YAC5E,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,YAAY,gCAAsB,CAAC,CAAC,CAAC,CAAC;gBAC/C,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;oBACnC,aAAa,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC,kBAAW,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;gBACrH,CAAC;YACF,CAAC;QACF,CAAC;QAEM,oCAAU,GAAjB,UAAkB,IAAW,EAAE,IAAsB,EAAE,MAAgB,EAAE,aAA6B;YACrG,IAAI,MAAM,GAAG,aAAa,IAAI,CAAC,CAAC,aAAa,CAAC,OAAO,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;YACnI,IAAI,WAAW,GAAG,IAAI,YAAY,gCAAsB,CAAC;YAEzD,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC/C,MAAM,CAAC,uBAAgB,CAAC;YACzB,CAAC;YAED,cAAc;YACd,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;gBACjB,IAAI,QAAQ,GAA4B,IAAK,CAAC,OAAO,EAAE,CAAC;gBAExD,IAAI,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;gBAC3B,IAAI,UAAU,GAAa,EAAE,CAAC;gBAC9B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACvC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3B,CAAC;gBAED,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAC,IAAI,IAAO,MAAM,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACzF,MAAM,CAAC,uBAAgB,CAAC;gBACzB,CAAC;YACF,CAAC;YAGD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,YAAY,yCAA+B,CAAC,CAAC,CAAC;gBAC1D,MAAM,CAAC,uBAAgB,CAAC;YACzB,CAAC;YAGD,IAAI,CAAC,CAAC;gBACL,IAAI,OAAO,GAAe,IAAI,CAAC,OAAO,EAAE,CAAC;gBACzC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBAC7B,MAAM,CAAC,uBAAgB,CAAC;gBACzB,CAAC;gBAED,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,UAAC,MAAM;oBACvB,EAAE,CAAC,CAAC,MAAM,YAAY,sCAAkB,CAAC,CAAC,CAAC;wBAC1C,MAAM,CAAC,IAAI,CAAC,CAAC,uCAAuC;oBACrD,CAAC;oBAED,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;wBAC/D,MAAM,CAAC,IAAI,CAAC,CAAC,oCAAoC;oBAClD,CAAC;oBAED,EAAE,CAAC,CAAC,CAAC,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;wBACjF,MAAM,CAAC,IAAI,CAAC,CAAC,wDAAwD;oBACtE,CAAC;oBAED,EAAE,CAAC,CAAC,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;wBAC3E,MAAM,CAAC,IAAI,CAAC,CAAC,wDAAwD;oBACtE,CAAC;oBAED,MAAM,CAAC,KAAK,CAAC;gBACd,CAAC,CAAC,CAAC,CAAC,CAAC;oBACJ,MAAM,CAAC,uBAAgB,CAAC;gBACzB,CAAC;YACF,CAAC;YAED,MAAM;YACN,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;gBACxB,MAAM,CAAC,WAAW,IAAI,MAAM,GAAG,wCAAiC,GAAG,mCAA4B,CAAC;YACjG,CAAC;YAED,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;gBAC3F,MAAM,CAAC,WAAW,IAAI,MAAM,GAAG,sCAA+B,GAAG,iCAA0B,CAAC;YAC7F,CAAC;YAED,MAAM,CAAC,uBAAgB,CAAC;QACzB,CAAC;QAEM,8BAAI,GAAX,UAAY,IAAW,EAAE,IAAsB,EAAE,MAAgB,EAAE,aAA6B;YAAhG,iBA4FC;YA3FA,IAAI,OAAO,GAAmB,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;YAEhD,4BAA4B;YAC5B,EAAE,CAAC,CAAC,IAAI,YAAY,gCAAsB,CAAC,CAAC,CAAC;gBAC5C,IAAI,YAAY,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,8BAAgB,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;gBAClG,OAAO,GAAG,YAAY,CAAC,GAAG,CAAC;oBAC1B,KAAK,EAAE;wBACN,KAAK,EAAqC,IAAK,CAAC,OAAO,EAAE,CAAC,KAAK;qBAC/D;iBACD,CAAC,CAAC;YACJ,CAAC;YAGD,IAAI,CAAC,CAAC;gBACL,IAAI,QAAM,GAAa,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;gBACzC,IAAI,QAAM,GAAG,CAAC,aAAa,CAAC,OAAO,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,QAAQ,CAAC,WAAW,CAAC,CAAC;gBAEhH,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;oBAElC,8BAA8B;oBAC9B,EAAE,CAAC,CAAC,QAAM,CAAC,CAAC,CAAC;wBACZ,IAAI,UAAU,GAAG,KAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,iCAAmB,EAAE,IAAI,EAAE,QAAM,EAAE,MAAM,CAAC,CAAC;wBACrG,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;oBACzB,CAAC;oBAED,eAAe;oBACf,IAAI,mBAAmB,GAAsB,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;oBAC/D,EAAE,CAAC,CAAC,KAAI,CAAC,eAAe,CAAC,OAAO,CAAC,QAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;wBACnD,IAAI,GAAG,GAAG,KAAI,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,QAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;wBAC9D,EAAE,CAAC,CAAC,GAAG,KAAK,qBAAa,CAAC,IAAI,CAAC,CAAC,CAAC;4BAChC,mBAAmB,GAAG,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAM,CAAC,QAAQ,CAAC,CAAC;wBAClE,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,qBAAa,CAAC,SAAS,CAAC,CAAC,CAAC;4BAC5C,mBAAmB,GAAG,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC,QAAM,CAAC,QAAQ,CAAC,CAAC;wBACpE,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,qBAAa,CAAC,MAAM,CAAC,CAAC,CAAC;4BACzC,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;wBAC1B,CAAC;oBACF,CAAC;oBAED,kDAAkD;oBAClD,MAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC;wBAE/B,4GAA4G;wBAC5G,EAAE,CAAC,CAAC,KAAI,CAAC,eAAe,CAAC,OAAO,CAAC,QAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;4BACnD,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAQ,CAAC,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAkB,EAAE,IAA8D,EAAE,MAAM,CAAC,YAAY,CAAC,QAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;4BAEnL,MAAM,CAAC,qBAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;wBAC1B,CAAC;wBAED,IAAI,cAAc,GAAG,aAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAM,CAAC,IAAI,CAAC,CAAC,CAAC;wBAC/E,IAAI,iBAAiB,GAAG,KAAK,CAAC;wBAE9B,IAAI,MAAM,GAAG,UAAC,MAAiB;4BAC9B,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,4BAA4B,EAAE,IAAI,4BAAoB,CAAC,QAAM,CAAC,KAAK,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC;wBACxG,CAAC,CAAC;wBAEF,kCAAkC;wBAClC,MAAM,CAAC,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAM,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAC,KAAK;4BAEpF,WAAW;4BACX,EAAE,CAAC,CAAwB,KAAM,CAAC,mBAAmB,KAAK,2BAAmB,CAAC,kBAAkB,CAAC,CAAC,CAAC;gCAClG,iBAAiB,GAAG,IAAI,CAAC;gCAEzB,IAAI,SAAO,GAAkB;oCAC5B,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAyB,EAAE,IAA4E,EAAE,QAAM,CAAC,IAAI,CAAC;oCAC3I,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAc,EAAE,IAA8B,CAAC;oCACpE,aAAa,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAiE,CAA/D,CAAiE,EAA9D,EAAE,AAAuE,CAAC,mBAApD,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;iCAC3F,CAAC;gCAEF,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,SAAO,CAAC,CAAC,CAAC,CAAC;oCAC1C,MAAM,CAAC,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAM,CAAC,QAAQ,EAAE,cAAc,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;wCACnF,IAAI,eAAe,GAAG,IAAI,4BAAQ,CAAC,cAAc,CAAC,CAAC;wCACnD,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,4BAA4B,EAAE,IAAI,4BAAoB,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC,CAAC;wCAEtG,MAAM,CAAC,MAAM,CAAC,CAAC;oCAChB,CAAC,EAAE,UAAC,KAAK;wCACR,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;oCACjD,CAAC,CAAC,CAAC;gCACJ,CAAC;gCAED,MAAM,CAAC;4BACR,CAAC;4BAED,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;wBACjD,CAAC,CAAC,CAAC;oBACJ,CAAC,CAAC,CAAC;gBACJ,CAAC,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;YAC9B,CAAC;YAED,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YAE7C,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC9C,CAAC;QArMA;uBAAC,yBAAe;uBACf,yCAAwB;uBACxB,qBAAa;uBACb,2BAAgB;uBAChB,oBAAY;uBACZ,qCAAqB;uBACrB,wBAAgB;2BAND;QAsMlB,sBAAC;IAAD,CAzMA,AAyMC,IAAA;IAzMY,uBAAe,kBAyM3B,CAAA","file":"vs/workbench/parts/files/browser/views/explorerViewer.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport nls = require('vs/nls');\nimport lifecycle = require('vs/base/common/lifecycle');\nimport objects = require('vs/base/common/objects');\nimport DOM = require('vs/base/browser/dom');\nimport URI from 'vs/base/common/uri';\nimport {MIME_BINARY} from 'vs/base/common/mime';\nimport async = require('vs/base/common/async');\nimport paths = require('vs/base/common/paths');\nimport errors = require('vs/base/common/errors');\nimport {isString} from 'vs/base/common/types';\nimport Actions = require('vs/base/common/actions');\nimport comparers = require('vs/base/common/comparers');\nimport {InputBox} from 'vs/base/browser/ui/inputbox/inputBox';\nimport {$} from 'vs/base/browser/builder';\nimport platform = require('vs/base/common/platform');\nimport glob = require('vs/base/common/glob');\nimport {ContributableActionProvider} from 'vs/workbench/browser/actionBarRegistry';\nimport {LocalFileChangeEvent, ConfirmResult, IFilesConfiguration, ITextFileService} from 'vs/workbench/parts/files/common/files';\nimport {IFileOperationResult, FileOperationResult, IFileStat, IFileService} from 'vs/platform/files/common/files';\nimport {FileEditorInput} from 'vs/workbench/parts/files/browser/editors/fileEditorInput';\nimport {DuplicateFileAction, ImportFileAction, PasteFileAction, keybindingForAction, IEditableData, IFileViewletState} from 'vs/workbench/parts/files/browser/fileActions';\nimport {EditorOptions} from 'vs/workbench/common/editor';\nimport {IDataSource, ITree, IElementCallback, IAccessibilityProvider, IRenderer, ContextMenuEvent, ISorter, IFilter, IDragAndDrop, IDragAndDropData, IDragOverReaction, DRAG_OVER_ACCEPT_BUBBLE_DOWN, DRAG_OVER_ACCEPT_BUBBLE_DOWN_COPY, DRAG_OVER_ACCEPT_BUBBLE_UP, DRAG_OVER_ACCEPT_BUBBLE_UP_COPY, DRAG_OVER_REJECT} from 'vs/base/parts/tree/browser/tree';\nimport labels = require('vs/base/common/labels');\nimport {DesktopDragAndDropData, ExternalElementsDragAndDropData} from 'vs/base/parts/tree/browser/treeDnd';\nimport {ClickBehavior, DefaultController} from 'vs/base/parts/tree/browser/treeDefaults';\nimport {ActionsRenderer} from 'vs/base/parts/tree/browser/actionsRenderer';\nimport {FileStat, NewStatPlaceholder} from 'vs/workbench/parts/files/common/explorerViewModel';\nimport {DragMouseEvent, IMouseEvent} from 'vs/base/browser/mouseEvent';\nimport {IWorkbenchEditorService} from 'vs/workbench/services/editor/common/editorService';\nimport {IPartService} from 'vs/workbench/services/part/common/partService';\nimport {IWorkspaceContextService} from 'vs/workbench/services/workspace/common/contextService';\nimport {IWorkspace} from 'vs/platform/workspace/common/workspace';\nimport {IContextViewService, IContextMenuService} from 'vs/platform/contextview/browser/contextView';\nimport {IEventService} from 'vs/platform/event/common/event';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {IMessageService, IConfirmation, Severity} from 'vs/platform/message/common/message';\nimport {IProgressService} from 'vs/platform/progress/common/progress';\nimport {ITelemetryService} from 'vs/platform/telemetry/common/telemetry';\nimport {Keybinding, CommonKeybindings} from 'vs/base/common/keyCodes';\nimport {IKeyboardEvent} from 'vs/base/browser/keyboardEvent';\n\nexport class FileDataSource implements IDataSource {\n\tprivate workspace: IWorkspace;\n\n\tconstructor(\n\t\t@IProgressService private progressService: IProgressService,\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@IFileService private fileService: IFileService,\n\t\t@IPartService private partService: IPartService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService\n\t) {\n\t\tthis.workspace = contextService.getWorkspace();\n\t}\n\n\tpublic getId(tree: ITree, stat: FileStat): string {\n\t\treturn stat.getId();\n\t}\n\n\tpublic hasChildren(tree: ITree, stat: FileStat): boolean {\n\t\treturn stat.isDirectory;\n\t}\n\n\tpublic getChildren(tree: ITree, stat: FileStat): TPromise<FileStat[]> {\n\n\t\t// Return early if stat is already resolved\n\t\tif (stat.isDirectoryResolved) {\n\t\t\treturn TPromise.as(stat.children);\n\t\t}\n\n\t\t// Resolve children and add to fileStat for future lookup\n\t\telse {\n\n\t\t\t// Resolve\n\t\t\tlet promise = this.fileService.resolveFile(stat.resource, { resolveSingleChildDescendants: true }).then((dirStat: IFileStat) => {\n\n\t\t\t\t// Convert to view model\n\t\t\t\tlet modelDirStat = FileStat.create(dirStat);\n\n\t\t\t\t// Add children to folder\n\t\t\t\tfor (let i = 0; i < modelDirStat.children.length; i++) {\n\t\t\t\t\tstat.addChild(modelDirStat.children[i]);\n\t\t\t\t}\n\n\t\t\t\tstat.isDirectoryResolved = true;\n\n\t\t\t\treturn stat.children;\n\t\t\t}, (e: any) => {\n\t\t\t\tthis.messageService.show(Severity.Error, e);\n\n\t\t\t\treturn []; // we could not resolve any children because of an error\n\t\t\t});\n\n\t\t\tthis.progressService.showWhile(promise, this.partService.isCreated() ? 800 : 3200 /* less ugly initial startup */);\n\n\t\t\treturn promise;\n\t\t}\n\t}\n\n\tpublic getParent(tree: ITree, stat: FileStat): TPromise<FileStat> {\n\t\tif (!stat) {\n\t\t\treturn TPromise.as(null); // can be null if nothing selected in the tree\n\t\t}\n\n\t\t// Return if root reached\n\t\tif (this.workspace && stat.resource.toString() === this.workspace.resource.toString()) {\n\t\t\treturn TPromise.as(null);\n\t\t}\n\n\t\t// Return if parent already resolved\n\t\tif (stat.parent) {\n\t\t\treturn TPromise.as(stat.parent);\n\t\t}\n\n\t\t// We never actually resolve the parent from the disk for performance reasons. It wouldnt make\n\t\t// any sense to resolve parent by parent with requests to walk up the chain. Instead, the explorer\n\t\t// makes sure to properly resolve a deep path to a specific file and merges the result with the model.\n\t\treturn TPromise.as(null);\n\t}\n}\n\nexport class FileActionProvider extends ContributableActionProvider {\n\tprivate state: FileViewletState;\n\n\tconstructor(state: any) {\n\t\tsuper();\n\n\t\tthis.state = state;\n\t}\n\n\tpublic hasActions(tree: ITree, stat: FileStat): boolean {\n\t\tif (stat instanceof NewStatPlaceholder) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn super.hasActions(tree, stat);\n\t}\n\n\tpublic getActions(tree: ITree, stat: FileStat): TPromise<Actions.IAction[]> {\n\t\tif (stat instanceof NewStatPlaceholder) {\n\t\t\treturn TPromise.as([]);\n\t\t}\n\n\t\treturn super.getActions(tree, stat);\n\t}\n\n\tpublic hasSecondaryActions(tree: ITree, stat: FileStat): boolean {\n\t\tif (stat instanceof NewStatPlaceholder) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn super.hasSecondaryActions(tree, stat);\n\t}\n\n\tpublic getSecondaryActions(tree: ITree, stat: FileStat): TPromise<Actions.IAction[]> {\n\t\tif (stat instanceof NewStatPlaceholder) {\n\t\t\treturn TPromise.as([]);\n\t\t}\n\n\t\treturn super.getSecondaryActions(tree, stat);\n\t}\n\n\tpublic runAction(tree: ITree, stat: FileStat, action: Actions.IAction, context?: any): TPromise<any>;\n\tpublic runAction(tree: ITree, stat: FileStat, actionID: string, context?: any): TPromise<any>;\n\tpublic runAction(tree: ITree, stat: FileStat, arg: any, context: any = {}): TPromise<any> {\n\t\tcontext = objects.mixin({\n\t\t\tviewletState: this.state,\n\t\t\tstat: stat\n\t\t}, context);\n\n\t\tif (!isString(arg)) {\n\t\t\tlet action = <Actions.IAction>arg;\n\t\t\tif (action.enabled) {\n\t\t\t\treturn action.run(context);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\tlet id = <string>arg;\n\t\tlet promise = this.hasActions(tree, stat) ? this.getActions(tree, stat) : TPromise.as([]);\n\n\t\treturn promise.then((actions: Actions.IAction[]) => {\n\t\t\tfor (let i = 0, len = actions.length; i < len; i++) {\n\t\t\t\tif (actions[i].id === id && actions[i].enabled) {\n\t\t\t\t\treturn actions[i].run(context);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpromise = this.hasSecondaryActions(tree, stat) ? this.getSecondaryActions(tree, stat) : TPromise.as([]);\n\n\t\t\treturn promise.then((actions: Actions.IAction[]) => {\n\t\t\t\tfor (let i = 0, len = actions.length; i < len; i++) {\n\t\t\t\t\tif (actions[i].id === id && actions[i].enabled) {\n\t\t\t\t\t\treturn actions[i].run(context);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport class FileViewletState implements IFileViewletState {\n\tprivate _actionProvider: FileActionProvider;\n\tprivate editableStats: { [resource: string]: IEditableData; };\n\n\tconstructor() {\n\t\tthis._actionProvider = new FileActionProvider(this);\n\t\tthis.editableStats = Object.create(null);\n\t}\n\n\tpublic get actionProvider(): FileActionProvider {\n\t\treturn this._actionProvider;\n\t}\n\n\tpublic getEditableData(stat: FileStat): IEditableData {\n\t\treturn this.editableStats[stat.resource && stat.resource.toString()];\n\t}\n\n\tpublic setEditable(stat: FileStat, editableData: IEditableData): void {\n\t\tif (editableData) {\n\t\t\tthis.editableStats[stat.resource && stat.resource.toString()] = editableData;\n\t\t}\n\t}\n\n\tpublic clearEditable(stat: FileStat): void {\n\t\tdelete this.editableStats[stat.resource && stat.resource.toString()];\n\t}\n}\n\nexport class ActionRunner extends Actions.ActionRunner implements Actions.IActionRunner {\n\tprivate viewletState: FileViewletState;\n\n\tconstructor(state: FileViewletState) {\n\t\tsuper();\n\n\t\tthis.viewletState = state;\n\t}\n\n\tpublic run(action: Actions.IAction, context?: any): TPromise<any> {\n\t\treturn super.run(action, { viewletState: this.viewletState });\n\t}\n}\n\n// Explorer Renderer\nexport class FileRenderer extends ActionsRenderer implements IRenderer {\n\tprivate state: FileViewletState;\n\n\tconstructor(\n\t\tstate: FileViewletState,\n\t\tactionRunner: Actions.IActionRunner,\n\t\t@IContextViewService private contextViewService: IContextViewService\n\t) {\n\t\tsuper({\n\t\t\tactionProvider: state.actionProvider,\n\t\t\tactionRunner: actionRunner\n\t\t});\n\n\t\tthis.state = state;\n\t}\n\n\tpublic getContentHeight(tree: ITree, element: any): number {\n\t\treturn 22;\n\t}\n\n\tpublic renderContents(tree: ITree, stat: FileStat, domElement: HTMLElement, previousCleanupFn: IElementCallback): IElementCallback {\n\t\tlet el = $(domElement).clearChildren();\n\t\tlet item = $('.explorer-item').addClass(this.iconClass(stat)).appendTo(el);\n\n\t\t// File/Folder label\n\t\tlet editableData: IEditableData = this.state.getEditableData(stat);\n\t\tif (!editableData) {\n\t\t\tlet label = $('.explorer-item-label').appendTo(item);\n\t\t\t$('a.plain').text(stat.name).appendTo(label);\n\t\t\treturn null;\n\t\t}\n\n\t\t// Input field (when creating a new file or folder or renaming)\n\t\tlet inputBox = new InputBox(item.getHTMLElement(), this.contextViewService, {\n\t\t\tvalidationOptions: {\n\t\t\t\tvalidation: editableData.validator,\n\t\t\t\tshowMessage: true\n\t\t\t},\n\t\t\tariaLabel: nls.localize('fileInputAriaLabel', \"Type file name. Press Enter to confirm or Escape to cancel.\")\n\t\t});\n\n\t\tlet value = stat.name || '';\n\t\tlet lastDot = value.lastIndexOf('.');\n\n\t\tinputBox.value = value;\n\t\tinputBox.select({ start: 0, end: lastDot > 0 && !stat.isDirectory ? lastDot : value.length });\n\t\tinputBox.focus();\n\n\t\tlet done = async.once<boolean, void>(commit => {\n\t\t\ttree.clearHighlight();\n\n\t\t\tif (commit && inputBox.value) {\n\t\t\t\tthis.state.actionProvider.runAction(tree, stat, editableData.action, { value: inputBox.value });\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\ttree.DOMFocus();\n\t\t\t\tlifecycle.dispose(toDispose);\n\t\t\t}, 0);\n\t\t});\n\n\t\tvar toDispose = [\n\t\t\tinputBox,\n\t\t\tDOM.addStandardDisposableListener(inputBox.inputElement, DOM.EventType.KEY_DOWN, (e: IKeyboardEvent) => {\n\t\t\t\tif (e.equals(CommonKeybindings.ENTER)) {\n\t\t\t\t\tif (inputBox.validate()) {\n\t\t\t\t\t\tdone(true);\n\t\t\t\t\t}\n\t\t\t\t} else if (e.equals(CommonKeybindings.ESCAPE)) {\n\t\t\t\t\tdone(false);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tDOM.addDisposableListener(inputBox.inputElement, 'blur', () => {\n\t\t\t\tdone(inputBox.isInputValid());\n\t\t\t})\n\t\t];\n\n\t\treturn () => done(true);\n\t}\n\n\tprivate iconClass(element: FileStat): string {\n\t\tif (element.isDirectory) {\n\t\t\treturn 'folder-icon';\n\t\t}\n\n\t\treturn 'text-file-icon';\n\t}\n}\n\n// Explorer Accessibility Provider\nexport class FileAccessibilityProvider implements IAccessibilityProvider {\n\n\tpublic getAriaLabel(tree: ITree, stat: FileStat): string {\n\t\treturn nls.localize('filesExplorerViewerAriaLabel', \"{0}, Files Explorer\", stat.name);\n\t}\n}\n\n// Explorer Controller\nexport class FileController extends DefaultController {\n\tprivate didCatchEnterDown: boolean;\n\tprivate state: FileViewletState;\n\n\tprivate workspace: IWorkspace;\n\n\tconstructor(state: FileViewletState,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IContextMenuService private contextMenuService: IContextMenuService,\n\t\t@IEventService private eventService: IEventService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@ITelemetryService private telemetryService: ITelemetryService,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService\n\t) {\n\t\tsuper({ clickBehavior: ClickBehavior.ON_MOUSE_DOWN });\n\n\t\tthis.workspace = contextService.getWorkspace();\n\n\t\tthis.didCatchEnterDown = false;\n\n\t\tthis.downKeyBindingDispatcher.set(platform.isMacintosh ? CommonKeybindings.CTRLCMD_DOWN_ARROW : CommonKeybindings.ENTER, this.onEnterDown.bind(this));\n\t\tthis.upKeyBindingDispatcher.set(platform.isMacintosh ? CommonKeybindings.CTRLCMD_DOWN_ARROW : CommonKeybindings.ENTER, this.onEnterUp.bind(this));\n\t\tif (platform.isMacintosh) {\n\t\t\tthis.upKeyBindingDispatcher.set(CommonKeybindings.WINCTRL_ENTER, this.onModifierEnterUp.bind(this)); // Mac: somehow Cmd+Enter does not work\n\t\t} else {\n\t\t\tthis.upKeyBindingDispatcher.set(CommonKeybindings.CTRLCMD_ENTER, this.onModifierEnterUp.bind(this)); // Mac: somehow Cmd+Enter does not work\n\t\t}\n\t\tthis.downKeyBindingDispatcher.set(platform.isMacintosh ? CommonKeybindings.ENTER : CommonKeybindings.F2, this.onF2.bind(this));\n\t\tthis.downKeyBindingDispatcher.set(CommonKeybindings.CTRLCMD_C, this.onCopy.bind(this));\n\t\tthis.downKeyBindingDispatcher.set(CommonKeybindings.CTRLCMD_V, this.onPaste.bind(this));\n\n\t\tif (platform.isMacintosh) {\n\t\t\tthis.downKeyBindingDispatcher.set(CommonKeybindings.CTRLCMD_UP_ARROW, this.onLeft.bind(this));\n\t\t\tthis.downKeyBindingDispatcher.set(CommonKeybindings.CTRLCMD_BACKSPACE, this.onDelete.bind(this));\n\t\t} else {\n\t\t\tthis.downKeyBindingDispatcher.set(CommonKeybindings.DELETE, this.onDelete.bind(this));\n\t\t\tthis.downKeyBindingDispatcher.set(CommonKeybindings.SHIFT_DELETE, this.onDelete.bind(this));\n\t\t}\n\n\t\tthis.state = state;\n\t}\n\n\t/* protected */ public onLeftClick(tree: ITree, stat: FileStat, event: IMouseEvent, origin: string = 'mouse'): boolean {\n\t\tlet payload = { origin: origin };\n\t\tlet isDoubleClick = (origin === 'mouse' && event.detail === 2);\n\n\t\t// Handle Highlight Mode\n\t\tif (tree.getHighlight()) {\n\n\t\t\t// Cancel Event\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\ttree.clearHighlight(payload);\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// Handle root\n\t\tif (this.workspace && stat.resource.toString() === this.workspace.resource.toString()) {\n\t\t\ttree.clearFocus(payload);\n\t\t\ttree.clearSelection(payload);\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// Cancel Event\n\t\tlet isMouseDown = event && event.browserEvent && event.browserEvent.type === 'mousedown';\n\t\tif (!isMouseDown) {\n\t\t\tevent.preventDefault(); // we cannot preventDefault onMouseDown because this would break DND otherwise\n\t\t}\n\t\tevent.stopPropagation();\n\n\t\t// Set DOM focus\n\t\ttree.DOMFocus();\n\n\t\t// Expand / Collapse\n\t\ttree.toggleExpansion(stat);\n\n\t\t// Allow to unselect\n\t\tif (event.shiftKey && !(stat instanceof NewStatPlaceholder)) {\n\t\t\tlet selection = tree.getSelection();\n\t\t\tif (selection && selection.length > 0 && selection[0] === stat) {\n\t\t\t\ttree.clearSelection(payload);\n\t\t\t}\n\t\t}\n\n\t\t// Select, Focus and open files\n\t\telse if (!(stat instanceof NewStatPlaceholder)) {\n\t\t\tlet preserveFocus = !isDoubleClick;\n\t\t\ttree.setFocus(stat, payload);\n\n\t\t\tif (isDoubleClick) {\n\t\t\t\tevent.preventDefault(); // focus moves to editor, we need to prevent default\n\t\t\t}\n\n\t\t\tif (!stat.isDirectory) {\n\t\t\t\ttree.setSelection([stat], payload);\n\n\t\t\t\tthis.openEditor(stat, preserveFocus, event && (event.ctrlKey || event.metaKey));\n\n\t\t\t\t// Doubleclick: add to working files set\n\t\t\t\tif (isDoubleClick) {\n\t\t\t\t\tthis.textFileService.getWorkingFilesModel().addEntry(stat);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic onContextMenu(tree: ITree, stat: FileStat, event: ContextMenuEvent): boolean {\n\t\tif (event.target && event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\n\t\t\treturn false;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\ttree.setFocus(stat);\n\n\t\tif (!this.state.actionProvider.hasSecondaryActions(tree, stat)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet anchor = { x: event.posx + 1, y: event.posy };\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => anchor,\n\t\t\tgetActions: () => this.state.actionProvider.getSecondaryActions(tree, stat),\n\t\t\tgetActionItem: this.state.actionProvider.getActionItem.bind(this.state.actionProvider, tree, stat),\n\t\t\tgetKeyBinding: (a): Keybinding => keybindingForAction(a.id),\n\t\t\tgetActionsContext: () => {\n\t\t\t\treturn {\n\t\t\t\t\tviewletState: this.state,\n\t\t\t\t\tstat: stat\n\t\t\t\t};\n\t\t\t},\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\ttree.DOMFocus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tprivate onEnterDown(tree: ITree, event: IKeyboardEvent): boolean {\n\t\tif (tree.getHighlight()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet payload = { origin: 'keyboard' };\n\n\t\tlet stat: FileStat = tree.getFocus();\n\t\tif (stat) {\n\n\t\t\t// Directory: Toggle expansion\n\t\t\tif (stat.isDirectory) {\n\t\t\t\ttree.toggleExpansion(stat);\n\t\t\t}\n\n\t\t\t// File: Open\n\t\t\telse {\n\t\t\t\ttree.setFocus(stat, payload);\n\t\t\t\tthis.openEditor(stat, false, false);\n\t\t\t}\n\t\t}\n\n\t\tthis.didCatchEnterDown = true;\n\n\t\treturn true;\n\t}\n\n\tprivate onEnterUp(tree: ITree, event: IKeyboardEvent): boolean {\n\t\tif (!this.didCatchEnterDown || tree.getHighlight()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet stat: FileStat = tree.getFocus();\n\t\tif (stat && !stat.isDirectory) {\n\t\t\tthis.openEditor(stat, false, false);\n\t\t}\n\n\t\tthis.didCatchEnterDown = false;\n\n\t\treturn true;\n\t}\n\n\tprivate onModifierEnterUp(tree: ITree, event: IKeyboardEvent): boolean {\n\t\tif (tree.getHighlight()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet stat: FileStat = tree.getFocus();\n\t\tif (stat && !stat.isDirectory) {\n\t\t\tthis.openEditor(stat, false, true);\n\t\t}\n\n\t\tthis.didCatchEnterDown = false;\n\n\t\treturn true;\n\t}\n\n\tprivate onCopy(tree: ITree, event: IKeyboardEvent): boolean {\n\t\tlet stat: FileStat = tree.getFocus();\n\t\tif (stat) {\n\t\t\tthis.runAction(tree, stat, 'workbench.files.action.copyFile').done();\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate onPaste(tree: ITree, event: IKeyboardEvent): boolean {\n\t\tlet stat: FileStat = tree.getFocus() || tree.getInput() /* root */;\n\t\tif (stat) {\n\t\t\tlet pasteAction = this.instantiationService.createInstance(PasteFileAction, tree, stat);\n\t\t\tif (pasteAction._isEnabled()) {\n\t\t\t\tpasteAction.run().done(null, errors.onUnexpectedError);\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate openEditor(stat: FileStat, preserveFocus: boolean, sideBySide: boolean): void {\n\t\tif (stat && !stat.isDirectory) {\n\t\t\tlet editorInput = this.instantiationService.createInstance(FileEditorInput, stat.resource, stat.mime, void 0);\n\t\t\tlet editorOptions = new EditorOptions();\n\t\t\tif (preserveFocus) {\n\t\t\t\teditorOptions.preserveFocus = true;\n\t\t\t}\n\n\t\t\tthis.telemetryService.publicLog('workbenchActionExecuted', { id: 'workbench.files.openFile', from: 'explorer' });\n\n\t\t\tthis.editorService.openEditor(editorInput, editorOptions, sideBySide).done(null, errors.onUnexpectedError);\n\t\t}\n\t}\n\n\tprivate onF2(tree: ITree, event: IKeyboardEvent): boolean {\n\t\tlet stat: FileStat = tree.getFocus();\n\n\t\tif (stat) {\n\t\t\tthis.runAction(tree, stat, 'workbench.files.action.triggerRename').done();\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate onDelete(tree: ITree, event: IKeyboardEvent): boolean {\n\t\tlet useTrash = !event.shiftKey;\n\t\tlet stat: FileStat = tree.getFocus();\n\t\tif (stat) {\n\t\t\tthis.runAction(tree, stat, useTrash ? 'workbench.files.action.moveFileToTrash' : 'workbench.files.action.deleteFile').done();\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate runAction(tree: ITree, stat: FileStat, id: string): TPromise<any> {\n\t\treturn this.state.actionProvider.runAction(tree, stat, id);\n\t}\n}\n\n// Explorer Sorter\nexport class FileSorter implements ISorter {\n\n\tpublic compare(tree: ITree, statA: FileStat, statB: FileStat): number {\n\t\tif (statA.isDirectory && !statB.isDirectory) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (statB.isDirectory && !statA.isDirectory) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (statA.isDirectory && statB.isDirectory) {\n\t\t\treturn statA.name.toLowerCase().localeCompare(statB.name.toLowerCase());\n\t\t}\n\n\t\tif (statA instanceof NewStatPlaceholder) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (statB instanceof NewStatPlaceholder) {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn comparers.compareFileNames(statA.name, statB.name);\n\t}\n}\n\n// Explorer Filter\nexport class FileFilter implements IFilter {\n\tprivate hiddenExpression: glob.IExpression;\n\n\tconstructor( @IWorkspaceContextService private contextService: IWorkspaceContextService) {\n\t\tthis.hiddenExpression = Object.create(null);\n\t}\n\n\tpublic updateConfiguration(configuration: IFilesConfiguration): boolean {\n\t\tlet excludesConfig = (configuration && configuration.files && configuration.files.exclude) || Object.create(null);\n\t\tlet needsRefresh = !objects.equals(this.hiddenExpression, excludesConfig);\n\n\t\tthis.hiddenExpression = objects.clone(excludesConfig); // do not keep the config, as it gets mutated under our hoods\n\n\t\treturn needsRefresh;\n\t}\n\n\tpublic isVisible(tree: ITree, stat: FileStat): boolean {\n\t\treturn this.doIsVisible(stat);\n\t}\n\n\tprivate doIsVisible(stat: FileStat): boolean {\n\t\tif (stat instanceof NewStatPlaceholder) {\n\t\t\treturn true; // always visible\n\t\t}\n\n\t\tlet siblings = stat.parent && stat.parent.children && stat.parent.children.map(c => c.name);\n\n\t\t// Hide those that match Hidden Patterns\n\t\tif (glob.match(this.hiddenExpression, this.contextService.toWorkspaceRelativePath(stat.resource), siblings)) {\n\t\t\treturn false; // hidden through pattern\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\n// Explorer Drag And Drop Controller\nexport class FileDragAndDrop implements IDragAndDrop {\n\n\tconstructor(\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService,\n\t\t@IEventService private eventService: IEventService,\n\t\t@IProgressService private progressService: IProgressService,\n\t\t@IFileService private fileService: IFileService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@ITextFileService private textFileService: ITextFileService\n\t) {\n\t}\n\n\tpublic getDragURI(tree: ITree, stat: FileStat): string {\n\t\treturn stat.resource && stat.resource.toString();\n\t}\n\n\tpublic onDragStart(tree: ITree, data: IDragAndDropData, originalEvent: DragMouseEvent): void {\n\t\tlet sources: FileStat[] = data.getData();\n\t\tlet source: FileStat = null;\n\t\tif (sources.length > 0) {\n\t\t\tsource = sources[0];\n\t\t}\n\n\t\t// When dragging folders, make sure to collapse them to free up some space\n\t\tif (source && source.isDirectory && tree.isExpanded(source)) {\n\t\t\ttree.collapse(source, false);\n\t\t}\n\n\t\t// Native only: when a DownloadURL attribute is defined on the data transfer it is possible to\n\t\t// drag a file from the browser to the desktop and have it downloaded there.\n\t\tif (!(data instanceof DesktopDragAndDropData)) {\n\t\t\tif (source && !source.isDirectory) {\n\t\t\t\toriginalEvent.dataTransfer.setData('DownloadURL', [MIME_BINARY, source.name, source.resource.toString()].join(':'));\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic onDragOver(tree: ITree, data: IDragAndDropData, target: FileStat, originalEvent: DragMouseEvent): IDragOverReaction {\n\t\tlet isCopy = originalEvent && ((originalEvent.ctrlKey && !platform.isMacintosh) || (originalEvent.altKey && platform.isMacintosh));\n\t\tlet fromDesktop = data instanceof DesktopDragAndDropData;\n\n\t\tif (this.contextService.getOptions().readOnly) {\n\t\t\treturn DRAG_OVER_REJECT;\n\t\t}\n\n\t\t// Desktop DND\n\t\tif (fromDesktop) {\n\t\t\tlet dragData = (<DesktopDragAndDropData>data).getData();\n\n\t\t\tlet types = dragData.types;\n\t\t\tlet typesArray: string[] = [];\n\t\t\tfor (let i = 0; i < types.length; i++) {\n\t\t\t\ttypesArray.push(types[i]);\n\t\t\t}\n\n\t\t\tif (typesArray.length === 0 || !typesArray.some((type) => { return type === 'Files'; })) {\n\t\t\t\treturn DRAG_OVER_REJECT;\n\t\t\t}\n\t\t}\n\n\t\t// Other-Tree DND\n\t\telse if (data instanceof ExternalElementsDragAndDropData) {\n\t\t\treturn DRAG_OVER_REJECT;\n\t\t}\n\n\t\t// In-Explorer DND\n\t\telse {\n\t\t\tlet sources: FileStat[] = data.getData();\n\t\t\tif (!Array.isArray(sources)) {\n\t\t\t\treturn DRAG_OVER_REJECT;\n\t\t\t}\n\n\t\t\tif (sources.some((source) => {\n\t\t\t\tif (source instanceof NewStatPlaceholder) {\n\t\t\t\t\treturn true; // NewStatPlaceholders can not be moved\n\t\t\t\t}\n\n\t\t\t\tif (source.resource.toString() === target.resource.toString()) {\n\t\t\t\t\treturn true; // Can not move anything onto itself\n\t\t\t\t}\n\n\t\t\t\tif (!isCopy && paths.dirname(source.resource.fsPath) === target.resource.fsPath) {\n\t\t\t\t\treturn true; // Can not move a file to the same parent unless we copy\n\t\t\t\t}\n\n\t\t\t\tif (paths.isEqualOrParent(target.resource.fsPath, source.resource.fsPath)) {\n\t\t\t\t\treturn true; // Can not move a parent folder into one of its children\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t})) {\n\t\t\t\treturn DRAG_OVER_REJECT;\n\t\t\t}\n\t\t}\n\n\t\t// All\n\t\tif (target.isDirectory) {\n\t\t\treturn fromDesktop || isCopy ? DRAG_OVER_ACCEPT_BUBBLE_DOWN_COPY : DRAG_OVER_ACCEPT_BUBBLE_DOWN;\n\t\t}\n\n\t\tif (target.resource.toString() !== this.contextService.getWorkspace().resource.toString()) {\n\t\t\treturn fromDesktop || isCopy ? DRAG_OVER_ACCEPT_BUBBLE_UP_COPY : DRAG_OVER_ACCEPT_BUBBLE_UP;\n\t\t}\n\n\t\treturn DRAG_OVER_REJECT;\n\t}\n\n\tpublic drop(tree: ITree, data: IDragAndDropData, target: FileStat, originalEvent: DragMouseEvent): void {\n\t\tlet promise: TPromise<void> = TPromise.as(null);\n\n\t\t// Desktop DND (Import file)\n\t\tif (data instanceof DesktopDragAndDropData) {\n\t\t\tlet importAction = this.instantiationService.createInstance(ImportFileAction, tree, target, null);\n\t\t\tpromise = importAction.run({\n\t\t\t\tinput: {\n\t\t\t\t\tfiles: <FileList>(<DesktopDragAndDropData>data).getData().files\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// In-Explorer DND (Move/Copy file)\n\t\telse {\n\t\t\tlet source: FileStat = data.getData()[0];\n\t\t\tlet isCopy = (originalEvent.ctrlKey && !platform.isMacintosh) || (originalEvent.altKey && platform.isMacintosh);\n\n\t\t\tpromise = tree.expand(target).then(() => {\n\n\t\t\t\t// Reuse action if user copies\n\t\t\t\tif (isCopy) {\n\t\t\t\t\tlet copyAction = this.instantiationService.createInstance(DuplicateFileAction, tree, source, target);\n\t\t\t\t\treturn copyAction.run();\n\t\t\t\t}\n\n\t\t\t\t// Handle dirty\n\t\t\t\tlet saveOrRevertPromise: TPromise<boolean> = TPromise.as(null);\n\t\t\t\tif (this.textFileService.isDirty(source.resource)) {\n\t\t\t\t\tlet res = this.textFileService.confirmSave([source.resource]);\n\t\t\t\t\tif (res === ConfirmResult.SAVE) {\n\t\t\t\t\t\tsaveOrRevertPromise = this.textFileService.save(source.resource);\n\t\t\t\t\t} else if (res === ConfirmResult.DONT_SAVE) {\n\t\t\t\t\t\tsaveOrRevertPromise = this.textFileService.revert(source.resource);\n\t\t\t\t\t} else if (res === ConfirmResult.CANCEL) {\n\t\t\t\t\t\treturn TPromise.as(null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// For move, first check if file is dirty and save\n\t\t\t\treturn saveOrRevertPromise.then(() => {\n\n\t\t\t\t\t// If the file is still dirty, do not touch it because a save is pending to the disk and we can not abort it\n\t\t\t\t\tif (this.textFileService.isDirty(source.resource)) {\n\t\t\t\t\t\tthis.messageService.show(Severity.Warning, nls.localize('warningFileDirty', \"File '{0}' is currently being saved, please try again later.\", labels.getPathLabel(source.resource)));\n\n\t\t\t\t\t\treturn TPromise.as(null);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet targetResource = URI.file(paths.join(target.resource.fsPath, source.name));\n\t\t\t\t\tlet didHandleConflict = false;\n\n\t\t\t\t\tlet onMove = (result: IFileStat) => {\n\t\t\t\t\t\tthis.eventService.emit('files.internal:fileChanged', new LocalFileChangeEvent(source.clone(), result));\n\t\t\t\t\t};\n\n\t\t\t\t\t// Move File/Folder and emit event\n\t\t\t\t\treturn this.fileService.moveFile(source.resource, targetResource).then(onMove, (error) => {\n\n\t\t\t\t\t\t// Conflict\n\t\t\t\t\t\tif ((<IFileOperationResult>error).fileOperationResult === FileOperationResult.FILE_MOVE_CONFLICT) {\n\t\t\t\t\t\t\tdidHandleConflict = true;\n\n\t\t\t\t\t\t\tlet confirm: IConfirmation = {\n\t\t\t\t\t\t\t\tmessage: nls.localize('confirmOverwriteMessage', \"'{0}' already exists in the destination folder. Do you want to replace it?\", source.name),\n\t\t\t\t\t\t\t\tdetail: nls.localize('irreversible', \"This action is irreversible!\"),\n\t\t\t\t\t\t\t\tprimaryButton: nls.localize({ key: 'replaceButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Replace\")\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (this.messageService.confirm(confirm)) {\n\t\t\t\t\t\t\t\treturn this.fileService.moveFile(source.resource, targetResource, true).then((result) => {\n\t\t\t\t\t\t\t\t\tlet fakeTargetState = new FileStat(targetResource);\n\t\t\t\t\t\t\t\t\tthis.eventService.emit('files.internal:fileChanged', new LocalFileChangeEvent(fakeTargetState, null));\n\n\t\t\t\t\t\t\t\t\tonMove(result);\n\t\t\t\t\t\t\t\t}, (error) => {\n\t\t\t\t\t\t\t\t\tthis.messageService.show(Severity.Error, error);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.messageService.show(Severity.Error, error);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}, errors.onUnexpectedError);\n\t\t}\n\n\t\tthis.progressService.showWhile(promise, 800);\n\n\t\tpromise.done(null, errors.onUnexpectedError);\n\t}\n}"]}