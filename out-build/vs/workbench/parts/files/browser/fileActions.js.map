{"version":3,"sources":["vs/workbench/parts/files/browser/fileActions.ts"],"names":[],"mappings":"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","file":"vs/workbench/parts/files/browser/fileActions.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./media/fileactions';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport nls = require('vs/nls');\nimport {isWindows, isLinux, isMacintosh} from 'vs/base/common/platform';\nimport {sequence, ITask} from 'vs/base/common/async';\nimport {MIME_TEXT, isUnspecific, isBinaryMime, guessMimeTypes} from 'vs/base/common/mime';\nimport paths = require('vs/base/common/paths');\nimport URI from 'vs/base/common/uri';\nimport errors = require('vs/base/common/errors');\nimport strings = require('vs/base/common/strings');\nimport {Event, EventType as CommonEventType} from 'vs/base/common/events';\nimport {getPathLabel} from 'vs/base/common/labels';\nimport severity from 'vs/base/common/severity';\nimport diagnostics = require('vs/base/common/diagnostics');\nimport {Action, IAction} from 'vs/base/common/actions';\nimport {MessageType, IInputValidator} from 'vs/base/browser/ui/inputbox/inputBox';\nimport {ITree, IHighlightEvent} from 'vs/base/parts/tree/browser/tree';\nimport {dispose, IDisposable} from 'vs/base/common/lifecycle';\nimport {EventType as WorkbenchEventType, EditorEvent} from 'vs/workbench/common/events';\nimport Files = require('vs/workbench/parts/files/common/files');\nimport {IFileService, IFileStat, IImportResult} from 'vs/platform/files/common/files';\nimport {DiffEditorInput, toDiffLabel} from 'vs/workbench/common/editor/diffEditorInput';\nimport {asFileEditorInput, getUntitledOrFileResource, TextEditorOptions, EditorOptions, EditorInput} from 'vs/workbench/common/editor';\nimport {IEditorSelection} from 'vs/editor/common/editorCommon';\nimport {FileEditorInput} from 'vs/workbench/parts/files/browser/editors/fileEditorInput';\nimport {FileStat, NewStatPlaceholder} from 'vs/workbench/parts/files/common/explorerViewModel';\nimport {ExplorerView} from 'vs/workbench/parts/files/browser/views/explorerView';\nimport {ExplorerViewlet} from 'vs/workbench/parts/files/browser/explorerViewlet';\nimport {CACHE} from 'vs/workbench/parts/files/common/editors/textFileEditorModel';\nimport {IActionProvider} from 'vs/base/parts/tree/browser/actionsRenderer';\nimport {WorkingFileEntry, WorkingFilesModel} from 'vs/workbench/parts/files/common/workingFilesModel';\nimport {IUntitledEditorService} from 'vs/workbench/services/untitled/common/untitledEditorService';\nimport {IWorkbenchEditorService} from 'vs/workbench/services/editor/common/editorService';\nimport {IQuickOpenService} from 'vs/workbench/services/quickopen/common/quickOpenService';\nimport {IViewletService} from 'vs/workbench/services/viewlet/common/viewletService';\nimport {IPartService} from 'vs/workbench/services/part/common/partService';\nimport {IStorageService} from 'vs/platform/storage/common/storage';\nimport {IResourceInput, Position, IEditor} from 'vs/platform/editor/common/editor';\nimport {IEventService} from 'vs/platform/event/common/event';\nimport {IInstantiationService, IConstructorSignature2} from 'vs/platform/instantiation/common/instantiation';\nimport {IMessageService, IMessageWithAction, IConfirmation, Severity, CancelAction} from 'vs/platform/message/common/message';\nimport {IProgressService, IProgressRunner} from 'vs/platform/progress/common/progress';\nimport {IWorkspaceContextService} from 'vs/platform/workspace/common/workspace';\nimport {KeyMod, KeyCode, Keybinding} from 'vs/base/common/keyCodes';\n\nimport ITextFileService = Files.ITextFileService;\n\nexport interface IEditableData {\n\taction: IAction;\n\tvalidator: IInputValidator;\n}\n\nexport interface IFileViewletState {\n\tactionProvider: IActionProvider;\n\tgetEditableData(stat: IFileStat): IEditableData;\n\tsetEditable(stat: IFileStat, editableData: IEditableData): void;\n\tclearEditable(stat: IFileStat): void;\n}\n\nexport class BaseFileAction extends Action {\n\tprivate _element: FileStat;\n\tprivate listenerToUnbind: () => void;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IWorkspaceContextService private _contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService private _editorService: IWorkbenchEditorService,\n\t\t@IFileService private _fileService: IFileService,\n\t\t@IMessageService private _messageService: IMessageService,\n\t\t@ITextFileService private _textFileService: ITextFileService,\n\t\t@IEventService private _eventService: IEventService\n\t) {\n\t\tsuper(id, label);\n\n\t\tthis.enabled = false;\n\n\t\t// update enablement when options change\n\t\tthis.listenerToUnbind = this._eventService.addListener(WorkbenchEventType.WORKBENCH_OPTIONS_CHANGED, () => this._updateEnablement());\n\t}\n\n\tpublic get contextService() {\n\t\treturn this._contextService;\n\t}\n\n\tpublic get messageService() {\n\t\treturn this._messageService;\n\t}\n\n\tpublic get editorService() {\n\t\treturn this._editorService;\n\t}\n\n\tpublic get fileService() {\n\t\treturn this._fileService;\n\t}\n\n\tpublic get eventService() {\n\t\treturn this._eventService;\n\t}\n\n\tpublic get textFileService() {\n\t\treturn this._textFileService;\n\t}\n\n\tpublic get element() {\n\t\treturn this._element;\n\t}\n\n\tpublic set element(element: FileStat) {\n\t\tthis._element = element;\n\t}\n\n\t_isEnabled(): boolean {\n\t\treturn true;\n\t}\n\n\t_updateEnablement(): void {\n\t\tthis.enabled = !!(this._contextService && this._fileService && this._editorService && !this._contextService.getOptions().readOnly && this._isEnabled());\n\t}\n\n\tprotected onError(error: any): void {\n\t\tthis._messageService.show(Severity.Error, error);\n\t}\n\n\tprotected onWarning(warning: any): void {\n\t\tthis._messageService.show(Severity.Warning, warning);\n\t}\n\n\tprotected onErrorWithRetry(error: any, retry: () => TPromise<any>, extraAction?: Action): void {\n\t\tlet actions = [\n\t\t\tCancelAction,\n\t\t\tnew Action(this.id, nls.localize('retry', \"Retry\"), null, true, () => retry())\n\t\t];\n\n\t\tif (extraAction) {\n\t\t\tactions.push(extraAction);\n\t\t}\n\n\t\tlet errorWithRetry: IMessageWithAction = {\n\t\t\tactions: actions,\n\t\t\tmessage: errors.toErrorMessage(error, false)\n\t\t};\n\n\t\tthis._messageService.show(Severity.Error, errorWithRetry);\n\t}\n\n\tprotected handleDirty(): TPromise<boolean /* cancel */> {\n\t\tif (this.textFileService.isDirty(this._element.resource)) {\n\t\t\tlet res = this.textFileService.confirmSave([this._element.resource]);\n\t\t\tif (res === Files.ConfirmResult.SAVE) {\n\t\t\t\treturn this.textFileService.save(this._element.resource).then(() => false);\n\t\t\t}\n\n\t\t\tif (res === Files.ConfirmResult.DONT_SAVE) {\n\t\t\t\treturn this.textFileService.revert(this._element.resource).then(() => false);\n\t\t\t}\n\n\t\t\treturn TPromise.as(true);\n\t\t}\n\n\t\treturn TPromise.as(false);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.listenerToUnbind();\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class TriggerRenameFileAction extends BaseFileAction {\n\n\tpublic static ID = 'workbench.files.action.triggerRename';\n\n\tprivate tree: ITree;\n\tprivate renameAction: BaseRenameAction;\n\n\tconstructor(\n\t\ttree: ITree,\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\tsuper(TriggerRenameFileAction.ID, nls.localize('rename', \"Rename\"), contextService, editorService, fileService, messageService, textFileService, eventService);\n\n\t\tthis.tree = tree;\n\t\tthis.element = element;\n\t\tthis.renameAction = instantiationService.createInstance(RenameFileAction, element);\n\t\tthis._updateEnablement();\n\t}\n\n\tpublic validateFileName(parent: IFileStat, name: string): string {\n\t\treturn this.renameAction.validateFileName(this.element.parent, name);\n\t}\n\n\tpublic run(context?: any): TPromise<any> {\n\t\tif (!context) {\n\t\t\treturn TPromise.wrapError('No context provided to BaseEnableFileRenameAction.');\n\t\t}\n\n\t\tlet viewletState = <IFileViewletState>context.viewletState;\n\t\tif (!viewletState) {\n\t\t\treturn TPromise.wrapError('Invalid viewlet state provided to BaseEnableFileRenameAction.');\n\t\t}\n\n\t\tlet stat = <IFileStat>context.stat;\n\t\tif (!stat) {\n\t\t\treturn TPromise.wrapError('Invalid stat provided to BaseEnableFileRenameAction.');\n\t\t}\n\n\t\tviewletState.setEditable(stat, {\n\t\t\taction: this.renameAction,\n\t\t\tvalidator: (value) => {\n\t\t\t\tlet message = this.validateFileName(this.element.parent, value);\n\n\t\t\t\tif (!message) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcontent: message,\n\t\t\t\t\tformatContent: true,\n\t\t\t\t\ttype: MessageType.ERROR\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tthis.tree.refresh(stat, false).then(() => {\n\t\t\tthis.tree.setHighlight(stat);\n\n\t\t\tlet unbind = this.tree.addListener(CommonEventType.HIGHLIGHT, (e: IHighlightEvent) => {\n\t\t\t\tif (!e.highlight) {\n\t\t\t\t\tviewletState.clearEditable(stat);\n\t\t\t\t\tthis.tree.refresh(stat).done(null, errors.onUnexpectedError);\n\t\t\t\t\tunbind();\n\t\t\t\t}\n\t\t\t});\n\t\t}).done(null, errors.onUnexpectedError);\n\t}\n}\n\nexport abstract class BaseRenameAction extends BaseFileAction {\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IProgressService private progressService: IProgressService,\n\t\t@IEventService eventService: IEventService\n\t) {\n\t\tsuper(id, label, contextService, editorService, fileService, messageService, textFileService, eventService);\n\n\t\tthis.element = element;\n\t}\n\n\tpublic run(context?: any): TPromise<any> {\n\t\tif (!context) {\n\t\t\treturn TPromise.wrapError('No context provided to BaseRenameFileAction.');\n\t\t}\n\n\t\tlet name = <string>context.value;\n\t\tif (!name) {\n\t\t\treturn TPromise.wrapError('No new name provided to BaseRenameFileAction.');\n\t\t}\n\n\t\t// Automatically trim whitespaces and trailing dots to produce nice file names\n\t\tname = getWellFormedFileName(name);\n\t\tlet existingName = getWellFormedFileName(this.element.name);\n\n\t\t// Return early if name is invalid or didn't change\n\t\tif (name === existingName || this.validateFileName(this.element.parent, name)) {\n\t\t\treturn TPromise.as(null);\n\t\t}\n\n\t\t// Call function and Emit Event through viewer\n\t\tlet promise = this.runAction(name).then((stat: IFileStat) => {\n\t\t\tif (stat) {\n\t\t\t\tthis.onSuccess(stat);\n\t\t\t}\n\t\t}, (error: any) => {\n\t\t\tthis.onError(error);\n\t\t});\n\n\t\tif (this.progressService) {\n\t\t\tthis.progressService.showWhile(promise, 800);\n\t\t}\n\n\t\treturn promise;\n\t}\n\n\tpublic validateFileName(parent: IFileStat, name: string): string {\n\t\tlet source = this.element.name;\n\t\tlet target = name;\n\n\t\tif (!isLinux) { // allow rename of same file also when case differs (e.g. Game.js => game.js)\n\t\t\tsource = source.toLowerCase();\n\t\t\ttarget = target.toLowerCase();\n\t\t}\n\n\t\tif (getWellFormedFileName(source) === getWellFormedFileName(target)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn validateFileName(parent, name, false);\n\t}\n\n\tpublic abstract runAction(newName: string): TPromise<any>;\n\n\tpublic onSuccess(stat: IFileStat): void {\n\t\tlet before: IFileStat = null;\n\t\tif (!(this.element instanceof NewStatPlaceholder)) {\n\t\t\tbefore = this.element.clone(); // Clone element to not expose viewers element to listeners\n\t\t}\n\n\t\tthis.eventService.emit('files.internal:fileChanged', new Files.LocalFileChangeEvent(before, stat));\n\t}\n}\n\nexport class RenameFileAction extends BaseRenameAction {\n\n\tpublic static ID = 'workbench.files.action.renameFile';\n\n\tconstructor(\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IProgressService progressService: IProgressService,\n\t\t@IEventService eventService: IEventService\n\t) {\n\t\tsuper(RenameFileAction.ID, nls.localize('rename', \"Rename\"), element, contextService, editorService, fileService, messageService, textFileService, progressService, eventService);\n\n\t\tthis._updateEnablement();\n\t}\n\n\tpublic runAction(newName: string): TPromise<any> {\n\n\t\t// Check if file is dirty in editor and save it to avoid data loss\n\t\treturn this.handleDirty().then((cancel: boolean) => {\n\t\t\tif (cancel) {\n\t\t\t\treturn TPromise.as(null);\n\t\t\t}\n\n\t\t\t// If the file is still dirty, do not touch it because a save is pending to disk and we can not abort it\n\t\t\tif (this.textFileService.isDirty(this.element.resource)) {\n\t\t\t\tthis.onWarning(nls.localize('warningFileDirty', \"File '{0}' is currently being saved, please try again later.\", getPathLabel(this.element.resource)));\n\n\t\t\t\treturn TPromise.as(null);\n\t\t\t}\n\n\t\t\treturn this.fileService.rename(this.element.resource, newName).then(null, (error: Error) => {\n\t\t\t\tthis.onErrorWithRetry(error, () => this.runAction(newName));\n\t\t\t});\n\t\t});\n\t}\n}\n\n/* Base New File/Folder Action */\nexport class BaseNewAction extends BaseFileAction {\n\tprivate presetFolder: FileStat;\n\tprivate tree: ITree;\n\tprivate isFile: boolean;\n\tprivate renameAction: BaseRenameAction;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\ttree: ITree,\n\t\tisFile: boolean,\n\t\teditableAction: BaseRenameAction,\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService\n\t) {\n\t\tsuper(id, label, contextService, editorService, fileService, messageService, textFileService, eventService);\n\n\t\tif (element) {\n\t\t\tthis.presetFolder = element.isDirectory ? element : element.parent;\n\t\t}\n\n\t\tthis.tree = tree;\n\t\tthis.isFile = isFile;\n\t\tthis.renameAction = editableAction;\n\t}\n\n\tpublic run(context?: any): TPromise<any> {\n\t\tif (!context) {\n\t\t\treturn TPromise.wrapError('No context provided to BaseNewAction.');\n\t\t}\n\n\t\tlet viewletState = <IFileViewletState>context.viewletState;\n\t\tif (!viewletState) {\n\t\t\treturn TPromise.wrapError('Invalid viewlet state provided to BaseNewAction.');\n\t\t}\n\n\t\tlet folder: FileStat = this.presetFolder;\n\t\tif (!folder) {\n\t\t\tlet focus = <FileStat>this.tree.getFocus();\n\t\t\tif (focus) {\n\t\t\t\tfolder = focus.isDirectory ? focus : focus.parent;\n\t\t\t} else {\n\t\t\t\tfolder = this.tree.getInput();\n\t\t\t}\n\t\t}\n\n\t\tif (!folder) {\n\t\t\treturn TPromise.wrapError('Invalid parent folder to create.');\n\t\t}\n\n\t\treturn this.tree.reveal(folder, 0.5).then(() => {\n\t\t\treturn this.tree.expand(folder).then(() => {\n\t\t\t\tlet stat = NewStatPlaceholder.addNewStatPlaceholder(folder, !this.isFile);\n\n\t\t\t\tthis.renameAction.element = stat;\n\n\t\t\t\tviewletState.setEditable(stat, {\n\t\t\t\t\taction: this.renameAction,\n\t\t\t\t\tvalidator: (value) => {\n\t\t\t\t\t\tlet message = this.renameAction.validateFileName(folder, value);\n\n\t\t\t\t\t\tif (!message) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tcontent: message,\n\t\t\t\t\t\t\tformatContent: true,\n\t\t\t\t\t\t\ttype: MessageType.ERROR\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn this.tree.refresh(folder).then(() => {\n\t\t\t\t\treturn this.tree.expand(folder).then(() => {\n\t\t\t\t\t\treturn this.tree.reveal(stat, 0.5).then(() => {\n\t\t\t\t\t\t\tthis.tree.setHighlight(stat);\n\n\t\t\t\t\t\t\tlet unbind: () => void = this.tree.addListener(CommonEventType.HIGHLIGHT, (e: IHighlightEvent) => {\n\t\t\t\t\t\t\t\tif (!e.highlight) {\n\t\t\t\t\t\t\t\t\tstat.destroy();\n\t\t\t\t\t\t\t\t\tthis.tree.refresh(folder).done(null, errors.onUnexpectedError);\n\t\t\t\t\t\t\t\t\tunbind();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n\n/* New File */\nexport class NewFileAction extends BaseNewAction {\n\n\tconstructor(\n\t\ttree: ITree,\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\tsuper('workbench.action.files.newFile', nls.localize('newFile', \"New File\"), tree, true, instantiationService.createInstance(CreateFileAction, element), null, contextService, editorService, fileService, messageService, textFileService, eventService);\n\n\t\tthis.class = 'explorer-action new-file';\n\t\tthis._updateEnablement();\n\t}\n}\n\n/* New Folder */\nexport class NewFolderAction extends BaseNewAction {\n\n\tconstructor(\n\t\ttree: ITree,\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\tsuper('workbench.action.files.newFolder', nls.localize('newFolder', \"New Folder\"), tree, false, instantiationService.createInstance(CreateFolderAction, element), null, contextService, editorService, fileService, messageService, textFileService, eventService);\n\n\t\tthis.class = 'explorer-action new-folder';\n\t\tthis._updateEnablement();\n\t}\n}\n\nexport abstract class BaseGlobalNewAction extends Action {\n\tprivate toDispose: Action;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IViewletService private viewletService: IViewletService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\treturn this.viewletService.openViewlet(Files.VIEWLET_ID, true).then((viewlet) => {\n\t\t\treturn TPromise.timeout(100).then(() => { // use a timeout to prevent the explorer from revealing the active file\n\t\t\t\tviewlet.focus();\n\n\t\t\t\tlet explorer = <ExplorerViewlet>viewlet;\n\t\t\t\tlet explorerView = explorer.getExplorerView();\n\n\t\t\t\tif (!explorerView.isExpanded()) {\n\t\t\t\t\texplorerView.expand();\n\t\t\t\t}\n\n\t\t\t\tlet action = this.toDispose = this.instantiationService.createInstance(this.getAction(), explorerView.getViewer(), null);\n\n\t\t\t\treturn explorer.getActionRunner().run(action);\n\t\t\t});\n\t\t});\n\t}\n\n\tprotected abstract getAction(): IConstructorSignature2<ITree, IFileStat, Action>;\n\n\tpublic dispose(): void {\n\t\tsuper.dispose();\n\n\t\tif (this.toDispose) {\n\t\t\tthis.toDispose.dispose();\n\t\t\tthis.toDispose = null;\n\t\t}\n\t}\n}\n\n/* Create new file from anywhere: Open untitled */\nexport class GlobalNewFileAction extends Action {\n\tpublic static ID = 'workbench.action.files.newUntitledFile';\n\tpublic static LABEL = nls.localize('newFile', \"New File\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IStorageService private storageService: IStorageService,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IUntitledEditorService private untitledEditorService: IUntitledEditorService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet input = this.untitledEditorService.createOrGet();\n\n\t\t// Make sure this untitled buffer shows up in working files set\n\t\tthis.textFileService.getWorkingFilesModel().addEntry(input.getResource());\n\n\t\treturn this.editorService.openEditor(input);\n\t}\n}\n\n/* Create new folder from anywhere */\nexport class GlobalNewFolderAction extends BaseGlobalNewAction {\n\tpublic static ID = 'workbench.action.files.newFolder';\n\tpublic static LABEL = nls.localize('newFolder', \"New Folder\");\n\n\tprotected getAction(): IConstructorSignature2<ITree, IFileStat, Action> {\n\t\treturn NewFolderAction;\n\t}\n}\n\n/* Create New File/Folder (only used internally by explorerViewer) */\nexport abstract class BaseCreateAction extends BaseRenameAction {\n\n\tpublic validateFileName(parent: IFileStat, name: string): string {\n\t\tif (this.element instanceof NewStatPlaceholder) {\n\t\t\treturn validateFileName(parent, name, false);\n\t\t}\n\n\t\treturn super.validateFileName(parent, name);\n\t}\n}\n\n/* Create New File (only used internally by explorerViewer) */\nexport class CreateFileAction extends BaseCreateAction {\n\n\tpublic static ID = 'workbench.files.action.createFileFromExplorer';\n\tpublic static LABEL = nls.localize('createNewFile', \"New File\");\n\n\tconstructor(\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IProgressService progressService: IProgressService,\n\t\t@IEventService eventService: IEventService\n\t) {\n\t\tsuper(CreateFileAction.ID, CreateFileAction.LABEL, element, contextService, editorService, fileService, messageService, textFileService, progressService, eventService);\n\n\t\tthis._updateEnablement();\n\t}\n\n\tpublic runAction(fileName: string): TPromise<any> {\n\t\treturn this.fileService.createFile(URI.file(paths.join(this.element.parent.resource.fsPath, fileName))).then((stat) => {\n\t\t\tthis.textFileService.getWorkingFilesModel().addEntry(stat.resource); // add to working files\n\n\t\t\treturn stat;\n\t\t}, (error) => {\n\t\t\tthis.onErrorWithRetry(error, () => this.runAction(fileName));\n\t\t});\n\t}\n}\n\n/* Create New Folder (only used internally by explorerViewer) */\nexport class CreateFolderAction extends BaseCreateAction {\n\n\tpublic static ID = 'workbench.files.action.createFolderFromExplorer';\n\tpublic static LABEL = nls.localize('createNewFolder', \"New Folder\");\n\n\tconstructor(\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IProgressService progressService: IProgressService,\n\t\t@IEventService eventService: IEventService\n\t) {\n\t\tsuper(CreateFolderAction.ID, CreateFolderAction.LABEL, null, contextService, editorService, fileService, messageService, textFileService, progressService, eventService);\n\n\t\tthis._updateEnablement();\n\t}\n\n\tpublic runAction(fileName: string): TPromise<any> {\n\t\treturn this.fileService.createFolder(URI.file(paths.join(this.element.parent.resource.fsPath, fileName))).then(null, (error) => {\n\t\t\tthis.onErrorWithRetry(error, () => this.runAction(fileName));\n\t\t});\n\t}\n}\n\nexport class BaseDeleteFileAction extends BaseFileAction {\n\tprivate tree: ITree;\n\tprivate useTrash: boolean;\n\tprivate skipConfirm: boolean;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\ttree: ITree,\n\t\telement: FileStat,\n\t\tuseTrash: boolean,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService\n\t) {\n\t\tsuper(id, label, contextService, editorService, fileService, messageService, textFileService, eventService);\n\n\t\tthis.tree = tree;\n\t\tthis.element = element;\n\t\tthis.useTrash = useTrash && !paths.isUNC(element.resource.fsPath); // on UNC shares there is no trash\n\n\t\tthis._updateEnablement();\n\t}\n\n\tpublic run(): TPromise<any> {\n\n\t\t// Remove highlight\n\t\tif (this.tree) {\n\t\t\tthis.tree.clearHighlight();\n\t\t}\n\n\t\t// Ask for Confirm\n\t\tif (!this.skipConfirm) {\n\t\t\tlet confirm: IConfirmation;\n\t\t\tif (this.useTrash) {\n\t\t\t\tconfirm = {\n\t\t\t\t\tmessage: this.element.isDirectory ? nls.localize('confirmMoveTrashMessageFolder', \"Are you sure you want to delete '{0}' and its contents?\", this.element.name) : nls.localize('confirmMoveTrashMessageFile', \"Are you sure you want to delete '{0}'?\", this.element.name),\n\t\t\t\t\tdetail: isWindows ? nls.localize('undoBin', \"You can restore from the recycle bin.\") : nls.localize('undoTrash', \"You can restore from the trash.\"),\n\t\t\t\t\tprimaryButton: isWindows ? nls.localize('deleteButtonLabelRecycleBin', \"&&Move to Recycle Bin\") : nls.localize({ key: 'deleteButtonLabelTrash', comment: ['&& denotes a mnemonic'] }, \"&&Move to Trash\")\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tconfirm = {\n\t\t\t\t\tmessage: this.element.isDirectory ? nls.localize('confirmDeleteMessageFolder', \"Are you sure you want to permanently delete '{0}' and its contents?\", this.element.name) : nls.localize('confirmDeleteMessageFile', \"Are you sure you want to permanently delete '{0}'?\", this.element.name),\n\t\t\t\t\tdetail: nls.localize('irreversible', \"This action is irreversible!\"),\n\t\t\t\t\tprimaryButton: nls.localize({ key: 'deleteButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Delete\")\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (!this.messageService.confirm(confirm)) {\n\t\t\t\treturn TPromise.as(null);\n\t\t\t}\n\t\t}\n\n\t\t// Since a delete operation can take a while we want to emit the event proactively to avoid issues\n\t\t// with stale entries in the explorer tree.\n\t\tthis.eventService.emit('files.internal:fileChanged', new Files.LocalFileChangeEvent(this.element.clone(), null));\n\n\t\t// Call function\n\t\tlet servicePromise = this.fileService.del(this.element.resource, this.useTrash).then(() => {\n\t\t\tif (this.element.parent) {\n\t\t\t\tthis.tree.setFocus(this.element.parent); // move focus to parent\n\t\t\t}\n\t\t}, (error: any) => {\n\n\t\t\t// Allow to retry\n\t\t\tlet extraAction: Action;\n\t\t\tif (this.useTrash) {\n\t\t\t\textraAction = new Action('permanentDelete', nls.localize('permDelete', \"Delete Permanently\"), null, true, () => { this.useTrash = false; this.skipConfirm = true; return this.run(); });\n\t\t\t}\n\n\t\t\tthis.onErrorWithRetry(error, () => this.run(), extraAction);\n\n\t\t\t// Since the delete failed, best we can do is to refresh the explorer from the root to show the current state of files.\n\t\t\tlet event = new Files.LocalFileChangeEvent(new FileStat(this.contextService.getWorkspace().resource, true, true), new FileStat(this.contextService.getWorkspace().resource, true, true));\n\t\t\tthis.eventService.emit('files.internal:fileChanged', event);\n\n\t\t\t// Focus back to tree\n\t\t\tthis.tree.DOMFocus();\n\t\t});\n\n\t\treturn servicePromise;\n\t}\n}\n\n/* Move File/Folder to trash */\nexport class MoveFileToTrashAction extends BaseDeleteFileAction {\n\tpublic static ID = 'workbench.files.action.moveFileToTrash';\n\n\tconstructor(\n\t\ttree: ITree,\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService\n\t) {\n\t\tsuper(MoveFileToTrashAction.ID, nls.localize('delete', \"Delete\"), tree, element, true, contextService, editorService, fileService, messageService, textFileService, eventService);\n\t}\n}\n\n/* Delete File/Folder */\nexport class DeleteFileAction extends BaseDeleteFileAction {\n\tpublic static ID = 'workbench.files.action.deleteFile';\n\n\tconstructor(\n\t\ttree: ITree,\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService\n\t) {\n\t\tsuper(DeleteFileAction.ID, nls.localize('delete', \"Delete\"), tree, element, false, contextService, editorService, fileService, messageService, textFileService, eventService);\n\t}\n}\n\n/* Import File */\nexport class ImportFileAction extends BaseFileAction {\n\n\tpublic static ID = 'workbench.files.action.importFile';\n\tprivate tree: ITree;\n\n\tconstructor(\n\t\ttree: ITree,\n\t\telement: FileStat,\n\t\tclazz: string,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService,\n\t\t@IProgressService private progressService: IProgressService\n\t) {\n\t\tsuper(ImportFileAction.ID, nls.localize('importFiles', \"Import Files\"), contextService, editorService, fileService, messageService, textFileService, eventService);\n\n\t\tthis.tree = tree;\n\t\tthis.element = element;\n\n\t\tif (clazz) {\n\t\t\tthis.class = clazz;\n\t\t}\n\n\t\tthis._updateEnablement();\n\t}\n\n\tpublic getViewer(): ITree {\n\t\treturn this.tree;\n\t}\n\n\tpublic run(context?: any): TPromise<any> {\n\t\tlet multiFileProgressTracker: IProgressRunner;\n\t\tlet importPromise = TPromise.as(null).then(() => {\n\t\t\tlet input = context.input;\n\t\t\tif (input.files && input.files.length > 0) {\n\n\t\t\t\t// Find parent for import\n\t\t\t\tlet targetElement: FileStat;\n\t\t\t\tif (this.element) {\n\t\t\t\t\ttargetElement = this.element;\n\t\t\t\t} else {\n\t\t\t\t\ttargetElement = this.tree.getFocus() || this.tree.getInput();\n\t\t\t\t}\n\n\t\t\t\tif (!targetElement.isDirectory) {\n\t\t\t\t\ttargetElement = targetElement.parent;\n\t\t\t\t}\n\n\t\t\t\t// Create real files array\n\t\t\t\tlet filesArray: File[] = [];\n\t\t\t\tfor (let i = 0; i < input.files.length; i++) {\n\t\t\t\t\tlet file = input.files[i];\n\t\t\t\t\tfilesArray.push(file);\n\t\t\t\t}\n\n\t\t\t\t// Resolve target to check for name collisions and ask user\n\t\t\t\treturn this.fileService.resolveFile(targetElement.resource).then((targetStat: IFileStat) => {\n\n\t\t\t\t\t// Check for name collisions\n\t\t\t\t\tlet targetNames: { [name: string]: IFileStat } = {};\n\t\t\t\t\ttargetStat.children.forEach((child) => {\n\t\t\t\t\t\ttargetNames[isLinux ? child.name : child.name.toLowerCase()] = child;\n\t\t\t\t\t});\n\n\t\t\t\t\tlet overwrite = true;\n\t\t\t\t\tif (filesArray.some((file) => {\n\t\t\t\t\t\treturn !!targetNames[isLinux ? file.name : file.name.toLowerCase()];\n\t\t\t\t\t})) {\n\t\t\t\t\t\tlet confirm: IConfirmation = {\n\t\t\t\t\t\t\tmessage: nls.localize('confirmOverwrite', \"A file or folder with the same name already exists in the destination folder. Do you want to replace it?\"),\n\t\t\t\t\t\t\tdetail: nls.localize('irreversible', \"This action is irreversible!\"),\n\t\t\t\t\t\t\tprimaryButton: nls.localize({ key: 'replaceButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Replace\")\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\toverwrite = this.messageService.confirm(confirm);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!overwrite) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Progress per file imported\n\t\t\t\t\tif (filesArray.length > 1 && this.progressService) {\n\t\t\t\t\t\tmultiFileProgressTracker = this.progressService.show(filesArray.length);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Run import in sequence\n\t\t\t\t\tlet importPromisesFactory: ITask<TPromise<void>>[] = [];\n\t\t\t\t\tfilesArray.forEach((file) => {\n\t\t\t\t\t\timportPromisesFactory.push(() => {\n\t\t\t\t\t\t\tlet sourceFile = URI.file((<any>file).path);\n\n\t\t\t\t\t\t\treturn this.fileService.importFile(sourceFile, targetElement.resource).then((result: IImportResult) => {\n\n\t\t\t\t\t\t\t\t// Progress\n\t\t\t\t\t\t\t\tif (multiFileProgressTracker) {\n\t\t\t\t\t\t\t\t\tmultiFileProgressTracker.worked(1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (result.stat) {\n\n\t\t\t\t\t\t\t\t\t// Emit Deleted Event if file gets replaced unless it is the same file\n\t\t\t\t\t\t\t\t\tlet oldFile = targetNames[isLinux ? file.name : file.name.toLowerCase()];\n\t\t\t\t\t\t\t\t\tif (oldFile && oldFile.resource.fsPath !== result.stat.resource.fsPath) {\n\t\t\t\t\t\t\t\t\t\tthis.eventService.emit('files.internal:fileChanged', new Files.LocalFileChangeEvent(oldFile, null));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Emit Import Event\n\t\t\t\t\t\t\t\t\tthis.eventService.emit('files.internal:fileChanged', new FileImportedEvent(result.stat, result.isNew, context.event));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, (error: any) => {\n\t\t\t\t\t\t\t\tthis.messageService.show(Severity.Error, error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\treturn sequence(importPromisesFactory);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (this.progressService && !multiFileProgressTracker) {\n\t\t\tthis.progressService.showWhile(importPromise, 800);\n\t\t}\n\n\t\treturn importPromise.then(() => {\n\t\t\tthis.tree.clearHighlight();\n\t\t}, (error: any) => {\n\t\t\tthis.onError(error);\n\t\t\tthis.tree.clearHighlight();\n\t\t});\n\t}\n}\n\n/** File import event is emitted when a file is import into the workbench. */\nexport class FileImportedEvent extends Files.LocalFileChangeEvent {\n\tprivate isNew: boolean;\n\n\tconstructor(stat?: IFileStat, isNew?: boolean, originalEvent?: Event) {\n\t\tsuper(null, stat, originalEvent);\n\n\t\tthis.isNew = isNew;\n\t}\n\n\tpublic gotAdded(): boolean {\n\t\treturn this.isNew;\n\t}\n\n\tpublic gotMoved(): boolean {\n\t\treturn false;\n\t}\n\n\tpublic gotUpdated(): boolean {\n\t\treturn !this.isNew;\n\t}\n\n\tpublic gotDeleted(): boolean {\n\t\treturn false;\n\t}\n}\n\n// Copy File/Folder\nlet fileToCopy: FileStat;\nexport class CopyFileAction extends BaseFileAction {\n\n\tpublic static ID = 'workbench.files.action.copyFile';\n\n\tprivate tree: ITree;\n\tconstructor(\n\t\ttree: ITree,\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService\n\t) {\n\t\tsuper(CopyFileAction.ID, nls.localize('copyFile', \"Copy\"), contextService, editorService, fileService, messageService, textFileService, eventService);\n\n\t\tthis.tree = tree;\n\t\tthis.element = element;\n\t\tthis._updateEnablement();\n\t}\n\n\tpublic run(): TPromise<any> {\n\n\t\t// Remember as file/folder to copy\n\t\tfileToCopy = this.element;\n\n\t\t// Remove highlight\n\t\tif (this.tree) {\n\t\t\tthis.tree.clearHighlight();\n\t\t}\n\n\t\tthis.tree.DOMFocus();\n\n\t\treturn TPromise.as(null);\n\t}\n}\n\n// Paste File/Folder\nexport class PasteFileAction extends BaseFileAction {\n\n\tpublic static ID = 'workbench.files.action.pasteFile';\n\n\tprivate tree: ITree;\n\n\tconstructor(\n\t\ttree: ITree,\n\t\telement: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService\n\t) {\n\t\tsuper(PasteFileAction.ID, nls.localize('pasteFile', \"Paste\"), contextService, editorService, fileService, messageService, textFileService, eventService);\n\n\t\tthis.tree = tree;\n\t\tthis.element = element;\n\t\tthis._updateEnablement();\n\t}\n\n\t_isEnabled(): boolean {\n\n\t\t// Need at least a file to copy\n\t\tif (!fileToCopy) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if file was deleted or moved meanwhile\n\t\tlet root: FileStat = this.tree.getInput();\n\t\tlet exists = root.find(fileToCopy.resource);\n\t\tif (!exists) {\n\t\t\tfileToCopy = null;\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if target is ancestor of pasted folder\n\t\tif (this.element.resource.toString() !== fileToCopy.resource.toString() && paths.isEqualOrParent(this.element.resource.fsPath, fileToCopy.resource.fsPath)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic run(): TPromise<any> {\n\n\t\t// Find target\n\t\tlet target: FileStat;\n\t\tif (this.element.resource.toString() === fileToCopy.resource.toString()) {\n\t\t\ttarget = this.element.parent;\n\t\t} else {\n\t\t\ttarget = this.element.isDirectory ? this.element : this.element.parent;\n\t\t}\n\n\t\t// Reuse duplicate action\n\t\tlet pasteAction = this.instantiationService.createInstance(DuplicateFileAction, this.tree, fileToCopy, target);\n\n\t\treturn pasteAction.run().then(() => {\n\t\t\tthis.tree.DOMFocus();\n\t\t});\n\t}\n}\n\n// Duplicate File/Folder\nexport class DuplicateFileAction extends BaseFileAction {\n\tprivate tree: ITree;\n\tprivate target: IFileStat;\n\n\tconstructor(\n\t\ttree: ITree,\n\t\telement: FileStat,\n\t\ttarget: FileStat,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IEventService eventService: IEventService,\n\t\t@IProgressService private progressService: IProgressService\n\t) {\n\t\tsuper('workbench.files.action.duplicateFile', nls.localize('duplicateFile', \"Duplicate\"), contextService, editorService, fileService, messageService, textFileService, eventService);\n\n\t\tthis.tree = tree;\n\t\tthis.element = element;\n\t\tthis.target = (target && target.isDirectory) ? target : element.parent;\n\t\tthis._updateEnablement();\n\t}\n\n\tpublic run(): TPromise<any> {\n\n\t\t// Remove highlight\n\t\tif (this.tree) {\n\t\t\tthis.tree.clearHighlight();\n\t\t}\n\n\t\t// Copy File and emit event\n\t\tlet result = this.fileService.copyFile(this.element.resource, this.findTarget()).then((stat: IFileStat) => {\n\t\t\tthis.eventService.emit('files.internal:fileChanged', new Files.LocalFileChangeEvent(null, stat));\n\t\t}, (error: any) => {\n\t\t\tthis.onError(error);\n\t\t});\n\n\t\tif (this.progressService) {\n\t\t\tthis.progressService.showWhile(result, 800);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic onError(error: any): void {\n\t\tthis.messageService.show(Severity.Error, error);\n\t}\n\n\tprivate findTarget(): URI {\n\t\tlet root: FileStat = this.tree.getInput();\n\t\tlet name = this.element.name;\n\n\t\tlet candidate = URI.file(paths.join(this.target.resource.fsPath, name));\n\t\twhile (true) {\n\t\t\tif (!root.find(candidate)) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tname = this.toCopyName(name, this.element.isDirectory);\n\t\t\tcandidate = URI.file(paths.join(this.target.resource.fsPath, name));\n\t\t}\n\n\t\treturn candidate;\n\t}\n\n\tprivate toCopyName(name: string, isFolder: boolean): string {\n\n\t\t// file.1.txt=>file.2.txt\n\t\tif (!isFolder && name.match(/(\\d+)(\\..*)$/)) {\n\t\t\treturn name.replace(/(\\d+)(\\..*)$/, (match, g1?, g2?) => { return (parseInt(g1) + 1) + g2; });\n\t\t}\n\n\t\t// file.txt=>file.1.txt\n\t\tlet lastIndexOfDot = name.lastIndexOf('.');\n\t\tif (!isFolder && lastIndexOfDot >= 0) {\n\t\t\treturn strings.format('{0}.1{1}', name.substr(0, lastIndexOfDot), name.substr(lastIndexOfDot));\n\t\t}\n\n\t\t// folder.1=>folder.2\n\t\tif (isFolder && name.match(/(\\d+)$/)) {\n\t\t\treturn name.replace(/(\\d+)$/, (match: string, ...groups: any[]) => { return String(parseInt(groups[0]) + 1); });\n\t\t}\n\n\t\t// file/folder=>file.1/folder.1\n\t\treturn strings.format('{0}.1', name);\n\t}\n}\n\n// Open to the side\nexport class OpenToSideAction extends Action {\n\n\tpublic static ID = 'workbench.files.action.openToSide';\n\tpublic static LABEL = nls.localize('openToSide', \"Open to the Side\");\n\n\tprivate tree: ITree;\n\tprivate resource: URI;\n\tprivate preserveFocus: boolean;\n\n\tconstructor(\n\t\ttree: ITree,\n\t\tresource: URI,\n\t\tpreserveFocus: boolean,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService\n\t) {\n\t\tsuper(OpenToSideAction.ID, OpenToSideAction.LABEL);\n\n\t\tthis.tree = tree;\n\t\tthis.preserveFocus = preserveFocus;\n\t\tthis.resource = resource;\n\n\t\tthis.updateEnablement();\n\t}\n\n\tprivate updateEnablement(): void {\n\t\tlet activeEditor = this.editorService.getActiveEditor();\n\t\tthis.enabled = (!activeEditor || activeEditor.position !== Position.RIGHT);\n\t}\n\n\tpublic run(): TPromise<any> {\n\n\t\t// Remove highlight\n\t\tthis.tree.clearHighlight();\n\n\t\t// Set side input\n\t\treturn this.editorService.openEditor({\n\t\t\tresource: this.resource,\n\t\t\toptions: {\n\t\t\t\tpreserveFocus: this.preserveFocus\n\t\t\t}\n\t\t}, true);\n\t}\n}\n\nlet globalResourceToCompare: URI;\nexport class SelectResourceForCompareAction extends Action {\n\tprivate resource: URI;\n\tprivate tree: ITree;\n\n\tconstructor(resource: URI, tree: ITree) {\n\t\tsuper('workbench.files.action.selectForCompare', nls.localize('compareSource', \"Select for Compare\"));\n\n\t\tthis.tree = tree;\n\t\tthis.resource = resource;\n\t\tthis.enabled = true;\n\t}\n\n\tpublic run(): TPromise<any> {\n\n\t\t// Remember as source file to compare\n\t\tglobalResourceToCompare = this.resource;\n\n\t\t// Remove highlight\n\t\tif (this.tree) {\n\t\t\tthis.tree.clearHighlight();\n\t\t\tthis.tree.DOMFocus();\n\t\t}\n\n\t\treturn TPromise.as(null);\n\t}\n}\n\n// Global Compare with\nexport class GlobalCompareResourcesAction extends Action {\n\n\tpublic static ID = 'workbench.files.action.compareFileWith';\n\tpublic static LABEL = nls.localize('globalCompareFile', \"Compare Active File With...\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IQuickOpenService private quickOpenService: IQuickOpenService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@IEventService private eventService: IEventService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet fileInput = asFileEditorInput(this.editorService.getActiveEditorInput());\n\t\tif (fileInput) {\n\n\t\t\t// Keep as resource to compare\n\t\t\tglobalResourceToCompare = fileInput.getResource();\n\n\t\t\t// Listen for next editor to open\n\t\t\tlet unbind = this.eventService.addListener(WorkbenchEventType.EDITOR_INPUT_OPENING, (e: EditorEvent) => {\n\t\t\t\tunbind(); // listen once\n\n\t\t\t\tlet otherFileInput = asFileEditorInput(e.editorInput);\n\t\t\t\tif (otherFileInput) {\n\t\t\t\t\tlet compareAction = this.instantiationService.createInstance(CompareResourcesAction, otherFileInput.getResource(), null);\n\t\t\t\t\tif (compareAction._isEnabled()) {\n\t\t\t\t\t\te.prevent();\n\n\t\t\t\t\t\tcompareAction.run().done(() => compareAction.dispose());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.messageService.show(Severity.Info, nls.localize('unableToFileToCompare', \"The selected file can not be compared with '{0}'.\", paths.basename(globalResourceToCompare.fsPath)));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Bring up quick open\n\t\t\tthis.quickOpenService.show().then(() => {\n\t\t\t\tunbind(); // make sure to unbind if quick open is closing\n\t\t\t});\n\n\t\t} else {\n\t\t\tthis.messageService.show(Severity.Info, nls.localize('openFileToCompare', \"Open a file first to compare it with another file.\"));\n\t\t}\n\n\t\treturn TPromise.as(true);\n\t}\n}\n\n// Compare with Resource\nexport class CompareResourcesAction extends Action {\n\tprivate tree: ITree;\n\tprivate resource: URI;\n\n\tconstructor(\n\t\tresource: URI,\n\t\ttree: ITree,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService\n\t) {\n\t\tsuper('workbench.files.action.compareFiles', CompareResourcesAction.computeLabel());\n\n\t\tthis.tree = tree;\n\t\tthis.resource = resource;\n\t}\n\n\tprivate static computeLabel(): string {\n\t\tif (globalResourceToCompare) {\n\t\t\treturn nls.localize('compareWith', \"Compare with '{0}'\", paths.basename(globalResourceToCompare.fsPath));\n\t\t}\n\n\t\treturn nls.localize('compareFiles', \"Compare Files\");\n\t}\n\n\tpublic getLabel(): string {\n\t\treturn CompareResourcesAction.computeLabel();\n\t}\n\n\t_isEnabled(): boolean {\n\n\t\t// Need at least a resource to compare\n\t\tif (!globalResourceToCompare) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if file was deleted or moved meanwhile (explorer only)\n\t\tif (this.tree) {\n\t\t\tlet root: FileStat = this.tree.getInput();\n\t\t\tif (root instanceof FileStat) {\n\t\t\t\tlet exists = root.find(globalResourceToCompare);\n\t\t\t\tif (!exists) {\n\t\t\t\t\tglobalResourceToCompare = null;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Check if target is identical to source\n\t\tif (this.resource.toString() === globalResourceToCompare.toString()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet mimeA = guessMimeTypes(this.resource.fsPath).join(', ');\n\t\tlet mimeB = guessMimeTypes(globalResourceToCompare.fsPath).join(', ');\n\n\t\t// Check if target has same mime\n\t\tif (mimeA === mimeB) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Ensure the mode is equal if this is text (limitation of current diff infrastructure)\n\t\tlet isBinaryA = isBinaryMime(mimeA);\n\t\tlet isBinaryB = isBinaryMime(mimeB);\n\n\t\t// Ensure we are not comparing binary with text\n\t\tif (isBinaryA !== isBinaryB) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic run(): TPromise<any> {\n\n\t\t// Remove highlight\n\t\tif (this.tree) {\n\t\t\tthis.tree.clearHighlight();\n\t\t}\n\n\t\tlet leftInput = this.instantiationService.createInstance(FileEditorInput, globalResourceToCompare, void 0, void 0);\n\t\tlet rightInput = this.instantiationService.createInstance(FileEditorInput, this.resource, void 0, void 0);\n\n\t\treturn this.editorService.openEditor(new DiffEditorInput(toDiffLabel(globalResourceToCompare, this.resource, this.contextService), null, leftInput, rightInput));\n\t}\n}\n\n// Refresh Explorer Viewer\nexport class RefreshViewExplorerAction extends Action {\n\n\tconstructor(explorerView: ExplorerView, clazz: string) {\n\t\tsuper('workbench.files.action.refreshExplorer', nls.localize('refresh', \"Refresh\"), clazz, true, (context: any) => explorerView.refresh());\n\t}\n}\n\nexport abstract class BaseActionWithErrorReporting extends Action {\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\tprivate messageService: IMessageService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\treturn this.doRun().then(() => true, (error) => {\n\t\t\tthis.messageService.show(Severity.Error, errors.toErrorMessage(error, false));\n\t\t});\n\t}\n\n\tprotected abstract doRun(): TPromise<boolean>;\n}\n\nexport abstract class BaseSaveFileAction extends BaseActionWithErrorReporting {\n\tprivate resource: URI;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IUntitledEditorService private untitledEditorService: IUntitledEditorService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IMessageService messageService: IMessageService\n\t) {\n\t\tsuper(id, label, messageService);\n\n\t\tthis.enabled = true;\n\t}\n\n\tpublic abstract isSaveAs(): boolean;\n\n\tpublic setResource(resource: URI): void {\n\t\tthis.resource = resource;\n\t}\n\n\tprotected doRun(): TPromise<boolean> {\n\t\tlet source: URI;\n\t\tif (this.resource) {\n\t\t\tsource = this.resource;\n\t\t} else {\n\t\t\tsource = getUntitledOrFileResource(this.editorService.getActiveEditorInput(), true);\n\t\t}\n\n\t\tif (source) {\n\n\t\t\t// Save As (or Save untitled with associated path)\n\t\t\tif (this.isSaveAs() || source.scheme === 'untitled') {\n\t\t\t\tlet positionsOfSource = findSaveAsPositions(this.editorService, source);\n\n\t\t\t\tlet mimeOfSource: string;\n\t\t\t\tif (source.scheme === 'untitled') {\n\t\t\t\t\tlet selectedMime = this.untitledEditorService.get(source).getMime();\n\t\t\t\t\tif (!isUnspecific(selectedMime)) {\n\t\t\t\t\t\tmimeOfSource = [selectedMime, MIME_TEXT].join(', ');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet encodingOfSource: string;\n\t\t\t\tif (source.scheme === 'untitled') {\n\t\t\t\t\tencodingOfSource = this.untitledEditorService.get(source).getEncoding();\n\t\t\t\t} else if (source.scheme === 'file') {\n\t\t\t\t\tlet textModel = CACHE.get(source);\n\t\t\t\t\tencodingOfSource = textModel && textModel.getEncoding(); // text model can be null e.g. if this is a binary file!\n\t\t\t\t}\n\n\t\t\t\tlet selectionOfSource: IEditorSelection;\n\t\t\t\tif (positionsOfSource.length) {\n\t\t\t\t\tconst activeEditor = this.editorService.getActiveEditor();\n\t\t\t\t\tif (activeEditor && positionsOfSource.indexOf(activeEditor.position) >= 0) {\n\t\t\t\t\t\tselectionOfSource = <IEditorSelection>activeEditor.getSelection();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Special case: an untitled file with associated path gets saved directly unless \"saveAs\" is true\n\t\t\t\tlet savePromise: TPromise<URI>;\n\t\t\t\tif (!this.isSaveAs() && source.scheme === 'untitled' && this.untitledEditorService.hasAssociatedFilePath(source)) {\n\t\t\t\t\tsavePromise = this.textFileService.save(source).then((result) => {\n\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\treturn URI.file(source.fsPath);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Otherwise, really \"Save As...\"\n\t\t\t\telse {\n\t\t\t\t\tsavePromise = this.textFileService.saveAs(source);\n\t\t\t\t}\n\n\t\t\t\treturn savePromise.then((target) => {\n\t\t\t\t\tif (!target) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reopen editors for the resource based on the positions\n\t\t\t\t\tlet reopenPromise = TPromise.as(null);\n\t\t\t\t\tif (target.toString() !== source.toString() && positionsOfSource.length) {\n\t\t\t\t\t\tlet targetInput = this.instantiationService.createInstance(FileEditorInput, target, mimeOfSource, encodingOfSource);\n\n\t\t\t\t\t\tlet options: TextEditorOptions;\n\t\t\t\t\t\tif (selectionOfSource) {\n\t\t\t\t\t\t\toptions = new TextEditorOptions();\n\t\t\t\t\t\t\toptions.selection(selectionOfSource.startLineNumber, selectionOfSource.startColumn, selectionOfSource.endLineNumber, selectionOfSource.endColumn);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treopenPromise = this.editorService.openEditor(targetInput, options, positionsOfSource[0]).then(() => {\n\t\t\t\t\t\t\tif (positionsOfSource.length > 1) {\n\t\t\t\t\t\t\t\treturn this.editorService.openEditor(targetInput, options, positionsOfSource[1]).then(() => {\n\t\t\t\t\t\t\t\t\tif (positionsOfSource.length > 2) {\n\t\t\t\t\t\t\t\t\t\treturn this.editorService.openEditor(targetInput, options, positionsOfSource[2]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn reopenPromise;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Just save\n\t\t\treturn this.textFileService.save(source);\n\t\t}\n\n\t\treturn TPromise.as(false);\n\t}\n}\n\nexport class SaveFileAction extends BaseSaveFileAction {\n\n\tpublic static ID = 'workbench.action.files.save';\n\tpublic static LABEL = nls.localize('save', \"Save\");\n\n\tpublic isSaveAs(): boolean {\n\t\treturn false;\n\t}\n}\n\nexport class SaveFileAsAction extends BaseSaveFileAction {\n\n\tpublic static ID = 'workbench.action.files.saveAs';\n\tpublic static LABEL = nls.localize('saveAs', \"Save As...\");\n\n\tpublic isSaveAs(): boolean {\n\t\treturn true;\n\t}\n}\n\nexport abstract class BaseSaveAllAction extends BaseActionWithErrorReporting {\n\tprivate toDispose: IDisposable[];\n\tprivate lastIsDirty: boolean;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IUntitledEditorService private untitledEditorService: IUntitledEditorService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IEventService private eventService: IEventService,\n\t\t@IMessageService messageService: IMessageService\n\t) {\n\t\tsuper(id, label, messageService);\n\n\t\tthis.toDispose = [];\n\t\tthis.lastIsDirty = this.textFileService.isDirty();\n\t\tthis.enabled = this.lastIsDirty;\n\n\t\tthis.registerListeners();\n\t}\n\n\tprotected abstract includeUntitled(): boolean;\n\n\tprivate registerListeners(): void {\n\n\t\t// listen to files being changed locally\n\t\tthis.toDispose.push(this.eventService.addListener2(Files.EventType.FILE_DIRTY, (e: Files.LocalFileChangeEvent) => this.updateEnablement(true)));\n\t\tthis.toDispose.push(this.eventService.addListener2(Files.EventType.FILE_SAVED, (e: Files.LocalFileChangeEvent) => this.updateEnablement(false)));\n\t\tthis.toDispose.push(this.eventService.addListener2(Files.EventType.FILE_REVERTED, (e: Files.LocalFileChangeEvent) => this.updateEnablement(false)));\n\t\tthis.toDispose.push(this.eventService.addListener2(Files.EventType.FILE_SAVE_ERROR, (e: Files.LocalFileChangeEvent) => this.updateEnablement(true)));\n\n\t\tif (this.includeUntitled()) {\n\t\t\tthis.toDispose.push(this.eventService.addListener2(WorkbenchEventType.UNTITLED_FILE_DIRTY, () => this.updateEnablement(true)));\n\t\t\tthis.toDispose.push(this.eventService.addListener2(WorkbenchEventType.UNTITLED_FILE_DELETED, () => this.updateEnablement(false)));\n\t\t}\n\t}\n\n\tprivate updateEnablement(isDirty: boolean): void {\n\t\tif (this.lastIsDirty !== isDirty) {\n\t\t\tthis.enabled = this.textFileService.isDirty();\n\t\t\tthis.lastIsDirty = this.enabled;\n\t\t}\n\t}\n\n\tprotected doRun(): TPromise<boolean> {\n\n\t\t// Store mimes per untitled file to restore later\n\t\tconst mapUntitledToProperties: { [resource: string]: { mime: string; encoding: string; } } = Object.create(null);\n\t\tthis.textFileService.getDirty()\n\t\t\t.filter(r => r.scheme === 'untitled')\t\t\t// All untitled resources^\n\t\t\t.map(r => this.untitledEditorService.get(r))\t// Mapped to their inputs\n\t\t\t.filter(i => !!i)\t\t\t\t\t\t\t\t// If possible :)\n\t\t\t.forEach(i => mapUntitledToProperties[i.getResource().toString()] = { mime: i.getMime(), encoding: i.getEncoding() });\n\n\t\t// Save all\n\t\treturn this.textFileService.saveAll(this.includeUntitled()).then((result) => {\n\n\t\t\t// all saved - now try to reopen saved untitled ones\n\t\t\tif (this.includeUntitled()) {\n\t\t\t\tlet untitledResults = result.results.filter((res) => res.source.scheme === 'untitled');\n\t\t\t\tlet reopenPromises: { (): TPromise<IEditor> }[] = [];\n\n\t\t\t\t// Create a promise function for each editor open call to reopen\n\t\t\t\tuntitledResults.forEach((res) => {\n\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\tlet positions = findSaveAsPositions(this.editorService, res.source);\n\n\t\t\t\t\t\tlet mimeOfSource: string;\n\t\t\t\t\t\tlet selectedMime = mapUntitledToProperties[res.source.toString()] && mapUntitledToProperties[res.source.toString()].mime;\n\t\t\t\t\t\tif (!isUnspecific(selectedMime)) {\n\t\t\t\t\t\t\tmimeOfSource = [selectedMime, MIME_TEXT].join(', ');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet encodingOfSource: string = mapUntitledToProperties[res.source.toString()] && mapUntitledToProperties[res.source.toString()].encoding;\n\n\t\t\t\t\t\tlet targetInput = this.instantiationService.createInstance(FileEditorInput, res.target, mimeOfSource, encodingOfSource);\n\n\t\t\t\t\t\tlet options = new EditorOptions();\n\t\t\t\t\t\toptions.preserveFocus = true;\n\n\t\t\t\t\t\tpositions.forEach((position) => {\n\t\t\t\t\t\t\treopenPromises.push(() => {\n\t\t\t\t\t\t\t\treturn this.editorService.openEditor(targetInput, options, position);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Build a promise that completes when reopen is done\n\t\t\t\tlet reopenPromise = TPromise.as(null);\n\t\t\t\tif (reopenPromises.length) {\n\t\t\t\t\treopenPromise = reopenPromises[0]().then(() => {\n\t\t\t\t\t\tif (reopenPromises.length > 1) {\n\t\t\t\t\t\t\treturn reopenPromises[1]().then(() => {\n\t\t\t\t\t\t\t\tif (reopenPromises.length > 2) {\n\t\t\t\t\t\t\t\t\treturn reopenPromises[2]();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn reopenPromise;\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.toDispose = dispose(this.toDispose);\n\n\t\tsuper.dispose();\n\t}\n}\n\nfunction findSaveAsPositions(editorService: IWorkbenchEditorService, outerResource: URI): Position[] {\n\tlet activeInput = editorService.getActiveEditorInput();\n\n\treturn editorService.getVisibleEditors().filter((editor) => {\n\t\tif (outerResource.scheme === 'file' && activeInput !== editor.input) {\n\t\t\treturn false; // skip non active if this is about a file; for untitled respect them all\n\t\t}\n\n\t\tlet innerResource = getUntitledOrFileResource(editor.input);\n\n\t\treturn innerResource && innerResource.toString() === outerResource.toString();\n\t}).map((editor) => editor.position);\n}\n\nexport class SaveAllAction extends BaseSaveAllAction {\n\n\tpublic static ID = 'workbench.action.files.saveAll';\n\tpublic static LABEL = nls.localize('saveAll', \"Save All\");\n\n\tpublic get class(): string {\n\t\treturn 'explorer-action save-all';\n\t}\n\n\tprotected includeUntitled(): boolean {\n\t\treturn true;\n\t}\n}\n\nexport class SaveFilesAction extends BaseSaveAllAction {\n\n\tpublic static ID = 'workbench.action.files.saveFiles';\n\tpublic static LABEL = nls.localize('saveFiles', \"Save Dirty Files\");\n\n\tprotected includeUntitled(): boolean {\n\t\treturn false;\n\t}\n}\n\nexport class RevertFileAction extends Action {\n\n\tpublic static ID = 'workbench.action.files.revert';\n\tpublic static LABEL = nls.localize('revert', \"Revert File\");\n\n\tprivate resource: URI;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService\n\t) {\n\t\tsuper(id, label);\n\n\t\tthis.enabled = true;\n\t}\n\n\tpublic setResource(resource: URI): void {\n\t\tthis.resource = resource;\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet resource: URI;\n\t\tif (this.resource) {\n\t\t\tresource = this.resource;\n\t\t} else {\n\t\t\tlet activeFileInput = asFileEditorInput(this.editorService.getActiveEditorInput(), true);\n\t\t\tif (activeFileInput) {\n\t\t\t\tresource = activeFileInput.getResource();\n\t\t\t}\n\t\t}\n\n\t\tif (resource && resource.scheme !== 'untitled') {\n\t\t\treturn this.textFileService.revert(resource, true /* force */);\n\t\t}\n\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport class OpenResourcesAction extends Action {\n\tprivate resources: IResourceInput[];\n\tprivate diffMode: boolean;\n\n\tconstructor(\n\t\tresources: IResourceInput[],\n\t\tdiffMode: boolean,\n\t\t@IPartService private partService: IPartService,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@IViewletService private viewletService: IViewletService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService\n\t) {\n\t\tsuper('workbench.files.action.openResourcesAction');\n\n\t\tthis.resources = resources;\n\t\tthis.diffMode = diffMode;\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\treturn this.partService.joinCreation().then(() => {\n\t\t\tlet viewletPromise = TPromise.as(null);\n\t\t\tif (!this.partService.isSideBarHidden()) {\n\t\t\t\tviewletPromise = this.viewletService.openViewlet(Files.VIEWLET_ID, false);\n\t\t\t}\n\n\t\t\treturn viewletPromise.then(() => {\n\n\t\t\t\t// Out of workspace files get added right away to working files model\n\t\t\t\tthis.resources.forEach((fileToOpen) => {\n\t\t\t\t\tlet resource = fileToOpen.resource;\n\t\t\t\t\tlet workspace = this.contextService.getWorkspace();\n\n\t\t\t\t\tif (!workspace || !paths.isEqualOrParent(resource.fsPath, workspace.resource.fsPath)) {\n\t\t\t\t\t\tthis.textFileService.getWorkingFilesModel().addEntry(resource);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// In diffMode we open 2 resources as diff\n\t\t\t\tif (this.diffMode) {\n\t\t\t\t\treturn TPromise.join(this.resources.map(f => this.editorService.inputToType(f))).then((inputs: EditorInput[]) => {\n\t\t\t\t\t\treturn this.editorService.openEditor(new DiffEditorInput(toDiffLabel(this.resources[0].resource, this.resources[1].resource, this.contextService), null, inputs[0], inputs[1]));\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// For one file, just put it into the current active editor\n\t\t\t\tif (this.resources.length === 1) {\n\t\t\t\t\treturn this.editorService.openEditor(this.resources[0]);\n\t\t\t\t}\n\n\t\t\t\t// Otherwise replace all\n\t\t\t\treturn this.editorService.setEditors(this.resources);\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport abstract class BaseCloseWorkingFileAction extends Action {\n\tprotected model: WorkingFilesModel;\n\tprivate elements: URI[];\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\tclazz: string,\n\t\tmodel: WorkingFilesModel,\n\t\telements: WorkingFileEntry[],\n\t\t@IUntitledEditorService private untitledEditorService: IUntitledEditorService,\n\t\t@IWorkbenchEditorService protected editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@IQuickOpenService private quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(id, label, clazz);\n\n\t\tthis.model = model;\n\t\tthis.elements = elements ? elements.map(e => e.resource) : void 0 /* all */;\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet workingFilesCount = this.model.getEntries().length;\n\n\t\t// Handle dirty\n\t\tlet isDirty: boolean;\n\t\tif (this.elements) {\n\t\t\tisDirty = this.elements.some(e => this.textFileService.isDirty(e));\n\t\t} else {\n\t\t\tisDirty = this.textFileService.isDirty();\n\t\t}\n\n\t\tlet saveOrRevertPromise: TPromise<Files.ITextFileOperationResult> = TPromise.as(null);\n\t\tif (isDirty) {\n\t\t\tlet confirmResult = this.textFileService.confirmSave(this.elements);\n\n\t\t\tswitch (confirmResult) {\n\t\t\t\tcase Files.ConfirmResult.SAVE:\n\t\t\t\t\tif (this.elements) {\n\t\t\t\t\t\tsaveOrRevertPromise = this.textFileService.saveAll(this.elements);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsaveOrRevertPromise = this.textFileService.saveAll(true /* include untitled */);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase Files.ConfirmResult.DONT_SAVE:\n\t\t\t\t\tif (this.elements) {\n\t\t\t\t\t\tsaveOrRevertPromise = this.textFileService.revertAll(this.elements);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsaveOrRevertPromise = this.textFileService.revertAll();\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase Files.ConfirmResult.CANCEL:\n\t\t\t\t\treturn TPromise.as(null);\n\t\t\t}\n\t\t}\n\n\t\treturn saveOrRevertPromise.then((result?: Files.ITextFileOperationResult) => {\n\n\t\t\t// Collect resources to dispose\n\t\t\tlet resourcesToDispose: URI[] = [];\n\t\t\tif (this.elements) {\n\t\t\t\tresourcesToDispose = this.elements;\n\t\t\t} else {\n\t\t\t\tresourcesToDispose = this.model.getEntries().map((e) => e.resource);\n\t\t\t}\n\n\t\t\t// Remove those that failed from the save/revert if we had it\n\t\t\tif (result) {\n\t\t\t\tlet failed = result.results.filter((r) => !r.success).map((r) => r.source.toString());\n\t\t\t\tresourcesToDispose = resourcesToDispose.filter((r) => failed.indexOf(r.toString()) < 0);\n\t\t\t}\n\n\t\t\t// remove from model\n\t\t\tif (resourcesToDispose.length === workingFilesCount) {\n\t\t\t\tthis.model.clear();\n\t\t\t} else {\n\t\t\t\tresourcesToDispose.forEach((r) => this.model.removeEntry(r));\n\t\t\t}\n\n\t\t\t// dispose\n\t\t\tresourcesToDispose.forEach((r) => this.disposeResource(r));\n\t\t}, (error) => {\n\t\t\tthis.messageService.show(Severity.Error, error);\n\t\t});\n\t}\n\n\tprivate disposeResource(resource: URI): void {\n\n\t\t// file inputs\n\t\tfileEditorInputsForResource(resource, this.editorService, this.quickOpenService).forEach((input) => {\n\t\t\tif (!input.isDisposed()) {\n\t\t\t\tinput.dispose(true);\n\t\t\t}\n\t\t});\n\n\t\t// untitled inputs\n\t\tlet input = this.untitledEditorService.get(resource);\n\t\tif (input) {\n\t\t\tinput.dispose();\n\t\t}\n\t}\n}\n\nexport class CloseAllWorkingFilesAction extends BaseCloseWorkingFileAction {\n\n\tpublic static ID = 'workbench.files.action.closeAllWorkingFiles';\n\n\tprivate listenerToDispose: IDisposable;\n\n\tconstructor(\n\t\tmodel: WorkingFilesModel,\n\t\t@IUntitledEditorService untitledEditorService: IUntitledEditorService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@IQuickOpenService quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(CloseAllWorkingFilesAction.ID, nls.localize('closeAllLabel', \"Close All Files\"), 'action-close-all-files', model, null, untitledEditorService, editorService, textFileService, messageService, quickOpenService);\n\n\t\tthis.enabled = (model.count() > 0);\n\t\tthis.listenerToDispose = model.onModelChange(this.onModelChange, this);\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\treturn super.run().then(() => closeNonFileEditors(this.editorService)); // close non file editors too\n\t}\n\n\tprivate onModelChange(event: Files.IWorkingFileModelChangeEvent): void {\n\t\tthis.enabled = (this.model.count() > 0);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this.listenerToDispose) {\n\t\t\tthis.listenerToDispose.dispose();\n\t\t\tthis.listenerToDispose = null;\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class CloseOneWorkingFileAction extends BaseCloseWorkingFileAction {\n\n\tpublic static ID = 'workbench.files.action.closeOneWorkingFile';\n\n\tconstructor(\n\t\tmodel: WorkingFilesModel,\n\t\telement: WorkingFileEntry,\n\t\t@IUntitledEditorService untitledEditorService: IUntitledEditorService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@IQuickOpenService quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(CloseOneWorkingFileAction.ID, nls.localize('closeLabel', \"Close File\"), element.dirty ? 'action-close-dirty-file' : 'action-close-file', model, [element], untitledEditorService, editorService, textFileService, messageService, quickOpenService);\n\t}\n}\n\nexport class CloseOtherWorkingFilesAction extends BaseCloseWorkingFileAction {\n\n\tpublic static ID = 'workbench.files.action.closeOtherWorkingFiles';\n\n\tconstructor(\n\t\tmodel: WorkingFilesModel,\n\t\telement: WorkingFileEntry,\n\t\t@IUntitledEditorService untitledEditorService: IUntitledEditorService,\n\t\t@IWorkbenchEditorService editorService: IWorkbenchEditorService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@IQuickOpenService quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(CloseOtherWorkingFilesAction.ID, nls.localize('closeOtherLabel', \"Close Other Files\"), 'action-close-file', model, model.getEntries().filter(e => e !== element), untitledEditorService, editorService, textFileService, messageService, quickOpenService);\n\t}\n\n\tpublic run(): TPromise<boolean> {\n\t\treturn super.run().then(() => closeNonFileEditors(this.editorService)); // close non file editors too\n\t}\n}\n\nfunction disposeNonDirtyFileInputs(editorService: IWorkbenchEditorService, quickopenService: IQuickOpenService, textFileService: ITextFileService, exclude?: URI): void {\n\tlet activeFileInputs = editorService.getVisibleEditors().map(e => asFileEditorInput(e.input, true)).filter(i => i instanceof FileEditorInput);\n\tactiveFileInputs.forEach((f: FileEditorInput) => {\n\t\tif (exclude && exclude.toString() === f.getResource().toString()) {\n\t\t\treturn; // excluded\n\t\t}\n\n\t\tif (textFileService.isDirty(f.getResource())) {\n\t\t\treturn; // do not touch dirty\n\t\t}\n\n\t\tfileEditorInputsForResource(f.getResource(), editorService, quickopenService).forEach(i => {\n\t\t\tif (!i.isDisposed()) {\n\t\t\t\ti.dispose(true);\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction closeNonFileEditors(editorService: IWorkbenchEditorService): TPromise<boolean> {\n\tlet nonFileEditors = editorService.getVisibleEditors().filter(e => !getUntitledOrFileResource(e.input, true));\n\n\treturn TPromise.join(nonFileEditors.map(e => editorService.closeEditor(e))).then(() => true, errors.onUnexpectedError);\n}\n\nfunction fileEditorInputsForResource(resource: URI, editorService: IWorkbenchEditorService, quickopenService: IQuickOpenService): FileEditorInput[] {\n\n\t// Get cached ones\n\tlet inputs: FileEditorInput[] = FileEditorInput.getAll(resource);\n\n\t// Add those from history as well\n\tlet history = quickopenService.getEditorHistory();\n\tfor (let i = 0; i < history.length; i++) {\n\t\tlet element = history[i];\n\t\tif (element instanceof FileEditorInput && (<FileEditorInput>element).getResource().toString() === resource.toString()) {\n\t\t\tinputs.push(<FileEditorInput>element);\n\t\t}\n\t}\n\n\t// Add those from visible editors too\n\tlet editors = editorService.getVisibleEditors();\n\teditors.forEach((editor) => {\n\t\tlet input = editor.input;\n\t\tif (input instanceof FileEditorInput && (<FileEditorInput>input).getResource().toString() === resource.toString()) {\n\t\t\tinputs.push(<FileEditorInput>input);\n\t\t}\n\t});\n\n\treturn inputs;\n}\n\nexport class CloseFileAction extends Action {\n\n\tpublic static ID = 'workbench.files.action.closeFile';\n\tpublic static LABEL = nls.localize('closeFile', \"Close File\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@IQuickOpenService private quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet editor = this.editorService.getActiveEditor();\n\t\tlet input = this.editorService.getActiveEditorInput();\n\t\tlet resource = getUntitledOrFileResource(input, true);\n\n\t\t// For a file or untitled\n\t\tif (resource) {\n\t\t\tlet model = this.textFileService.getWorkingFilesModel();\n\t\t\tlet entry = model.findEntry(resource);\n\n\t\t\t// Use action to close a working file that will take care of everthing\n\t\t\tif (entry) {\n\t\t\t\tlet closeAction = this.instantiationService.createInstance(CloseOneWorkingFileAction, model, entry);\n\t\t\t\tcloseAction.run().done(() => closeAction.dispose(), errors.onUnexpectedError);\n\t\t\t}\n\n\t\t\t// Otherwise just dispose\n\t\t\telse {\n\t\t\t\tif (input instanceof DiffEditorInput) {\n\t\t\t\t\tinput = (<DiffEditorInput>input).getModifiedInput();\n\t\t\t\t}\n\n\t\t\t\t// File Input\n\t\t\t\tif (input instanceof FileEditorInput) {\n\t\t\t\t\tfileEditorInputsForResource(input.getResource(), this.editorService, this.quickOpenService).forEach((input) => {\n\t\t\t\t\t\tif (!input.isDisposed()) {\n\t\t\t\t\t\t\tinput.dispose(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Untitled Input\n\t\t\t\telse {\n\t\t\t\t\tinput.dispose();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Any other editor just closes\n\t\telse if (editor) {\n\t\t\tthis.editorService.closeEditor(editor).done(null, errors.onUnexpectedError);;\n\t\t}\n\n\t\t// Otherwise tell the user\n\t\telse {\n\t\t\tthis.messageService.show(Severity.Info, nls.localize('noFileOpen', \"There is currently no file opened to close.\"));\n\t\t}\n\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport class CloseOtherFilesAction extends Action {\n\n\tpublic static ID = 'workbench.files.action.closeOtherFiles';\n\tpublic static LABEL = nls.localize('closeOtherFiles', \"Close Other Files\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@IQuickOpenService private quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tconst workingFilesModel = this.textFileService.getWorkingFilesModel();\n\n\t\tlet activeResource = getUntitledOrFileResource(this.editorService.getActiveEditorInput(), true);\n\t\tlet actionToRun: IAction;\n\n\t\t// Close all but active resource\n\t\tif (activeResource && workingFilesModel.hasEntry(activeResource)) {\n\t\t\tactionToRun = this.instantiationService.createInstance(CloseOtherWorkingFilesAction, workingFilesModel, workingFilesModel.findEntry(activeResource));\n\t\t}\n\n\t\t// Without active resource: Close all\n\t\telse {\n\t\t\tactionToRun = this.instantiationService.createInstance(CloseAllWorkingFilesAction, workingFilesModel);\n\t\t}\n\n\t\treturn actionToRun.run().then(() => {\n\t\t\tactionToRun.dispose();\n\n\t\t\t// Dispose remaining non dirty ones except for active one\n\t\t\tdisposeNonDirtyFileInputs(this.editorService, this.quickOpenService, this.textFileService, activeResource);\n\t\t});\n\t}\n}\n\nexport class CloseAllFilesAction extends Action {\n\n\tpublic static ID = 'workbench.files.action.closeAllFiles';\n\tpublic static LABEL = nls.localize('closeAllFiles', \"Close All Files\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@IQuickOpenService private quickOpenService: IQuickOpenService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\n\t\t// Close all Working Files\n\t\tlet closeAction = this.instantiationService.createInstance(CloseAllWorkingFilesAction, this.textFileService.getWorkingFilesModel());\n\t\treturn closeAction.run().then(() => {\n\t\t\tcloseAction.dispose();\n\n\t\t\t// Dispose remaining non dirty ones\n\t\t\tdisposeNonDirtyFileInputs(this.editorService, this.quickOpenService, this.textFileService);\n\t\t});\n\t}\n}\n\nexport class OpenNextWorkingFile extends Action {\n\n\tpublic static ID = 'workbench.files.action.openNextWorkingFile';\n\tpublic static LABEL = nls.localize('openNextWorkingFile', \"Open Next Working File\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IMessageService private messageService: IMessageService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet model = this.textFileService.getWorkingFilesModel();\n\n\t\t// Return: No working files\n\t\tif (model.count() === 0) {\n\t\t\tthis.messageService.show(Severity.Info, nls.localize('noWorkingFiles', \"Currently there are no working files.\"));\n\t\t}\n\n\t\t// If entry found, open next one\n\t\telse {\n\t\t\tlet resource = getUntitledOrFileResource(this.editorService.getActiveEditorInput(), true);\n\t\t\treturn this.editorService.openEditor({ resource: model.next(resource).resource });\n\t\t}\n\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport class OpenPreviousWorkingFile extends Action {\n\n\tpublic static ID = 'workbench.files.action.openPreviousWorkingFile';\n\tpublic static LABEL = nls.localize('openPreviousWorkingFile', \"Open Previous Working File\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IMessageService private messageService: IMessageService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet model = this.textFileService.getWorkingFilesModel();\n\n\t\t// Return: No working files\n\t\tif (model.count() === 0) {\n\t\t\tthis.messageService.show(Severity.Info, nls.localize('noWorkingFiles', \"Currently there are no working files.\"));\n\t\t}\n\n\t\t// If entry found, open previous one\n\t\telse {\n\t\t\tlet resource = getUntitledOrFileResource(this.editorService.getActiveEditorInput(), true);\n\t\t\treturn this.editorService.openEditor({ resource: model.previous(resource).resource });\n\t\t}\n\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport class AddToWorkingFiles extends Action {\n\n\tpublic static ID = 'workbench.files.action.addToWorkingFiles';\n\tpublic static LABEL = nls.localize('addToWorkingFiles', \"Add Active File to Working Files\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IMessageService private messageService: IMessageService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet fileInput = asFileEditorInput(this.editorService.getActiveEditorInput(), true);\n\t\tif (fileInput) {\n\t\t\tthis.textFileService.getWorkingFilesModel().addEntry(fileInput.getResource());\n\t\t} else {\n\t\t\tthis.messageService.show(Severity.Info, nls.localize('openFileToAdd', \"Open a file first to add it to working files\"));\n\t\t}\n\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport class FocusWorkingFiles extends Action {\n\n\tpublic static ID = 'workbench.files.action.focusWorkingFiles';\n\tpublic static LABEL = nls.localize('focusWorkingFiles', \"Focus on Working Files\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IViewletService private viewletService: IViewletService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\treturn this.viewletService.openViewlet(Files.VIEWLET_ID, true).then((viewlet: ExplorerViewlet) => {\n\t\t\tviewlet.getWorkingFilesView().expand();\n\t\t\tviewlet.getWorkingFilesView().getViewer().DOMFocus();\n\t\t});\n\t}\n}\n\nexport class FocusFilesExplorer extends Action {\n\n\tpublic static ID = 'workbench.files.action.focusFilesExplorer';\n\tpublic static LABEL = nls.localize('focusFilesExplorer', \"Focus on Files Explorer\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IViewletService private viewletService: IViewletService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\treturn this.viewletService.openViewlet(Files.VIEWLET_ID, true).then((viewlet: ExplorerViewlet) => {\n\t\t\tconst view = viewlet.getExplorerView();\n\t\t\tif (view) {\n\t\t\t\tview.expand();\n\t\t\t\tview.getViewer().DOMFocus();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport class ShowActiveFileInExplorer extends Action {\n\n\tpublic static ID = 'workbench.files.action.showActiveFileInExplorer';\n\tpublic static LABEL = nls.localize('showInExplorer', \"Show Active File in Explorer\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@IViewletService private viewletService: IViewletService,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService,\n\t\t@IMessageService private messageService: IMessageService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet fileInput = asFileEditorInput(this.editorService.getActiveEditorInput(), true);\n\t\tif (fileInput) {\n\t\t\treturn this.viewletService.openViewlet(Files.VIEWLET_ID, false).then((viewlet: ExplorerViewlet) => {\n\t\t\t\tconst isInsideWorkspace = this.contextService.isInsideWorkspace(fileInput.getResource());\n\t\t\t\tif (isInsideWorkspace) {\n\t\t\t\t\tconst explorerView = viewlet.getExplorerView();\n\t\t\t\t\tif (explorerView) {\n\t\t\t\t\t\texplorerView.expand();\n\t\t\t\t\t\texplorerView.select(fileInput.getResource(), true);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst workingFilesView = viewlet.getWorkingFilesView();\n\t\t\t\t\tworkingFilesView.expand();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.messageService.show(severity.Info, nls.localize('openFileToShow', \"Open a file first to show it in the explorer\"));\n\t\t}\n\n\t\treturn TPromise.as(true);\n\t}\n}\n\nexport function keybindingForAction(id: string): Keybinding {\n\tswitch (id) {\n\t\tcase GlobalNewFileAction.ID:\n\t\t\treturn new Keybinding(KeyMod.CtrlCmd | KeyCode.KEY_N);\n\t\tcase TriggerRenameFileAction.ID:\n\t\t\treturn new Keybinding(isMacintosh ? KeyCode.Enter : KeyCode.F2);\n\t\tcase SaveFileAction.ID:\n\t\t\treturn new Keybinding(KeyMod.CtrlCmd | KeyCode.KEY_S);\n\t\tcase DeleteFileAction.ID:\n\t\tcase MoveFileToTrashAction.ID:\n\t\t\treturn new Keybinding(KeyCode.Delete);\n\t\tcase CopyFileAction.ID:\n\t\t\treturn new Keybinding(KeyMod.CtrlCmd | KeyCode.KEY_C);\n\t\tcase PasteFileAction.ID:\n\t\t\treturn new Keybinding(KeyMod.CtrlCmd | KeyCode.KEY_V);\n\t\tcase OpenToSideAction.ID:\n\t\t\tif (isMacintosh) {\n\t\t\t\treturn new Keybinding(KeyMod.WinCtrl | KeyCode.Enter);\n\t\t\t} else {\n\t\t\t\treturn new Keybinding(KeyMod.CtrlCmd | KeyCode.Enter);\n\t\t\t}\n\t}\n\n\treturn null;\n}\n\nexport function validateFileName(parent: IFileStat, name: string, allowOverwriting: boolean = false): string {\n\n\t// Produce a well formed file name\n\tname = getWellFormedFileName(name);\n\n\t// Name not provided\n\tif (!name || name.length === 0 || /^\\s+$/.test(name)) {\n\t\treturn nls.localize('emptyFileNameError', \"A file or folder name must be provided.\");\n\t}\n\n\t// Do not allow to overwrite existing file\n\tif (!allowOverwriting) {\n\t\tif (parent.children && parent.children.some((c) => {\n\t\t\tif (isLinux) {\n\t\t\t\treturn c.name === name;\n\t\t\t}\n\n\t\t\treturn c.name.toLowerCase() === name.toLowerCase();\n\t\t})) {\n\t\t\treturn nls.localize('fileNameExistsError', \"A file or folder **{0}** already exists at this location. Please choose a different name.\", name);\n\t\t}\n\t}\n\n\t// Invalid File name\n\tif (!paths.isValidBasename(name)) {\n\t\treturn nls.localize('invalidFileNameError', \"The name **{0}** is not valid as a file or folder name. Please choose a different name.\", name);\n\t}\n\n\t// Max length restriction (on Windows)\n\tif (isWindows) {\n\t\tlet fullPathLength = name.length + parent.resource.fsPath.length + 1 /* path segment */;\n\t\tif (fullPathLength > 255) {\n\t\t\treturn nls.localize('filePathTooLongError', \"The name **{0}** results in a path that is too long. Please choose a shorter name.\", name);\n\t\t}\n\t}\n\n\treturn null;\n}\n\nexport function getWellFormedFileName(filename: string): string {\n\tif (!filename) {\n\t\treturn filename;\n\t}\n\n\t// Trim whitespaces\n\tfilename = strings.trim(strings.trim(filename, ' '), '\\t');\n\n\t// Remove trailing dots\n\tfilename = strings.rtrim(filename, '.');\n\n\treturn filename;\n}\n\n// Diagnostics support\nlet diag: (...args: any[]) => void;\nif (!diag) {\n\tdiag = diagnostics.register('FileActionsDiagnostics', function (...args: any[]) {\n\t\tconsole.log(args[1] + ' - ' + args[0] + ' (time: ' + args[2].getTime() + ' [' + args[2].toUTCString() + '])');\n\t});\n}"]}