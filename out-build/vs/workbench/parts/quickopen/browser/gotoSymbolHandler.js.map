{"version":3,"sources":["vs/workbench/parts/quickopen/browser/gotoSymbolHandler.ts"],"names":[],"mappings":"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","file":"vs/workbench/parts/quickopen/browser/gotoSymbolHandler.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./media/gotoSymbolHandler';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport nls = require('vs/nls');\nimport arrays = require('vs/base/common/arrays');\nimport errors = require('vs/base/common/errors');\nimport types = require('vs/base/common/types');\nimport strings = require('vs/base/common/strings');\nimport {IContext, Mode, IAutoFocus} from 'vs/base/parts/quickopen/common/quickOpen';\nimport {QuickOpenModel, IHighlight} from 'vs/base/parts/quickopen/browser/quickOpenModel';\nimport {QuickOpenHandler, EditorQuickOpenEntryGroup} from 'vs/workbench/browser/quickopen';\nimport {QuickOpenAction} from 'vs/workbench/browser/actions/quickOpenAction';\nimport {BaseTextEditor} from 'vs/workbench/browser/parts/editor/textEditor';\nimport {TextEditorOptions, EditorOptions, EditorInput} from 'vs/workbench/common/editor';\nimport filters = require('vs/base/common/filters');\nimport {IEditor, IModelDecorationsChangeAccessor, OverviewRulerLane, IModelDeltaDecoration, IRange, IModel, ITokenizedModel, IDiffEditorModel, IEditorViewState} from 'vs/editor/common/editorCommon';\nimport {IWorkbenchEditorService} from 'vs/workbench/services/editor/common/editorService';\nimport {IQuickOpenService} from 'vs/workbench/services/quickopen/common/quickOpenService';\nimport {IWorkspaceContextService} from 'vs/platform/workspace/common/workspace';\nimport {Position} from 'vs/platform/editor/common/editor';\nimport {getOutlineEntries} from 'vs/editor/contrib/quickOpen/common/quickOpen';\nimport {OutlineRegistry} from 'vs/editor/common/modes';\n\nexport const GOTO_SYMBOL_PREFIX = '@';\nexport const SCOPE_PREFIX = ':';\n\nexport class GotoSymbolAction extends QuickOpenAction {\n\n\tpublic static ID = 'workbench.action.gotoSymbol';\n\tpublic static LABEL = nls.localize('gotoSymbol', \"Go to Symbol...\");\n\n\tconstructor(actionId: string, actionLabel: string, @IQuickOpenService quickOpenService: IQuickOpenService) {\n\t\tsuper(actionId, actionLabel, GOTO_SYMBOL_PREFIX, quickOpenService);\n\t}\n}\n\nclass OutlineModel extends QuickOpenModel {\n\tprivate outline: Outline;\n\n\tconstructor(outline: Outline, entries: SymbolEntry[]) {\n\t\tsuper(entries);\n\n\t\tthis.outline = outline;\n\t}\n\n\tpublic dofilter(searchValue: string): void {\n\n\t\t// Normalize search\n\t\tlet normalizedSearchValue = searchValue;\n\t\tif (searchValue.indexOf(SCOPE_PREFIX) === 0) {\n\t\t\tnormalizedSearchValue = normalizedSearchValue.substr(SCOPE_PREFIX.length);\n\t\t}\n\n\t\t// Check for match and update visibility and group label\n\t\tthis.entries.forEach((entry: SymbolEntry) => {\n\n\t\t\t// Clear all state first\n\t\t\tentry.setGroupLabel(null);\n\t\t\tentry.setShowBorder(false);\n\t\t\tentry.setHighlights(null);\n\t\t\tentry.setHidden(false);\n\n\t\t\t// Filter by search\n\t\t\tif (normalizedSearchValue) {\n\t\t\t\tlet highlights = filters.matchesFuzzy(normalizedSearchValue, entry.getLabel());\n\t\t\t\tif (highlights) {\n\t\t\t\t\tentry.setHighlights(highlights);\n\t\t\t\t\tentry.setHidden(false);\n\t\t\t\t} else if (!entry.isHidden()) {\n\t\t\t\t\tentry.setHidden(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Sort properly if actually searching\n\t\tif (searchValue) {\n\t\t\tif (searchValue.indexOf(SCOPE_PREFIX) === 0) {\n\t\t\t\tthis.entries.sort(this.sortScoped.bind(this, searchValue.toLowerCase()));\n\t\t\t} else {\n\t\t\t\tthis.entries.sort(this.sortNormal.bind(this, searchValue.toLowerCase()));\n\t\t\t}\n\t\t}\n\n\t\t// Otherwise restore order as appearing in outline\n\t\telse {\n\t\t\tthis.entries.sort((a: SymbolEntry, b: SymbolEntry) => a.getIndex() - b.getIndex());\n\t\t}\n\n\t\t// Mark all type groups\n\t\tlet visibleResults = <SymbolEntry[]>this.getEntries(true);\n\t\tif (visibleResults.length > 0 && searchValue.indexOf(SCOPE_PREFIX) === 0) {\n\t\t\tlet currentType: string = null;\n\t\t\tlet currentResult: SymbolEntry = null;\n\t\t\tlet typeCounter = 0;\n\n\t\t\tfor (let i = 0; i < visibleResults.length; i++) {\n\t\t\t\tlet result = visibleResults[i];\n\n\t\t\t\t// Found new type\n\t\t\t\tif (currentType !== result.getType()) {\n\n\t\t\t\t\t// Update previous result with count\n\t\t\t\t\tif (currentResult) {\n\t\t\t\t\t\tcurrentResult.setGroupLabel(this.renderGroupLabel(currentType, typeCounter, this.outline));\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentType = result.getType();\n\t\t\t\t\tcurrentResult = result;\n\t\t\t\t\ttypeCounter = 1;\n\n\t\t\t\t\tresult.setShowBorder(i > 0);\n\t\t\t\t}\n\n\t\t\t\t// Existing type, keep counting\n\t\t\t\telse {\n\t\t\t\t\ttypeCounter++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update previous result with count\n\t\t\tif (currentResult) {\n\t\t\t\tcurrentResult.setGroupLabel(this.renderGroupLabel(currentType, typeCounter, this.outline));\n\t\t\t}\n\t\t}\n\n\t\t// Mark first entry as outline\n\t\telse if (visibleResults.length > 0) {\n\t\t\tvisibleResults[0].setGroupLabel(nls.localize('symbols', \"symbols ({0})\", visibleResults.length));\n\t\t}\n\t}\n\n\tprivate sortNormal(searchValue: string, elementA: SymbolEntry, elementB: SymbolEntry): number {\n\n\t\t// Handle hidden elements\n\t\tif (elementA.isHidden() && elementB.isHidden()) {\n\t\t\treturn 0;\n\t\t} else if (elementA.isHidden()) {\n\t\t\treturn 1;\n\t\t} else if (elementB.isHidden()) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tlet elementAName = elementA.getLabel().toLowerCase();\n\t\tlet elementBName = elementB.getLabel().toLowerCase();\n\n\t\t// Compare by name\n\t\tlet r = strings.localeCompare(elementAName, elementBName);\n\t\tif (r !== 0) {\n\t\t\treturn r;\n\t\t}\n\n\t\t// If name identical sort by range instead\n\t\tlet elementARange = elementA.getRange();\n\t\tlet elementBRange = elementB.getRange();\n\n\t\treturn elementARange.startLineNumber - elementBRange.startLineNumber;\n\t}\n\n\tprivate sortScoped(searchValue: string, elementA: SymbolEntry, elementB: SymbolEntry): number {\n\n\t\t// Handle hidden elements\n\t\tif (elementA.isHidden() && elementB.isHidden()) {\n\t\t\treturn 0;\n\t\t} else if (elementA.isHidden()) {\n\t\t\treturn 1;\n\t\t} else if (elementB.isHidden()) {\n\t\t\treturn -1;\n\t\t}\n\n\t\t// Remove scope char\n\t\tsearchValue = searchValue.substr(SCOPE_PREFIX.length);\n\n\t\t// Sort by type first if scoped search\n\t\tlet elementAType = elementA.getType();\n\t\tlet elementBType = elementB.getType();\n\t\tlet r = strings.localeCompare(elementAType, elementBType);\n\t\tif (r !== 0) {\n\t\t\treturn r;\n\t\t}\n\n\t\t// Special sort when searching in scoped mode\n\t\tif (searchValue) {\n\t\t\tlet elementAName = elementA.getLabel().toLowerCase();\n\t\t\tlet elementBName = elementB.getLabel().toLowerCase();\n\n\t\t\t// Compare by name\n\t\t\tr = strings.localeCompare(elementAName, elementBName);\n\t\t\tif (r !== 0) {\n\t\t\t\treturn r;\n\t\t\t}\n\t\t}\n\n\t\t// Default to sort by range\n\t\tlet elementARange = elementA.getRange();\n\t\tlet elementBRange = elementB.getRange();\n\n\t\treturn elementARange.startLineNumber - elementBRange.startLineNumber;\n\t}\n\n\tprivate renderGroupLabel(type: string, count: number, outline: Outline): string {\n\n\t\tlet pattern = outline.outlineGroupLabel[type] || OutlineModel.getDefaultGroupLabelPatterns()[type];\n\t\tif (pattern) {\n\t\t\treturn strings.format(pattern, count);\n\t\t}\n\n\t\treturn type;\n\t}\n\n\tprivate static getDefaultGroupLabelPatterns(): { [type: string]: string } {\n\t\tconst result: { [type: string]: string } = Object.create(null);\n\t\tresult['method'] = nls.localize('method', \"methods ({0})\");\n\t\tresult['function'] = nls.localize('function', \"functions ({0})\");\n\t\tresult['constructor'] = <any>nls.localize('_constructor', \"constructors ({0})\");\n\t\tresult['variable'] = nls.localize('variable', \"variables ({0})\");\n\t\tresult['class'] = nls.localize('class', \"classes ({0})\");\n\t\tresult['interface'] = nls.localize('interface', \"interfaces ({0})\");\n\t\tresult['namespace'] = nls.localize('namespace', \"namespaces ({0})\");\n\t\tresult['package'] = nls.localize('package', \"packages ({0})\");\n\t\tresult['module'] = nls.localize('modules', \"modules ({0})\");\n\t\tresult['property'] = nls.localize('property', \"properties ({0})\");\n\t\tresult['enum'] = nls.localize('enum', \"enumerations ({0})\");\n\t\tresult['string'] = nls.localize('string', \"strings ({0})\");\n\t\tresult['rule'] = nls.localize('rule', \"rules ({0})\");\n\t\tresult['file'] = nls.localize('file', \"files ({0})\");\n\t\tresult['array'] = nls.localize('array', \"arrays ({0})\");\n\t\tresult['number'] = nls.localize('number', \"numbers ({0})\");\n\t\tresult['boolean'] = nls.localize('boolean', \"booleans ({0})\");\n\t\tresult['object'] = nls.localize('object', \"objects ({0})\");\n\t\tresult['key'] = nls.localize('key', \"keys ({0})\");\n\t\treturn result;\n\t}\n}\n\nclass SymbolEntry extends EditorQuickOpenEntryGroup {\n\tprivate editorService: IWorkbenchEditorService;\n\tprivate index: number;\n\tprivate name: string;\n\tprivate type: string;\n\tprivate icon: string;\n\tprivate description: string;\n\tprivate range: IRange;\n\tprivate handler: GotoSymbolHandler;\n\n\tconstructor(index: number, name: string, type: string, description: string, icon: string, range: IRange, highlights: IHighlight[], editorService: IWorkbenchEditorService, handler: GotoSymbolHandler) {\n\t\tsuper();\n\n\t\tthis.index = index;\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.icon = icon;\n\t\tthis.description = description;\n\t\tthis.range = range;\n\t\tthis.setHighlights(highlights);\n\t\tthis.editorService = editorService;\n\t\tthis.handler = handler;\n\t}\n\n\tpublic getIndex(): number {\n\t\treturn this.index;\n\t}\n\n\tpublic getLabel(): string {\n\t\treturn this.name;\n\t}\n\n\tpublic getAriaLabel(): string {\n\t\treturn nls.localize('entryAriaLabel', \"{0}, symbols\", this.getLabel());\n\t}\n\n\tpublic getIcon(): string {\n\t\treturn this.icon;\n\t}\n\n\tpublic getDescription(): string {\n\t\treturn this.description;\n\t}\n\n\tpublic getType(): string {\n\t\treturn this.type;\n\t}\n\n\tpublic getRange(): IRange {\n\t\treturn this.range;\n\t}\n\n\tpublic getInput(): EditorInput {\n\t\treturn <EditorInput>this.editorService.getActiveEditorInput();\n\t}\n\n\tpublic getOptions(): EditorOptions {\n\t\tlet options = new TextEditorOptions();\n\t\toptions.selection(this.range.startLineNumber, this.range.startColumn, this.range.startLineNumber, this.range.startColumn);\n\n\t\treturn options;\n\t}\n\n\tpublic run(mode: Mode, context: IContext): boolean {\n\t\tif (mode === Mode.OPEN) {\n\t\t\treturn this.runOpen(context);\n\t\t}\n\n\t\treturn this.runPreview();\n\t}\n\n\tprivate runOpen(context: IContext): boolean {\n\n\t\t// Check for sideBySide use\n\t\tlet event = context.event;\n\t\tlet sideBySide = (event && (event.ctrlKey || event.metaKey || (event.payload && event.payload.originalEvent && (event.payload.originalEvent.ctrlKey || event.payload.originalEvent.metaKey))));\n\t\tif (sideBySide) {\n\t\t\tthis.editorService.openEditor(this.getInput(), this.getOptions(), true).done(null, errors.onUnexpectedError);\n\t\t}\n\n\t\t// Apply selection and focus\n\t\telse {\n\t\t\tlet range = this.toSelection();\n\t\t\tlet activeEditor = this.editorService.getActiveEditor();\n\t\t\tif (activeEditor) {\n\t\t\t\tlet editor = <IEditor>activeEditor.getControl();\n\t\t\t\teditor.setSelection(range);\n\t\t\t\teditor.revealRangeInCenter(range);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate runPreview(): boolean {\n\n\t\t// Select Outline Position\n\t\tlet range = this.toSelection();\n\t\tlet activeEditor = this.editorService.getActiveEditor();\n\t\tif (activeEditor) {\n\t\t\tlet editorControl = <IEditor>activeEditor.getControl();\n\t\t\teditorControl.revealRangeInCenter(range);\n\n\t\t\t// Decorate if possible\n\t\t\tif (types.isFunction(editorControl.changeDecorations)) {\n\t\t\t\tthis.handler.decorateOutline(this.range, range, editorControl, activeEditor.position);\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate toSelection(): IRange {\n\t\treturn {\n\t\t\tstartLineNumber: this.range.startLineNumber,\n\t\t\tstartColumn: this.range.startColumn || 1,\n\t\t\tendLineNumber: this.range.startLineNumber,\n\t\t\tendColumn: this.range.startColumn || 1\n\t\t};\n\t}\n}\n\ninterface Outline {\n\tentries: OutlineNode[];\n\toutlineGroupLabel?: { [name: string]: string; };\n}\n\ninterface OutlineNode {\n\tlabel: string;\n\tcontainerLabel?: string;\n\ttype: string;\n\ticon?: string;\n\trange: IRange;\n\tchildren?: OutlineNode[];\n\tparentScope?: string[];\n}\n\ninterface IEditorLineDecoration {\n\tlineHighlightId: string;\n\tlineDecorationId: string;\n\tposition: Position;\n}\n\nexport class GotoSymbolHandler extends QuickOpenHandler {\n\tprivate outlineToModelCache: { [modelId: string]: OutlineModel; };\n\tprivate lineHighlightDecorationId: IEditorLineDecoration;\n\tprivate lastKnownEditorViewState: IEditorViewState;\n\tprivate activeOutlineRequest: TPromise<OutlineModel>;\n\n\tconstructor(\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService\n\t) {\n\t\tsuper();\n\n\t\tthis.outlineToModelCache = {};\n\t}\n\n\tpublic getResults(searchValue: string): TPromise<QuickOpenModel> {\n\t\tsearchValue = searchValue.trim();\n\n\t\t// Remember view state to be able to restore on cancel\n\t\tif (!this.lastKnownEditorViewState) {\n\t\t\tlet editor = this.editorService.getActiveEditor();\n\t\t\tthis.lastKnownEditorViewState = (<IEditor>editor.getControl()).saveViewState();\n\t\t}\n\n\t\t// Resolve Outline Model\n\t\treturn this.getActiveOutline().then((outline) => {\n\n\t\t\t// Filter by search\n\t\t\toutline.dofilter(searchValue);\n\n\t\t\treturn outline;\n\t\t});\n\t}\n\n\tpublic getEmptyLabel(searchString: string): string {\n\t\tif (searchString.length > 0) {\n\t\t\treturn nls.localize('noSymbolsMatching', \"No symbols matching\");\n\t\t}\n\n\t\treturn nls.localize('noSymbolsFound', \"No symbols found\");\n\t}\n\n\tpublic getAriaLabel(): string {\n\t\treturn nls.localize('gotoSymbolHandlerAriaLabel', \"Type to narrow down symbols of the currently active editor.\");\n\t}\n\n\tpublic canRun(): boolean | string {\n\t\tlet canRun = false;\n\n\t\tlet editor = this.editorService.getActiveEditor();\n\t\tif (editor instanceof BaseTextEditor) {\n\t\t\tlet editorControl = <IEditor>editor.getControl();\n\t\t\tlet model = editorControl.getModel();\n\t\t\tif (model && (<IDiffEditorModel>model).modified && (<IDiffEditorModel>model).original) {\n\t\t\t\tmodel = (<IDiffEditorModel>model).modified; // Support for diff editor models\n\t\t\t}\n\n\t\t\tif (model && types.isFunction((<ITokenizedModel>model).getMode)) {\n\t\t\t\tcanRun = OutlineRegistry.has(<IModel>model);\n\t\t\t}\n\t\t}\n\n\t\treturn canRun ? true : editor instanceof BaseTextEditor ? nls.localize('cannotRunGotoSymbolInFile', \"Unfortunately we have no symbol information for the file\") : nls.localize('cannotRunGotoSymbol', \"Open a text file first to go to a symbol\");\n\t}\n\n\tpublic getAutoFocus(searchValue: string): IAutoFocus {\n\t\tsearchValue = searchValue.trim();\n\n\t\t// Remove any type pattern (:) from search value as needed\n\t\tif (searchValue.indexOf(SCOPE_PREFIX) === 0) {\n\t\t\tsearchValue = searchValue.substr(SCOPE_PREFIX.length);\n\t\t}\n\n\t\treturn {\n\t\t\tautoFocusPrefixMatch: searchValue,\n\t\t\tautoFocusFirstEntry: !!searchValue\n\t\t};\n\t}\n\n\tprivate toQuickOpenEntries(outline: Outline): SymbolEntry[] {\n\t\tlet results: SymbolEntry[] = [];\n\n\t\t// Flatten\n\t\tlet flattened: OutlineNode[] = [];\n\t\tif (outline) {\n\t\t\tthis.flatten(outline.entries, flattened);\n\t\t}\n\n\t\tfor (let i = 0; i < flattened.length; i++) {\n\t\t\tlet element = flattened[i];\n\t\t\tlet label = strings.trim(element.label);\n\n\t\t\t// Show parent scope as description\n\t\t\tlet description: string = element.containerLabel;\n\t\t\tif (element.parentScope) {\n\t\t\t\tdescription = arrays.tail(element.parentScope);\n\t\t\t}\n\n\t\t\t// Add\n\t\t\tlet icon = element.icon || element.type;\n\t\t\tresults.push(new SymbolEntry(i, label, element.type, description, icon, element.range, null, this.editorService, this));\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tprivate flatten(outline: OutlineNode[], flattened: OutlineNode[], parentScope?: string[]): void {\n\t\tfor (let i = 0; i < outline.length; i++) {\n\t\t\tlet element = outline[i];\n\t\t\tflattened.push(element);\n\n\t\t\tif (parentScope) {\n\t\t\t\telement.parentScope = parentScope;\n\t\t\t}\n\n\t\t\tif (element.children) {\n\t\t\t\tlet elementScope: string[] = [];\n\t\t\t\tif (parentScope) {\n\t\t\t\t\telementScope = parentScope.slice(0);\n\t\t\t\t}\n\t\t\t\telementScope.push(element.label);\n\n\t\t\t\tthis.flatten(element.children, flattened, elementScope);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getActiveOutline(): TPromise<OutlineModel> {\n\t\tif (!this.activeOutlineRequest) {\n\t\t\tthis.activeOutlineRequest = this.doGetActiveOutline();\n\t\t}\n\n\t\treturn this.activeOutlineRequest;\n\t}\n\n\tprivate doGetActiveOutline(): TPromise<OutlineModel> {\n\t\tlet editor = this.editorService.getActiveEditor();\n\t\tif (editor instanceof BaseTextEditor) {\n\t\t\tlet editorControl = <IEditor>editor.getControl();\n\t\t\tlet model = editorControl.getModel();\n\t\t\tif (model && (<IDiffEditorModel>model).modified && (<IDiffEditorModel>model).original) {\n\t\t\t\tmodel = (<IDiffEditorModel>model).modified; // Support for diff editor models\n\t\t\t}\n\n\t\t\tif (model && types.isFunction((<ITokenizedModel>model).getMode)) {\n\n\t\t\t\t// Ask cache first\n\t\t\t\tlet modelId = (<IModel>model).id;\n\t\t\t\tif (this.outlineToModelCache[modelId]) {\n\t\t\t\t\treturn TPromise.as(this.outlineToModelCache[modelId]);\n\t\t\t\t}\n\n\t\t\t\treturn getOutlineEntries(<IModel>model).then(outline => {\n\n\t\t\t\t\tlet model = new OutlineModel(outline, this.toQuickOpenEntries(outline));\n\n\t\t\t\t\tthis.outlineToModelCache = {}; // Clear cache, only keep 1 outline\n\t\t\t\t\tthis.outlineToModelCache[modelId] = model;\n\n\t\t\t\t\treturn model;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn TPromise.as<OutlineModel>(null);\n\t}\n\n\tpublic decorateOutline(fullRange: IRange, startRange: IRange, editor: IEditor, position: Position): void {\n\t\teditor.changeDecorations((changeAccessor: IModelDecorationsChangeAccessor) => {\n\t\t\tlet deleteDecorations: string[] = [];\n\n\t\t\tif (this.lineHighlightDecorationId) {\n\t\t\t\tdeleteDecorations.push(this.lineHighlightDecorationId.lineDecorationId);\n\t\t\t\tdeleteDecorations.push(this.lineHighlightDecorationId.lineHighlightId);\n\t\t\t\tthis.lineHighlightDecorationId = null;\n\t\t\t}\n\n\t\t\tlet newDecorations: IModelDeltaDecoration[] = [\n\n\t\t\t\t// lineHighlight at index 0\n\t\t\t\t{\n\t\t\t\t\trange: fullRange,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tclassName: 'lineHighlight',\n\t\t\t\t\t\tisWholeLine: true\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// lineDecoration at index 1\n\t\t\t\t{\n\t\t\t\t\trange: startRange,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\toverviewRuler: {\n\t\t\t\t\t\t\tcolor: 'rgba(0, 122, 204, 0.6)',\n\t\t\t\t\t\t\tdarkColor: 'rgba(0, 122, 204, 0.6)',\n\t\t\t\t\t\t\tposition: OverviewRulerLane.Full\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t];\n\n\t\t\tlet decorations = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n\t\t\tlet lineHighlightId = decorations[0];\n\t\t\tlet lineDecorationId = decorations[1];\n\n\t\t\tthis.lineHighlightDecorationId = {\n\t\t\t\tlineHighlightId: lineHighlightId,\n\t\t\t\tlineDecorationId: lineDecorationId,\n\t\t\t\tposition: position\n\t\t\t};\n\t\t});\n\t}\n\n\tpublic clearDecorations(): void {\n\t\tif (this.lineHighlightDecorationId) {\n\t\t\tthis.editorService.getVisibleEditors().forEach((editor) => {\n\t\t\t\tif (editor.position === this.lineHighlightDecorationId.position) {\n\t\t\t\t\tlet editorControl = <IEditor>editor.getControl();\n\t\t\t\t\teditorControl.changeDecorations((changeAccessor: IModelDecorationsChangeAccessor) => {\n\t\t\t\t\t\tchangeAccessor.deltaDecorations([\n\t\t\t\t\t\t\tthis.lineHighlightDecorationId.lineDecorationId,\n\t\t\t\t\t\t\tthis.lineHighlightDecorationId.lineHighlightId\n\t\t\t\t\t\t], []);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.lineHighlightDecorationId = null;\n\t\t}\n\t}\n\n\tpublic onClose(canceled: boolean): void {\n\n\t\t// Clear Cache\n\t\tthis.outlineToModelCache = {};\n\n\t\t// Clear Highlight Decorations if present\n\t\tthis.clearDecorations();\n\n\t\t// Restore selection if canceled\n\t\tif (canceled && this.lastKnownEditorViewState) {\n\t\t\tlet activeEditor = this.editorService.getActiveEditor();\n\t\t\tif (activeEditor) {\n\t\t\t\tlet editor = <IEditor>activeEditor.getControl();\n\t\t\t\teditor.restoreViewState(this.lastKnownEditorViewState);\n\t\t\t}\n\t\t}\n\n\t\tthis.lastKnownEditorViewState = null;\n\t\tthis.activeOutlineRequest = null;\n\t}\n}"]}