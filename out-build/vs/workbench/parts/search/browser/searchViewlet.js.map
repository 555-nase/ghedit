{"version":3,"sources":["vs/workbench/parts/search/browser/searchViewlet.ts"],"names":[],"mappings":"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","file":"vs/workbench/parts/search/browser/searchViewlet.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./media/searchviewlet';\nimport {TPromise, PPromise} from 'vs/base/common/winjs.base';\nimport nls = require('vs/nls');\nimport {EditorType} from 'vs/editor/common/editorCommon';\nimport lifecycle = require('vs/base/common/lifecycle');\nimport errors = require('vs/base/common/errors');\nimport aria = require('vs/base/browser/ui/aria/aria');\nimport {IExpression, splitGlobAware} from 'vs/base/common/glob';\nimport {isFunction} from 'vs/base/common/types';\nimport URI from 'vs/base/common/uri';\nimport strings = require('vs/base/common/strings');\nimport paths = require('vs/base/common/paths');\nimport dom = require('vs/base/browser/dom');\nimport {IAction, Action, IActionRunner} from 'vs/base/common/actions';\nimport {StandardKeyboardEvent, IKeyboardEvent} from 'vs/base/browser/keyboardEvent';\nimport timer = require('vs/base/common/timer');\nimport {Dimension, Builder, $} from 'vs/base/browser/builder';\nimport {FileLabel} from 'vs/base/browser/ui/filelabel/fileLabel';\nimport {FindInput, IFindInputOptions} from 'vs/base/browser/ui/findinput/findInput';\nimport {LeftRightWidget, IRenderer} from 'vs/base/browser/ui/leftRightWidget/leftRightWidget';\nimport {CountBadge} from 'vs/base/browser/ui/countBadge/countBadge';\nimport {ITree, IElementCallback, IFilter, ISorter, IDataSource, IAccessibilityProvider} from 'vs/base/parts/tree/browser/tree';\nimport {Tree} from 'vs/base/parts/tree/browser/treeImpl';\nimport {ClickBehavior, DefaultController} from 'vs/base/parts/tree/browser/treeDefaults';\nimport {ActionsRenderer} from 'vs/base/parts/tree/browser/actionsRenderer';\nimport {ContributableActionProvider} from 'vs/workbench/browser/actionBarRegistry';\nimport {Scope} from 'vs/workbench/common/memento';\nimport {OpenGlobalSettingsAction} from 'vs/workbench/browser/actions/openSettings';\nimport {UntitledEditorEvent, EventType as WorkbenchEventType} from 'vs/workbench/common/events';\nimport {ITextFileService} from 'vs/workbench/parts/files/common/files';\nimport {FileChangeType, FileChangesEvent, EventType as FileEventType} from 'vs/platform/files/common/files';\nimport {Viewlet} from 'vs/workbench/browser/viewlet';\nimport {Match, EmptyMatch, SearchResult, FileMatch} from 'vs/workbench/parts/search/common/searchModel';\nimport {getExcludes, QueryBuilder} from 'vs/workbench/parts/search/common/searchQuery';\nimport {Checkbox} from 'vs/base/browser/ui/checkbox/checkbox';\nimport {VIEWLET_ID} from 'vs/workbench/parts/search/browser/search.contribution';\nimport {MessageType, InputBox, IInputValidator} from 'vs/base/browser/ui/inputbox/inputBox';\nimport {IContextViewProvider} from 'vs/base/browser/ui/contextview/contextview';\nimport {ISearchProgressItem, IFileMatch, ISearchComplete, ISearchQuery, IQueryOptions, ISearchConfiguration} from 'vs/platform/search/common/search';\nimport {IWorkbenchEditorService} from 'vs/workbench/services/editor/common/editorService';\nimport {IViewletService} from 'vs/workbench/services/viewlet/common/viewletService';\nimport {Range} from 'vs/editor/common/core/range';\nimport {IStorageService} from 'vs/platform/storage/common/storage';\nimport {IConfigurationService, IConfigurationServiceEvent, ConfigurationServiceEventTypes} from 'vs/platform/configuration/common/configuration';\nimport {IContextViewService} from 'vs/platform/contextview/browser/contextView';\nimport {IEventService} from 'vs/platform/event/common/event';\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\nimport {IMessageService} from 'vs/platform/message/common/message';\nimport {ISearchService} from 'vs/platform/search/common/search';\nimport {IProgressService} from 'vs/platform/progress/common/progress';\nimport {IWorkspaceContextService} from 'vs/platform/workspace/common/workspace';\nimport {ISelection, StructuredSelection} from 'vs/platform/selection/common/selection';\nimport {IKeybindingService, IKeybindingContextKey} from 'vs/platform/keybinding/common/keybindingService';\nimport {ITelemetryService} from 'vs/platform/telemetry/common/telemetry';\nimport {KeyCode, CommonKeybindings} from 'vs/base/common/keyCodes';\n\nconst ID = VIEWLET_ID;\n\nexport class FindInFolderAction extends Action {\n\tprivate resource: URI;\n\n\tconstructor(resource: URI, @IViewletService private viewletService: IViewletService) {\n\t\tsuper('workbench.search.action.findInFolder', nls.localize('findInFolder', \"Find in Folder\"));\n\n\t\tthis.resource = resource;\n\t}\n\n\tpublic run(event?: any): TPromise<any> {\n\t\treturn this.viewletService.openViewlet(ID, true).then((viewlet: SearchViewlet) => {\n\t\t\tviewlet.searchInFolder(this.resource);\n\t\t});\n\t}\n}\n\nexport class SearchDataSource implements IDataSource {\n\n\tpublic getId(tree: ITree, element: any): string {\n\t\tif (element instanceof FileMatch) {\n\t\t\treturn element.id();\n\t\t}\n\n\t\tif (element instanceof Match) {\n\t\t\treturn element.id();\n\t\t}\n\n\t\treturn 'root';\n\t}\n\n\tpublic getChildren(tree: ITree, element: any): TPromise<any[]> {\n\t\tlet value: any[] = [];\n\n\t\tif (element instanceof FileMatch) {\n\t\t\tvalue = element.matches();\n\t\t} else if (element instanceof SearchResult) {\n\t\t\tvalue = element.matches();\n\t\t}\n\n\t\treturn TPromise.as(value);\n\t}\n\n\tpublic hasChildren(tree: ITree, element: any): boolean {\n\t\treturn element instanceof FileMatch || element instanceof SearchResult;\n\t}\n\n\tpublic getParent(tree: ITree, element: any): TPromise<any> {\n\t\tlet value: any = null;\n\n\t\tif (element instanceof Match) {\n\t\t\tvalue = element.parent();\n\t\t} else if (element instanceof FileMatch) {\n\t\t\tvalue = element.parent();\n\t\t}\n\n\t\treturn TPromise.as(value);\n\t}\n}\n\nexport type FileMatchOrMatch = FileMatch | Match;\n\nexport class SearchSorter implements ISorter {\n\n\tpublic compare(tree: ITree, elementA: FileMatchOrMatch, elementB: FileMatchOrMatch): number {\n\t\tif (elementA instanceof FileMatch && elementB instanceof FileMatch) {\n\t\t\treturn strings.localeCompare(elementA.resource().fsPath, elementB.resource().fsPath) || strings.localeCompare(elementA.name(), elementB.name());\n\t\t}\n\n\t\tif (elementA instanceof Match && elementB instanceof Match) {\n\t\t\treturn Range.compareRangesUsingStarts(elementA.range(), elementB.range());\n\t\t}\n\t}\n}\n\nexport class SearchAccessibilityProvider implements IAccessibilityProvider {\n\n\tconstructor( @IWorkspaceContextService private contextService: IWorkspaceContextService) {\n\t}\n\n\tpublic getAriaLabel(tree: ITree, element: FileMatchOrMatch): string {\n\t\tif (element instanceof FileMatch) {\n\t\t\tconst path = this.contextService.toWorkspaceRelativePath(element.resource()) || element.resource().fsPath;\n\n\t\t\treturn nls.localize('fileMatchAriaLabel', \"{0} matches in file {1} of folder {2}, Search result\", element.count(), element.name(), paths.dirname(path));\n\t\t}\n\n\t\tif (element instanceof Match) {\n\t\t\treturn nls.localize('searchResultAria', \"{0}, Search result\", element.text());\n\t\t}\n\t}\n}\n\nclass SearchController extends DefaultController {\n\n\tconstructor(private viewlet: SearchViewlet) {\n\t\tsuper({ clickBehavior: ClickBehavior.ON_MOUSE_DOWN });\n\n\t\tthis.downKeyBindingDispatcher.set(CommonKeybindings.DELETE, (tree: ITree, event: any) => { this.onDelete(tree, event); });\n\t\tthis.downKeyBindingDispatcher.set(CommonKeybindings.ESCAPE, (tree: ITree, event: any) => { this.onEscape(tree, event); });\n\t}\n\n\tprotected onEscape(tree: ITree, event:IKeyboardEvent):boolean {\n\t\tif (this.viewlet.cancelSearch()) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn super.onEscape(tree, event);\n\t}\n\n\tprivate onDelete(tree: ITree, event: IKeyboardEvent): boolean {\n\t\tlet result = false;\n\t\tlet elements = tree.getSelection();\n\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\tlet element = elements[i];\n\t\t\tif (element instanceof FileMatch) {\n\t\t\t\tnew RemoveAction(tree, element).run().done(null, errors.onUnexpectedError);\n\t\t\t\tresult = true;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nclass SearchFilter implements IFilter {\n\n\tpublic isVisible(tree: ITree, element: any): boolean {\n\t\treturn !(element instanceof FileMatch) || element.matches().length > 0;\n\t}\n}\n\nclass SearchActionProvider extends ContributableActionProvider {\n\n\tpublic hasActions(tree: ITree, element: any): boolean {\n\t\treturn element instanceof FileMatch || super.hasActions(tree, element);\n\t}\n\n\tpublic getActions(tree: ITree, element: any): TPromise<IAction[]> {\n\t\treturn super.getActions(tree, element).then(actions => {\n\t\t\tif (element instanceof FileMatch) {\n\t\t\t\tactions.unshift(new RemoveAction(tree, element));\n\t\t\t}\n\n\t\t\treturn actions;\n\t\t});\n\t}\n}\n\nclass RemoveAction extends Action {\n\tprivate viewer: ITree;\n\tprivate fileMatch: FileMatch;\n\n\tconstructor(viewer: ITree, element: FileMatch) {\n\t\tsuper('remove', nls.localize('RemoveAction.label', \"Remove\"), 'action-remove');\n\n\t\tthis.viewer = viewer;\n\t\tthis.fileMatch = element;\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet parent = this.fileMatch.parent();\n\t\tparent.remove(this.fileMatch);\n\n\t\treturn this.viewer.refresh(parent);\n\t}\n}\n\nclass SearchRenderer extends ActionsRenderer {\n\n\tconstructor(actionRunner: IActionRunner, @IWorkspaceContextService private contextService: IWorkspaceContextService) {\n\t\tsuper({\n\t\t\tactionProvider: new SearchActionProvider(),\n\t\t\tactionRunner: actionRunner\n\t\t});\n\t}\n\n\tpublic getContentHeight(tree: ITree, element: any): number {\n\t\treturn 22;\n\t}\n\n\tpublic renderContents(tree: ITree, element: FileMatchOrMatch, domElement: HTMLElement, previousCleanupFn: IElementCallback): IElementCallback {\n\n\t\t// File\n\t\tif (element instanceof FileMatch) {\n\t\t\tlet fileMatch = <FileMatch>element;\n\t\t\tlet container = $('.filematch');\n\t\t\tlet leftRenderer: IRenderer;\n\t\t\tlet rightRenderer: IRenderer;\n\t\t\tlet widget: LeftRightWidget;\n\n\t\t\tleftRenderer = (left: HTMLElement): any => {\n\t\t\t\tnew FileLabel(left, fileMatch.resource(), this.contextService);\n\n\t\t\t\treturn null;\n\t\t\t};\n\n\t\t\trightRenderer = (right: HTMLElement) => {\n\t\t\t\tlet len = fileMatch.count();\n\n\t\t\t\treturn new CountBadge(right, len, len > 1 ? nls.localize('searchMatches', \"{0} matches found\", len) : nls.localize('searchMatch', \"{0} match found\", len));\n\t\t\t};\n\n\t\t\twidget = new LeftRightWidget(container, leftRenderer, rightRenderer);\n\n\t\t\tcontainer.appendTo(domElement);\n\n\t\t\treturn widget.dispose.bind(widget);\n\t\t}\n\n\t\t// Empty\n\t\telse if (element instanceof EmptyMatch) {\n\t\t\tdom.addClass(domElement, 'linematch');\n\t\t\t$('a.plain.label').innerHtml(nls.localize('noMatches', \"no matches\")).appendTo(domElement);\n\t\t}\n\n\t\t// Match\n\t\telse if (element instanceof Match) {\n\t\t\tdom.addClass(domElement, 'linematch');\n\n\t\t\tlet elements: string[] = [];\n\t\t\tlet preview = element.preview();\n\n\t\t\telements.push('<span>');\n\t\t\telements.push(strings.escape(preview.before));\n\t\t\telements.push('</span><span class=\"findInFileMatch\">');\n\t\t\telements.push(strings.escape(preview.inside));\n\t\t\telements.push('</span><span>');\n\t\t\telements.push(strings.escape(preview.after));\n\t\t\telements.push('</span>');\n\n\t\t\t$('a.plain').innerHtml(elements.join(strings.empty)).appendTo(domElement);\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nexport class RefreshAction extends Action {\n\tprivate viewlet: SearchViewlet;\n\n\tconstructor(viewlet: SearchViewlet) {\n\t\tsuper('refresh');\n\n\t\tthis.label = nls.localize('RefreshAction.label', \"Refresh\");\n\t\tthis.enabled = false;\n\t\tthis.class = 'search-action refresh';\n\t\tthis.viewlet = viewlet;\n\t}\n\n\tpublic run(): TPromise<void> {\n\t\tthis.viewlet.onQueryChanged(true);\n\n\t\treturn TPromise.as(null);\n\t}\n}\n\nexport class SelectOrRemoveAction extends Action {\n\tprivate selectMode: boolean;\n\tprivate viewlet: SearchViewlet;\n\n\tconstructor(viewlet: SearchViewlet) {\n\t\tsuper('selectOrRemove');\n\n\t\tthis.label = nls.localize('SelectOrRemoveAction.selectLabel', \"Select\");\n\t\tthis.enabled = false;\n\t\tthis.selectMode = true;\n\t\tthis.viewlet = viewlet;\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet result: TPromise<any>;\n\n\t\tif (this.selectMode) {\n\t\t\tresult = this.runAsSelect();\n\t\t} else {\n\t\t\tresult = this.runAsRemove();\n\t\t}\n\n\t\tthis.selectMode = !this.selectMode;\n\t\tthis.label = this.selectMode ? nls.localize('SelectOrRemoveAction.selectLabel', \"Select\") : nls.localize('SelectOrRemoveAction.removeLabel', \"Remove\");\n\n\t\treturn result;\n\t}\n\n\tprivate runAsSelect(): TPromise<void> {\n\t\tthis.viewlet.getResults().addClass('select');\n\n\t\treturn TPromise.as(null);\n\t}\n\n\tprivate runAsRemove(): TPromise<void> {\n\t\tlet elements: any[] = [];\n\t\tlet tree: ITree = this.viewlet.getControl();\n\n\t\ttree.getInput().matches().forEach((fileMatch: FileMatch) => {\n\t\t\tfileMatch.matches().filter((lineMatch: Match) => {\n\t\t\t\treturn (<any>lineMatch).$checked;\n\t\t\t}).forEach((lineMatch: Match) => {\n\t\t\t\tlineMatch.parent().remove(lineMatch);\n\t\t\t\telements.push(lineMatch.parent());\n\t\t\t});\n\t\t});\n\n\t\tthis.viewlet.getResults().removeClass('select');\n\n\t\tif (elements.length > 0) {\n\t\t\treturn tree.refreshAll(elements).then(() => {\n\t\t\t\treturn tree.refresh();\n\t\t\t});\n\t\t}\n\n\t\treturn TPromise.as(null);\n\t}\n}\n\nexport class CollapseAllAction extends Action {\n\tprivate viewlet: SearchViewlet;\n\n\tconstructor(viewlet: SearchViewlet) {\n\t\tsuper('collapseAll');\n\n\t\tthis.label = nls.localize('CollapseAllAction.label', \"Collapse\");\n\t\tthis.enabled = false;\n\t\tthis.class = 'search-action collapse';\n\t\tthis.viewlet = viewlet;\n\t}\n\n\tpublic run(): TPromise<void> {\n\t\tlet tree = this.viewlet.getControl();\n\t\tif (tree) {\n\t\t\ttree.collapseAll();\n\t\t\ttree.clearSelection();\n\t\t\ttree.clearFocus();\n\t\t\ttree.DOMFocus();\n\t\t\ttree.focusFirst();\n\t\t}\n\n\t\treturn TPromise.as(null);\n\t}\n}\n\nexport class ClearSearchResultsAction extends Action {\n\tprivate viewlet: SearchViewlet;\n\n\tconstructor(viewlet: SearchViewlet) {\n\t\tsuper('clearSearchResults');\n\n\t\tthis.label = nls.localize('ClearSearchResultsAction.label', \"Clear Search Results\");\n\t\tthis.enabled = false;\n\t\tthis.class = 'search-action clear-search-results';\n\t\tthis.viewlet = viewlet;\n\t}\n\n\tpublic run(): TPromise<void> {\n\t\tthis.viewlet.clearSearchResults();\n\n\t\treturn TPromise.as(null);\n\t}\n}\n\nclass ConfigureGlobalExclusionsAction extends Action {\n\n\tconstructor(@IInstantiationService private instantiationService: IInstantiationService) {\n\t\tsuper('configureGlobalExclusionsAction');\n\n\t\tthis.label = nls.localize('ConfigureGlobalExclusionsAction.label', \"Open Settings\");\n\t\tthis.enabled = true;\n\t\tthis.class = 'search-configure-exclusions';\n\t}\n\n\tpublic run(): TPromise<void> {\n\t\tlet action = this.instantiationService.createInstance(OpenGlobalSettingsAction, OpenGlobalSettingsAction.ID, OpenGlobalSettingsAction.LABEL);\n\t\taction.run().done(() => action.dispose(), errors.onUnexpectedError);\n\n\t\treturn TPromise.as(null);\n\t}\n}\n\ninterface IOptions {\n\tplaceholder?: string;\n\twidth?: number;\n\tvalidation?: IInputValidator;\n\tariaLabel?: string;\n}\n\nclass PatternInput {\n\n\tstatic OPTION_CHANGE: string = 'optionChange';\n\n\tprivate contextViewProvider: IContextViewProvider;\n\tprivate onOptionChange: (event: Event) => void;\n\tprivate width: number;\n\tprivate placeholder: string;\n\tprivate ariaLabel: string;\n\n\tprivate listenersToRemove: any[];\n\tprivate pattern: Checkbox;\n\tpublic domNode: HTMLElement;\n\tprivate inputNode: HTMLInputElement;\n\tprivate inputBox: InputBox;\n\n\tconstructor(parent: HTMLElement, contextViewProvider: IContextViewProvider, options: IOptions = Object.create(null)) {\n\t\tthis.contextViewProvider = contextViewProvider;\n\t\tthis.onOptionChange = null;\n\t\tthis.width = options.width || 100;\n\t\tthis.placeholder = options.placeholder || '';\n\t\tthis.ariaLabel = options.ariaLabel || nls.localize('defaultLabel', \"input\");\n\n\t\tthis.listenersToRemove = [];\n\t\tthis.pattern = null;\n\t\tthis.domNode = null;\n\t\tthis.inputNode = null;\n\t\tthis.inputBox = null;\n\n\t\tthis.buildDomNode();\n\n\t\tif (Boolean(parent)) {\n\t\t\tparent.appendChild(this.domNode);\n\t\t}\n\t}\n\n\tpublic destroy(): void {\n\t\tthis.pattern.dispose();\n\t\tthis.listenersToRemove.forEach((element) => {\n\t\t\telement();\n\t\t});\n\t\tthis.listenersToRemove = [];\n\t}\n\n\tpublic on(eventType: string, handler: (event: Event) => void): PatternInput {\n\t\tswitch (eventType) {\n\t\t\tcase 'keydown':\n\t\t\tcase 'keyup':\n\t\t\t\t$(this.inputBox.inputElement).on(eventType, handler);\n\t\t\t\tbreak;\n\t\t\tcase PatternInput.OPTION_CHANGE:\n\t\t\t\tthis.onOptionChange = handler;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic setWidth(newWidth: number): void {\n\t\tthis.width = newWidth;\n\t\tthis.domNode.style.width = this.width + 'px';\n\t\tthis.contextViewProvider.layout();\n\t\tthis.setInputWidth();\n\t}\n\n\tpublic getValue(): string {\n\t\treturn this.inputBox.value;\n\t}\n\n\tpublic setValue(value: string): void {\n\t\tif (this.inputBox.value !== value) {\n\t\t\tthis.inputBox.value = value;\n\t\t}\n\t}\n\n\tpublic getGlob(): IExpression {\n\t\tlet pattern = this.getValue();\n\t\tlet isGlobPattern = this.isGlobPattern();\n\n\t\tif (!pattern) {\n\t\t\treturn void 0;\n\t\t}\n\n\t\tlet glob: IExpression = Object.create(null);\n\n\t\tlet segments: string[];\n\t\tif (isGlobPattern) {\n\t\t\tsegments = splitGlobAware(pattern, ',').map(s => s.trim()).filter(s => !!s.length);\n\t\t} else {\n\t\t\tsegments = pattern.split(',').map(s => strings.trim(s.trim(), '/')).filter(s => !!s.length).map(p => {\n\t\t\t\tif (p[0] === '.') {\n\t\t\t\t\tp = '*' + p; // convert \".js\" to \"*.js\"\n\t\t\t\t}\n\n\t\t\t\treturn strings.format('{{0}/**,**/{1}}', p, p); // convert foo to {foo/**,**/foo} to cover files and folders\n\t\t\t});\n\t\t}\n\n\t\treturn segments.reduce((prev, cur) => { glob[cur] = true; return glob; }, glob);\n\t}\n\n\tpublic select(): void {\n\t\tthis.inputBox.select();\n\t}\n\n\tpublic focus(): void {\n\t\tthis.inputBox.focus();\n\t}\n\n\tpublic isGlobPattern(): boolean {\n\t\treturn this.pattern.checked;\n\t}\n\n\tpublic setIsGlobPattern(value: boolean): void {\n\t\tthis.pattern.checked = value;\n\t\tthis.setInputWidth();\n\t}\n\n\tprivate setInputWidth(): void {\n\t\tlet w = this.width - this.pattern.width();\n\t\tthis.inputBox.width = w;\n\t}\n\n\tprivate buildDomNode(): void {\n\t\tthis.domNode = document.createElement('div');\n\t\tthis.domNode.style.width = this.width + 'px';\n\t\t$(this.domNode).addClass('monaco-findInput');\n\n\t\tthis.inputBox = new InputBox(this.domNode, this.contextViewProvider, {\n\t\t\tplaceholder: this.placeholder || '',\n\t\t\tariaLabel: this.ariaLabel || '',\n\t\t\tvalidationOptions: {\n\t\t\t\tvalidation: null,\n\t\t\t\tshowMessage: true\n\t\t\t}\n\t\t});\n\n\t\tthis.pattern = new Checkbox({\n\t\t\tactionClassName: 'pattern',\n\t\t\ttitle: nls.localize('patternDescription', \"Use Glob Patterns\"),\n\t\t\tisChecked: false,\n\t\t\tonChange: (viaKeyboard) => {\n\t\t\t\tthis.onOptionChange(null);\n\t\t\t\tif (!viaKeyboard) {\n\t\t\t\t\tthis.inputBox.focus();\n\t\t\t\t}\n\t\t\t\tthis.setInputWidth();\n\n\t\t\t\tif (this.isGlobPattern()) {\n\t\t\t\t\tthis.showGlobHelp();\n\t\t\t\t} else {\n\t\t\t\t\tthis.inputBox.hideMessage();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$(this.pattern.domNode).on('mouseover', () => {\n\t\t\tif (this.isGlobPattern()) {\n\t\t\t\tthis.showGlobHelp();\n\t\t\t}\n\t\t});\n\n\t\t$(this.pattern.domNode).on(['mouseleave', 'mouseout'], () => {\n\t\t\tthis.inputBox.hideMessage();\n\t\t});\n\n\t\tthis.setInputWidth();\n\n\t\tlet controls = document.createElement('div');\n\t\tcontrols.className = 'controls';\n\t\tcontrols.appendChild(this.pattern.domNode);\n\n\t\tthis.domNode.appendChild(controls);\n\t}\n\n\tprivate showGlobHelp(): void {\n\t\tthis.inputBox.showMessage({\n\t\t\ttype: MessageType.INFO,\n\t\t\tformatContent: true,\n\t\t\tcontent: nls.localize('patternHelpInclude',\n\t\t\t\t\"The pattern to match. e.g. **\\\\*\\\\*/*.js** to match all JavaScript files or **myFolder/\\\\*\\\\*** to match that folder with all children.\\n\\n**Reference**:\\n**\\\\*** matches 0 or more characters\\n**?** matches 1 character\\n**\\\\*\\\\*** matches zero or more directories\\n**[a-z]** matches a range of characters\\n**{a,b}** matches any of the patterns)\"\n\t\t\t)\n\t\t}, true);\n\t}\n}\n\nexport class SearchViewlet extends Viewlet {\n\n\tprivate static MAX_TEXT_RESULTS = 2048;\n\n\tprivate isDisposed: boolean;\n\tprivate currentRequest: PPromise<ISearchComplete, ISearchProgressItem>;\n\tprivate loading: boolean;\n\tprivate queryBuilder: QueryBuilder;\n\tprivate viewModel: SearchResult;\n\tprivate callOnModelChange: Function[];\n\n\tprivate viewletVisible: IKeybindingContextKey<boolean>;\n\tprivate actionRegistry: { [key: string]: Action; };\n\tprivate tree: ITree;\n\tprivate viewletSettings: any;\n\tprivate domNode: Builder;\n\tprivate queryBox: HTMLElement;\n\tprivate messages: Builder;\n\tprivate findInput: FindInput;\n\tprivate size: Dimension;\n\tprivate queryDetails: HTMLElement;\n\tprivate inputPatternExclusions: PatternInput;\n\tprivate inputPatternGlobalExclusions: InputBox;\n\tprivate inputPatternGlobalExclusionsContainer: Builder;\n\tprivate inputPatternIncludes: PatternInput;\n\tprivate results: Builder;\n\n\tconstructor(\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IEventService private eventService: IEventService,\n\t\t@IWorkbenchEditorService private editorService: IWorkbenchEditorService,\n\t\t@IProgressService private progressService: IProgressService,\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@IStorageService private storageService: IStorageService,\n\t\t@IContextViewService private contextViewService: IContextViewService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService,\n\t\t@ISearchService private searchService: ISearchService,\n\t\t@ITextFileService private textFileService: ITextFileService,\n\t\t@IKeybindingService keybindingService: IKeybindingService\n\t) {\n\t\tsuper(ID, telemetryService);\n\n\t\tthis.viewletVisible = keybindingService.createKey<boolean>('searchViewletVisible', true);\n\t\tthis.callOnModelChange = [];\n\n\t\tthis.queryBuilder = this.instantiationService.createInstance(QueryBuilder);\n\t\tthis.viewletSettings = this.getMemento(storageService, Scope.WORKSPACE);\n\n\t\tthis.toUnbind.push(this.eventService.addListener(FileEventType.FILE_CHANGES, (e) => this.onFilesChanged(e)));\n\t\tthis.toUnbind.push(this.eventService.addListener(WorkbenchEventType.UNTITLED_FILE_DELETED, (e) => this.onUntitledFileDeleted(e)));\n\t\tthis.toUnbind.push(this.configurationService.addListener(ConfigurationServiceEventTypes.UPDATED, (e: IConfigurationServiceEvent) => this.onConfigurationUpdated(e.config)));\n\t}\n\n\tprivate onConfigurationUpdated(configuration: any): void {\n\t\tthis.updateGlobalPatternExclusions(configuration);\n\t}\n\n\tpublic getResults(): Builder {\n\t\treturn this.results;\n\t}\n\n\tpublic create(parent: Builder): TPromise<void> {\n\t\tsuper.create(parent);\n\n\t\tlet filePatterns = this.viewletSettings['query.filePatterns'] || '';\n\t\tlet patternExclusions = this.viewletSettings['query.folderExclusions'] || '';\n\t\tlet exclusionsUsePattern = this.viewletSettings['query.exclusionsUsePattern'];\n\t\tlet includesUsePattern = this.viewletSettings['query.includesUsePattern'];\n\t\tlet patternIncludes = this.viewletSettings['query.folderIncludes'] || '';\n\t\tlet contentPattern = this.viewletSettings['query.contentPattern'] || '';\n\t\tlet isRegex = this.viewletSettings['query.regex'] === true;\n\t\tlet isWholeWords = this.viewletSettings['query.wholeWords'] === true;\n\t\tlet isCaseSensitive = this.viewletSettings['query.caseSensitive'] === true;\n\n\t\tlet builder: Builder;\n\t\tthis.domNode = parent.div({\n\t\t\t'class': 'search-viewlet'\n\t\t}, (div) => {\n\t\t\tbuilder = div;\n\t\t});\n\n\t\tlet onStandardKeyUp = (keyboardEvent: IKeyboardEvent) => {\n\t\t\tif (keyboardEvent.keyCode === KeyCode.Enter) {\n\t\t\t\tthis.onQueryChanged(true);\n\t\t\t} else if (keyboardEvent.keyCode === KeyCode.Escape) {\n\t\t\t\tthis.cancelSearch();\n\t\t\t}\n\t\t};\n\n\t\tlet onKeyUp = (e: KeyboardEvent) => {\n\t\t\tonStandardKeyUp(new StandardKeyboardEvent(e));\n\t\t};\n\n\t\tthis.queryBox = builder.div({ 'class': 'query-box' }, (div) => {\n\t\t\tlet options: IFindInputOptions = {\n\t\t\t\tlabel: nls.localize('label.Search', 'Search: Type Search Term and press Enter to search or Escape to cancel'),\n\t\t\t\tvalidation: (value: string) => {\n\t\t\t\t\tif (value.length === 0) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.findInput.getRegex()) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tlet regExp: RegExp;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tregExp = new RegExp(value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn { content: e.message };\n\t\t\t\t\t}\n\t\t\t\t\tif (strings.regExpLeadsToEndlessLoop(regExp)) {\n\t\t\t\t\t\treturn { content: nls.localize('regexp.validationFailure', \"Expression matches everything\") };\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tplaceholder: nls.localize('findPlaceHolder', \"Press Enter to Search, ESC to Cancel\")\n\t\t\t};\n\n\t\t\tthis.findInput = new FindInput(div.getHTMLElement(), this.contextViewService, options);\n\t\t\tthis.findInput.onKeyUp(onStandardKeyUp);\n\t\t\tthis.findInput.onKeyDown((keyboardEvent: IKeyboardEvent) => {\n\t\t\t\tif (keyboardEvent.keyCode === KeyCode.DownArrow) {\n\t\t\t\t\tdom.EventHelper.stop(keyboardEvent);\n\t\t\t\t\tif (this.showsFileTypes()) {\n\t\t\t\t\t\tthis.toggleFileTypes(true, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.selectTreeIfNotSelected(keyboardEvent);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.findInput.onDidOptionChange((viaKeyboard) => {\n\t\t\t\tthis.onQueryChanged(true, viaKeyboard);\n\t\t\t});\n\t\t\tthis.findInput.setValue(contentPattern);\n\t\t\tthis.findInput.setRegex(isRegex);\n\t\t\tthis.findInput.setCaseSensitive(isCaseSensitive);\n\t\t\tthis.findInput.setWholeWords(isWholeWords);\n\t\t}).style({ position: 'relative' }).getHTMLElement();\n\n\t\tthis.queryDetails = builder.div({ 'class': ['query-details', 'separator'] }, (builder) => {\n\t\t\tbuilder.div({ 'class': 'more', 'tabindex': 0, 'role': 'button', 'title': nls.localize('moreSearch', \"Toggle Search Details\") })\n\t\t\t\t.on(dom.EventType.CLICK, (e) => {\n\t\t\t\t\tdom.EventHelper.stop(e);\n\t\t\t\t\tthis.toggleFileTypes(true);\n\t\t\t\t}).on(dom.EventType.KEY_UP, (e: KeyboardEvent) => {\n\t\t\t\t\tlet event = new StandardKeyboardEvent(e);\n\n\t\t\t\t\tif (event.equals(CommonKeybindings.ENTER) || event.equals(CommonKeybindings.SPACE)) {\n\t\t\t\t\t\tdom.EventHelper.stop(e);\n\t\t\t\t\t\tthis.toggleFileTypes();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t//folder includes list\n\t\t\tbuilder.div({ 'class': 'file-types' }, (builder) => {\n\t\t\t\tlet title = nls.localize('searchScope.includes', \"files to include\");\n\t\t\t\tbuilder.element('h4', { text: title });\n\n\t\t\t\tthis.inputPatternIncludes = new PatternInput(builder.getContainer(), this.contextViewService, {\n\t\t\t\t\tariaLabel: nls.localize('label.includes', 'Search Include Patterns')\n\t\t\t\t});\n\n\t\t\t\tthis.inputPatternIncludes.setIsGlobPattern(includesUsePattern);\n\t\t\t\tthis.inputPatternIncludes.setValue(patternIncludes);\n\n\t\t\t\tthis.inputPatternIncludes\n\t\t\t\t\t.on(dom.EventType.KEY_UP, onKeyUp)\n\t\t\t\t\t.on(dom.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\t\t\t\tlet keyboardEvent = new StandardKeyboardEvent(e);\n\t\t\t\t\t\tif (keyboardEvent.equals(CommonKeybindings.UP_ARROW)) {\n\t\t\t\t\t\t\tdom.EventHelper.stop(e);\n\t\t\t\t\t\t\tthis.findInput.focus();\n\t\t\t\t\t\t\tthis.findInput.select();\n\t\t\t\t\t\t} else if (keyboardEvent.equals(CommonKeybindings.DOWN_ARROW)) {\n\t\t\t\t\t\t\tdom.EventHelper.stop(e);\n\t\t\t\t\t\t\tthis.inputPatternExclusions.focus();\n\t\t\t\t\t\t\tthis.inputPatternExclusions.select();\n\t\t\t\t\t\t}\n\t\t\t\t\t}).on(FindInput.OPTION_CHANGE, (e) => {\n\t\t\t\t\t\tthis.onQueryChanged(false);\n\t\t\t\t\t});\n\t\t\t});\n\n\t\t\t//pattern exclusion list\n\t\t\tbuilder.div({ 'class': 'file-types' }, (builder) => {\n\t\t\t\tlet title = nls.localize('searchScope.excludes', \"files to exclude\");\n\t\t\t\tbuilder.element('h4', { text: title });\n\n\t\t\t\tthis.inputPatternExclusions = new PatternInput(builder.getContainer(), this.contextViewService, {\n\t\t\t\t\tariaLabel: nls.localize('label.excludes', 'Search Exclude Patterns')\n\t\t\t\t});\n\n\t\t\t\tthis.inputPatternExclusions.setIsGlobPattern(exclusionsUsePattern);\n\t\t\t\tthis.inputPatternExclusions.setValue(patternExclusions);\n\n\t\t\t\tthis.inputPatternExclusions\n\t\t\t\t\t.on(dom.EventType.KEY_UP, onKeyUp)\n\t\t\t\t\t.on(dom.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\t\t\t\tlet keyboardEvent = new StandardKeyboardEvent(e);\n\t\t\t\t\t\tif (keyboardEvent.equals(CommonKeybindings.UP_ARROW)) {\n\t\t\t\t\t\t\tdom.EventHelper.stop(e);\n\t\t\t\t\t\t\tthis.inputPatternIncludes.focus();\n\t\t\t\t\t\t\tthis.inputPatternIncludes.select();\n\t\t\t\t\t\t} else if (keyboardEvent.equals(CommonKeybindings.DOWN_ARROW)) {\n\t\t\t\t\t\t\tdom.EventHelper.stop(e);\n\t\t\t\t\t\t\tthis.selectTreeIfNotSelected(keyboardEvent);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).on(FindInput.OPTION_CHANGE, (e) => {\n\t\t\t\t\t\tthis.onQueryChanged(false);\n\t\t\t\t\t});\n\t\t\t});\n\n\t\t\t// add hint if we have global exclusion\n\t\t\tthis.inputPatternGlobalExclusionsContainer = builder.div({ 'class': 'file-types global-exclude disabled' }, (builder) => {\n\t\t\t\tlet title = nls.localize('global.searchScope.folders', \"files excluded through settings\");\n\t\t\t\tbuilder.element('h4', { text: title });\n\n\t\t\t\tthis.inputPatternGlobalExclusions = new InputBox(builder.getContainer(), this.contextViewService, {\n\t\t\t\t\tactions: [this.instantiationService.createInstance(ConfigureGlobalExclusionsAction)],\n\t\t\t\t\tariaLabel: nls.localize('label.global.excludes', 'Configured Search Exclude Patterns')\n\t\t\t\t});\n\t\t\t\tthis.inputPatternGlobalExclusions.inputElement.readOnly = true;\n\t\t\t\t$(this.inputPatternGlobalExclusions.inputElement).attr('aria-readonly', 'true');\n\t\t\t\t$(this.inputPatternGlobalExclusions.inputElement).addClass('disabled');\n\t\t\t}).hide();\n\t\t}).getHTMLElement();\n\n\t\tthis.messages = builder.div({ 'class': 'messages' }).hide().clone();\n\n\t\tbuilder.div({ 'class': 'results' }, (div) => {\n\t\t\tthis.results = div;\n\n\t\t\tlet dataSource = new SearchDataSource();\n\t\t\tlet renderer = this.instantiationService.createInstance(SearchRenderer, this.getActionRunner());\n\n\t\t\tthis.tree = new Tree(div.getHTMLElement(), {\n\t\t\t\tdataSource: dataSource,\n\t\t\t\trenderer: renderer,\n\t\t\t\tsorter: new SearchSorter(),\n\t\t\t\tfilter: new SearchFilter(),\n\t\t\t\tcontroller: new SearchController(this),\n\t\t\t\taccessibilityProvider: this.instantiationService.createInstance(SearchAccessibilityProvider)\n\t\t\t}, {\n\t\t\t\t\tariaLabel: nls.localize('treeAriaLabel', \"Search Results\")\n\t\t\t\t});\n\n\t\t\tthis.toUnbind.push(() => renderer.dispose());\n\n\t\t\tthis.toUnbind.push(this.tree.addListener('selection', (event: any) => {\n\t\t\t\tlet element: any, keyboard = event.payload && event.payload.origin === 'keyboard';\n\t\t\t\tif (keyboard) {\n\t\t\t\t\telement = this.tree.getFocus();\n\t\t\t\t} else {\n\t\t\t\t\telement = event.selection[0];\n\t\t\t\t}\n\n\t\t\t\tlet originalEvent: KeyboardEvent | MouseEvent = event.payload && event.payload.originalEvent;\n\n\t\t\t\tlet doubleClick = (event.payload && event.payload.origin === 'mouse' && originalEvent && originalEvent.detail === 2);\n\t\t\t\tif (doubleClick) {\n\t\t\t\t\toriginalEvent.preventDefault(); // focus moves to editor, we need to prevent default\n\t\t\t\t}\n\n\t\t\t\tlet sideBySide = (originalEvent && (originalEvent.ctrlKey || originalEvent.metaKey));\n\n\t\t\t\tthis.onFocus(element, !keyboard && !doubleClick, sideBySide);\n\t\t\t}));\n\t\t});\n\n\t\tthis.actionRegistry = <any>{};\n\t\tlet actions: Action[] = [new CollapseAllAction(this), new RefreshAction(this), new ClearSearchResultsAction(this), new SelectOrRemoveAction(this)];\n\t\tactions.forEach((action) => {\n\t\t\tthis.actionRegistry[action.id] = action;\n\t\t});\n\n\t\tif (filePatterns !== '' || patternExclusions !== '' || patternIncludes !== '') {\n\t\t\tthis.toggleFileTypes(true, true, true);\n\t\t}\n\n\t\tthis.updateGlobalPatternExclusions(this.configurationService.getConfiguration<ISearchConfiguration>());\n\n\t\treturn TPromise.as(null);\n\t}\n\n\tprivate updateGlobalPatternExclusions(configuration: ISearchConfiguration): void {\n\t\tif (this.inputPatternGlobalExclusionsContainer) {\n\t\t\tlet excludes = getExcludes(configuration);\n\t\t\tif (excludes) {\n\t\t\t\tlet exclusions = Object.getOwnPropertyNames(excludes).filter(exclude => excludes[exclude] === true || typeof excludes[exclude].when === 'string').map(exclude => {\n\t\t\t\t\tif (excludes[exclude] === true) {\n\t\t\t\t\t\treturn exclude;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn nls.localize('globLabel', \"{0} when {1}\", exclude, excludes[exclude].when);\n\t\t\t\t});\n\n\t\t\t\tif (exclusions.length) {\n\t\t\t\t\tconst values = exclusions.join(', ');\n\t\t\t\t\tthis.inputPatternGlobalExclusions.value = values;\n\t\t\t\t\tthis.inputPatternGlobalExclusions.inputElement.title = values;\n\t\t\t\t\tthis.inputPatternGlobalExclusionsContainer.show();\n\t\t\t\t} else {\n\t\t\t\t\tthis.inputPatternGlobalExclusionsContainer.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic setVisible(visible: boolean): TPromise<void> {\n\t\tlet promise: TPromise<void>;\n\t\tthis.viewletVisible.set(visible);\n\t\tif (visible) {\n\t\t\tpromise = super.setVisible(visible);\n\t\t\tthis.tree.onVisible();\n\t\t} else {\n\t\t\tthis.tree.onHidden();\n\t\t\tpromise = super.setVisible(visible);\n\t\t}\n\n\t\t// Enable highlights if there are searchresults\n\t\tif (this.viewModel) {\n\t\t\tthis.viewModel.toggleHighlights(visible);\n\t\t}\n\n\t\t// Open focused element from results in case the editor area is otherwise empty\n\t\tif (visible && !this.editorService.getActiveEditorInput()) {\n\t\t\tlet focus = this.tree.getFocus();\n\t\t\tif (focus) {\n\t\t\t\tthis.onFocus(focus, false, false);\n\t\t\t}\n\t\t}\n\n\t\treturn promise;\n\t}\n\n\tpublic focus(): void {\n\t\tsuper.focus();\n\n\t\tlet selectedText = this.getSelectionFromEditor();\n\t\tif (selectedText) {\n\t\t\tthis.findInput.setValue(selectedText);\n\t\t}\n\n\t\tthis.findInput.focus();\n\t\tthis.findInput.select();\n\t}\n\n\tprivate reLayout(): void {\n\t\tif (this.isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.findInput.setWidth(this.size.width - 34 /* container margin */);\n\n\t\tthis.inputPatternExclusions.setWidth(this.size.width - 42 /* container margin */);\n\t\tthis.inputPatternIncludes.setWidth(this.size.width - 42 /* container margin */);\n\t\tthis.inputPatternGlobalExclusions.width = this.size.width - 42 /* container margin */ - 24 /* actions */;\n\n\t\tlet queryBoxHeight = dom.getTotalHeight(this.queryBox);\n\t\tlet queryDetailsHeight = dom.getTotalHeight(this.queryDetails);\n\t\tlet searchResultContainerSize = this.size.height - queryBoxHeight - queryDetailsHeight;\n\t\tthis.results.style({ height: searchResultContainerSize + 'px' });\n\n\t\tthis.tree.layout(searchResultContainerSize);\n\t}\n\n\tpublic layout(dimension: Dimension): void {\n\t\tthis.size = dimension;\n\t\tthis.reLayout();\n\t}\n\n\tpublic getControl(): ITree {\n\t\treturn this.tree;\n\t}\n\n\tpublic clearSearchResults(): void {\n\t\tthis.disposeModel();\n\t\tthis.showEmptyStage();\n\t\tthis.findInput.clear();\n\t\tif (this.currentRequest) {\n\t\t\tthis.currentRequest.cancel();\n\t\t\tthis.currentRequest = null;\n\t\t}\n\t}\n\n\tpublic cancelSearch(): boolean {\n\t\tif (this.currentRequest) {\n\t\t\tthis.findInput.focus();\n\t\t\tthis.findInput.select();\n\n\t\t\tthis.currentRequest.cancel();\n\t\t\tthis.currentRequest = null;\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate selectTreeIfNotSelected(keyboardEvent: IKeyboardEvent): void {\n\t\tif (this.tree.getInput()) {\n\t\t\tthis.tree.DOMFocus();\n\t\t\tlet selection = this.tree.getSelection();\n\t\t\tif (selection.length === 0) {\n\t\t\t\tthis.tree.focusNext();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getSelectionFromEditor(): string {\n\t\tif (!this.editorService.getActiveEditor()) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet editor: any = this.editorService.getActiveEditor().getControl();\n\t\tif (!editor || !isFunction(editor.getEditorType) || editor.getEditorType() !== EditorType.ICodeEditor) { // Substitute for (editor instanceof ICodeEditor)\n\t\t\treturn null;\n\t\t}\n\n\t\tlet range = editor.getSelection();\n\t\tif (range && !range.isEmpty() && range.startLineNumber === range.endLineNumber) {\n\t\t\tlet r = editor.getModel().getLineContent(range.startLineNumber);\n\t\t\tr = r.substring(range.startColumn - 1, range.endColumn - 1);\n\t\t\treturn r;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate showsFileTypes(): boolean {\n\t\treturn dom.hasClass(this.queryDetails, 'more');\n\t}\n\n\tpublic toggleFileTypes(moveFocus?: boolean, show?: boolean, skipLayout?: boolean): void {\n\t\tlet cls = 'more';\n\t\tshow = typeof show === 'undefined' ? !dom.hasClass(this.queryDetails, cls) : Boolean(show);\n\t\tskipLayout = Boolean(skipLayout);\n\n\t\tif (show) {\n\t\t\tdom.addClass(this.queryDetails, cls);\n\t\t\tif (moveFocus) {\n\t\t\t\tthis.inputPatternIncludes.focus();\n\t\t\t\tthis.inputPatternIncludes.select();\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeClass(this.queryDetails, cls);\n\t\t\tif (moveFocus) {\n\t\t\t\tthis.findInput.focus();\n\t\t\t\tthis.findInput.select();\n\t\t\t}\n\t\t}\n\n\t\tif (!skipLayout && this.size) {\n\t\t\tthis.layout(this.size);\n\t\t}\n\t}\n\n\tpublic searchInFolder(resource: URI): void {\n\t\tif (!this.showsFileTypes()) {\n\t\t\tthis.toggleFileTypes(true, true);\n\t\t}\n\n\t\tlet workspaceRelativePath = this.contextService.toWorkspaceRelativePath(resource);\n\t\tif (workspaceRelativePath) {\n\t\t\tthis.inputPatternIncludes.setIsGlobPattern(false);\n\t\t\tthis.inputPatternIncludes.setValue(workspaceRelativePath);\n\t\t\tthis.findInput.focus();\n\t\t}\n\t}\n\n\tpublic onQueryChanged(rerunQuery: boolean, preserveFocus?: boolean): void {\n\t\tlet isRegex = this.findInput.getRegex();\n\t\tlet isWholeWords = this.findInput.getWholeWords();\n\t\tlet isCaseSensitive = this.findInput.getCaseSensitive();\n\t\tlet contentPattern = this.findInput.getValue();\n\t\tlet patternExcludes = this.inputPatternExclusions.getValue().trim();\n\t\tlet exclusionsUsePattern = this.inputPatternExclusions.isGlobPattern();\n\t\tlet patternIncludes = this.inputPatternIncludes.getValue().trim();\n\t\tlet includesUsePattern = this.inputPatternIncludes.isGlobPattern();\n\n\t\t// store memento\n\t\tthis.viewletSettings['query.contentPattern'] = contentPattern;\n\t\tthis.viewletSettings['query.regex'] = isRegex;\n\t\tthis.viewletSettings['query.wholeWords'] = isWholeWords;\n\t\tthis.viewletSettings['query.caseSensitive'] = isCaseSensitive;\n\t\tthis.viewletSettings['query.folderExclusions'] = patternExcludes;\n\t\tthis.viewletSettings['query.exclusionsUsePattern'] = exclusionsUsePattern;\n\t\tthis.viewletSettings['query.folderIncludes'] = patternIncludes;\n\t\tthis.viewletSettings['query.includesUsePattern'] = includesUsePattern;\n\n\t\tif (!rerunQuery) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (contentPattern.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Validate regex is OK\n\t\tif (isRegex) {\n\t\t\tlet regExp: RegExp;\n\t\t\ttry {\n\t\t\t\tregExp = new RegExp(contentPattern);\n\t\t\t} catch (e) {\n\t\t\t\treturn; // malformed regex\n\t\t\t}\n\n\t\t\tif (strings.regExpLeadsToEndlessLoop(regExp)) {\n\t\t\t\treturn; // endless regex\n\t\t\t}\n\t\t}\n\n\t\tlet content = {\n\t\t\tpattern: contentPattern,\n\t\t\tisRegExp: isRegex,\n\t\t\tisCaseSensitive: isCaseSensitive,\n\t\t\tisWordMatch: isWholeWords\n\t\t};\n\n\t\tlet excludes: IExpression = this.inputPatternExclusions.getGlob();\n\t\tlet includes: IExpression = this.inputPatternIncludes.getGlob();\n\n\t\tlet options: IQueryOptions = {\n\t\t\tfolderResources: this.contextService.getWorkspace() ? [this.contextService.getWorkspace().resource] : [],\n\t\t\textraFileResources: this.textFileService.getWorkingFilesModel().getOutOfWorkspaceContextEntries().map(e => e.resource),\n\t\t\texcludePattern: excludes,\n\t\t\tincludePattern: includes,\n\t\t\tmaxResults: SearchViewlet.MAX_TEXT_RESULTS,\n\t\t};\n\n\t\tthis.onQueryTriggered(this.queryBuilder.text(content, options), patternExcludes, patternIncludes);\n\n\t\tif (!preserveFocus) {\n\t\t\tthis.findInput.focus(); // focus back to input field\n\t\t}\n\t}\n\n\tprivate onQueryTriggered(query: ISearchQuery, excludePattern: string, includePattern: string): void {\n\t\tif (this.currentRequest) {\n\t\t\tthis.currentRequest.cancel();\n\t\t\tthis.currentRequest = null;\n\t\t}\n\n\t\tlet progressTimer = this.telemetryService.timedPublicLog('searchResultsFirstRender');\n\t\tlet doneTimer = this.telemetryService.timedPublicLog('searchResultsFinished');\n\n\t\t// Progress total is 100%\n\t\tlet progressTotal = 100;\n\t\tlet progressRunner = this.progressService.show(progressTotal);\n\t\tlet progressWorked = 0;\n\n\t\tthis.loading = true;\n\t\tthis.findInput.clearMessage();\n\t\tthis.disposeModel();\n\t\tthis.showEmptyStage();\n\n\t\tlet handledMatches: { [id: string]: boolean } = Object.create(null);\n\t\tlet autoExpand = (alwaysExpandIfOneResult: boolean) => {\n\t\t\t// Auto-expand / collapse based on number of matches:\n\t\t\t// - alwaysExpandIfOneResult: expand file results if we have just one file result and less than 50 matches on a file\n\t\t\t// - expand file results if we have more than one file result and less than 10 matches on a file\n\t\t\tif (this.viewModel) {\n\t\t\t\tlet matches = this.viewModel.matches();\n\t\t\t\tmatches.forEach((match) => {\n\t\t\t\t\tif (handledMatches[match.id()]) {\n\t\t\t\t\t\treturn; // if we once handled a result, do not do it again to keep results stable (the user might have expanded/collapsed meanwhile)\n\t\t\t\t\t}\n\n\t\t\t\t\thandledMatches[match.id()] = true;\n\n\t\t\t\t\tlet length = match.matches().length;\n\t\t\t\t\tif (length < 10 || (alwaysExpandIfOneResult && matches.length === 1 && length < 50)) {\n\t\t\t\t\t\tthis.tree.expand(match).done(null, errors.onUnexpectedError);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.tree.collapse(match).done(null, errors.onUnexpectedError);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tlet timerEvent = timer.start(timer.Topic.WORKBENCH, 'Search');\n\t\tlet isDone = false;\n\t\tlet onComplete = (completed?: ISearchComplete) => {\n\t\t\ttimerEvent.stop();\n\t\t\tisDone = true;\n\n\t\t\t// Complete up to 100% as needed\n\t\t\tif (completed) {\n\t\t\t\tprogressRunner.worked(progressTotal - progressWorked);\n\t\t\t\tsetTimeout(() => progressRunner.done(), 200);\n\t\t\t} else {\n\t\t\t\tprogressRunner.done();\n\t\t\t}\n\n\t\t\t// Show the final results\n\t\t\tif (!this.viewModel) {\n\t\t\t\tthis.viewModel = this.instantiationService.createInstance(SearchResult, query.contentPattern);\n\n\t\t\t\tif (completed) {\n\t\t\t\t\tthis.viewModel.append(completed.results);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.tree.refresh().then(() => {\n\t\t\t\tautoExpand(true);\n\t\t\t}).done(undefined, errors.onUnexpectedError);\n\n\t\t\tlet hasResults = !this.viewModel.isEmpty();\n\t\t\tthis.loading = false;\n\t\t\tthis.telemetryService.publicLog('searchResultsShown', { count: this.viewModel.count(), fileCount: this.viewModel.fileCount() });\n\n\t\t\tthis.actionRegistry['refresh'].enabled = true;\n\t\t\tthis.actionRegistry['selectOrRemove'].enabled = hasResults;\n\t\t\tthis.actionRegistry['collapseAll'].enabled = hasResults;\n\t\t\tthis.actionRegistry['clearSearchResults'].enabled = hasResults;\n\n\t\t\tif (completed && completed.limitHit) {\n\t\t\t\tthis.findInput.showMessage({\n\t\t\t\t\tcontent: nls.localize('searchMaxResultsWarning', \"The result set only contains a subset of all matches. Please be more specific in your search to narrow down the results.\"),\n\t\t\t\t\ttype: MessageType.WARNING\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!hasResults) {\n\t\t\t\tlet hasExcludes = !!excludePattern;\n\t\t\t\tlet hasIncludes = !!includePattern;\n\t\t\t\tlet message: string;\n\n\t\t\t\tif (!completed) {\n\t\t\t\t\tmessage = nls.localize('searchCanceled', \"Search was canceled before any results could be found - \");\n\t\t\t\t} else if (hasIncludes && hasExcludes) {\n\t\t\t\t\tmessage = nls.localize('noResultsIncludesExcludes', \"No results found in '{0}' excluding '{1}' - \", includePattern, excludePattern);\n\t\t\t\t} else if (hasIncludes) {\n\t\t\t\t\tmessage = nls.localize('noResultsIncludes', \"No results found in '{0}' - \", includePattern);\n\t\t\t\t} else if (hasExcludes) {\n\t\t\t\t\tmessage = nls.localize('noResultsExcludes', \"No results found excluding '{0}' - \", excludePattern);\n\t\t\t\t} else {\n\t\t\t\t\tmessage = nls.localize('noResultsFound', \"No results found. Review your settings for configured exclusions - \");\n\t\t\t\t}\n\n\t\t\t\t// Indicate as status to ARIA\n\t\t\t\taria.status(message);\n\n\t\t\t\tthis.tree.onHidden();\n\t\t\t\tthis.results.hide();\n\t\t\t\tlet div = this.messages.empty().show().asContainer().div({ 'class': 'message', text: message });\n\n\t\t\t\tif (!completed) {\n\t\t\t\t\t$(div).a({\n\t\t\t\t\t\t'class': ['pointer', 'prominent'],\n\t\t\t\t\t\ttext: nls.localize('rerunSearch.message', \"Search again\")\n\t\t\t\t\t}).on(dom.EventType.CLICK, (e: MouseEvent) => {\n\t\t\t\t\t\tdom.EventHelper.stop(e, false);\n\n\t\t\t\t\t\tthis.onQueryChanged(true);\n\t\t\t\t\t});\n\t\t\t\t} else if (hasIncludes || hasExcludes) {\n\t\t\t\t\t$(div).a({\n\t\t\t\t\t\t'class': ['pointer', 'prominent'],\n\t\t\t\t\t\t'tabindex': '0',\n\t\t\t\t\t\ttext: nls.localize('rerunSearchInAll.message', \"Search again in all files\")\n\t\t\t\t\t}).on(dom.EventType.CLICK, (e: MouseEvent) => {\n\t\t\t\t\t\tdom.EventHelper.stop(e, false);\n\n\t\t\t\t\t\tthis.inputPatternExclusions.setValue('');\n\t\t\t\t\t\tthis.inputPatternIncludes.setValue('');\n\n\t\t\t\t\t\tthis.onQueryChanged(true);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t$(div).a({\n\t\t\t\t\t\t'class': ['pointer', 'prominent'],\n\t\t\t\t\t\t'tabindex': '0',\n\t\t\t\t\t\ttext: nls.localize('openSettings.message', \"Open Settings\")\n\t\t\t\t\t}).on(dom.EventType.CLICK, (e: MouseEvent) => {\n\t\t\t\t\t\tdom.EventHelper.stop(e, false);\n\n\t\t\t\t\t\tlet action = this.instantiationService.createInstance(OpenGlobalSettingsAction, OpenGlobalSettingsAction.ID, OpenGlobalSettingsAction.LABEL);\n\t\t\t\t\t\taction.run().done(() => action.dispose(), errors.onUnexpectedError);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.viewModel.toggleHighlights(true); // show highlights\n\n\t\t\t\t// Indicate as status to ARIA\n\t\t\t\taria.status(nls.localize('ariaSearchResultsStatus', \"Search returned {0} results in {1} files\", this.viewModel.count(), this.viewModel.fileCount()));\n\t\t\t}\n\n\t\t\tdoneTimer.stop();\n\t\t};\n\n\t\tlet onError = (e: any) => {\n\t\t\tif (errors.isPromiseCanceledError(e)) {\n\t\t\t\tonComplete(null);\n\t\t\t} else {\n\t\t\t\tthis.loading = false;\n\t\t\t\tisDone = true;\n\t\t\t\tprogressRunner.done();\n\t\t\t\tprogressTimer.stop();\n\t\t\t\tdoneTimer.stop();\n\n\t\t\t\tthis.messageService.show(2 /* ERROR */, e);\n\t\t\t}\n\t\t};\n\n\t\tlet total: number = 0;\n\t\tlet worked: number = 0;\n\t\tlet visibleMatches = 0;\n\t\tlet matches: IFileMatch[] = [];\n\t\tlet onProgress = (p: ISearchProgressItem) => {\n\n\t\t\t// Progress\n\t\t\tif (p.total) {\n\t\t\t\ttotal = p.total;\n\t\t\t}\n\n\t\t\tif (p.worked) {\n\t\t\t\tworked = p.worked;\n\t\t\t}\n\n\t\t\t// Results\n\t\t\tif (p.resource) {\n\t\t\t\tmatches.push(p);\n\n\t\t\t\t// Create view model\n\t\t\t\tif (!this.viewModel) {\n\t\t\t\t\tthis.viewModel = this.instantiationService.createInstance(SearchResult, query.contentPattern);\n\t\t\t\t\tthis.tree.setInput(this.viewModel).then(() => {\n\t\t\t\t\t\tautoExpand(false);\n\t\t\t\t\t\tthis.callOnModelChange.push(this.viewModel.addListener('changed', (e: any) => this.tree.refresh(e, true)));\n\t\t\t\t\t}).done(null, errors.onUnexpectedError);\n\t\t\t\t}\n\n\t\t\t\tthis.viewModel.append([p]);\n\t\t\t\tprogressTimer.stop();\n\t\t\t}\n\t\t};\n\n\t\t// Handle UI updates in an interval to show frequent progress and results\n\t\tlet uiRefreshHandle = setInterval(() => {\n\t\t\tif (isDone) {\n\t\t\t\twindow.clearInterval(uiRefreshHandle);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Progress bar update\n\t\t\tlet fakeProgress = true;\n\t\t\tif (total > 0 && worked > 0) {\n\t\t\t\tlet ratio = Math.round((worked / total) * 100);\n\t\t\t\tif (ratio > progressWorked) { // never show less progress than what we have already\n\t\t\t\t\tprogressRunner.worked(ratio - progressWorked);\n\t\t\t\t\tprogressWorked = ratio;\n\t\t\t\t\tfakeProgress = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Fake progress up to 90%\n\t\t\tif (fakeProgress && progressWorked < 90) {\n\t\t\t\tprogressWorked++;\n\t\t\t\tprogressRunner.worked(1);\n\t\t\t}\n\n\t\t\t// Search result tree update\n\t\t\tif (visibleMatches !== matches.length) {\n\t\t\t\tvisibleMatches = matches.length;\n\n\t\t\t\tthis.tree.refresh().then(() => {\n\t\t\t\t\tautoExpand(false);\n\t\t\t\t}).done(null, errors.onUnexpectedError);\n\n\t\t\t\t// since we have results now, enable some actions\n\t\t\t\tif (!this.actionRegistry['collapseAll'].enabled) {\n\t\t\t\t\tthis.actionRegistry['collapseAll'].enabled = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}, 200);\n\n\t\tthis.currentRequest = this.searchService.search(query);\n\t\tthis.currentRequest.then(onComplete, onError, onProgress);\n\t}\n\n\tprivate showEmptyStage(): void {\n\n\t\t// disable 'result'-actions\n\t\tthis.actionRegistry['refresh'].enabled = false;\n\t\tthis.actionRegistry['selectOrRemove'].enabled = false;\n\t\tthis.actionRegistry['collapseAll'].enabled = false;\n\t\tthis.actionRegistry['clearSearchResults'].enabled = false;\n\n\t\t// clean up ui\n\t\tthis.messages.hide();\n\t\tthis.tree.setInput(this.instantiationService.createInstance(SearchResult, null)).done(null, errors.onUnexpectedError);\n\t\tthis.results.show();\n\t\tthis.tree.onVisible();\n\t}\n\n\tprivate onFocus(lineMatch: Match, preserveFocus: boolean, sideBySide: boolean): TPromise<any> {\n\t\tif (!(lineMatch instanceof Match)) {\n\t\t\treturn TPromise.as(true);\n\t\t}\n\n\t\tthis.telemetryService.publicLog('searchResultChosen');\n\n\t\treturn this.editorService.openEditor({\n\t\t\tresource: lineMatch.parent().resource(),\n\t\t\toptions: {\n\t\t\t\tpreserveFocus: preserveFocus,\n\t\t\t\tselection: lineMatch instanceof EmptyMatch ? void 0 : lineMatch.range()\n\t\t\t}\n\t\t}, sideBySide);\n\t}\n\n\tprivate onUntitledFileDeleted(e: UntitledEditorEvent): void {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet matches = this.viewModel.matches();\n\t\tfor (let i = 0, len = matches.length; i < len; i++) {\n\t\t\tif (e.resource.toString() === matches[i].resource().toString()) {\n\t\t\t\tthis.viewModel.remove(matches[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onFilesChanged(e: FileChangesEvent): void {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet matches = this.viewModel.matches();\n\n\t\tfor (let i = 0, len = matches.length; i < len; i++) {\n\t\t\tif (e.contains(matches[i].resource(), FileChangeType.DELETED)) {\n\t\t\t\tthis.viewModel.remove(matches[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic getSelection(): ISelection {\n\t\treturn new StructuredSelection(this.tree.getSelection());\n\t}\n\n\tpublic getActions(): IAction[] {\n\t\treturn [\n\t\t\tthis.actionRegistry['refresh'],\n\t\t\tthis.actionRegistry['collapseAll'],\n\t\t\tthis.actionRegistry['clearSearchResults']\n\t\t];\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.isDisposed = true;\n\n\t\tif (this.tree) {\n\t\t\tthis.tree.dispose();\n\t\t}\n\n\t\tthis.disposeModel();\n\n\t\tsuper.dispose();\n\t}\n\n\n\tprivate disposeModel(): void {\n\t\tif (this.viewModel) {\n\t\t\tthis.viewModel.dispose();\n\t\t\tthis.viewModel = null;\n\t\t}\n\t\tlifecycle.cAll(this.callOnModelChange);\n\t}\n}\n"]}