{"version":3,"file":"vs/workbench/test/browser/part.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/workbench/test/browser/part.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport * as assert from 'assert';\nimport {Build, Builder} from 'vs/base/browser/builder';\nimport {Part} from 'vs/workbench/browser/part';\nimport * as Types from 'vs/base/common/types';\nimport * as TestUtils from 'vs/workbench/test/browser/servicesTestUtils';\nimport {BaseWorkspaceContextService} from 'vs/platform/workspace/common/baseWorkspaceContextService';\nimport {IWorkspaceContextService} from 'vs/platform/workspace/common/workspace';\nimport {IStorageService} from 'vs/platform/storage/common/storage';\nimport {Storage, InMemoryLocalStorage} from 'vs/workbench/common/storage';\n\nclass MyPart extends Part {\n\n\tconstructor(private expectedParent: Builder) {\n\t\tsuper('myPart');\n\t}\n\n\tpublic createTitleArea(parent: Builder): Builder {\n\t\tassert.strictEqual(parent, this.expectedParent);\n\t\treturn super.createTitleArea(parent);\n\t}\n\n\tpublic createContentArea(parent: Builder): Builder {\n\t\tassert.strictEqual(parent, this.expectedParent);\n\t\treturn super.createContentArea(parent);\n\t}\n\n\tpublic createStatusArea(parent: Builder): Builder {\n\t\tassert.strictEqual(parent, this.expectedParent);\n\t\treturn super.createStatusArea(parent);\n\t}\n}\n\nclass MyPart2 extends Part {\n\n\tconstructor() {\n\t\tsuper('myPart2');\n\t}\n\n\tpublic createTitleArea(parent: Builder): Builder {\n\t\treturn parent.div(function(div) {\n\t\t\tdiv.span({\n\t\t\t\tid: 'myPart.title',\n\t\t\t\tinnerHtml: 'Title'\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic createContentArea(parent: Builder): Builder {\n\t\treturn parent.div(function(div) {\n\t\t\tdiv.span({\n\t\t\t\tid: 'myPart.content',\n\t\t\t\tinnerHtml: 'Content'\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic createStatusArea(parent: Builder): Builder {\n\t\treturn parent.div(function(div) {\n\t\t\tdiv.span({\n\t\t\t\tid: 'myPart.status',\n\t\t\t\tinnerHtml: 'Status'\n\t\t\t});\n\t\t});\n\t}\n}\n\nclass MyPart3 extends Part {\n\n\tconstructor() {\n\t\tsuper('myPart2');\n\t}\n\n\tpublic createTitleArea(parent: Builder): Builder {\n\t\treturn null;\n\t}\n\n\tpublic createContentArea(parent: Builder): Builder {\n\t\treturn parent.div(function(div) {\n\t\t\tdiv.span({\n\t\t\t\tid: 'myPart.content',\n\t\t\t\tinnerHtml: 'Content'\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic createStatusArea(parent: Builder): Builder {\n\t\treturn null;\n\t}\n}\n\nsuite('Workbench Part', () => {\n\tlet fixture: HTMLElement;\n\tlet fixtureId = 'workbench-part-fixture';\n\tlet context: IWorkspaceContextService;\n\tlet storage: IStorageService;\n\n\tsetup(() => {\n\t\tfixture = document.createElement('div');\n\t\tfixture.id = fixtureId;\n\t\tdocument.body.appendChild(fixture);\n\t\tcontext = new BaseWorkspaceContextService(TestUtils.TestWorkspace, TestUtils.TestConfiguration, null);\n\t\tstorage = new Storage(context, new InMemoryLocalStorage());\n\t});\n\n\tteardown(() => {\n\t\tdocument.body.removeChild(fixture);\n\t});\n\n\ttest('Creation', function() {\n\t\tlet b = Build.withElementById(fixtureId);\n\t\tb.div().hide();\n\n\t\tlet part = new MyPart(b);\n\t\tpart.create(b);\n\n\t\tassert.strictEqual(part.getId(), 'myPart');\n\t\tassert.strictEqual(part.getContainer(), b);\n\n\t\t// Memento\n\t\tlet memento = part.getMemento(storage);\n\t\tassert(memento);\n\t\tmemento.foo = 'bar';\n\t\tmemento.bar = [1, 2, 3];\n\n\t\tpart.shutdown();\n\n\t\t// Re-Create to assert memento contents\n\t\tpart = new MyPart(b);\n\n\t\tmemento = part.getMemento(storage);\n\t\tassert(memento);\n\t\tassert.strictEqual(memento.foo, 'bar');\n\t\tassert.strictEqual(memento.bar.length, 3);\n\n\t\t// Empty Memento stores empty object\n\t\tdelete memento.foo;\n\t\tdelete memento.bar;\n\n\t\tpart.shutdown();\n\t\tpart = new MyPart(b);\n\t\tmemento = part.getMemento(storage);\n\t\tassert(memento);\n\t\tassert.strictEqual(Types.isEmptyObject(memento), true);\n\t});\n\n\ttest('Part Layout with Title, Content and Status', function() {\n\t\tlet b = Build.withElementById(fixtureId);\n\t\tb.div().hide();\n\n\t\tlet part = new MyPart2();\n\t\tpart.create(b);\n\n\t\tassert(Build.withElementById('myPart.title'));\n\t\tassert(Build.withElementById('myPart.content'));\n\t\tassert(Build.withElementById('myPart.status'));\n\t});\n\n\ttest('Part Layout with Content only', function() {\n\t\tlet b = Build.withElementById(fixtureId);\n\t\tb.div().hide();\n\n\t\tlet part = new MyPart3();\n\t\tpart.create(b);\n\n\t\tassert(!Build.withElementById('myPart.title'));\n\t\tassert(Build.withElementById('myPart.content'));\n\t\tassert(!Build.withElementById('myPart.status'));\n\t});\n});"]}