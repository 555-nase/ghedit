{"version":3,"file":"vs/workbench/test/browser/storage.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/workbench/test/browser/storage.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport * as assert from 'assert';\nimport {clone} from 'vs/base/common/objects';\nimport {StorageEventType, StorageScope} from 'vs/platform/storage/common/storage';\nimport {TestContextService, TestWorkspace} from 'vs/workbench/test/browser/servicesTestUtils';\nimport {Storage, InMemoryLocalStorage} from 'vs/workbench/common/storage';\n\nsuite('Workbench Storage', () => {\n\ttest('Store Data', () => {\n\t\tlet context = new TestContextService();\n\t\tlet s = new Storage(context, new InMemoryLocalStorage());\n\n\t\tlet counter = 0;\n\t\tlet unbind = s.addListener(StorageEventType.STORAGE, function (e) {\n\t\t\tassert.strictEqual(e.key, 'Monaco.IDE.Core.Storage.Test.store');\n\t\t\tassert.strictEqual(e.oldValue, null);\n\t\t\tassert.strictEqual(e.newValue, 'foobar');\n\n\t\t\tcounter++;\n\t\t\tassert(counter <= 1);\n\t\t});\n\n\t\ts.store('Monaco.IDE.Core.Storage.Test.store', 'foobar');\n\t\ts.store('Monaco.IDE.Core.Storage.Test.store', 'foobar');\n\t\tunbind();\n\n\t\tcounter = 0;\n\t\tunbind = s.addListener(StorageEventType.STORAGE, function (e) {\n\t\t\tassert.strictEqual(e.key, 'Monaco.IDE.Core.Storage.Test.store');\n\t\t\tassert.strictEqual(e.oldValue, 'foobar');\n\t\t\tassert.strictEqual(e.newValue, 'barfoo');\n\n\t\t\tcounter++;\n\t\t\tassert(counter <= 1);\n\t\t});\n\n\t\ts.store('Monaco.IDE.Core.Storage.Test.store', 'barfoo');\n\t\ts.store('Monaco.IDE.Core.Storage.Test.store', 'barfoo');\n\t\tunbind();\n\n\t\ts.dispose();\n\t});\n\n\ttest('Swap Data', () => {\n\t\tlet context = new TestContextService();\n\t\tlet s = new Storage(context, new InMemoryLocalStorage());\n\n\t\tlet counter = 0;\n\t\tlet unbind = s.addListener(StorageEventType.STORAGE, function (e) {\n\t\t\tassert.strictEqual(e.key, 'Monaco.IDE.Core.Storage.Test.swap');\n\t\t\tassert.strictEqual(e.oldValue, null);\n\t\t\tassert.strictEqual(e.newValue, 'foobar');\n\n\t\t\tcounter++;\n\t\t\tassert(counter <= 1);\n\t\t});\n\n\t\ts.swap('Monaco.IDE.Core.Storage.Test.swap', 'foobar', 'barfoo', StorageScope.GLOBAL, 'foobar');\n\t\tunbind();\n\n\t\tcounter = 0;\n\t\tunbind = s.addListener(StorageEventType.STORAGE, function (e) {\n\t\t\tassert.strictEqual(e.key, 'Monaco.IDE.Core.Storage.Test.swap');\n\t\t\tassert.strictEqual(e.oldValue, 'foobar');\n\t\t\tassert.strictEqual(e.newValue, 'barfoo');\n\n\t\t\tcounter++;\n\t\t\tassert(counter <= 1);\n\t\t});\n\n\t\ts.swap('Monaco.IDE.Core.Storage.Test.swap', 'foobar', 'barfoo', StorageScope.GLOBAL, 'foobar');\n\t\tunbind();\n\t});\n\n\ttest('Swap Data with undefined default value', () => {\n\t\tlet context = new TestContextService();\n\t\tlet s = new Storage(context, new InMemoryLocalStorage());\n\n\t\ts.swap('Monaco.IDE.Core.Storage.Test.swap', 'foobar', 'barfoo');\n\t\tassert.strictEqual('foobar', s.get('Monaco.IDE.Core.Storage.Test.swap'));\n\t\ts.swap('Monaco.IDE.Core.Storage.Test.swap', 'foobar', 'barfoo');\n\t\tassert.strictEqual('barfoo', s.get('Monaco.IDE.Core.Storage.Test.swap'));\n\t\ts.swap('Monaco.IDE.Core.Storage.Test.swap', 'foobar', 'barfoo');\n\t\tassert.strictEqual('foobar', s.get('Monaco.IDE.Core.Storage.Test.swap'));\n\t});\n\n\ttest('Remove Data', () => {\n\t\tlet context = new TestContextService();\n\t\tlet s = new Storage(context, new InMemoryLocalStorage());\n\n\t\tlet counter = 0;\n\t\tlet unbind = s.addListener(StorageEventType.STORAGE, function (e) {\n\t\t\tassert.strictEqual(e.key, 'Monaco.IDE.Core.Storage.Test.remove');\n\t\t\tassert.strictEqual(e.oldValue, null);\n\t\t\tassert.strictEqual(e.newValue, 'foobar');\n\n\t\t\tcounter++;\n\t\t\tassert(counter <= 1);\n\t\t});\n\n\t\ts.store('Monaco.IDE.Core.Storage.Test.remove', 'foobar');\n\t\tunbind();\n\n\t\tcounter = 0;\n\t\tunbind = s.addListener(StorageEventType.STORAGE, function (e) {\n\t\t\tassert.strictEqual(e.key, 'Monaco.IDE.Core.Storage.Test.remove');\n\t\t\tassert.strictEqual(e.oldValue, 'foobar');\n\t\t\tassert.strictEqual(e.newValue, null);\n\n\t\t\tcounter++;\n\t\t\tassert(counter <= 1);\n\t\t});\n\n\t\ts.remove('Monaco.IDE.Core.Storage.Test.remove');\n\t\tunbind();\n\t});\n\n\ttest('Get Data, Integer, Boolean', () => {\n\t\tlet context = new TestContextService();\n\t\tlet s = new Storage(context, new InMemoryLocalStorage());\n\n\t\tassert.strictEqual(s.get('Monaco.IDE.Core.Storage.Test.get', StorageScope.GLOBAL, 'foobar'), 'foobar');\n\t\tassert.strictEqual(s.get('Monaco.IDE.Core.Storage.Test.get', StorageScope.GLOBAL, ''), '');\n\t\tassert.strictEqual(s.get('Monaco.IDE.Core.Storage.Test.getInteger', StorageScope.GLOBAL, 5), 5);\n\t\tassert.strictEqual(s.get('Monaco.IDE.Core.Storage.Test.getInteger', StorageScope.GLOBAL, 0), 0);\n\t\tassert.strictEqual(s.get('Monaco.IDE.Core.Storage.Test.getBoolean', StorageScope.GLOBAL, true), true);\n\t\tassert.strictEqual(s.get('Monaco.IDE.Core.Storage.Test.getBoolean', StorageScope.GLOBAL, false), false);\n\n\t\ts.store('Monaco.IDE.Core.Storage.Test.get', 'foobar');\n\t\tassert.strictEqual(s.get('Monaco.IDE.Core.Storage.Test.get'), 'foobar');\n\n\t\ts.store('Monaco.IDE.Core.Storage.Test.get', '');\n\t\tassert.strictEqual(s.get('Monaco.IDE.Core.Storage.Test.get'), '');\n\n\t\ts.store('Monaco.IDE.Core.Storage.Test.getInteger', 5);\n\t\tassert.strictEqual(s.getInteger('Monaco.IDE.Core.Storage.Test.getInteger'), 5);\n\n\t\ts.store('Monaco.IDE.Core.Storage.Test.getInteger', 0);\n\t\tassert.strictEqual(s.getInteger('Monaco.IDE.Core.Storage.Test.getInteger'), 0);\n\n\t\ts.store('Monaco.IDE.Core.Storage.Test.getBoolean', true);\n\t\tassert.strictEqual(s.getBoolean('Monaco.IDE.Core.Storage.Test.getBoolean'), true);\n\n\t\ts.store('Monaco.IDE.Core.Storage.Test.getBoolean', false);\n\t\tassert.strictEqual(s.getBoolean('Monaco.IDE.Core.Storage.Test.getBoolean'), false);\n\n\t\tassert.strictEqual(s.get('Monaco.IDE.Core.Storage.Test.getDefault', StorageScope.GLOBAL, 'getDefault'), 'getDefault');\n\t\tassert.strictEqual(s.getInteger('Monaco.IDE.Core.Storage.Test.getIntegerDefault', StorageScope.GLOBAL, 5), 5);\n\t\tassert.strictEqual(s.getBoolean('Monaco.IDE.Core.Storage.Test.getBooleanDefault', StorageScope.GLOBAL, true), true);\n\t});\n\n\ttest('Storage cleans up when workspace changes', () => {\n\t\tlet storageImpl = new InMemoryLocalStorage();\n\t\tlet context = new TestContextService();\n\t\tlet s = new Storage(context, storageImpl);\n\n\t\ts.store('key1', 'foobar');\n\t\ts.store('key2', 'something');\n\t\ts.store('wkey1', 'foo', StorageScope.WORKSPACE);\n\t\ts.store('wkey2', 'foo2', StorageScope.WORKSPACE);\n\n\t\ts = new Storage(context, storageImpl);\n\n\t\tassert.strictEqual(s.get('key1', StorageScope.GLOBAL), 'foobar');\n\t\tassert.strictEqual(s.get('key1', StorageScope.WORKSPACE, null), null);\n\n\t\tassert.strictEqual(s.get('key2', StorageScope.GLOBAL), 'something');\n\t\tassert.strictEqual(s.get('wkey1', StorageScope.WORKSPACE), 'foo');\n\t\tassert.strictEqual(s.get('wkey2', StorageScope.WORKSPACE), 'foo2');\n\n\t\tlet ws: any = clone(TestWorkspace);\n\t\tws.uid = new Date().getTime() + 100;\n\t\tcontext = new TestContextService(ws);\n\t\ts = new Storage(context, storageImpl);\n\n\t\tassert.strictEqual(s.get('key1', StorageScope.GLOBAL), 'foobar');\n\t\tassert.strictEqual(s.get('key1', StorageScope.WORKSPACE, null), null);\n\n\t\tassert.strictEqual(s.get('key2', StorageScope.GLOBAL), 'something');\n\t\tassert(!s.get('wkey1', StorageScope.WORKSPACE));\n\t\tassert(!s.get('wkey2', StorageScope.WORKSPACE));\n\t});\n});"]}