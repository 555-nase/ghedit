{"version":3,"file":"vs/base/browser/builder.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/base/browser/builder.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport 'vs/css!./builder';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport types = require('vs/base/common/types');\nimport {IDisposable, dispose} from 'vs/base/common/lifecycle';\nimport strings = require('vs/base/common/strings');\nimport assert = require('vs/base/common/assert');\nimport DOM = require('vs/base/browser/dom');\nimport BrowserService = require('vs/base/browser/browserService');\n\n/**\n * Welcome to the monaco builder. The recommended way to use it is:\n *\n * import Builder = require('vs/base/browser/builder');\n * let $ = Builder.$;\n * $(....).fn(...);\n *\n * See below for examples how to invoke the $():\n *\n * \t$()\t\t\t\t\t\t\t- creates an offdom builder\n * \t$(builder)\t\t\t\t\t- wraps the given builder\n * \t$(builder[])\t\t\t\t- wraps the given builders into a multibuilder\n * \t$('div')\t\t\t\t\t- creates a div\n * \t$('.big')\t\t\t\t\t- creates a div with class `big`\n * \t$('#head')\t\t\t\t\t- creates a div with id `head`\n * \t$('ul#head')\t\t\t\t- creates an unordered list with id `head`\n * \t$('<a href=\"back\"></a>')\t- constructs a builder from the given HTML\n * \t$('a', { href: 'back'})\t\t- constructs a builder, similarly to the Builder#element() call\n */\nexport interface QuickBuilder {\n\t(): Builder;\n\t(builders: Builder[]): Builder;\n\t(element: HTMLElement): Builder;\n\t(window: Window): Builder;\n\t(htmlOrQuerySyntax: string): Builder; // Or, MultiBuilder\n\t(name: string, args?: any, fn?: (builder: Builder) => any): Builder;\n\t(one: string, two: string, three: string): Builder;\n\t(builder: Builder): Builder;\n}\n\n/**\n * Create a new builder from the element that is uniquely identified by the given identifier. If the\n *  second parameter \"offdom\" is set to true, the created elements will only be added to the provided\n *  element when the build() method is called.\n */\nexport function withElementById(id: string, offdom?: boolean): Builder {\n\tassert.ok(types.isString(id), 'Expected String as parameter');\n\n\tlet element = BrowserService.getService().document.getElementById(id);\n\tif (element) {\n\t\treturn new Builder(element, offdom);\n\t}\n\n\treturn null;\n}\n\nexport let Build = {\n\twithElementById: withElementById\n};\n\n// --- Implementation starts here\n\nlet MS_DATA_KEY = '_msDataKey';\nlet DATA_BINDING_ID = '__$binding';\nlet LISTENER_BINDING_ID = '__$listeners';\nlet VISIBILITY_BINDING_ID = '__$visibility';\n\nexport class Position {\n\tpublic x: number;\n\tpublic y: number;\n\n\tconstructor(x: number, y: number) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n}\n\nexport class Box {\n\tpublic top: number;\n\tpublic right: number;\n\tpublic bottom: number;\n\tpublic left: number;\n\n\tconstructor(top: number, right: number, bottom: number, left: number) {\n\t\tthis.top = top;\n\t\tthis.right = right;\n\t\tthis.bottom = bottom;\n\t\tthis.left = left;\n\t}\n}\n\nexport class Dimension {\n\tpublic width: number;\n\tpublic height: number;\n\n\tconstructor(width: number, height: number) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n\n\tpublic substract(box: Box): Dimension {\n\t\treturn new Dimension(this.width - box.left - box.right, this.height - box.top - box.bottom);\n\t}\n}\n\nexport interface IRange {\n\tstart: number;\n\tend: number;\n}\n\nfunction data(element: any): any {\n\tif (!element[MS_DATA_KEY]) {\n\t\telement[MS_DATA_KEY] = {};\n\t}\n\n\treturn element[MS_DATA_KEY];\n}\n\nfunction hasData(element: any): boolean {\n\treturn !!element[MS_DATA_KEY];\n}\n\n/**\n *  Wraps around the provided element to manipulate it and add more child elements.\n */\nexport class Builder implements IDisposable {\n\tprivate currentElement: HTMLElement;\n\tprivate offdom: boolean;\n\tprivate container: HTMLElement;\n\tprivate createdElements: HTMLElement[];\n\tprivate toUnbind: { [type: string]: IDisposable[]; };\n\tprivate captureToUnbind: { [type: string]: IDisposable[]; };\n\tprivate browserService: BrowserService.IBrowserService;\n\n\tconstructor(element?: HTMLElement, offdom?: boolean) {\n\t\tthis.offdom = offdom;\n\n\t\tthis.container = element;\n\n\t\tthis.currentElement = element;\n\t\tthis.createdElements = [];\n\n\t\tthis.toUnbind = {};\n\t\tthis.captureToUnbind = {};\n\t\tthis.browserService = BrowserService.getService();\n\t}\n\n\t/**\n\t *  Returns a new builder that lets the current HTML Element of this builder be the container\n\t *  for future additions on the builder.\n\t */\n\tpublic asContainer(): Builder {\n\t\treturn withBuilder(this, this.offdom);\n\t}\n\n\t/**\n\t *  Clones the builder providing the same properties as this one.\n\t */\n\tpublic clone(): Builder {\n\t\tlet builder = new Builder(this.container, this.offdom);\n\t\tbuilder.currentElement = this.currentElement;\n\t\tbuilder.createdElements = this.createdElements;\n\t\tbuilder.captureToUnbind = this.captureToUnbind;\n\t\tbuilder.toUnbind = this.toUnbind;\n\n\t\treturn builder;\n\t}\n\n\t/**\n\t *  Creates a new Builder that performs all operations on the current element of the builder and\n\t *  the builder or element being passed in.\n\t */\n\tpublic and(element: HTMLElement): MultiBuilder;\n\tpublic and(builder: Builder): MultiBuilder;\n\tpublic and(obj: any): MultiBuilder {\n\n\t\t// Convert HTMLElement to Builder as necessary\n\t\tif (!(obj instanceof Builder) && !(obj instanceof MultiBuilder)) {\n\t\t\tobj = new Builder((<HTMLElement>obj), this.offdom);\n\t\t}\n\n\t\t// Wrap Builders into MultiBuilder\n\t\tlet builders:Builder[] = [this];\n\t\tif (obj instanceof MultiBuilder) {\n\t\t\tfor (let i = 0; i < (<MultiBuilder>obj).length; i++) {\n\t\t\t\tbuilders.push((<MultiBuilder>obj).item(i));\n\t\t\t}\n\t\t} else {\n\t\t\tbuilders.push(obj);\n\t\t}\n\n\t\treturn new MultiBuilder(builders);\n\t}\n\n\t/**\n\t *  Inserts all created elements of this builder as children to the given container. If the\n\t *  container is not provided, the element that was passed into the Builder at construction\n\t *  time is being used. The caller can provide the index of insertion, or omit it to append\n\t *  at the end.\n\t *  This method is a no-op unless the builder was created with the offdom option to be true.\n\t */\n\tpublic build(container?: Builder, index?: number): Builder;\n\tpublic build(container?: HTMLElement, index?: number): Builder;\n\tpublic build(container?: any, index?: number): Builder {\n\t\tassert.ok(this.offdom, 'This builder was not created off-dom, so build() can not be called.');\n\n\t\t// Use builders own container if present\n\t\tif (!container) {\n\t\t\tcontainer = this.container;\n\t\t}\n\n\t\t// Handle case of passed in Builder\n\t\telse if (container instanceof Builder) {\n\t\t\tcontainer = (<Builder>container).getHTMLElement();\n\t\t}\n\n\t\tassert.ok(container, 'Builder can only be build() with a container provided.');\n\t\tassert.ok(DOM.isHTMLElement(container), 'The container must either be a HTMLElement or a Builder.');\n\n\t\tlet htmlContainer = <HTMLElement>container;\n\n\t\t// Append\n\t\tlet i: number, len: number;\n\t\tlet childNodes = htmlContainer.childNodes;\n\t\tif (types.isNumber(index) && index < childNodes.length) {\n\t\t\tfor (i = 0, len = this.createdElements.length; i < len; i++) {\n\t\t\t\thtmlContainer.insertBefore(this.createdElements[i], childNodes[index++]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0, len = this.createdElements.length; i < len; i++) {\n\t\t\t\thtmlContainer.appendChild(this.createdElements[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Similar to #build, but does not require that the builder is off DOM, and instead\n\t *  attached the current element. If the current element has a parent, it will be\n\t *  detached from that parent.\n\t */\n\tpublic appendTo(container?: Builder, index?: number): Builder;\n\tpublic appendTo(container?: HTMLElement, index?: number): Builder;\n\tpublic appendTo(container?: any, index?: number): Builder {\n\n\t\t// Use builders own container if present\n\t\tif (!container) {\n\t\t\tcontainer = this.container;\n\t\t}\n\n\t\t// Handle case of passed in Builder\n\t\telse if (container instanceof Builder) {\n\t\t\tcontainer = (<Builder>container).getHTMLElement();\n\t\t}\n\n\t\tassert.ok(container, 'Builder can only be build() with a container provided.');\n\t\tassert.ok(DOM.isHTMLElement(container), 'The container must either be a HTMLElement or a Builder.');\n\n\t\tlet htmlContainer = <HTMLElement>container;\n\n\t\t// Remove node from parent, if needed\n\t\tif (this.currentElement.parentNode) {\n\t\t\tthis.currentElement.parentNode.removeChild(this.currentElement);\n\t\t}\n\n\t\tlet childNodes = htmlContainer.childNodes;\n\t\tif (types.isNumber(index) && index < childNodes.length) {\n\t\t\thtmlContainer.insertBefore(this.currentElement, childNodes[index]);\n\t\t} else {\n\t\t\thtmlContainer.appendChild(this.currentElement);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Performs the exact reverse operation of #append.\n\t *  Doing `a.append(b)` is the same as doing `b.appendTo(a)`, with the difference\n\t *  of the return value being the builder which called the operation (`a` in the\n\t *  first case; `b` in the second case).\n\t */\n\tpublic append(child: HTMLElement, index?: number): Builder;\n\tpublic append(child: Builder, index?: number): Builder;\n\tpublic append(child: any, index?: number): Builder {\n\t\tassert.ok(child, 'Need a child to append');\n\n\t\tif (DOM.isHTMLElement(child)) {\n\t\t\tchild = withElement(child);\n\t\t}\n\n\t\tassert.ok(child instanceof Builder || child instanceof MultiBuilder, 'Need a child to append');\n\n\t\t(<Builder>child).appendTo(this, index);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Removes the current element of this builder from its parent node.\n\t */\n\tpublic offDOM(): Builder {\n\t\tif (this.currentElement.parentNode) {\n\t\t\tthis.currentElement.parentNode.removeChild(this.currentElement);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Returns the HTML Element the builder is currently active on.\n\t */\n\tpublic getHTMLElement(): HTMLElement {\n\t\treturn this.currentElement;\n\t}\n\n\t/**\n\t *  Returns the HTML Element the builder is building in.\n\t */\n\tpublic getContainer(): HTMLElement {\n\t\treturn this.container;\n\t}\n\n\t// HTML Elements\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic div(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('div', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic p(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('p', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic ul(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('ul', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic ol(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('ol', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic li(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('li', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic span(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('span', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic img(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('img', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic a(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('a', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic header(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('header', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic section(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('section', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of this kind as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic footer(attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement('footer', attributes, fn);\n\t}\n\n\t/**\n\t *  Creates a new element of given tag name as child of the current element or parent.\n\t *  Accepts an object literal as first parameter that can be used to describe the\n\t *  attributes of the element.\n\t *  Accepts a function as second parameter that can be used to create child elements\n\t *  of the element. The function will be called with a new builder created with the\n\t *  provided element.\n\t */\n\tpublic element(name: string, attributes?: any, fn?: (builder: Builder) => void): Builder {\n\t\treturn this.doElement(name, attributes, fn);\n\t}\n\n\tprivate doElement(name: string, attributesOrFn?: any, fn?: (builder: Builder) => void): Builder {\n\n\t\t// Create Element\n\t\tlet element = this.browserService.document.createElement(name);\n\t\tthis.currentElement = element;\n\n\t\t// Off-DOM: Remember in array of created elements\n\t\tif (this.offdom) {\n\t\t\tthis.createdElements.push(element);\n\t\t}\n\n\t\t// Object (apply properties as attributes to HTML element)\n\t\tif (types.isObject(attributesOrFn)) {\n\t\t\tthis.attr(attributesOrFn);\n\t\t}\n\n\t\t// Support second argument being function\n\t\tif (types.isFunction(attributesOrFn)) {\n\t\t\tfn = attributesOrFn;\n\t\t}\n\n\t\t// Apply Functions (Elements created in Functions will be added as child to current element)\n\t\tif (types.isFunction(fn)) {\n\t\t\tlet builder = new Builder(element);\n\t\t\tfn.call(builder, builder); // Set both 'this' and the first parameter to the new builder\n\t\t}\n\n\t\t// Add to parent\n\t\tif (!this.offdom) {\n\t\t\tthis.container.appendChild(element);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Calls focus() on the current HTML element;\n\t */\n\tpublic domFocus(): Builder {\n\t\tthis.currentElement.focus();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Returns true if the current element of this builder is the active element.\n\t */\n\tpublic hasFocus(): boolean {\n\t\tlet activeElement: Element = this.browserService.document.activeElement;\n\n\t\treturn (activeElement === this.currentElement);\n\t}\n\n\t/**\n\t *  Calls select() on the current HTML element;\n\t */\n\tpublic domSelect(range: IRange = null): Builder {\n\t\tlet input = <HTMLInputElement>this.currentElement;\n\n\t\tinput.select();\n\n\t\tif (range) {\n\t\t\tinput.setSelectionRange(range.start, range.end);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Calls blur() on the current HTML element;\n\t */\n\tpublic domBlur(): Builder {\n\t\tthis.currentElement.blur();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Calls click() on the current HTML element;\n\t */\n\tpublic domClick(): Builder {\n\t\tthis.currentElement.click();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Registers listener on event types on the current element.\n\t */\n\tpublic on(type: string, fn: (e: Event, builder: Builder, unbind: IDisposable) => void, listenerToUnbindContainer?: IDisposable[], useCapture?: boolean): Builder;\n\tpublic on(typeArray: string[], fn: (e: Event, builder: Builder, unbind: IDisposable) => void, listenerToUnbindContainer?: IDisposable[], useCapture?: boolean): Builder;\n\tpublic on(arg1: any, fn: (e: Event, builder: Builder, unbind: IDisposable) => void, listenerToUnbindContainer?: IDisposable[], useCapture?: boolean): Builder {\n\n\t\t// Event Type Array\n\t\tif (types.isArray(arg1)) {\n\t\t\targ1.forEach((type: string) => {\n\t\t\t\tthis.on(type, fn, listenerToUnbindContainer, useCapture);\n\t\t\t});\n\t\t}\n\n\t\t// Single Event Type\n\t\telse {\n\t\t\tlet type = arg1;\n\n\t\t\t// Add Listener\n\t\t\tlet unbind: IDisposable = DOM.addDisposableListener(this.currentElement, type, (e: Event) => {\n\t\t\t\tfn(e, this, unbind); // Pass in Builder as Second Argument\n\t\t\t}, useCapture || false);\n\n\t\t\t// Remember for off() use\n\t\t\tif (useCapture) {\n\t\t\t\tif (!this.captureToUnbind[type]) {\n\t\t\t\t\tthis.captureToUnbind[type] = [];\n\t\t\t\t}\n\t\t\t\tthis.captureToUnbind[type].push(unbind);\n\t\t\t} else {\n\t\t\t\tif (!this.toUnbind[type]) {\n\t\t\t\t\tthis.toUnbind[type] = [];\n\t\t\t\t}\n\t\t\t\tthis.toUnbind[type].push(unbind);\n\t\t\t}\n\n\t\t\t// Bind to Element\n\t\t\tlet listenerBinding: IDisposable[] = this.getProperty(LISTENER_BINDING_ID, []);\n\t\t\tlistenerBinding.push(unbind);\n\t\t\tthis.setProperty(LISTENER_BINDING_ID, listenerBinding);\n\n\t\t\t// Add to Array if passed in\n\t\t\tif (listenerToUnbindContainer && types.isArray(listenerToUnbindContainer)) {\n\t\t\t\tlistenerToUnbindContainer.push(unbind);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Removes all listeners from all elements created by the builder for the given event type.\n\t */\n\tpublic off(type: string, useCapture?: boolean): Builder;\n\tpublic off(typeArray: string[], useCapture?: boolean): Builder;\n\tpublic off(arg1: any, useCapture?: boolean): Builder {\n\n\t\t// Event Type Array\n\t\tif (types.isArray(arg1)) {\n\t\t\targ1.forEach((type: string) => {\n\t\t\t\tthis.off(type);\n\t\t\t});\n\t\t}\n\n\t\t// Single Event Type\n\t\telse {\n\t\t\tlet type = arg1;\n\t\t\tif (useCapture) {\n\t\t\t\tif (this.captureToUnbind[type]) {\n\t\t\t\t\tthis.captureToUnbind[type] = dispose(this.captureToUnbind[type]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.toUnbind[type]) {\n\t\t\t\t\tthis.toUnbind[type] = dispose(this.toUnbind[type]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Registers listener on event types on the current element and removes\n\t *  them after first invocation.\n\t */\n\tpublic once(type: string, fn: (e: Event, builder: Builder, unbind: IDisposable) => void, listenerToUnbindContainer?: IDisposable[], useCapture?: boolean): Builder;\n\tpublic once(typesArray: string[], fn: (e: Event, builder: Builder, unbind: IDisposable) => void, listenerToUnbindContainer?: IDisposable[], useCapture?: boolean): Builder;\n\tpublic once(arg1: any, fn: (e: Event, builder: Builder, unbind: IDisposable) => void, listenerToUnbindContainer?: IDisposable[], useCapture?: boolean): Builder {\n\n\t\t// Event Type Array\n\t\tif (types.isArray(arg1)) {\n\t\t\targ1.forEach((type: string) => {\n\t\t\t\tthis.once(type, fn);\n\t\t\t});\n\t\t}\n\n\t\t// Single Event Type\n\t\telse {\n\t\t\tlet type = arg1;\n\n\t\t\t// Add Listener\n\t\t\tlet unbind: IDisposable = DOM.addDisposableListener(this.currentElement, type, (e: Event) => {\n\t\t\t\tfn(e, this, unbind); // Pass in Builder as Second Argument\n\t\t\t\tunbind.dispose();\n\t\t\t}, useCapture || false);\n\n\t\t\t// Add to Array if passed in\n\t\t\tif (listenerToUnbindContainer && types.isArray(listenerToUnbindContainer)) {\n\t\t\t\tlistenerToUnbindContainer.push(unbind);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Registers listener on event types on the current element and causes\n\t *  the event to prevent default execution (e.preventDefault()). If the\n\t *  parameter \"cancelBubble\" is set to true, it will also prevent bubbling\n\t *  of the event.\n\t */\n\tpublic preventDefault(type: string, cancelBubble: boolean, listenerToUnbindContainer?: IDisposable[], useCapture?: boolean): Builder;\n\tpublic preventDefault(typesArray: string[], cancelBubble: boolean, listenerToUnbindContainer?: IDisposable[], useCapture?: boolean): Builder;\n\tpublic preventDefault(arg1: any, cancelBubble: boolean, listenerToUnbindContainer?: IDisposable[], useCapture?: boolean): Builder {\n\t\tlet fn = function(e: Event) {\n\t\t\te.preventDefault();\n\n\t\t\tif (cancelBubble) {\n\t\t\t\tif (e.stopPropagation) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t} else {\n\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn this.on(arg1, fn, listenerToUnbindContainer);\n\t}\n\n\t/**\n\t * \tThis method has different characteristics based on the parameter provided:\n\t *  a) a single string passed in as argument will return the attribute value using the\n\t *  string as key from the current element of the builder.\n\t *  b) two strings passed in will set the value of an attribute identified by the first\n\t *  parameter to match the second parameter\n\t *  c) an object literal passed in will apply the properties of the literal as attributes\n\t *  to the current element of the builder.\n\t */\n\tpublic attr(name: string): string;\n\tpublic attr(name: string, value: string): Builder;\n\tpublic attr(name: string, value: boolean): Builder;\n\tpublic attr(name: string, value: number): Builder;\n\tpublic attr(attributes: any): Builder;\n\tpublic attr(firstP: any, secondP?: any): any {\n\n\t\t// Apply Object Literal to Attributes of Element\n\t\tif (types.isObject(firstP)) {\n\t\t\tfor (let prop in firstP) {\n\t\t\t\tif (firstP.hasOwnProperty(prop)) {\n\t\t\t\t\tlet value = firstP[prop];\n\t\t\t\t\tthis.doSetAttr(prop, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\t// Get Attribute Value\n\t\tif (types.isString(firstP) && !types.isString(secondP)) {\n\t\t\treturn this.currentElement.getAttribute(firstP);\n\t\t}\n\n\t\t// Set Attribute Value\n\t\tif (types.isString(firstP)) {\n\t\t\tif (!types.isString(secondP)) {\n\t\t\t\tsecondP = String(secondP);\n\t\t\t}\n\t\t\tthis.doSetAttr(firstP, secondP);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tprivate doSetAttr(prop: string, value: any): void {\n\t\tif (prop === 'class') {\n\t\t\tprop = 'addClass'; // Workaround for the issue that a function name can not be 'class' in ES\n\t\t}\n\n\t\tif ((<any>this)[prop]) {\n\t\t\tif (types.isArray(value)) {\n\t\t\t\t(<any>this)[prop].apply(this, value);\n\t\t\t} else {\n\t\t\t\t(<any>this)[prop].call(this, value);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.currentElement.setAttribute(prop, value);\n\t\t}\n\t}\n\n\t/**\n\t * Removes an attribute by the given name.\n\t */\n\tpublic removeAttribute(prop: string): void {\n\t\tthis.currentElement.removeAttribute(prop);\n\t}\n\n\t/**\n\t *  Sets the id attribute to the value provided for the current HTML element of the builder.\n\t */\n\tpublic id(id: string): Builder {\n\t\tthis.currentElement.setAttribute('id', id);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the src attribute to the value provided for the current HTML element of the builder.\n\t */\n\tpublic src(src: string): Builder {\n\t\tthis.currentElement.setAttribute('src', src);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the href attribute to the value provided for the current HTML element of the builder.\n\t */\n\tpublic href(href: string): Builder {\n\t\tthis.currentElement.setAttribute('href', href);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the title attribute to the value provided for the current HTML element of the builder.\n\t */\n\tpublic title(title: string): Builder {\n\t\tthis.currentElement.setAttribute('title', title);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the name attribute to the value provided for the current HTML element of the builder.\n\t */\n\tpublic name(name: string): Builder {\n\t\tthis.currentElement.setAttribute('name', name);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the type attribute to the value provided for the current HTML element of the builder.\n\t */\n\tpublic type(type: string): Builder {\n\t\tthis.currentElement.setAttribute('type', type);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the value attribute to the value provided for the current HTML element of the builder.\n\t */\n\tpublic value(value: string): Builder {\n\t\tthis.currentElement.setAttribute('value', value);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the alt attribute to the value provided for the current HTML element of the builder.\n\t */\n\tpublic alt(alt: string): Builder {\n\t\tthis.currentElement.setAttribute('alt', alt);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the name draggable to the value provided for the current HTML element of the builder.\n\t */\n\tpublic draggable(isDraggable: boolean): Builder {\n\t\tthis.currentElement.setAttribute('draggable', isDraggable ? 'true' : 'false');\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the tabindex attribute to the value provided for the current HTML element of the builder.\n\t */\n\tpublic tabindex(index: number): Builder {\n\t\tthis.currentElement.setAttribute('tabindex', index.toString());\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * \tThis method has different characteristics based on the parameter provided:\n\t *  a) a single string passed in as argument will return the style value using the\n\t *  string as key from the current element of the builder.\n\t *  b) two strings passed in will set the style value identified by the first\n\t *  parameter to match the second parameter.\n\t *  c) an object literal passed in will apply the properties of the literal as styles\n\t *  to the current element of the builder.\n\t */\n\tpublic style(name: string): string;\n\tpublic style(name: string, value: string): Builder;\n\tpublic style(attributes: any): Builder;\n\tpublic style(firstP: any, secondP?: any): any {\n\n\t\t// Apply Object Literal to Styles of Element\n\t\tif (types.isObject(firstP)) {\n\t\t\tfor (let prop in firstP) {\n\t\t\t\tif (firstP.hasOwnProperty(prop)) {\n\t\t\t\t\tlet value = firstP[prop];\n\t\t\t\t\tthis.doSetStyle(prop, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get Style Value\n\t\telse if (types.isString(firstP) && !types.isString(secondP)) {\n\t\t\treturn this.currentElement.style[this.cssKeyToJavaScriptProperty(firstP)];\n\t\t}\n\n\t\t// Set Style Value\n\t\telse if (types.isString(firstP) && types.isString(secondP)) {\n\t\t\tthis.doSetStyle(firstP, secondP);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tprivate doSetStyle(key: string, value: string): void {\n\t\tif (key.indexOf('-') >= 0) {\n\t\t\tlet segments = key.split('-');\n\t\t\tkey = segments[0];\n\t\t\tfor (let i = 1; i < segments.length; i++) {\n\t\t\t\tlet segment = segments[i];\n\t\t\t\tkey = key + segment.charAt(0).toUpperCase() + segment.substr(1);\n\t\t\t}\n\t\t}\n\n\t\tthis.currentElement.style[this.cssKeyToJavaScriptProperty(key)] = value;\n\t}\n\n\tprivate cssKeyToJavaScriptProperty(key: string): string {\n\t\t// Automagically convert dashes as they are not allowed when programmatically\n\t\t// setting a CSS style property\n\n\t\tif (key.indexOf('-') >= 0) {\n\t\t\tlet segments = key.split('-');\n\t\t\tkey = segments[0];\n\t\t\tfor (let i = 1; i < segments.length; i++) {\n\t\t\t\tlet segment = segments[i];\n\t\t\t\tkey = key + segment.charAt(0).toUpperCase() + segment.substr(1);\n\t\t\t}\n\t\t}\n\n\t\t// Float is special too\n\t\telse if (key === 'float') {\n\t\t\tkey = 'cssFloat';\n\t\t}\n\n\t\treturn key;\n\t}\n\n\t/**\n\t *  Returns the computed CSS style for the current HTML element of the builder.\n\t */\n\tpublic getComputedStyle(): CSSStyleDeclaration {\n\t\treturn DOM.getComputedStyle(this.currentElement);\n\t}\n\n\t/**\n\t *  Adds the variable list of arguments as class names to the current HTML element of the builder.\n\t */\n\tpublic addClass(...classes: string[]): Builder {\n\t\tclasses.forEach((nameValue: string) => {\n\t\t\tlet names = nameValue.split(' ');\n\t\t\tnames.forEach((name: string) => {\n\t\t\t\tDOM.addClass(this.currentElement, name);\n\t\t\t});\n\t\t});\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the class name of the current HTML element of the builder to the provided className.\n\t *  If shouldAddClass is provided - for true class is added, for false class is removed.\n\t */\n\tpublic setClass(className: string, shouldAddClass: boolean = null): Builder {\n\t\tif (shouldAddClass === null) {\n\t\t\tthis.currentElement.className = className;\n\t\t} else if (shouldAddClass) {\n\t\t\tthis.addClass(className);\n\t\t} else {\n\t\t\tthis.removeClass(className);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Returns whether the current HTML element of the builder has the provided class assigned.\n\t */\n\tpublic hasClass(className: string): boolean {\n\t\treturn DOM.hasClass(this.currentElement, className);\n\t}\n\n\t/**\n\t *  Removes the variable list of arguments as class names from the current HTML element of the builder.\n\t */\n\tpublic removeClass(...classes: string[]): Builder {\n\t\tclasses.forEach((nameValue: string) => {\n\t\t\tlet names = nameValue.split(' ');\n\t\t\tnames.forEach((name: string) => {\n\t\t\t\tDOM.removeClass(this.currentElement, name);\n\t\t\t});\n\t\t});\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the first class to the current HTML element of the builder if the second class is currently set\n\t *  and vice versa otherwise.\n\t */\n\tpublic swapClass(classA: string, classB: string): Builder {\n\t\tif (this.hasClass(classA)) {\n\t\t\tthis.removeClass(classA);\n\t\t\tthis.addClass(classB);\n\t\t} else {\n\t\t\tthis.removeClass(classB);\n\t\t\tthis.addClass(classA);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Adds or removes the provided className for the current HTML element of the builder.\n\t */\n\tpublic toggleClass(className: string): Builder {\n\t\tif (this.hasClass(className)) {\n\t\t\tthis.removeClass(className);\n\t\t} else {\n\t\t\tthis.addClass(className);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property color.\n\t */\n\tpublic color(color: string): Builder {\n\t\tthis.currentElement.style.color = color;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property background.\n\t */\n\tpublic background(color: string): Builder {\n\t\tthis.currentElement.style.backgroundColor = color;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property padding.\n\t */\n\tpublic padding(padding: string): Builder;\n\tpublic padding(top: number, right?: number, bottom?: number, left?: number): Builder;\n\tpublic padding(top: string, right?: string, bottom?: string, left?: string): Builder;\n\tpublic padding(top: any, right?: any, bottom?: any, left?: any): Builder {\n\t\tif (types.isString(top) && top.indexOf(' ') >= 0) {\n\t\t\treturn this.padding.apply(this, top.split(' '));\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(top)) {\n\t\t\tthis.currentElement.style.paddingTop = this.toPixel(top);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(right)) {\n\t\t\tthis.currentElement.style.paddingRight = this.toPixel(right);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(bottom)) {\n\t\t\tthis.currentElement.style.paddingBottom = this.toPixel(bottom);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(left)) {\n\t\t\tthis.currentElement.style.paddingLeft = this.toPixel(left);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property margin.\n\t */\n\tpublic margin(margin: string): Builder;\n\tpublic margin(top: number, right?: number, bottom?: number, left?: number): Builder;\n\tpublic margin(top: string, right?: string, bottom?: string, left?: string): Builder;\n\tpublic margin(top: any, right?: any, bottom?: any, left?: any): Builder {\n\t\tif (types.isString(top) && top.indexOf(' ') >= 0) {\n\t\t\treturn this.margin.apply(this, top.split(' '));\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(top)) {\n\t\t\tthis.currentElement.style.marginTop = this.toPixel(top);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(right)) {\n\t\t\tthis.currentElement.style.marginRight = this.toPixel(right);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(bottom)) {\n\t\t\tthis.currentElement.style.marginBottom = this.toPixel(bottom);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(left)) {\n\t\t\tthis.currentElement.style.marginLeft = this.toPixel(left);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property position.\n\t */\n\tpublic position(position: string): Builder;\n\tpublic position(top: number, right?: number, bottom?: number, left?: number, position?: string): Builder;\n\tpublic position(top: string, right?: string, bottom?: string, left?: string, position?: string): Builder;\n\tpublic position(top: any, right?: any, bottom?: any, left?: any, position?: string): Builder {\n\t\tif (types.isString(top) && top.indexOf(' ') >= 0) {\n\t\t\treturn this.position.apply(this, top.split(' '));\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(top)) {\n\t\t\tthis.currentElement.style.top = this.toPixel(top);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(right)) {\n\t\t\tthis.currentElement.style.right = this.toPixel(right);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(bottom)) {\n\t\t\tthis.currentElement.style.bottom = this.toPixel(bottom);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(left)) {\n\t\t\tthis.currentElement.style.left = this.toPixel(left);\n\t\t}\n\n\t\tif (!position) {\n\t\t\tposition = 'absolute';\n\t\t}\n\n\t\tthis.currentElement.style.position = position;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property size.\n\t */\n\tpublic size(size: string): Builder;\n\tpublic size(width: number, height?: number): Builder;\n\tpublic size(width: string, height?: string): Builder;\n\tpublic size(width: any, height?: any): Builder {\n\t\tif (types.isString(width) && width.indexOf(' ') >= 0) {\n\t\t\treturn this.size.apply(this, width.split(' '));\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(width)) {\n\t\t\tthis.currentElement.style.width = this.toPixel(width);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(height)) {\n\t\t\tthis.currentElement.style.height = this.toPixel(height);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property min-size.\n\t */\n\tpublic minSize(size: string): Builder;\n\tpublic minSize(width: number, height?: number): Builder;\n\tpublic minSize(width: string, height?: string): Builder;\n\tpublic minSize(width: any, height?: any): Builder {\n\t\tif (types.isString(width) && width.indexOf(' ') >= 0) {\n\t\t\treturn this.minSize.apply(this, width.split(' '));\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(width)) {\n\t\t\tthis.currentElement.style.minWidth = this.toPixel(width);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(height)) {\n\t\t\tthis.currentElement.style.minHeight = this.toPixel(height);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property max-size.\n\t */\n\tpublic maxSize(size: string): Builder;\n\tpublic maxSize(width: number, height?: number): Builder;\n\tpublic maxSize(width: string, height?: string): Builder;\n\tpublic maxSize(width: any, height?: any): Builder {\n\t\tif (types.isString(width) && width.indexOf(' ') >= 0) {\n\t\t\treturn this.maxSize.apply(this, width.split(' '));\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(width)) {\n\t\t\tthis.currentElement.style.maxWidth = this.toPixel(width);\n\t\t}\n\n\t\tif (!types.isUndefinedOrNull(height)) {\n\t\t\tthis.currentElement.style.maxHeight = this.toPixel(height);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property float.\n\t */\n\tpublic float(float: string): Builder {\n\t\tthis.currentElement.style.cssFloat = float;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property clear.\n\t */\n\tpublic clear(clear: string): Builder {\n\t\tthis.currentElement.style.clear = clear;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property for fonts back to default.\n\t */\n\tpublic normal(): Builder {\n\t\tthis.currentElement.style.fontStyle = 'normal';\n\t\tthis.currentElement.style.fontWeight = 'normal';\n\t\tthis.currentElement.style.textDecoration = 'none';\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property font-style to italic.\n\t */\n\tpublic italic(): Builder {\n\t\tthis.currentElement.style.fontStyle = 'italic';\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property font-weight to bold.\n\t */\n\tpublic bold(): Builder {\n\t\tthis.currentElement.style.fontWeight = 'bold';\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property text-decoration to underline.\n\t */\n\tpublic underline(): Builder {\n\t\tthis.currentElement.style.textDecoration = 'underline';\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property overflow.\n\t */\n\tpublic overflow(overflow: string): Builder {\n\t\tthis.currentElement.style.overflow = overflow;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property display.\n\t */\n\tpublic display(display: string): Builder {\n\t\tthis.currentElement.style.display = display;\n\n\t\treturn this;\n\t}\n\n\tpublic disable(): Builder {\n\t\tthis.currentElement.setAttribute('disabled', 'disabled');\n\n\t\treturn this;\n\t}\n\n\tpublic enable(): Builder {\n\t\tthis.currentElement.removeAttribute('disabled');\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Shows the current element of the builder.\n\t */\n\tpublic show(): Builder {\n\t\tif (this.hasClass('hidden')) {\n\t\t\tthis.removeClass('hidden');\n\t\t}\n\n\t\tthis.attr('aria-hidden', 'false');\n\n\t\t// Cancel any pending showDelayed() invocation\n\t\tthis.cancelVisibilityPromise();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Shows the current builder element after the provided delay. If the builder\n\t *  was set to hidden using the hide() method before this method executed, the\n\t *  function will return without showing the current element. This is useful to\n\t *  only show the element when a specific delay is reached (e.g. for a long running\n\t *  operation.\n\t */\n\tpublic showDelayed(delay: number): Builder {\n\n\t\t// Cancel any pending showDelayed() invocation\n\t\tthis.cancelVisibilityPromise();\n\n\t\tlet promise = TPromise.timeout(delay);\n\t\tthis.setProperty(VISIBILITY_BINDING_ID, promise);\n\n\t\tpromise.done(() => {\n\t\t\tthis.removeProperty(VISIBILITY_BINDING_ID);\n\t\t\tthis.show();\n\t\t});\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Hides the current element of the builder.\n\t */\n\tpublic hide(): Builder {\n\t\tif (!this.hasClass('hidden')) {\n\t\t\tthis.addClass('hidden');\n\t\t}\n\t\tthis.attr('aria-hidden', 'true');\n\n\t\t// Cancel any pending showDelayed() invocation\n\t\tthis.cancelVisibilityPromise();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Returns true if the current element of the builder is hidden.\n\t */\n\tpublic isHidden(): boolean {\n\t\treturn this.hasClass('hidden') || this.currentElement.style.display === 'none';\n\t}\n\n\t/**\n\t *  Toggles visibility of the current element of the builder.\n\t */\n\tpublic toggleVisibility(): Builder {\n\n\t\t// Cancel any pending showDelayed() invocation\n\t\tthis.cancelVisibilityPromise();\n\n\t\tthis.swapClass('builder-visible', 'hidden');\n\n\t\tif (this.isHidden()) {\n\t\t\tthis.attr('aria-hidden', 'true');\n\t\t}\n\t\telse {\n\t\t\tthis.attr('aria-hidden', 'false');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tprivate cancelVisibilityPromise(): void {\n\t\tlet promise: TPromise<void> = this.getProperty(VISIBILITY_BINDING_ID);\n\t\tif (promise) {\n\t\t\tpromise.cancel();\n\t\t\tthis.removeProperty(VISIBILITY_BINDING_ID);\n\t\t}\n\t}\n\n\t/**\n\t *  Sets the CSS property border.\n\t */\n\tpublic border(border: string): Builder;\n\tpublic border(width: number, style?: string, color?: string): Builder;\n\tpublic border(width: any, style?: string, color?: string): Builder {\n\t\tif (types.isString(width) && width.indexOf(' ') >= 0) {\n\t\t\treturn this.border.apply(this, width.split(' '));\n\t\t}\n\n\t\tthis.currentElement.style.borderWidth = this.toPixel(width);\n\n\t\tif (color) {\n\t\t\tthis.currentElement.style.borderColor = color;\n\t\t}\n\n\t\tif (style) {\n\t\t\tthis.currentElement.style.borderStyle = style;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property border-top.\n\t */\n\tpublic borderTop(border: string): Builder;\n\tpublic borderTop(width: number, style: string, color: string): Builder;\n\tpublic borderTop(width: any, style?: string, color?: string): Builder {\n\t\tif (types.isString(width) && width.indexOf(' ') >= 0) {\n\t\t\treturn this.borderTop.apply(this, width.split(' '));\n\t\t}\n\n\t\tthis.currentElement.style.borderTopWidth = this.toPixel(width);\n\n\t\tif (color) {\n\t\t\tthis.currentElement.style.borderTopColor = color;\n\t\t}\n\n\t\tif (style) {\n\t\t\tthis.currentElement.style.borderTopStyle = style;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property border-bottom.\n\t */\n\tpublic borderBottom(border: string): Builder;\n\tpublic borderBottom(width: number, style: string, color: string): Builder;\n\tpublic borderBottom(width: any, style?: string, color?: string): Builder {\n\t\tif (types.isString(width) && width.indexOf(' ') >= 0) {\n\t\t\treturn this.borderBottom.apply(this, width.split(' '));\n\t\t}\n\n\t\tthis.currentElement.style.borderBottomWidth = this.toPixel(width);\n\n\t\tif (color) {\n\t\t\tthis.currentElement.style.borderBottomColor = color;\n\t\t}\n\n\t\tif (style) {\n\t\t\tthis.currentElement.style.borderBottomStyle = style;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property border-left.\n\t */\n\tpublic borderLeft(border: string): Builder;\n\tpublic borderLeft(width: number, style: string, color: string): Builder;\n\tpublic borderLeft(width: any, style?: string, color?: string): Builder {\n\t\tif (types.isString(width) && width.indexOf(' ') >= 0) {\n\t\t\treturn this.borderLeft.apply(this, width.split(' '));\n\t\t}\n\n\t\tthis.currentElement.style.borderLeftWidth = this.toPixel(width);\n\n\t\tif (color) {\n\t\t\tthis.currentElement.style.borderLeftColor = color;\n\t\t}\n\n\t\tif (style) {\n\t\t\tthis.currentElement.style.borderLeftStyle = style;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property border-right.\n\t */\n\tpublic borderRight(border: string): Builder;\n\tpublic borderRight(width: number, style: string, color: string): Builder;\n\tpublic borderRight(width: any, style?: string, color?: string): Builder {\n\t\tif (types.isString(width) && width.indexOf(' ') >= 0) {\n\t\t\treturn this.borderRight.apply(this, width.split(' '));\n\t\t}\n\n\t\tthis.currentElement.style.borderRightWidth = this.toPixel(width);\n\n\t\tif (color) {\n\t\t\tthis.currentElement.style.borderRightColor = color;\n\t\t}\n\n\t\tif (style) {\n\t\t\tthis.currentElement.style.borderRightStyle = style;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property text-align.\n\t */\n\tpublic textAlign(textAlign: string): Builder {\n\t\tthis.currentElement.style.textAlign = textAlign;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the CSS property vertical-align.\n\t */\n\tpublic verticalAlign(valign: string): Builder {\n\t\tthis.currentElement.style.verticalAlign = valign;\n\n\t\treturn this;\n\t}\n\n\tprivate toPixel(obj: any): string {\n\t\tif (obj.toString().indexOf('px') === -1) {\n\t\t\treturn obj.toString() + 'px';\n\t\t}\n\n\t\treturn obj;\n\t}\n\n\t/**\n\t *  Sets the innerHTML attribute.\n\t */\n\tpublic innerHtml(html: string, append?: boolean): Builder {\n\t\tif (append) {\n\t\t\tthis.currentElement.innerHTML += html;\n\t\t} else {\n\t\t\tthis.currentElement.innerHTML = html;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the textContent property of the element.\n\t *  All HTML special characters will be escaped.\n\t */\n\tpublic text(text: string, append?: boolean): Builder {\n\t\tif (append) {\n\t\t\t// children is child Elements versus childNodes includes textNodes\n\t\t\tif (this.currentElement.children.length === 0) {\n\t\t\t\tthis.currentElement.textContent += text;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// if there are elements inside this node, append the string as a new text node\n\t\t\t\t// to avoid wiping out the innerHTML and replacing it with only text content\n\t\t\t\tthis.currentElement.appendChild(this.browserService.document.createTextNode(text));\n\t\t\t}\n\t\t} else {\n\t\t\tthis.currentElement.textContent = text;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Sets the innerHTML attribute in escaped form.\n\t */\n\tpublic safeInnerHtml(html: string, append?: boolean): Builder {\n\t\treturn this.innerHtml(strings.escape(html), append);\n\t}\n\n\t/**\n\t *  Adds the provided object as property to the current element. Call getBinding()\n\t *  to retrieve it again.\n\t */\n\tpublic bind(object: any): Builder {\n\t\tbindElement(this.currentElement, object);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Removes the binding of the current element.\n\t */\n\tpublic unbind(): Builder {\n\t\tunbindElement(this.currentElement);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Returns the object that was passed into the bind() call.\n\t */\n\tpublic getBinding(): any {\n\t\treturn getBindingFromElement(this.currentElement);\n\t}\n\n\t/**\n\t *  Allows to store arbritary data into the current element.\n\t */\n\tpublic setProperty(key: string, value: any): Builder {\n\t\tsetPropertyOnElement(this.currentElement, key, value);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Allows to get arbritary data from the current element.\n\t */\n\tpublic getProperty(key: string, fallback?: any): any {\n\t\treturn getPropertyFromElement(this.currentElement, key, fallback);\n\t}\n\n\t/**\n\t *  Removes a property from the current element that is stored under the given key.\n\t */\n\tpublic removeProperty(key: string): Builder {\n\t\tif (hasData(this.currentElement)) {\n\t\t\tdelete data(this.currentElement)[key];\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Returns a new builder with the parent element of the current element of the builder.\n\t */\n\tpublic parent(offdom?: boolean): Builder {\n\t\tassert.ok(!this.offdom, 'Builder was created with offdom = true and thus has no parent set');\n\n\t\treturn withElement(<HTMLElement>this.currentElement.parentNode, offdom);\n\t}\n\n\t/**\n\t *  Returns a new builder with all child elements of the current element of the builder.\n\t */\n\tpublic children(offdom?: boolean): MultiBuilder {\n\t\tlet children = this.currentElement.children;\n\n\t\tlet builders: Builder[] = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tbuilders.push(withElement(<HTMLElement>children.item(i), offdom));\n\t\t}\n\n\t\treturn new MultiBuilder(builders);\n\t}\n\n\t/**\n\t *  Removes the current HTMLElement from the given builder from this builder if this builders\n\t *  current HTMLElement is the direct parent.\n\t */\n\tpublic removeChild(builder: Builder): Builder {\n\t\tif (this.currentElement === builder.parent().getHTMLElement()) {\n\t\t\tthis.currentElement.removeChild(builder.getHTMLElement());\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Returns a new builder with all elements matching the provided selector scoped to the\n\t *  current element of the builder. Use Build.withElementsBySelector() to run the selector\n\t *  over the entire DOM.\n\t *  The returned builder is an instance of array that can have 0 elements if the selector does not match any\n\t *  elements.\n\t */\n\tpublic select(selector: string, offdom?: boolean): MultiBuilder {\n\t\tassert.ok(types.isString(selector), 'Expected String as parameter');\n\n\t\tlet elements = this.currentElement.querySelectorAll(selector);\n\n\t\tlet builders: Builder[] = [];\n\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\tbuilders.push(withElement(<HTMLElement>elements.item(i), offdom));\n\t\t}\n\n\t\treturn new MultiBuilder(builders);\n\t}\n\n\t/**\n\t *  Returns true if the current element of the builder matches the given selector and false otherwise.\n\t */\n\tpublic matches(selector: string): boolean {\n\t\tlet element = this.currentElement;\n\t\tlet matches = (<any>element).webkitMatchesSelector || (<any>element).mozMatchesSelector || (<any>element).msMatchesSelector || (<any>element).oMatchesSelector;\n\n\t\treturn matches && matches.call(element, selector);\n\t}\n\n\t/**\n\t *  Returns true if the current element of the builder has no children.\n\t */\n\tpublic isEmpty(): boolean {\n\t\treturn !this.currentElement.childNodes || this.currentElement.childNodes.length === 0;\n\t}\n\n\t/**\n\t * Recurse through all descendant nodes and remove their data binding.\n\t */\n\tprivate unbindDescendants(current: HTMLElement): void {\n\t\tif (current && current.children) {\n\t\t\tfor (let i = 0, length = current.children.length; i < length; i++) {\n\t\t\t\tlet element = current.children.item(i);\n\n\t\t\t\t// Unbind\n\t\t\t\tif (hasData(<HTMLElement>element)) {\n\n\t\t\t\t\t// Listeners\n\t\t\t\t\tlet listeners: IDisposable[] = data(<HTMLElement>element)[LISTENER_BINDING_ID];\n\t\t\t\t\tif (types.isArray(listeners)) {\n\t\t\t\t\t\twhile (listeners.length) {\n\t\t\t\t\t\t\tlisteners.pop().dispose();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Delete Data Slot\n\t\t\t\t\tdelete element[MS_DATA_KEY];\n\t\t\t\t}\n\n\t\t\t\t// Recurse\n\t\t\t\tthis.unbindDescendants(<HTMLElement>element);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *  Removes all HTML elements from the current element of the builder. Will also clean up any\n\t *  event listners registered and also clear any data binding and properties stored\n\t *  to any child element.\n\t */\n\tpublic empty(): Builder {\n\t\tthis.unbindDescendants(this.currentElement);\n\n\t\tthis.clearChildren();\n\n\t\tif (this.offdom) {\n\t\t\tthis.createdElements = [];\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Removes all HTML elements from the current element of the builder.\n\t */\n\tpublic clearChildren(): Builder {\n\t\t// Remove Elements\n\t\tif (this.currentElement) {\n\t\t\tDOM.clearNode(this.currentElement);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t *  Removes the current HTML element and all its children from its parent and unbinds\n\t *  all listeners and properties set to the data slots.\n\t */\n\tpublic destroy(): void {\n\n\t\tif (this.currentElement) {\n\n\t\t\t// Remove from parent\n\t\t\tif (this.currentElement.parentNode) {\n\t\t\t\tthis.currentElement.parentNode.removeChild(this.currentElement);\n\t\t\t}\n\n\t\t\t// Empty to clear listeners and bindings from children\n\t\t\tthis.empty();\n\n\t\t\t// Unbind\n\t\t\tif (hasData(this.currentElement)) {\n\n\t\t\t\t// Listeners\n\t\t\t\tlet listeners: IDisposable[] = data(this.currentElement)[LISTENER_BINDING_ID];\n\t\t\t\tif (types.isArray(listeners)) {\n\t\t\t\t\twhile (listeners.length) {\n\t\t\t\t\t\tlisteners.pop().dispose();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Delete Data Slot\n\t\t\t\tdelete this.currentElement[MS_DATA_KEY];\n\t\t\t}\n\t\t}\n\n\t\tlet type: string;\n\n\t\tfor (type in this.toUnbind) {\n\t\t\tif (this.toUnbind.hasOwnProperty(type) && types.isArray(this.toUnbind[type])) {\n\t\t\t\tthis.toUnbind[type] = dispose(this.toUnbind[type]);\n\t\t\t}\n\t\t}\n\n\t\tfor (type in this.captureToUnbind) {\n\t\t\tif (this.captureToUnbind.hasOwnProperty(type) && types.isArray(this.captureToUnbind[type])) {\n\t\t\t\tthis.captureToUnbind[type] = dispose(this.captureToUnbind[type]);\n\t\t\t}\n\t\t}\n\n\t\t// Nullify fields\n\t\tthis.currentElement = null;\n\t\tthis.container = null;\n\t\tthis.offdom = null;\n\t\tthis.createdElements = null;\n\t\tthis.captureToUnbind = null;\n\t\tthis.toUnbind = null;\n\t}\n\n\t/**\n\t *  Removes the current HTML element and all its children from its parent and unbinds\n\t *  all listeners and properties set to the data slots.\n\t */\n\tpublic dispose(): void {\n\t\tthis.destroy();\n\t}\n\n\t/**\n\t *  Gets the coordinates of the element relative to the specified parent.\n\t */\n\tpublic getPositionRelativeTo(element: HTMLElement): Box;\n\tpublic getPositionRelativeTo(element: Builder): Box;\n\tpublic getPositionRelativeTo(element: any): Box {\n\t\tif (element instanceof Builder) {\n\t\t\telement = (<Builder>element).getHTMLElement();\n\t\t}\n\n\t\tlet left = DOM.getRelativeLeft(this.currentElement, element);\n\t\tlet top = DOM.getRelativeTop(this.currentElement, element);\n\n\t\treturn new Box(top, -1, -1, left);\n\t}\n\n\t/**\n\t *  Gets the absolute coordinates of the element.\n\t */\n\tpublic getPosition(): Box {\n\t\tlet position = DOM.getTopLeftOffset(this.currentElement);\n\n\t\treturn new Box(position.top, -1, -1, position.left);\n\t}\n\n\t/**\n\t *  Gets the size (in pixels) of an element, including the margin.\n\t */\n\tpublic getTotalSize(): Dimension {\n\t\tlet totalWidth = DOM.getTotalWidth(this.currentElement);\n\t\tlet totalHeight = DOM.getTotalHeight(this.currentElement);\n\n\t\treturn new Dimension(totalWidth, totalHeight);\n\t}\n\n\t/**\n\t *  Gets the size (in pixels) of the inside of the element, excluding the border and padding.\n\t */\n\tpublic getContentSize(): Dimension {\n\t\tlet contentWidth = DOM.getContentWidth(this.currentElement);\n\t\tlet contentHeight = DOM.getContentHeight(this.currentElement);\n\n\t\treturn new Dimension(contentWidth, contentHeight);\n\t}\n\n\t/**\n\t *  Another variant of getting the inner dimensions of an element.\n\t */\n\tpublic getClientArea(): Dimension {\n\n\t\t// 0.) Try with DOM getDomNodePosition\n\t\tif (this.currentElement !== this.browserService.document.body) {\n\t\t\tlet dimensions = DOM.getDomNodePosition(this.currentElement);\n\t\t\treturn new Dimension(dimensions.width, dimensions.height);\n\t\t}\n\n\t\t// 1.) Try innerWidth / innerHeight\n\t\tif (this.browserService.window.innerWidth && this.browserService.window.innerHeight) {\n\t\t\treturn new Dimension(this.browserService.window.innerWidth, this.browserService.window.innerHeight);\n\t\t}\n\n\t\t// 2.) Try with document.body.clientWidth / document.body.clientHeigh\n\t\tif (this.browserService.document.body && this.browserService.document.body.clientWidth && this.browserService.document.body.clientWidth) {\n\t\t\treturn new Dimension(this.browserService.document.body.clientWidth, this.browserService.document.body.clientHeight);\n\t\t}\n\n\t\t// 3.) Try with document.documentElement.clientWidth / document.documentElement.clientHeight\n\t\tif (this.browserService.document.documentElement && this.browserService.document.documentElement.clientWidth && this.browserService.document.documentElement.clientHeight) {\n\t\t\treturn new Dimension(this.browserService.document.documentElement.clientWidth, this.browserService.document.documentElement.clientHeight);\n\t\t}\n\n\t\tthrow new Error('Unable to figure out browser width and height');\n\t}\n}\n\n/**\n *  The multi builder provides the same methods as the builder, but allows to call\n *  them on an array of builders.\n */\nexport class MultiBuilder extends Builder {\n\n\tpublic length: number;\n\n\tprivate builders: Builder[];\n\n\tconstructor(multiBuilder: MultiBuilder);\n\tconstructor(builder: Builder);\n\tconstructor(builders: Builder[]);\n\tconstructor(elements: HTMLElement[]);\n\tconstructor(builders: any) {\n\t\tassert.ok(types.isArray(builders) || builders instanceof MultiBuilder, 'Expected Array or MultiBuilder as parameter');\n\n\t\tsuper();\n\t\tthis.length = 0;\n\t\tthis.builders = [];\n\n\t\t// Add Builders to Array\n\t\tif (types.isArray(builders)) {\n\t\t\tfor (let i = 0; i < builders.length; i++) {\n\t\t\t\tif (builders[i] instanceof HTMLElement) {\n\t\t\t\t\tthis.push(withElement(builders[i]));\n\t\t\t\t} else {\n\t\t\t\t\tthis.push(builders[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < (<MultiBuilder>builders).length; i++) {\n\t\t\t\tthis.push((<MultiBuilder>builders).item(i));\n\t\t\t}\n\t\t}\n\n\t\t// Mixin Builder functions to operate on all builders\n\t\tlet $outer = this;\n\t\tlet propertyFn = (prop: string) => {\n\t\t\t(<any>$outer)[prop] = function(): any {\n\t\t\t\tlet args = Array.prototype.slice.call(arguments);\n\n\t\t\t\tlet returnValues: any[];\n\t\t\t\tlet mergeBuilders = false;\n\n\t\t\t\tfor (let i = 0; i < $outer.length; i++) {\n\t\t\t\t\tlet res = (<any>$outer.item(i))[prop].apply($outer.item(i), args);\n\n\t\t\t\t\t// Merge MultiBuilders into one\n\t\t\t\t\tif (res instanceof MultiBuilder) {\n\t\t\t\t\t\tif (!returnValues) {\n\t\t\t\t\t\t\treturnValues = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmergeBuilders = true;\n\n\t\t\t\t\t\tfor (let j = 0; j < (<MultiBuilder>res).length; j++) {\n\t\t\t\t\t\t\treturnValues.push((<MultiBuilder>res).item(j));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Any other Return Type (e.g. boolean, integer)\n\t\t\t\t\telse if (!types.isUndefined(res) && !(res instanceof Builder)) {\n\t\t\t\t\t\tif (!returnValues) {\n\t\t\t\t\t\t\treturnValues = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturnValues.push(res);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (returnValues && mergeBuilders) {\n\t\t\t\t\treturn new MultiBuilder(returnValues);\n\t\t\t\t}\n\n\t\t\t\treturn returnValues || $outer;\n\t\t\t};\n\t\t};\n\n\t\tfor (let prop in Builder.prototype) {\n\t\t\tif (prop !== 'clone' && prop !== 'and') { // Skip methods that are explicitly defined in MultiBuilder\n\t\t\t\tif (Builder.prototype.hasOwnProperty(prop) && types.isFunction((<any>Builder).prototype[prop])) {\n\t\t\t\t\tpropertyFn(prop);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic item(i: number): Builder {\n\t\treturn this.builders[i];\n\t}\n\n\tpublic push(...items: Builder[]): void {\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tthis.builders.push(items[i]);\n\t\t}\n\n\t\tthis.length = this.builders.length;\n\t}\n\n\tpublic pop(): Builder {\n\t\tlet element = this.builders.pop();\n\t\tthis.length = this.builders.length;\n\n\t\treturn element;\n\t}\n\n\tpublic concat(items: Builder[]): Builder[] {\n\t\tlet elements = this.builders.concat(items);\n\t\tthis.length = this.builders.length;\n\n\t\treturn elements;\n\t}\n\n\tpublic shift(): Builder {\n\t\tlet element = this.builders.shift();\n\t\tthis.length = this.builders.length;\n\n\t\treturn element;\n\t}\n\n\tpublic unshift(item: Builder): number {\n\t\tlet res = this.builders.unshift(item);\n\t\tthis.length = this.builders.length;\n\n\t\treturn res;\n\t}\n\n\tpublic slice(start: number, end?: number): Builder[] {\n\t\tlet elements = this.builders.slice(start, end);\n\t\tthis.length = this.builders.length;\n\n\t\treturn elements;\n\t}\n\n\tpublic splice(start: number, deleteCount?: number): Builder[] {\n\t\tlet elements = this.builders.splice(start, deleteCount);\n\t\tthis.length = this.builders.length;\n\n\t\treturn elements;\n\t}\n\n\tpublic clone(): MultiBuilder {\n\t\treturn new MultiBuilder(this);\n\t}\n\n\tpublic and(element: HTMLElement): MultiBuilder;\n\tpublic and(builder: Builder): MultiBuilder;\n\tpublic and(obj: any): MultiBuilder {\n\n\t\t// Convert HTMLElement to Builder as necessary\n\t\tif (!(obj instanceof Builder) && !(obj instanceof MultiBuilder)) {\n\t\t\tobj = new Builder((<HTMLElement>obj));\n\t\t}\n\n\t\tlet builders: Builder[] = [];\n\t\tif (obj instanceof MultiBuilder) {\n\t\t\tfor (let i = 0; i < (<MultiBuilder>obj).length; i++) {\n\t\t\t\tbuilders.push((<MultiBuilder>obj).item(i));\n\t\t\t}\n\t\t} else {\n\t\t\tbuilders.push(obj);\n\t\t}\n\n\t\tthis.push.apply(this, builders);\n\n\t\treturn this;\n\t}\n}\n\nfunction withBuilder(builder: Builder, offdom?: boolean): Builder {\n\tif (builder instanceof MultiBuilder) {\n\t\treturn new MultiBuilder((<MultiBuilder>builder));\n\t}\n\n\treturn new Builder(builder.getHTMLElement(), offdom);\n}\n\nfunction withElement(element: HTMLElement, offdom?: boolean): Builder {\n\treturn new Builder(element, offdom);\n}\n\nfunction offDOM(): Builder {\n\treturn new Builder(null, true);\n}\n\n// Binding functions\n\n/**\n *  Allows to store arbritary data into element.\n */\nexport function setPropertyOnElement(element: HTMLElement, key: string, value: any): void {\n\tdata(element)[key] = value;\n}\n\n/**\n *  Allows to get arbritary data from element.\n */\nexport function getPropertyFromElement(element: HTMLElement, key: string, fallback?: any): any {\n\tif (hasData(element)) {\n\t\tlet value = data(element)[key];\n\t\tif (!types.isUndefined(value)) {\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn fallback;\n}\n\n/**\n *  Removes a property from an element.\n */\nexport function removePropertyFromElement(element: HTMLElement, key: string): void {\n\tif (hasData(element)) {\n\t\tdelete data(element)[key];\n\t}\n}\n\n/**\n *  Adds the provided object as property to the given element. Call getBinding()\n *  to retrieve it again.\n */\nexport function bindElement(element: HTMLElement, object: any): void {\n\tsetPropertyOnElement(element, DATA_BINDING_ID, object);\n}\n\n/**\n *  Removes the binding of the given element.\n */\nexport function unbindElement(element: HTMLElement): void {\n\tremovePropertyFromElement(element, DATA_BINDING_ID);\n}\n\n/**\n *  Returns the object that was passed into the bind() call for the element.\n */\nexport function getBindingFromElement(element: HTMLElement): any {\n\treturn getPropertyFromElement(element, DATA_BINDING_ID);\n}\n\nexport let Binding = {\n\tsetPropertyOnElement: setPropertyOnElement,\n\tgetPropertyFromElement: getPropertyFromElement,\n\tremovePropertyFromElement: removePropertyFromElement,\n\tbindElement: bindElement,\n\tunbindElement: unbindElement,\n\tgetBindingFromElement: getBindingFromElement\n};\n\nlet SELECTOR_REGEX = /([\\w\\-]+)?(#([\\w\\-]+))?((.([\\w\\-]+))*)/;\n\nexport let $: QuickBuilder = function(arg?: any): Builder {\n\n\t// Off-DOM use\n\tif (types.isUndefined(arg)) {\n\t\treturn offDOM();\n\t}\n\n\t// Falsified values cause error otherwise\n\tif (!arg) {\n\t\tthrow new Error('Bad use of $');\n\t}\n\n\t// Wrap the given element\n\tif (DOM.isHTMLElement(arg) || arg === window) {\n\t\treturn withElement(arg);\n\t}\n\n\t// Wrap the given builders\n\tif (types.isArray(arg)) {\n\t\treturn new MultiBuilder(arg);\n\t}\n\n\t// Wrap the given builder\n\tif (arg instanceof Builder) {\n\t\treturn withBuilder((<Builder>arg));\n\t}\n\n\tif (types.isString(arg)) {\n\n\t\t// Use the argument as HTML code\n\t\tif (arg[0] === '<') {\n\t\t\tlet element: Node;\n\t\t\tlet container = BrowserService.getService().document.createElement('div');\n\t\t\tcontainer.innerHTML = strings.format.apply(strings, arguments);\n\n\t\t\tif (container.children.length === 0) {\n\t\t\t\tthrow new Error('Bad use of $');\n\t\t\t}\n\n\t\t\tif (container.children.length === 1) {\n\t\t\t\telement = container.firstChild;\n\t\t\t\tcontainer.removeChild(element);\n\n\t\t\t\treturn withElement(<HTMLElement>element);\n\t\t\t}\n\n\t\t\tlet builders: Builder[] = [];\n\t\t\twhile (container.firstChild) {\n\t\t\t\telement = container.firstChild;\n\t\t\t\tcontainer.removeChild(element);\n\t\t\t\tbuilders.push(withElement(<HTMLElement>element));\n\t\t\t}\n\n\t\t\treturn new MultiBuilder(builders);\n\t\t}\n\n\t\t// Use the argument as a selector constructor\n\t\telse if (arguments.length === 1) {\n\t\t\tlet match = SELECTOR_REGEX.exec(arg);\n\t\t\tif (!match) {\n\t\t\t\tthrow new Error('Bad use of $');\n\t\t\t}\n\n\t\t\tlet tag = match[1] || 'div';\n\t\t\tlet id = match[3] || undefined;\n\t\t\tlet classes = (match[4] || '').replace(/\\./g, ' ');\n\n\t\t\tlet props: any = {};\n\t\t\tif (id) {\n\t\t\t\tprops['id'] = id;\n\t\t\t}\n\n\t\t\tif (classes) {\n\t\t\t\tprops['class'] = classes;\n\t\t\t}\n\n\t\t\treturn offDOM().element(tag, props);\n\t\t}\n\n\t\t// Use the arguments as the arguments to Builder#element(...)\n\t\telse {\n\t\t\tlet result = offDOM();\n\t\t\tresult.element.apply(result, arguments);\n\t\t\treturn result;\n\t\t}\n\t} else {\n\t\tthrow new Error('Bad use of $');\n\t}\n};\n\n(<any>$).Box = Box;\n(<any>$).Dimension = Dimension;\n(<any>$).Position = Position;\n(<any>$).Builder = Builder;\n(<any>$).MultiBuilder = MultiBuilder;\n(<any>$).Build = Build;\n(<any>$).Binding = Binding;"]}