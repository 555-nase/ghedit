{"version":3,"file":"vs/base/browser/ui/scrollbar/abstractScrollbar.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/base/browser/ui/scrollbar/abstractScrollbar.ts"],"names":[],"mappings":";;;;;;IAAA;;;oGAGgG;IAChG,YAAY,CAAC;IAab;;OAEG;IACU,sBAAc,GAAG,EAAE,CAAC;IAEjC;;OAEG;IACH,IAAM,yBAAyB,GAAG,GAAG,CAAC;IAEtC;;OAEG;IACH,IAAM,mBAAmB,GAAG,EAAE,CAAC;IAO/B;QAqCC,wBAAY,SAAiB,EAAE,aAAqB,EAAE,qBAA6B;YAClF,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;YAChD,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;YAChE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YAExC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;YACrB,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;YAEzB,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC;YAChC,IAAI,CAAC,0BAA0B,GAAG,CAAC,CAAC;YACpC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC;YAC7B,IAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC;YAEjC,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC/B,CAAC;QAEM,uCAAc,GAArB,UAAsB,WAAmB;YACxC,IAAI,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;YAC3C,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,KAAK,YAAY,CAAC,CAAC,CAAC;gBACxC,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;gBACjC,IAAI,CAAC,sBAAsB,EAAE,CAAC;gBAC9B,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEM,sCAAa,GAApB,UAAqB,UAAkB;YACtC,IAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YACzC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,WAAW,CAAC,CAAC,CAAC;gBACtC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;gBAC/B,IAAI,CAAC,sBAAsB,EAAE,CAAC;gBAC9B,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEM,0CAAiB,GAAxB,UAAyB,cAAsB;YAC9C,IAAI,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;YACjD,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,eAAe,CAAC,CAAC,CAAC;gBAC9C,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;gBACvC,IAAI,CAAC,sBAAsB,EAAE,CAAC;gBAC9B,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEO,+CAAsB,GAA9B;YACC,IAAM,qBAAqB,GAAG,IAAI,CAAC,sBAAsB,CAAC;YAC1D,IAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;YAClC,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;YACtC,IAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;YACpC,IAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC;YAE5C,IAAI,qBAAqB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,WAAW,GAAG,qBAAqB,CAAC,CAAC;YAC7E,IAAI,yBAAyB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,qBAAqB,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC;YACnF,IAAI,aAAa,GAAG,UAAU,GAAG,CAAC,GAAG,CAAC,yBAAyB,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;YAClF,IAAI,gBAAgB,GAAG,CAAC,UAAU,GAAG,WAAW,CAAC,CAAC;YAElD,IAAI,kBAA0B,CAAC;YAC/B,IAAI,sBAA8B,CAAC;YAEnC,EAAE,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACvB,kBAAkB,GAAG,yBAAyB,CAAC;gBAC/C,sBAAsB,GAAG,CAAC,CAAC;YAC5B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,aAAa,CAAC,CAAC;gBAC7D,sBAAsB,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,aAAa,CAAC,CAAC;gBAEpE,EAAE,CAAC,CAAC,kBAAkB,GAAG,mBAAmB,CAAC,CAAC,CAAC;oBAC9C,sGAAsG;oBACtG,gGAAgG;oBAChG,uFAAuF;oBAEvF,IAAI,sBAAsB,GAAG,CAAC,mBAAmB,GAAG,kBAAkB,CAAC,GAAG,CAAC,CAAC;oBAC5E,kBAAkB,GAAG,mBAAmB,CAAC;oBAEzC,sBAAsB,IAAI,sBAAsB,CAAC;oBAEjD,EAAE,CAAC,CAAC,sBAAsB,GAAG,kBAAkB,GAAG,yBAAyB,CAAC,CAAC,CAAC;wBAC7E,iEAAiE;wBACjE,sBAAsB,GAAG,yBAAyB,GAAG,kBAAkB,CAAC;oBACzE,CAAC;oBAED,EAAE,CAAC,CAAC,sBAAsB,GAAG,CAAC,CAAC,CAAC,CAAC;wBAChC,2DAA2D;wBAC3D,sBAAsB,GAAG,CAAC,CAAC;oBAC5B,CAAC;gBACF,CAAC;YACF,CAAC;YAED,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;YAChE,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;YACxE,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;YACpC,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;YAC1C,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;YAC1D,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC;QACnE,CAAC;QAEM,qCAAY,GAAnB;YACC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACxB,CAAC;QAEM,8CAAqB,GAA5B;YACC,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC;QACpC,CAAC;QAEM,8CAAqB,GAA5B;YACC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC;QAC5B,CAAC;QAEM,iCAAQ,GAAf;YACC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC;QAC/B,CAAC;QAEM,sCAAa,GAApB;YACC,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC;QACjC,CAAC;QAEM,0CAAiB,GAAxB;YACC,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC;QACrC,CAAC;QAEM,8DAAqC,GAA5C,UAA6C,qBAA6B;YACzE,MAAM,CAAC,qBAAqB,GAAG,IAAI,CAAC,cAAc,CAAC;QACpD,CAAC;QAEM,+CAAsB,GAA7B,UAA8B,qBAA6B;YAC1D,qBAAqB,GAAG,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;YAC1D,qBAAqB,GAAG,IAAI,CAAC,GAAG,CAAC,qBAAqB,EAAE,CAAC,CAAC,CAAC;YAC3D,qBAAqB,GAAG,IAAI,CAAC,GAAG,CAAC,qBAAqB,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;YAC9F,MAAM,CAAC,qBAAqB,CAAC;QAC9B,CAAC;QACF,qBAAC;IAAD,CAAC,AA5KD,IA4KC;IA5KY,sBAAc,iBA4K1B,CAAA;IAED;QAA6B,kCAAM;QASlC,wBAAY,SAAiB,EAAE,GAAW,EAAE,IAAY,EAAE,MAAc,EAAE,KAAa,EAAE,OAAe,EAAE,QAAgB,EAAE,sBAA+C,EAAE,MAAe;YAT7L,iBA6DC;YAnDC,iBAAO,CAAC;YACR,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,uBAAuB,GAAG,sBAAsB,CAAC;YAEtD,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC/C,IAAI,CAAC,SAAS,CAAC,SAAS,GAAG,kBAAkB,CAAC;YAC9C,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;YAC3C,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;YAC3C,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,GAAG,KAAK,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,KAAK,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,KAAK,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,KAAK,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;YAG9I,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC7C,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;YACnC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;YACzC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,sBAAc,EAAE,sBAAc,CAAC,CAAC;YACtD,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;YAEpD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,+CAAsB,EAA+B,CAAC,CAAC;YACnG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,UAAC,CAAC,IAAK,OAAA,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAvB,CAAuB,CAAC,CAAC;YACjE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,CAAC,IAAK,OAAA,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAvB,CAAuB,CAAC,CAAC;YAE/D,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,qBAAa,EAAE,CAAC,CAAC;YACjE,IAAI,CAAC,6BAA6B,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,oBAAY,EAAE,CAAC,CAAC;QACzE,CAAC;QAEO,wCAAe,GAAvB,UAAwB,CAAc;YAAtC,iBAyBC;YAxBA,IAAI,QAAQ,GAAG;gBACd,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC,KAAI,CAAC,uBAAuB,EAAE,CAAC,CAAC;YAC3D,CAAC,CAAC;YAEF,IAAI,gBAAgB,GAAG;gBACtB,KAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;YAC9D,CAAC,CAAC;YAEF,QAAQ,EAAE,CAAC;YACX,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE,CAAC;YACpC,IAAI,CAAC,6BAA6B,CAAC,YAAY,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC;YAEvE,IAAI,CAAC,iBAAiB,CAAC,eAAe,CACrC,gDAAuB,EACvB,UAAC,aAA0C;gBAC1C,uBAAuB;YACxB,CAAC,EACD;gBACC,KAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE,CAAC;gBACpC,KAAI,CAAC,6BAA6B,CAAC,MAAM,EAAE,CAAC;YAC7C,CAAC,CACD,CAAC;YAEF,CAAC,CAAC,cAAc,EAAE,CAAC;QACpB,CAAC;QACF,qBAAC;IAAD,CAAC,AA7DD,CAA6B,eAAM,GA6DlC;IAED;QAAmC,wCAAU;QAU5C,8BAAY,UAAsB,EAAE,gBAAwB,EAAE,kBAA0B;YACvF,iBAAO,CAAC;YACR,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;YAC1C,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAC;YAC9C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,oBAAY,EAAE,CAAC,CAAC;QACxD,CAAC;QAED,kCAAkC;QAE1B,qDAAsB,GAA9B,UAA+B,eAAwB;YACtD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,8BAAU,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC5C,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,8BAAU,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC7C,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,eAAe,CAAC;QACxB,CAAC;QAEM,iDAAkB,GAAzB,UAA0B,kBAA2B;YACpD,IAAI,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,CAAC;YAEtE,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,KAAK,eAAe,CAAC,CAAC,CAAC;gBAC/C,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;gBACxC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACzB,CAAC;QACF,CAAC;QAEM,0CAAW,GAAlB,UAAmB,QAAiB;YACnC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC;gBACjC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;gBAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACzB,CAAC;QACF,CAAC;QAEM,yCAAU,GAAjB,UAAkB,OAAoB;YACrC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;YAErD,uGAAuG;YACvG,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;QAEM,+CAAgB,GAAvB;YAEC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACrB,yBAAyB;gBACzB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBAClB,MAAM,CAAC;YACR,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,OAAO,EAAE,CAAC;YAChB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAClB,CAAC;QACF,CAAC;QAGO,sCAAO,GAAf;YAAA,iBAUC;YATA,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACrB,MAAM,CAAC;YACR,CAAC;YACD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YAEvB,2CAA2C;YAC3C,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC;gBAC7B,KAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAI,CAAC,iBAAiB,CAAC,CAAC;YACpD,CAAC,EAAE,CAAC,CAAC,CAAC;QACP,CAAC;QAEO,oCAAK,GAAb,UAAc,YAAqB;YAClC,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;YAC3B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACtB,MAAM,CAAC;YACR,CAAC;YACD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAmB,GAAG,CAAC,YAAY,GAAG,OAAO,GAAG,EAAE,CAAC,CAAC,CAAC;QACtF,CAAC;QACF,2BAAC;IAAD,CAAC,AA9FD,CAAmC,sBAAU,GA8F5C;IAQD;QAAgD,qCAAM;QAcrD,2BAAY,oBAA6B,EAAE,UAAkB,EAAE,MAAe,EAAE,cAA8B,EAAE,UAAsB,EAAE,uBAA+B;YACtK,iBAAO,CAAC;YACR,IAAI,CAAC,qBAAqB,GAAG,oBAAoB,CAAC;YAClD,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC;YACtC,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,oBAAoB,CAAC,UAAU,EAAE,oBAAoB,GAAG,uBAAuB,EAAE,sBAAsB,GAAG,uBAAuB,CAAC,CAAC,CAAC;YACpL,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,+CAAsB,EAA+B,CAAC,CAAC;YACnG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC3B,CAAC;QAED,0CAA0C;QAE1C;;WAEG;QACO,0CAAc,GAAxB;YAAA,iBAWC;YAVA,IAAI,CAAC,OAAO,GAAG,gCAAiB,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;YAChE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,qBAAqB,IAAI,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC;gBAC9D,qCAAqC;gBACrC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,4BAA4B,CAAC,CAAC;YACzD,CAAC;YAED,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACpD,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;YAErC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,UAAC,CAAC,IAAK,OAAA,KAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,EAAzB,CAAyB,CAAC,CAAC;QAC1E,CAAC;QAED;;WAEG;QACO,wCAAY,GAAtB,UAAuB,SAAiB,EAAE,GAAW,EAAE,IAAY,EAAE,MAAc,EAAE,KAAa,EAAE,OAAe,EAAE,QAAgB,EAAE,sBAA+C;YACrL,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,cAAc,CAAC,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,sBAAsB,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YAC7I,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YAClD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACjD,CAAC;QAED;;WAEG;QACO,yCAAa,GAAvB,UAAwB,GAAW,EAAE,IAAY,EAAE,KAAa,EAAE,MAAc;YAAhF,iBAYC;YAXA,IAAI,CAAC,MAAM,GAAG,gCAAiB,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;YAC/D,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;YACpC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACxB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC1B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YAE9B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YAEtD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,UAAC,CAAC,IAAK,OAAA,KAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAxB,CAAwB,CAAC,CAAC;QACxE,CAAC;QAED,iCAAiC;QAE1B,yCAAa,GAApB,UAAqB,WAAmB;YACvC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;gBACtD,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC;gBACxE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;gBAC1B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACvB,IAAI,CAAC,MAAM,EAAE,CAAC;gBACf,CAAC;YACF,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;QAC3B,CAAC;QAEM,+CAAmB,GAA1B,UAA2B,iBAAyB;YACnD,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;gBAC3D,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC;gBACxE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;gBAC1B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACvB,IAAI,CAAC,MAAM,EAAE,CAAC;gBACf,CAAC;YACF,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;QAC3B,CAAC;QAEM,mDAAuB,GAA9B,UAA+B,qBAA6B;YAC3D,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;gBACnE,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC;gBACxE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;gBAC1B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACvB,IAAI,CAAC,MAAM,EAAE,CAAC;gBACf,CAAC;YACF,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;QAC3B,CAAC;QAED,8BAA8B;QAEvB,uCAAW,GAAlB;YACC,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;QACrD,CAAC;QAEM,qCAAS,GAAhB;YACC,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QACtD,CAAC;QAEM,kCAAM,GAAb;YACC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACzB,MAAM,CAAC;YACR,CAAC;YACD,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAE3B,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,CAAC,qBAAqB,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,qBAAqB,EAAE,CAAC,CAAC;YAChH,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,eAAe,CAAC,aAAa,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC1I,CAAC;QACD,+BAA+B;QAEvB,6CAAiB,GAAzB,UAA0B,CAAc;YACvC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;gBACvC,MAAM,CAAC;YACR,CAAC;YACD,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QACtB,CAAC;QAEM,6CAAiB,GAAxB,UAAyB,YAAwB;YAChD,IAAI,CAAC,GAAG,IAAI,+BAAkB,CAAC,YAAY,CAAC,CAAC;YAC7C,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;YAC1D,IAAI,WAAW,GAAG,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,iBAAiB,EAAE,CAAC;YACpE,IAAI,UAAU,GAAG,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,iBAAiB,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,aAAa,EAAE,CAAC;YAC1G,IAAI,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,WAAW,IAAI,QAAQ,IAAI,QAAQ,IAAI,UAAU,CAAC,CAAC,CAAC;gBACvD,8CAA8C;gBAC9C,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;YAC1B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,iDAAiD;gBACjD,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YACtB,CAAC;QACF,CAAC;QAEO,wCAAY,GAApB,UAAqB,CAAc;YAClC,IAAI,eAAe,GAAG,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACxE,IAAI,qBAAqB,GAAG,IAAI,CAAC,0BAA0B,CAAC,CAAC,EAAE,eAAe,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;YACjK,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,eAAe,CAAC,qCAAqC,CAAC,qBAAqB,CAAC,CAAC,CAAC;YACjH,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;QAC1B,CAAC;QAEO,4CAAgB,GAAxB,UAAyB,CAAc;YAAvC,iBA8BC;YA7BA,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBAClB,IAAI,gCAA8B,GAAG,IAAI,CAAC,8BAA8B,CAAC,CAAC,CAAC,CAAC;gBAC5E,IAAI,uBAAqB,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;gBACtD,IAAI,eAAa,GAAG,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,iBAAiB,EAAE,CAAC;gBAC5F,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;gBAE5C,IAAI,CAAC,iBAAiB,CAAC,eAAe,CACrC,gDAAuB,EACvB,UAAC,aAA0C;oBAC1C,IAAI,uBAAuB,GAAG,KAAI,CAAC,8BAA8B,CAAC,aAAa,CAAC,CAAC;oBACjF,IAAI,oBAAoB,GAAG,IAAI,CAAC,GAAG,CAAC,uBAAuB,GAAG,gCAA8B,CAAC,CAAC;oBAC9F,gHAAgH;oBAChH,EAAE,CAAC,CAAC,QAAQ,CAAC,SAAS,IAAI,oBAAoB,GAAG,yBAAyB,CAAC,CAAC,CAAC;wBAC5E,mEAAmE;wBACnE,KAAI,CAAC,wBAAwB,CAAC,uBAAqB,CAAC,CAAC;oBACtD,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACP,IAAI,qBAAqB,GAAG,KAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,GAAG,eAAa,CAAC;wBACrF,KAAI,CAAC,wBAAwB,CAAC,KAAI,CAAC,eAAe,CAAC,qCAAqC,CAAC,qBAAqB,CAAC,CAAC,CAAC;oBAClH,CAAC;gBACF,CAAC,EACD;oBACC,KAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;oBAC7C,KAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;gBAC1B,CAAC,CACD,CAAC;gBAEF,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;YAC5B,CAAC;QACF,CAAC;QAEM,kDAAsB,GAA7B,UAA8B,qBAA6B;YAC1D,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,qBAAqB,CAAC,CAAC;QAC3E,CAAC;QAEM,oDAAwB,GAA/B,UAAgC,qBAA6B;YAC5D,qBAAqB,GAAG,IAAI,CAAC,sBAAsB,CAAC,qBAAqB,CAAC,CAAC;YAE3E,IAAI,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAClD,IAAI,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,CAAC;YAC/C,IAAI,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAElD,EAAE,CAAC,CAAC,iBAAiB,KAAK,iBAAiB,CAAC,CAAC,CAAC;gBAC7C,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC;gBACxD,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAWF,wBAAC;IAAD,CAAC,AArND,CAAgD,eAAM,GAqNrD;IArNqB,yBAAiB,oBAqNtC,CAAA;IAED,qBAAqB,OAAoB,EAAE,GAAW,EAAE,IAAY,EAAE,MAAc,EAAE,KAAa;QAClG,EAAE,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC;YAClB,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;QAChC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;YACnB,OAAO,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;QAClC,CAAC;QACD,EAAE,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC;YACrB,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,GAAG,IAAI,CAAC;QACtC,CAAC;QACD,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;YACpB,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC;QACpC,CAAC;IACF,CAAC;IAED,iBAAiB,OAAoB,EAAE,KAAa,EAAE,MAAc;QACnE,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;YACpB,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC;QACpC,CAAC;QACD,EAAE,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC;YACrB,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,GAAG,IAAI,CAAC;QACtC,CAAC;IACF,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as Browser from 'vs/base/browser/browser';\nimport * as Platform from 'vs/base/common/platform';\nimport * as DomUtils from 'vs/base/browser/dom';\nimport {IMouseEvent, StandardMouseEvent} from 'vs/base/browser/mouseEvent';\nimport {IMouseWheelEvent, IParent, Visibility, IScrollbar} from 'vs/base/browser/ui/scrollbar/scrollableElement';\nimport {Disposable} from 'vs/base/common/lifecycle';\nimport {GlobalMouseMoveMonitor, IStandardMouseMoveEventData, standardMouseMoveMerger} from 'vs/base/browser/globalMouseMoveMonitor';\nimport {Widget} from 'vs/base/browser/ui/widget';\nimport {TimeoutTimer, IntervalTimer} from 'vs/base/common/async';\nimport {FastDomNode, createFastDomNode} from 'vs/base/browser/styleMutator';\n\n/**\n * The arrow image size.\n */\nexport const ARROW_IMG_SIZE = 11;\n\n/**\n * The orthogonal distance to the slider at which dragging \"resets\". This implements \"snapping\"\n */\nconst MOUSE_DRAG_RESET_DISTANCE = 140;\n\n/**\n * The minimal size of the slider (such that it can still be clickable) -- it is artificially enlarged.\n */\nconst MINIMUM_SLIDER_SIZE = 20;\n\n\nexport interface IMouseWheelEventFactory {\n\t(): IMouseWheelEvent;\n}\n\nexport class ScrollbarState {\n\n\t// --- immutable\n\tprivate _scrollbarSize: number;\n\tprivate _oppositeScrollbarSize: number;\n\tprivate _arrowSize: number;\n\n\t// --- variables\n\tprivate _visibleSize: number;\n\tprivate _scrollSize: number;\n\tprivate _scrollPosition: number;\n\n\t// --- computed variables\n\n\t/**\n\t * `visibleSize` - `oppositeScrollbarSize`\n\t */\n\tprivate _computedAvailableSize: number;\n\n\t/**\n\t * `computedAvailableSize` - 2 * `arrowSize`\n\t */\n\tprivate _computedRepresentableSize: number;\n\n\t/**\n\t * `computedRepresentableSize` / `scrollSize`\n\t */\n\tprivate _computedRatio: number;\n\n\t/**\n\t * (`scrollSize` > `visibleSize`)\n\t */\n\tprivate _computedIsNeeded: boolean;\n\n\tprivate _computedSliderSize: number;\n\tprivate _computedSliderPosition: number;\n\n\tconstructor(arrowSize: number, scrollbarSize: number, oppositeScrollbarSize: number) {\n\t\tthis._scrollbarSize = Math.round(scrollbarSize);\n\t\tthis._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n\t\tthis._arrowSize = Math.round(arrowSize);\n\n\t\tthis._visibleSize = 0;\n\t\tthis._scrollSize = 0;\n\t\tthis._scrollPosition = 0;\n\n\t\tthis._computedAvailableSize = 0;\n\t\tthis._computedRepresentableSize = 0;\n\t\tthis._computedRatio = 0.1;\n\t\tthis._computedIsNeeded = false;\n\t\tthis._computedSliderSize = 0;\n\t\tthis._computedSliderPosition = 0;\n\n\t\tthis._refreshComputedValues();\n\t}\n\n\tpublic setVisibleSize(visibleSize: number): boolean {\n\t\tlet iVisibleSize = Math.round(visibleSize);\n\t\tif (this._visibleSize !== iVisibleSize) {\n\t\t\tthis._visibleSize = iVisibleSize;\n\t\t\tthis._refreshComputedValues();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic setScrollSize(scrollSize: number): boolean {\n\t\tlet iScrollSize = Math.round(scrollSize);\n\t\tif (this._scrollSize !== iScrollSize) {\n\t\t\tthis._scrollSize = iScrollSize;\n\t\t\tthis._refreshComputedValues();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic setScrollPosition(scrollPosition: number): boolean {\n\t\tlet iScrollPosition = Math.round(scrollPosition);\n\t\tif (this._scrollPosition !== iScrollPosition) {\n\t\t\tthis._scrollPosition = iScrollPosition;\n\t\t\tthis._refreshComputedValues();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _refreshComputedValues(): void {\n\t\tconst oppositeScrollbarSize = this._oppositeScrollbarSize;\n\t\tconst arrowSize = this._arrowSize;\n\t\tconst visibleSize = this._visibleSize;\n\t\tconst scrollSize = this._scrollSize;\n\t\tconst scrollPosition = this._scrollPosition;\n\n\t\tlet computedAvailableSize = Math.max(0, visibleSize - oppositeScrollbarSize);\n\t\tlet computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * arrowSize);\n\t\tlet computedRatio = scrollSize > 0 ? (computedRepresentableSize / scrollSize) : 0;\n\t\tlet computedIsNeeded = (scrollSize > visibleSize);\n\n\t\tlet computedSliderSize: number;\n\t\tlet computedSliderPosition: number;\n\n\t\tif (!computedIsNeeded) {\n\t\t\tcomputedSliderSize = computedRepresentableSize;\n\t\t\tcomputedSliderPosition = 0;\n\t\t} else {\n\t\t\tcomputedSliderSize = Math.floor(visibleSize * computedRatio);\n\t\t\tcomputedSliderPosition = Math.floor(scrollPosition * computedRatio);\n\n\t\t\tif (computedSliderSize < MINIMUM_SLIDER_SIZE) {\n\t\t\t\t// We must artificially increase the size of the slider, since the slider would be too small otherwise\n\t\t\t\t// The effort is to keep the slider centered around the original position, but we must take into\n\t\t\t\t// account the cases when the slider is too close to the top or too close to the bottom\n\n\t\t\t\tlet sliderArtificialOffset = (MINIMUM_SLIDER_SIZE - computedSliderSize) / 2;\n\t\t\t\tcomputedSliderSize = MINIMUM_SLIDER_SIZE;\n\n\t\t\t\tcomputedSliderPosition -= sliderArtificialOffset;\n\n\t\t\t\tif (computedSliderPosition + computedSliderSize > computedRepresentableSize) {\n\t\t\t\t\t// Slider is too close to the bottom, so we glue it to the bottom\n\t\t\t\t\tcomputedSliderPosition = computedRepresentableSize - computedSliderSize;\n\t\t\t\t}\n\n\t\t\t\tif (computedSliderPosition < 0) {\n\t\t\t\t\t// Slider is too close to the top, so we glue it to the top\n\t\t\t\t\tcomputedSliderPosition = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._computedAvailableSize = Math.round(computedAvailableSize);\n\t\tthis._computedRepresentableSize = Math.round(computedRepresentableSize);\n\t\tthis._computedRatio = computedRatio;\n\t\tthis._computedIsNeeded = computedIsNeeded;\n\t\tthis._computedSliderSize = Math.round(computedSliderSize);\n\t\tthis._computedSliderPosition = Math.round(computedSliderPosition);\n\t}\n\n\tpublic getArrowSize(): number {\n\t\treturn this._arrowSize;\n\t}\n\n\tpublic getRectangleLargeSize(): number {\n\t\treturn this._computedAvailableSize;\n\t}\n\n\tpublic getRectangleSmallSize(): number {\n\t\treturn this._scrollbarSize;\n\t}\n\n\tpublic isNeeded(): boolean {\n\t\treturn this._computedIsNeeded;\n\t}\n\n\tpublic getSliderSize(): number {\n\t\treturn this._computedSliderSize;\n\t}\n\n\tpublic getSliderPosition(): number {\n\t\treturn this._computedSliderPosition;\n\t}\n\n\tpublic convertSliderPositionToScrollPosition(desiredSliderPosition: number): number {\n\t\treturn desiredSliderPosition / this._computedRatio;\n\t}\n\n\tpublic validateScrollPosition(desiredScrollPosition: number): number {\n\t\tdesiredScrollPosition = Math.round(desiredScrollPosition);\n\t\tdesiredScrollPosition = Math.max(desiredScrollPosition, 0);\n\t\tdesiredScrollPosition = Math.min(desiredScrollPosition, this._scrollSize - this._visibleSize);\n\t\treturn desiredScrollPosition;\n\t}\n}\n\nclass ScrollbarArrow extends Widget {\n\tprivate _parent: IParent;\n\tprivate _mouseWheelEventFactory: IMouseWheelEventFactory;\n\tpublic bgDomNode: HTMLElement;\n\tpublic domNode: HTMLElement;\n\tprivate _mousedownRepeatTimer: IntervalTimer;\n\tprivate _mousedownScheduleRepeatTimer: TimeoutTimer;\n\tprivate _mouseMoveMonitor: GlobalMouseMoveMonitor<IStandardMouseMoveEventData>;\n\n\tconstructor(className: string, top: number, left: number, bottom: number, right: number, bgWidth: number, bgHeight: number, mouseWheelEventFactory: IMouseWheelEventFactory, parent: IParent) {\n\t\tsuper();\n\t\tthis._parent = parent;\n\t\tthis._mouseWheelEventFactory = mouseWheelEventFactory;\n\n\t\tthis.bgDomNode = document.createElement('div');\n\t\tthis.bgDomNode.className = 'arrow-background';\n\t\tthis.bgDomNode.style.position = 'absolute';\n\t\tsetSize(this.bgDomNode, bgWidth, bgHeight);\n\t\tsetPosition(this.bgDomNode, (top !== null ? 0 : null), (left !== null ? 0 : null), (bottom !== null ? 0 : null), (right !== null ? 0 : null));\n\n\n\t\tthis.domNode = document.createElement('div');\n\t\tthis.domNode.className = className;\n\t\tthis.domNode.style.position = 'absolute';\n\t\tsetSize(this.domNode, ARROW_IMG_SIZE, ARROW_IMG_SIZE);\n\t\tsetPosition(this.domNode, top, left, bottom, right);\n\n\t\tthis._mouseMoveMonitor = this._register(new GlobalMouseMoveMonitor<IStandardMouseMoveEventData>());\n\t\tthis.onmousedown(this.bgDomNode, (e) => this._arrowMouseDown(e));\n\t\tthis.onmousedown(this.domNode, (e) => this._arrowMouseDown(e));\n\n\t\tthis._mousedownRepeatTimer = this._register(new IntervalTimer());\n\t\tthis._mousedownScheduleRepeatTimer = this._register(new TimeoutTimer());\n\t}\n\n\tprivate _arrowMouseDown(e: IMouseEvent): void {\n\t\tlet repeater = () => {\n\t\t\tthis._parent.onMouseWheel(this._mouseWheelEventFactory());\n\t\t};\n\n\t\tlet scheduleRepeater = () => {\n\t\t\tthis._mousedownRepeatTimer.cancelAndSet(repeater, 1000 / 24);\n\t\t};\n\n\t\trepeater();\n\t\tthis._mousedownRepeatTimer.cancel();\n\t\tthis._mousedownScheduleRepeatTimer.cancelAndSet(scheduleRepeater, 200);\n\n\t\tthis._mouseMoveMonitor.startMonitoring(\n\t\t\tstandardMouseMoveMerger,\n\t\t\t(mouseMoveData: IStandardMouseMoveEventData) => {\n\t\t\t\t/* Intentional empty */\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis._mousedownRepeatTimer.cancel();\n\t\t\t\tthis._mousedownScheduleRepeatTimer.cancel();\n\t\t\t}\n\t\t);\n\n\t\te.preventDefault();\n\t}\n}\n\nclass VisibilityController extends Disposable {\n\tprivate _visibility: Visibility;\n\tprivate _visibleClassName: string;\n\tprivate _invisibleClassName: string;\n\tprivate _domNode: FastDomNode;\n\tprivate _shouldBeVisible: boolean;\n\tprivate _isNeeded: boolean;\n\tprivate _isVisible: boolean;\n\tprivate _revealTimer: TimeoutTimer;\n\n\tconstructor(visibility: Visibility, visibleClassName: string, invisibleClassName: string) {\n\t\tsuper();\n\t\tthis._visibility = visibility;\n\t\tthis._visibleClassName = visibleClassName;\n\t\tthis._invisibleClassName = invisibleClassName;\n\t\tthis._domNode = null;\n\t\tthis._isVisible = false;\n\t\tthis._isNeeded = false;\n\t\tthis._shouldBeVisible = false;\n\t\tthis._revealTimer = this._register(new TimeoutTimer());\n\t}\n\n\t// ----------------- Hide / Reveal\n\n\tprivate applyVisibilitySetting(shouldBeVisible: boolean): boolean {\n\t\tif (this._visibility === Visibility.Hidden) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._visibility === Visibility.Visible) {\n\t\t\treturn true;\n\t\t}\n\t\treturn shouldBeVisible;\n\t}\n\n\tpublic setShouldBeVisible(rawShouldBeVisible: boolean): void {\n\t\tlet shouldBeVisible = this.applyVisibilitySetting(rawShouldBeVisible);\n\n\t\tif (this._shouldBeVisible !== shouldBeVisible) {\n\t\t\tthis._shouldBeVisible = shouldBeVisible;\n\t\t\tthis.ensureVisibility();\n\t\t}\n\t}\n\n\tpublic setIsNeeded(isNeeded: boolean): void {\n\t\tif (this._isNeeded !== isNeeded) {\n\t\t\tthis._isNeeded = isNeeded;\n\t\t\tthis.ensureVisibility();\n\t\t}\n\t}\n\n\tpublic setDomNode(domNode: FastDomNode): void {\n\t\tthis._domNode = domNode;\n\t\tthis._domNode.setClassName(this._invisibleClassName);\n\n\t\t// Now that the flags & the dom node are in a consistent state, ensure the Hidden/Visible configuration\n\t\tthis.setShouldBeVisible(false);\n\t}\n\n\tpublic ensureVisibility(): void {\n\n\t\tif (!this._isNeeded) {\n\t\t\t// Nothing to be rendered\n\t\t\tthis._hide(false);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._shouldBeVisible) {\n\t\t\tthis._reveal();\n\t\t} else {\n\t\t\tthis._hide(true);\n\t\t}\n\t}\n\n\n\tprivate _reveal(): void {\n\t\tif (this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isVisible = true;\n\n\t\t// The CSS animation doesn't play otherwise\n\t\tthis._revealTimer.setIfNotSet(() => {\n\t\t\tthis._domNode.setClassName(this._visibleClassName);\n\t\t}, 0);\n\t}\n\n\tprivate _hide(withFadeAway: boolean): void {\n\t\tthis._revealTimer.cancel();\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isVisible = false;\n\t\tthis._domNode.setClassName(this._invisibleClassName + (withFadeAway ? ' fade' : ''));\n\t}\n}\n\nexport interface IMouseMoveEventData {\n\tleftButton: boolean;\n\tposx: number;\n\tposy: number;\n}\n\nexport abstract class AbstractScrollbar extends Widget implements IScrollbar {\n\n\tprotected _forbidTranslate3dUse: boolean;\n\tprivate _lazyRender: boolean;\n\tprivate _parent: IParent;\n\tprivate _scrollbarState: ScrollbarState;\n\tprivate _visibilityController: VisibilityController;\n\tprivate _mouseMoveMonitor: GlobalMouseMoveMonitor<IStandardMouseMoveEventData>;\n\n\tpublic domNode: FastDomNode;\n\tpublic slider: FastDomNode;\n\n\tprotected _shouldRender: boolean;\n\n\tconstructor(forbidTranslate3dUse: boolean, lazyRender:boolean, parent: IParent, scrollbarState: ScrollbarState, visibility: Visibility, extraScrollbarClassName: string) {\n\t\tsuper();\n\t\tthis._forbidTranslate3dUse = forbidTranslate3dUse;\n\t\tthis._lazyRender = lazyRender;\n\t\tthis._parent = parent;\n\t\tthis._scrollbarState = scrollbarState;\n\t\tthis._visibilityController = this._register(new VisibilityController(visibility, 'visible scrollbar ' + extraScrollbarClassName, 'invisible scrollbar ' + extraScrollbarClassName));\n\t\tthis._mouseMoveMonitor = this._register(new GlobalMouseMoveMonitor<IStandardMouseMoveEventData>());\n\t\tthis._shouldRender = true;\n\t}\n\n\t// ----------------- initialize & clean-up\n\n\t/**\n\t * Creates the container dom node for the scrollbar & hooks up the events\n\t */\n\tprotected _createDomNode(): void {\n\t\tthis.domNode = createFastDomNode(document.createElement('div'));\n\t\tif (!this._forbidTranslate3dUse && Browser.canUseTranslate3d) {\n\t\t\t// Put the scrollbar in its own layer\n\t\t\tthis.domNode.setTransform('translate3d(0px, 0px, 0px)');\n\t\t}\n\n\t\tthis._visibilityController.setDomNode(this.domNode);\n\t\tthis.domNode.setPosition('absolute');\n\n\t\tthis.onmousedown(this.domNode.domNode, (e) => this._domNodeMouseDown(e));\n\t}\n\n\t/**\n\t * Creates the dom node for an arrow & adds it to the container\n\t */\n\tprotected _createArrow(className: string, top: number, left: number, bottom: number, right: number, bgWidth: number, bgHeight: number, mouseWheelEventFactory: IMouseWheelEventFactory): void {\n\t\tlet arrow = this._register(new ScrollbarArrow(className, top, left, bottom, right, bgWidth, bgHeight, mouseWheelEventFactory, this._parent));\n\t\tthis.domNode.domNode.appendChild(arrow.bgDomNode);\n\t\tthis.domNode.domNode.appendChild(arrow.domNode);\n\t}\n\n\t/**\n\t * Creates the slider dom node, adds it to the container & hooks up the events\n\t */\n\tprotected _createSlider(top: number, left: number, width: number, height: number): void {\n\t\tthis.slider = createFastDomNode(document.createElement('div'));\n\t\tthis.slider.setClassName('slider');\n\t\tthis.slider.setPosition('absolute');\n\t\tthis.slider.setTop(top);\n\t\tthis.slider.setLeft(left);\n\t\tthis.slider.setWidth(width);\n\t\tthis.slider.setHeight(height);\n\n\t\tthis.domNode.domNode.appendChild(this.slider.domNode);\n\n\t\tthis.onmousedown(this.slider.domNode, (e) => this._sliderMouseDown(e));\n\t}\n\n\t// ----------------- Update state\n\n\tpublic onElementSize(visibleSize: number): boolean {\n\t\tif (this._scrollbarState.setVisibleSize(visibleSize)) {\n\t\t\tthis._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n\t\t\tthis._shouldRender = true;\n\t\t\tif (!this._lazyRender) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}\n\t\treturn this._shouldRender;\n\t}\n\n\tpublic onElementScrollSize(elementScrollSize: number): boolean {\n\t\tif (this._scrollbarState.setScrollSize(elementScrollSize)) {\n\t\t\tthis._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n\t\t\tthis._shouldRender = true;\n\t\t\tif (!this._lazyRender) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}\n\t\treturn this._shouldRender;\n\t}\n\n\tpublic onElementScrollPosition(elementScrollPosition: number): boolean {\n\t\tif (this._scrollbarState.setScrollPosition(elementScrollPosition)) {\n\t\t\tthis._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n\t\t\tthis._shouldRender = true;\n\t\t\tif (!this._lazyRender) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}\n\t\treturn this._shouldRender;\n\t}\n\n\t// ----------------- rendering\n\n\tpublic beginReveal(): void {\n\t\tthis._visibilityController.setShouldBeVisible(true);\n\t}\n\n\tpublic beginHide(): void {\n\t\tthis._visibilityController.setShouldBeVisible(false);\n\t}\n\n\tpublic render(): void {\n\t\tif (!this._shouldRender) {\n\t\t\treturn;\n\t\t}\n\t\tthis._shouldRender = false;\n\n\t\tthis._renderDomNode(this._scrollbarState.getRectangleLargeSize(), this._scrollbarState.getRectangleSmallSize());\n\t\tthis._updateSlider(this._scrollbarState.getSliderSize(), this._scrollbarState.getArrowSize() + this._scrollbarState.getSliderPosition());\n\t}\n\t// ----------------- DOM events\n\n\tprivate _domNodeMouseDown(e: IMouseEvent): void {\n\t\tif (e.target !== this.domNode.domNode) {\n\t\t\treturn;\n\t\t}\n\t\tthis._onMouseDown(e);\n\t}\n\n\tpublic delegateMouseDown(browserEvent: MouseEvent): void {\n\t\tlet e = new StandardMouseEvent(browserEvent);\n\t\tlet domTop = this.domNode.domNode.getClientRects()[0].top;\n\t\tlet sliderStart = domTop + this._scrollbarState.getSliderPosition();\n\t\tlet sliderStop = domTop + this._scrollbarState.getSliderPosition() + this._scrollbarState.getSliderSize();\n\t\tlet mousePos = this._sliderMousePosition(e);\n\t\tif (sliderStart <= mousePos && mousePos <= sliderStop) {\n\t\t\t// Act as if it was a mouse down on the slider\n\t\t\tthis._sliderMouseDown(e);\n\t\t} else {\n\t\t\t// Act as if it was a mouse down on the scrollbar\n\t\t\tthis._onMouseDown(e);\n\t\t}\n\t}\n\n\tprivate _onMouseDown(e: IMouseEvent): void {\n\t\tlet domNodePosition = DomUtils.getDomNodePosition(this.domNode.domNode);\n\t\tlet desiredSliderPosition = this._mouseDownRelativePosition(e, domNodePosition) - this._scrollbarState.getArrowSize() - this._scrollbarState.getSliderSize() / 2;\n\t\tthis.setDesiredScrollPosition(this._scrollbarState.convertSliderPositionToScrollPosition(desiredSliderPosition));\n\t\tthis._sliderMouseDown(e);\n\t}\n\n\tprivate _sliderMouseDown(e: IMouseEvent): void {\n\t\tif (e.leftButton) {\n\t\t\tlet initialMouseOrthogonalPosition = this._sliderOrthogonalMousePosition(e);\n\t\t\tlet initialScrollPosition = this._getScrollPosition();\n\t\t\tlet draggingDelta = this._sliderMousePosition(e) - this._scrollbarState.getSliderPosition();\n\t\t\tthis.slider.toggleClassName('active', true);\n\n\t\t\tthis._mouseMoveMonitor.startMonitoring(\n\t\t\t\tstandardMouseMoveMerger,\n\t\t\t\t(mouseMoveData: IStandardMouseMoveEventData) => {\n\t\t\t\t\tlet mouseOrthogonalPosition = this._sliderOrthogonalMousePosition(mouseMoveData);\n\t\t\t\t\tlet mouseOrthogonalDelta = Math.abs(mouseOrthogonalPosition - initialMouseOrthogonalPosition);\n\t\t\t\t\t// console.log(initialMouseOrthogonalPosition + ' -> ' + mouseOrthogonalPosition + ': ' + mouseOrthogonalDelta);\n\t\t\t\t\tif (Platform.isWindows && mouseOrthogonalDelta > MOUSE_DRAG_RESET_DISTANCE) {\n\t\t\t\t\t\t// The mouse has wondered away from the scrollbar => reset dragging\n\t\t\t\t\t\tthis.setDesiredScrollPosition(initialScrollPosition);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet desiredSliderPosition = this._sliderMousePosition(mouseMoveData) - draggingDelta;\n\t\t\t\t\t\tthis.setDesiredScrollPosition(this._scrollbarState.convertSliderPositionToScrollPosition(desiredSliderPosition));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.slider.toggleClassName('active', false);\n\t\t\t\t\tthis._parent.onDragEnd();\n\t\t\t\t}\n\t\t\t);\n\n\t\t\te.preventDefault();\n\t\t\tthis._parent.onDragStart();\n\t\t}\n\t}\n\n\tpublic validateScrollPosition(desiredScrollPosition: number): number {\n\t\treturn this._scrollbarState.validateScrollPosition(desiredScrollPosition);\n\t}\n\n\tpublic setDesiredScrollPosition(desiredScrollPosition: number): boolean {\n\t\tdesiredScrollPosition = this.validateScrollPosition(desiredScrollPosition);\n\n\t\tlet oldScrollPosition = this._getScrollPosition();\n\t\tthis._setScrollPosition(desiredScrollPosition);\n\t\tlet newScrollPosition = this._getScrollPosition();\n\n\t\tif (oldScrollPosition !== newScrollPosition) {\n\t\t\tthis.onElementScrollPosition(this._getScrollPosition());\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// ----------------- Overwrite these\n\n\tprotected abstract _renderDomNode(largeSize: number, smallSize: number): void;\n\tprotected abstract _updateSlider(sliderSize: number, sliderPosition: number): void;\n\tprotected abstract _mouseDownRelativePosition(e: IMouseEvent, domNodePosition: DomUtils.IDomNodePosition): number;\n\tprotected abstract _sliderMousePosition(e: IMouseMoveEventData): number;\n\tprotected abstract _sliderOrthogonalMousePosition(e: IMouseMoveEventData): number;\n\tprotected abstract _getScrollPosition(): number;\n\tprotected abstract _setScrollPosition(elementScrollPosition: number): void;\n}\n\nfunction setPosition(domNode: HTMLElement, top: number, left: number, bottom: number, right: number) {\n\tif (top !== null) {\n\t\tdomNode.style.top = top + 'px';\n\t}\n\tif (left !== null) {\n\t\tdomNode.style.left = left + 'px';\n\t}\n\tif (bottom !== null) {\n\t\tdomNode.style.bottom = bottom + 'px';\n\t}\n\tif (right !== null) {\n\t\tdomNode.style.right = right + 'px';\n\t}\n}\n\nfunction setSize(domNode: HTMLElement, width: number, height: number) {\n\tif (width !== null) {\n\t\tdomNode.style.width = width + 'px';\n\t}\n\tif (height !== null) {\n\t\tdomNode.style.height = height + 'px';\n\t}\n}\n"]}