{"version":3,"file":"vs/base/browser/ui/list/listView.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/base/browser/ui/list/listView.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IScrollable, ScrollEvent } from 'vs/base/common/scrollable';\nimport { Emitter } from 'vs/base/common/event';\nimport { toObject, assign } from 'vs/base/common/objects';\nimport { IDisposable, dispose } from 'vs/base/common/lifecycle';\nimport { Gesture } from 'vs/base/browser/touch';\nimport * as DOM from 'vs/base/browser/dom';\nimport { IScrollableElement } from 'vs/base/browser/ui/scrollbar/scrollableElement';\nimport { ScrollableElement } from 'vs/base/browser/ui/scrollbar/scrollableElementImpl';\nimport { RangeMap, IRange } from './rangeMap';\nimport { IDelegate, IRenderer } from './list';\nimport { RowCache, IRow } from './rowCache';\nimport { LcsDiff, ISequence } from 'vs/base/common/diff/diff';\n\ninterface IItemRange<T> {\n\titem: IItem<T>;\n\tindex: number;\n\trange: IRange;\n}\n\ninterface IItem<T> {\n\tid: string;\n\telement: T;\n\tsize: number;\n\ttemplateId: string;\n\trow: IRow;\n}\n\nfunction toSequence<T>(itemRanges: IItemRange<T>[]): ISequence {\n\treturn {\n\t\tgetLength: () => itemRanges.length,\n\t\tgetElementHash: i => `${ itemRanges[i].item.id }:${ itemRanges[i].range.start }:${ itemRanges[i].range.end }`\n\t};\n}\n\nconst MouseEventTypes = ['click',\n\t'dblclick',\n\t'mouseup',\n\t'mousedown',\n\t'mouseover',\n\t'mousemove',\n\t'mouseout',\n\t'contextmenu'\n];\n\nexport class ListView<T> implements IScrollable, IDisposable {\n\n\tprivate items: IItem<T>[];\n\tprivate itemId: number;\n\tprivate rangeMap: RangeMap;\n\tprivate cache: RowCache<T>;\n\tprivate renderers: { [templateId: string]: IRenderer<T, any>; };\n\n\tprivate renderTop: number;\n\tprivate _renderHeight: number;\n\n\tprivate _domNode: HTMLElement;\n\tprivate gesture: Gesture;\n\tprivate rowsContainer: HTMLElement;\n\tprivate scrollableElement: IScrollableElement;\n\n\tprivate _onScroll = new Emitter<ScrollEvent>();\n\n\tprivate toDispose: IDisposable[];\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate delegate: IDelegate<T>,\n\t\trenderers: IRenderer<T, any>[]\n\t) {\n\t\tthis.items = [];\n\t\tthis.itemId = 0;\n\t\tthis.rangeMap = new RangeMap();\n\t\tthis.renderers = toObject<IRenderer<T, any>, IRenderer<T, any>>(renderers, r => r.templateId);\n\t\tthis.cache = new RowCache(this.renderers);\n\n\t\tthis.renderTop = 0;\n\t\tthis._renderHeight = 0;\n\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.className = 'monaco-list';\n\t\tthis._domNode.tabIndex = 0;\n\n\t\tthis.rowsContainer = document.createElement('div');\n\t\tthis.rowsContainer.className = 'monaco-list-rows';\n\t\tthis.gesture = new Gesture(this.rowsContainer);\n\n\t\tthis.scrollableElement = new ScrollableElement(this.rowsContainer, this, {\n\t\t\tforbidTranslate3dUse: true,\n\t\t\thorizontal: 'hidden',\n\t\t\tvertical: 'auto',\n\t\t\tuseShadows: false,\n\t\t\tsaveLastScrollTimeOnClassName: 'monaco-list-row'\n\t\t});\n\n\t\tthis._domNode.appendChild(this.scrollableElement.getDomNode());\n\t\tcontainer.appendChild(this._domNode);\n\n\t\tthis.toDispose = [this.rangeMap, this.gesture, this.scrollableElement, this._onScroll];\n\n\t\tthis.layout();\n\t}\n\n\tget domNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tsplice(start: number, deleteCount: number, ...elements: T[]): T[] {\n\t\tconst before = this.getRenderedItemRanges();\n\t\tconst inserted = elements.map<IItem<T>>(element => ({\n\t\t\tid: String(this.itemId++),\n\t\t\telement,\n\t\t\tsize: this.delegate.getHeight(element),\n\t\t\ttemplateId: this.delegate.getTemplateId(element),\n\t\t\trow: null\n\t\t}));\n\n\t\tthis.rangeMap.splice(start, deleteCount, ...inserted);\n\t\tconst deleted = this.items.splice(start, deleteCount, ...inserted);\n\n\t\tconst after = this.getRenderedItemRanges();\n\t\tconst lcs = new LcsDiff(toSequence(before), toSequence(after), null);\n\t\tconst diffs = lcs.ComputeDiff();\n\n\t\tfor (const diff of diffs) {\n\t\t\tfor (let i = 0; i < diff.originalLength; i++) {\n\t\t\t\tthis.removeItemFromDOM(before[diff.originalStart + i].item);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < diff.modifiedLength; i++) {\n\t\t\t\tthis.insertItemInDOM(after[diff.modifiedStart + i].item, after[0].index + diff.modifiedStart + i);\n\t\t\t}\n\t\t}\n\n\t\tthis.rowsContainer.style.height = `${ this.rangeMap.size }px`;\n\t\tthis.setScrollTop(this.renderTop);\n\t\tthis._emitScrollEvent(false, false);\n\n\t\treturn deleted.map(i => i.element);\n\t}\n\n\tget length(): number {\n\t\treturn this.items.length;\n\t}\n\n\tget renderHeight(): number {\n\t\treturn this._renderHeight;\n\t}\n\n\telement(index: number): T {\n\t\treturn this.items[index].element;\n\t}\n\n\telementHeight(index: number): number {\n\t\treturn this.items[index].size;\n\t}\n\n\telementTop(index: number): number {\n\t\treturn this.rangeMap.positionAt(index);\n\t}\n\n\tindexAt(position: number): number {\n\t\treturn this.rangeMap.indexAt(position);\n\t}\n\n\tindexAfter(position: number): number {\n\t\treturn this.rangeMap.indexAfter(position);\n\t}\n\n\tlayout(height?: number): void {\n\t\tthis.setRenderHeight(height || DOM.getContentHeight(this._domNode));\n\t\tthis.setScrollTop(this.renderTop);\n\t\tthis.scrollableElement.onElementDimensions();\n\t\tthis._emitScrollEvent(false, false);\n\t}\n\n\t// Render\n\n\tprivate setRenderHeight(viewHeight: number) {\n\t\tthis.render(this.renderTop, viewHeight);\n\t\tthis._renderHeight = viewHeight;\n\t}\n\n\tprivate render(renderTop: number, renderHeight: number): void {\n\t\tconst renderBottom = renderTop + renderHeight;\n\t\tconst thisRenderBottom = this.renderTop + this._renderHeight;\n\t\tlet i: number, stop: number;\n\n\t\t// when view scrolls down, start rendering from the renderBottom\n\t\tfor (i = this.rangeMap.indexAfter(renderBottom) - 1, stop = this.rangeMap.indexAt(Math.max(thisRenderBottom, renderTop)); i >= stop; i--) {\n\t\t\tthis.insertItemInDOM(this.items[i], i);\n\t\t}\n\n\t\t// when view scrolls up, start rendering from either this.renderTop or renderBottom\n\t\tfor (i = Math.min(this.rangeMap.indexAt(this.renderTop), this.rangeMap.indexAfter(renderBottom)) - 1, stop = this.rangeMap.indexAt(renderTop); i >= stop; i--) {\n\t\t\tthis.insertItemInDOM(this.items[i], i);\n\t\t}\n\n\t\t// when view scrolls down, start unrendering from renderTop\n\t\tfor (i = this.rangeMap.indexAt(this.renderTop), stop = Math.min(this.rangeMap.indexAt(renderTop), this.rangeMap.indexAfter(thisRenderBottom)); i < stop; i++) {\n\t\t\tthis.removeItemFromDOM(this.items[i]);\n\t\t}\n\n\t\t// when view scrolls up, start unrendering from either renderBottom this.renderTop\n\t\tfor (i = Math.max(this.rangeMap.indexAfter(renderBottom), this.rangeMap.indexAt(this.renderTop)), stop = this.rangeMap.indexAfter(thisRenderBottom); i < stop; i++) {\n\t\t\tthis.removeItemFromDOM(this.items[i]);\n\t\t}\n\n\t\tthis.rowsContainer.style.transform = `translate3d(0px, -${ renderTop }px, 0px)`;\n\t\tthis.renderTop = renderTop;\n\t\tthis._renderHeight = renderBottom - renderTop;\n\t}\n\n\tprivate getRenderedItemRanges(): IItemRange<T>[] {\n\t\tconst result: IItemRange<T>[] = [];\n\t\tconst renderBottom = this.renderTop + this._renderHeight;\n\n\t\tlet start = this.renderTop;\n\t\tlet index = this.rangeMap.indexAt(start);\n\t\tlet item = this.items[index];\n\t\tlet end = -1;\n\n\t\twhile (item && start <= renderBottom) {\n\t\t\tend = start + item.size;\n\t\t\tresult.push({ item, index, range: { start, end }});\n\t\t\tstart = end;\n\t\t\titem = this.items[++index];\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t// DOM operations\n\n\tprivate insertItemInDOM(item: IItem<T>, index: number): void {\n\t\tif (!item.row) {\n\t\t\titem.row = this.cache.alloc(item.templateId);\n\t\t}\n\n\t\tif (!item.row.domNode.parentElement) {\n\t\t\tthis.rowsContainer.appendChild(item.row.domNode);\n\t\t}\n\n\t\tconst renderer = this.renderers[item.templateId];\n\t\titem.row.domNode.style.top = `${ this.elementTop(index) }px`;\n\t\titem.row.domNode.style.height = `${ item.size }px`;\n\t\titem.row.domNode.setAttribute('data-index', `${index}`);\n\t\trenderer.renderElement(item.element, index, item.row.templateData);\n\t}\n\n\tprivate removeItemFromDOM(item: IItem<T>): void {\n\t\tthis.cache.release(item.row);\n\t\titem.row = null;\n\t}\n\n\t// IScrollable\n\n\tgetScrollHeight(): number {\n\t\treturn this.rangeMap.size;\n\t}\n\n\tgetScrollWidth(): number {\n\t\treturn 0;\n\t}\n\n\tgetScrollLeft(): number {\n\t\treturn 0;\n\t}\n\n\tsetScrollLeft(scrollLeft: number): void {\n\t\t// noop\n\t}\n\n\tgetScrollTop(): number {\n\t\treturn this.renderTop;\n\t}\n\n\tsetScrollTop(scrollTop: number): void {\n\t\tscrollTop = Math.min(scrollTop, this.getScrollHeight() - this._renderHeight);\n\t\tscrollTop = Math.max(scrollTop, 0);\n\n\t\tthis.render(scrollTop, this._renderHeight);\n\t\tthis.renderTop = scrollTop;\n\n\t\tthis._emitScrollEvent(true, false);\n\t}\n\n\tprivate _emitScrollEvent(vertical:boolean, horizontal:boolean): void {\n\t\tthis._onScroll.fire(new ScrollEvent(\n\t\t\tthis.getScrollTop(),\n\t\t\tthis.getScrollLeft(),\n\t\t\tthis.getScrollWidth(),\n\t\t\tthis.getScrollHeight(),\n\t\t\tvertical,\n\t\t\thorizontal\n\t\t));\n\t}\n\n\taddScrollListener(callback: (v:ScrollEvent)=>void): IDisposable {\n\t\treturn this._onScroll.event(callback);\n\t}\n\n\t// Events\n\n\taddListener(type: string, handler: (event:any)=>void, useCapture?: boolean): IDisposable {\n\t\tif (MouseEventTypes.indexOf(type) > -1) {\n\t\t\tconst userHandler = handler;\n\t\t\thandler = (event: MouseEvent) => {\n\t\t\t\tconst index = this.getItemIndex(event);\n\n\t\t\t\tif (index < 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst element = this.items[index].element;\n\t\t\t\tuserHandler(assign(event, { element, index }));\n\t\t\t};\n\t\t}\n\n\t\treturn DOM.addDisposableListener(this.domNode, type, handler, useCapture);\n\t}\n\n\tprivate getItemIndex(event: MouseEvent): number {\n\t\tlet target = event.target;\n\n\t\twhile (target instanceof HTMLElement && target !== this.rowsContainer) {\n\t\t\tconst element = target as HTMLElement;\n\t\t\tconst rawIndex = element.getAttribute('data-index');\n\n\t\t\tif (rawIndex) {\n\t\t\t\tconst index = Number(rawIndex);\n\n\t\t\t\tif (!isNaN(index)) {\n\t\t\t\t\treturn index;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttarget = element.parentElement;\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\t// Dispose\n\n\tdispose() {\n\t\tthis.items = null;\n\n\t\tif (this._domNode && this._domNode.parentElement) {\n\t\t\tthis._domNode.parentNode.removeChild(this._domNode);\n\t\t\tthis._domNode = null;\n\t\t}\n\n\t\tthis.toDispose = dispose(this.toDispose);\n\t}\n}\n"]}