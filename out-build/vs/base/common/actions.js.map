{"version":3,"file":"actions.js","sourceRoot":"","sources":["../../../../src/vs/base/common/actions.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport { IEventEmitter, EventEmitter, ListenerCallback, IBulkListenerCallback, ListenerUnbind } from 'vs/base/common/eventEmitter';\nimport {IDisposable} from 'vs/base/common/lifecycle';\nimport * as Events from 'vs/base/common/events';\n\nexport interface IAction extends IDisposable {\n\tid: string;\n\tlabel: string;\n\ttooltip: string;\n\tclass: string;\n\tenabled: boolean;\n\tchecked: boolean;\n\trun(event?: any): TPromise<any>;\n}\n\nexport interface IActionRunner extends IEventEmitter {\n\trun(action: IAction, context?: any): TPromise<any>;\n}\n\nexport interface IActionItem extends IEventEmitter {\n\tactionRunner: IActionRunner;\n\tsetActionContext(context: any): void;\n\trender(element: any /* HTMLElement */): void;\n\tisEnabled(): boolean;\n\tfocus(): void;\n\tblur(): void;\n\tdispose(): void;\n}\n\n/**\n * Checks if the provided object is compatible\n * with the IAction interface.\n * @param thing an object\n */\nexport function isAction(thing: any): thing is IAction {\n\tif (!thing) {\n\t\treturn false;\n\t} else if (thing instanceof Action) {\n\t\treturn true;\n\t} else if (typeof thing.id !== 'string') {\n\t\treturn false;\n\t} else if (typeof thing.label !== 'string') {\n\t\treturn false;\n\t} else if (typeof thing.class !== 'string') {\n\t\treturn false;\n\t} else if (typeof thing.enabled !== 'boolean') {\n\t\treturn false;\n\t} else if (typeof thing.checked !== 'boolean') {\n\t\treturn false;\n\t} else if (typeof thing.run !== 'function') {\n\t\treturn false;\n\t} else {\n\t\treturn true;\n\t}\n}\n\nexport interface IActionCallback {\n\t(event: any): TPromise<any>;\n}\n\nexport interface IActionProvider {\n\tgetAction(id: string): IAction;\n}\n\nexport class Action extends EventEmitter implements IAction {\n\n\tstatic LABEL: string = 'label';\n\tstatic TOOLTIP: string = 'tooltip';\n\tstatic CLASS: string = 'class';\n\tstatic ENABLED: string = 'enabled';\n\tstatic CHECKED: string = 'checked';\n\n\tpublic _id: string;\n\tpublic _label: string;\n\tpublic _tooltip: string;\n\tpublic _cssClass: string;\n\tpublic _enabled: boolean;\n\tpublic _checked: boolean;\n\tpublic _actionCallback: IActionCallback;\n\tpublic _order: number;\n\n\tconstructor(id: string, label = '', cssClass = '', enabled = true, actionCallback: IActionCallback = null) {\n\t\tsuper();\n\n\t\tthis._id = id;\n\t\tthis._label = label;\n\t\tthis._cssClass = cssClass;\n\t\tthis._enabled = enabled;\n\t\tthis._actionCallback = actionCallback;\n\t}\n\n\tpublic get id(): string {\n\t\treturn this._id;\n\t}\n\n\tpublic get label(): string {\n\t\treturn this._label;\n\t}\n\n\tpublic set label(value: string) {\n\t\tthis._setLabel(value);\n\t}\n\n\t_setLabel(value: string): void {\n\t\tif (this._label !== value) {\n\t\t\tthis._label = value;\n\t\t\tthis.emit(Action.LABEL, { source: this });\n\t\t}\n\t}\n\n\tpublic get tooltip(): string {\n\t\treturn this._tooltip;\n\t}\n\n\tpublic set tooltip(value: string) {\n\t\tthis._setTooltip(value);\n\t}\n\n\t_setTooltip(value: string): void {\n\t\tif (this._tooltip !== value) {\n\t\t\tthis._tooltip = value;\n\t\t\tthis.emit(Action.TOOLTIP, { source: this });\n\t\t}\n\t}\n\n\tpublic get class(): string {\n\t\treturn this._cssClass;\n\t}\n\n\tpublic set class(value: string) {\n\t\tthis._setClass(value);\n\t}\n\n\t_setClass(value: string): void {\n\t\tif (this._cssClass !== value) {\n\t\t\tthis._cssClass = value;\n\t\t\tthis.emit(Action.CLASS, { source: this });\n\t\t}\n\t}\n\n\tpublic get enabled(): boolean {\n\t\treturn this._enabled;\n\t}\n\n\tpublic set enabled(value: boolean) {\n\t\tthis._setEnabled(value);\n\t}\n\n\t_setEnabled(value: boolean): void {\n\t\tif (this._enabled !== value) {\n\t\t\tthis._enabled = value;\n\t\t\tthis.emit(Action.ENABLED, { source: this });\n\t\t}\n\t}\n\n\tpublic get checked(): boolean {\n\t\treturn this._checked;\n\t}\n\n\tpublic set checked(value: boolean) {\n\t\tthis._setChecked(value);\n\t}\n\n\t_setChecked(value: boolean): void {\n\t\tif (this._checked !== value) {\n\t\t\tthis._checked = value;\n\t\t\tthis.emit(Action.CHECKED, { source: this });\n\t\t}\n\t}\n\n\tpublic get order(): number {\n\t\treturn this._order;\n\t}\n\n\tpublic set order(value: number) {\n\t\tthis._order = value;\n\t}\n\n\tpublic get actionCallback(): IActionCallback {\n\t\treturn this._actionCallback;\n\t}\n\n\tpublic set actionCallback(value: IActionCallback) {\n\t\tthis._actionCallback = value;\n\t}\n\n\tpublic run(event?: any): TPromise<any> {\n\t\tif (this._actionCallback !== null) {\n\t\t\treturn this._actionCallback(event);\n\t\t} else {\n\t\t\treturn TPromise.as(true);\n\t\t}\n\t}\n}\n\nclass ProxyAction extends Action implements IEventEmitter {\n\n\tconstructor(private delegate: Action, private runHandler: (e: any) => void) {\n\t\tsuper(delegate.id, delegate.label, delegate.class, delegate.enabled, null);\n\t}\n\n\tpublic get id(): string {\n\t\treturn this.delegate.id;\n\t}\n\n\tpublic get label(): string {\n\t\treturn this.delegate.label;\n\t}\n\n\tpublic set label(value: string) {\n\t\tthis.delegate.label = value;\n\t}\n\n\tpublic get class(): string {\n\t\treturn this.delegate.class;\n\t}\n\n\tpublic set class(value: string) {\n\t\tthis.delegate.class = value;\n\t}\n\n\tpublic get enabled(): boolean {\n\t\treturn this.delegate.enabled;\n\t}\n\n\tpublic set enabled(value: boolean) {\n\t\tthis.delegate.enabled = value;\n\t}\n\n\tpublic get checked(): boolean {\n\t\treturn this.delegate.checked;\n\t}\n\n\tpublic set checked(value: boolean) {\n\t\tthis.delegate.checked = value;\n\t}\n\n\tpublic run(event?: any): TPromise<any> {\n\t\tthis.runHandler(event);\n\t\treturn this.delegate.run(event);\n\t}\n\n\tpublic addListener(eventType: string, listener: ListenerCallback): ListenerUnbind {\n\t\treturn this.delegate.addListener(eventType, listener);\n\t}\n\n\tpublic addBulkListener(listener: IBulkListenerCallback): ListenerUnbind {\n\t\treturn this.delegate.addBulkListener(listener);\n\t}\n\n\tpublic addEmitter(eventEmitter: IEventEmitter, emitterType?: string): ListenerUnbind {\n\t\treturn this.delegate.addEmitter(eventEmitter, emitterType);\n\t}\n\n\tpublic addEmitterTypeListener(eventType: string, emitterType: string, listener: ListenerCallback): ListenerUnbind {\n\t\treturn this.delegate.addEmitterTypeListener(eventType, emitterType, listener);\n\t}\n\n\tpublic emit(eventType: string, data?: any): void {\n\t\tthis.delegate.emit(eventType, data);\n\t}\n}\n\nexport interface IRunEvent {\n\taction: IAction;\n\tresult?: any;\n\terror?: any;\n}\n\nexport class ActionRunner extends EventEmitter implements IActionRunner {\n\n\tpublic run(action: IAction, context?: any): TPromise<any> {\n\t\tif (!action.enabled) {\n\t\t\treturn TPromise.as(null);\n\t\t}\n\n\t\tthis.emit(Events.EventType.BEFORE_RUN, { action: action });\n\n\t\treturn TPromise.as(action.run(context)).then((result: any) => {\n\t\t\tthis.emit(Events.EventType.RUN, <IRunEvent>{ action: action, result: result });\n\t\t}, (error: any) => {\n\t\t\tthis.emit(Events.EventType.RUN, <IRunEvent>{ action: action, error: error });\n\t\t});\n\t}\n}\n"]}