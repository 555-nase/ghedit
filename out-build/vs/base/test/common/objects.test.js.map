{"version":3,"file":"vs/base/test/common/objects.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/base/test/common/objects.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as assert from 'assert';\nimport objects = require('vs/base/common/objects');\n\nvar check = (one, other, msg) => {\n\tassert(objects.equals(one, other), msg);\n\tassert(objects.equals(other, one), '[reverse] ' + msg);\n};\n\nvar checkNot = (one, other, msg) => {\n\tassert(!objects.equals(one, other), msg);\n\tassert(!objects.equals(other, one), '[reverse] ' + msg);\n};\n\nsuite('Objects', () => {\n\n\ttest('equals', function() {\n\t\tcheck(null, null, 'null');\n\t\tcheck(undefined, undefined, 'undefined');\n\t\tcheck(1234, 1234, 'numbers');\n\t\tcheck('', '', 'empty strings');\n\t\tcheck('1234', '1234', 'strings');\n\t\tcheck([], [], 'empty arrays');\n\t\t// check(['', 123], ['', 123], 'arrays');\n\t\tcheck([[1,2,3], [4,5,6]], [[1,2,3], [4,5,6]], 'nested arrays');\n\t\tcheck({}, {}, 'empty objects');\n\t\tcheck({ a: 1, b: '123' }, { a: 1, b: '123' }, 'objects');\n\t\tcheck({ a: 1, b: '123' }, { b: '123', a: 1 }, 'objects (key order)');\n\t\tcheck({ a: { b: 1, c: 2 }, b: 3 }, { a: { b: 1, c: 2 }, b: 3 }, 'nested objects');\n\n\t\tcheckNot(null, undefined, 'null != undefined');\n\t\tcheckNot(null, '', 'null != empty string');\n\t\tcheckNot(null, [], 'null != empty array');\n\t\tcheckNot(null, {}, 'null != empty object');\n\t\tcheckNot(null, 0, 'null != zero');\n\t\tcheckNot(undefined, '', 'undefined != empty string');\n\t\tcheckNot(undefined, [], 'undefined != empty array');\n\t\tcheckNot(undefined, {}, 'undefined != empty object');\n\t\tcheckNot(undefined, 0, 'undefined != zero');\n\t\tcheckNot('', [], 'empty string != empty array');\n\t\tcheckNot('', {}, 'empty string != empty object');\n\t\tcheckNot('', 0, 'empty string != zero');\n\t\tcheckNot([], {}, 'empty array != empty object');\n\t\tcheckNot([], 0, 'empty array != zero');\n\t\tcheckNot(0, [], 'zero != empty array');\n\n\t\tcheckNot('1234', 1234, 'string !== number');\n\n\t\tcheckNot([[1,2,3], [4,5,6]], [[1,2,3], [4,5,6000]], 'arrays');\n\t\tcheckNot({ a: { b: 1, c: 2 }, b: 3 }, { b: 3, a: { b: 9, c: 2 } }, 'objects');\n\t});\n\n\ttest('mixin - array', function() {\n\n\t\tvar foo:any = {};\n\t\tobjects.mixin(foo, { bar: [1,2,3] });\n\n\t\tassert(foo.bar);\n\t\tassert(Array.isArray(foo.bar));\n\t\tassert.equal(foo.bar.length, 3);\n\t\tassert.equal(foo.bar[0], 1);\n\t\tassert.equal(foo.bar[1], 2);\n\t\tassert.equal(foo.bar[2], 3);\n\t});\n\n\ttest('mixin - no overwrite', function() {\n\t\tvar foo:any = {\n\t\t\tbar: '123'\n\t\t};\n\n\t\tvar bar:any = {\n\t\t\tbar: '456'\n\t\t};\n\n\t\tobjects.mixin(foo, bar, false);\n\n\t\tassert.equal(foo.bar, '123');\n\t});\n\n\ttest('cloneAndChange',() => {\n\t\tvar o1 = { something: 'hello' };\n\t\tvar o = {\n\t\t\to1: o1,\n\t\t\to2: o1\n\t\t};\n\t\tassert.deepEqual(objects.cloneAndChange(o,() => { }), o);\n\t});\n\n\ttest('safeStringify', function() {\n\t\tvar obj1 = {\n\t\t\tfriend: null\n\t\t};\n\n\t\tvar obj2 = {\n\t\t\tfriend: null\n\t\t};\n\n\t\tobj1.friend = obj2;\n\t\tobj2.friend = obj1;\n\n\t\tvar arr:any = [1];\n\t\tarr.push(arr);\n\n\t\tvar circular = {\n\t\t\ta: 42,\n\t\t\tb: null,\n\t\t\tc: [\n\t\t\t\tobj1, obj2\n\t\t\t],\n\t\t\td: null\n\t\t};\n\n\t\tarr.push(circular);\n\n\n\t\tcircular.b = circular;\n\t\tcircular.d = arr;\n\n\t\tvar result = objects.safeStringify(circular);\n\n\t\tassert.deepEqual(JSON.parse(result), {\n\t\t\ta: 42,\n\t\t\tb: '[Circular]',\n\t\t\tc: [\n\t\t\t\t{friend: {\n\t\t\t\t\tfriend: '[Circular]'\n\t\t\t\t}},\n\t\t\t\t'[Circular]'\n\t\t\t],\n\t\t\td: [1, '[Circular]', '[Circular]']\n\t\t});\n\t});\n\n\ttest('derive', function() {\n\n\t\tvar someValue = 2;\n\n\t\tfunction Base():void {\n\t\t\t//example\n\t\t}\n\t\t(<any>Base).favoriteColor = 'blue';\n\t\tBase.prototype.test = function() { return 42; };\n\n\t\tfunction Child():void {\n\t\t\t//example\n\t\t}\n\t\tChild.prototype.test2 = function() { return 43; };\n\t\tObject.defineProperty(Child.prototype, 'getter', {\n\t\t\tget: function() { return someValue; },\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true\n\t\t});\n\n\t\tobjects.derive(Base, Child);\n\n\t\tvar base = new Base();\n\t\tvar child = new Child();\n\n\t\tassert(base instanceof Base);\n\t\tassert(child instanceof Child);\n\n\t\tassert.strictEqual(base.test, child.test);\n\t\tassert.strictEqual(base.test(), 42);\n\t\tassert.strictEqual(child.test2(), 43);\n\t\tassert.strictEqual((<any>Child).favoriteColor, 'blue');\n\t\tsomeValue = 4;\n\t\tassert.strictEqual(child.getter, 4);\n\t});\n});"]}